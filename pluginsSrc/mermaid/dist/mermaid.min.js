!function(t,e){"object"==typeof exports&&typeof module<"u"?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).mermaid=e()}(this,function(){"use strict";var I=Object.defineProperty,R=(t,e,r)=>{return n=r,(e="symbol"!=typeof e?e+"":e)in(t=t)?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r;var n},F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nr(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Dr,P={exports:{}};(Dr=P).exports=function(){var R;function f(){return R.apply(null,arguments)}function o(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function F(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;for(var e in t)if(d(t,e))return;return 1}function s(t){return t===void 0}function c(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function $(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function j(t,e){for(var r=[],n=t.length,i=0;i<n;++i)r.push(e(t[i],i));return r}function Y(t,e){for(var r in e)d(e,r)&&(t[r]=e[r]);return d(e,"toString")&&(t.toString=e.toString),d(e,"valueOf")&&(t.valueOf=e.valueOf),t}function l(t,e,r,n){return De(t,e,r,n,!0).utc()}function p(t){return t._pf==null&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function z(t){if(t._isValid==null){var e=p(t),r=W.call(e.parsedDateParts,function(t){return t!=null}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function U(t){var e=l(NaN);return t!=null?Y(p(e),t):p(e).userInvalidated=!0,e}var W=Array.prototype.some||function(t){for(var e=Object(this),r=e.length>>>0,n=0;n<r;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1},q=f.momentProperties=[],H=!1;function V(t,e){var r,n,i,a=q.length;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=p(e)),s(e._locale)||(t._locale=e._locale),0<a)for(r=0;r<a;r++)s(i=e[n=q[r]])||(t[n]=i);return t}function G(t){V(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),H===!1&&(H=!0,f.updateOffset(this),H=!1)}function u(t){return t instanceof G||t!=null&&t._isAMomentObject!=null}function X(t){f.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function t(a,o){var s=!0;return Y(function(){if(f.deprecationHandler!=null&&f.deprecationHandler(null,a),s){for(var t,e,r=[],n=arguments.length,i=0;i<n;i++){if(t="",typeof arguments[i]=="object"){for(e in t+=`
[`+i+"] ",arguments[0])d(arguments[0],e)&&(t+=e+": "+arguments[0][e]+", ");t=t.slice(0,-2)}else t=arguments[i];r.push(t)}X(a+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+(new Error).stack),s=!1}return o.apply(this,arguments)},o)}var Z={};function K(t,e){f.deprecationHandler!=null&&f.deprecationHandler(t,e),Z[t]||(X(e),Z[t]=!0)}function h(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Q(t,e){var r,n=Y({},t);for(r in e)d(e,r)&&(F(t[r])&&F(e[r])?(n[r]={},Y(n[r],t[r]),Y(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)d(t,r)&&!d(e,r)&&F(t[r])&&(n[r]=Y({},n[r]));return n}function J(t){t!=null&&this.set(t)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;var tt=Object.keys||function(t){var e,r=[];for(e in t)d(t,e)&&r.push(e);return r};function a(t,e,r){var n=""+Math.abs(t);return(0<=t?r?"+":"":"-")+Math.pow(10,Math.max(0,e-n.length)).toString().substr(1)+n}var et=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,rt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,nt={},it={};function n(t,e,r,n){var i=typeof n=="string"?function(){return this[n]()}:n;t&&(it[t]=i),e&&(it[e[0]]=function(){return a(i.apply(this,arguments),e[1],e[2])}),r&&(it[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function at(t,e){return t.isValid()?(e=ot(e,t.localeData()),nt[e]=nt[e]||function(n){for(var t,i=n.match(et),e=0,a=i.length;e<a;e++)it[i[e]]?i[e]=it[i[e]]:i[e]=(t=i[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){for(var e="",r=0;r<a;r++)e+=h(i[r])?i[r].call(t,n):i[r];return e}}(e),nt[e](t)):t.localeData().invalidDate()}function ot(t,e){var r=5;function n(t){return e.longDateFormat(t)||t}for(rt.lastIndex=0;0<=r&&rt.test(t);)t=t.replace(rt,n),rt.lastIndex=0,--r;return t}var st={};function e(t,e){var r=t.toLowerCase();st[r]=st[r+"s"]=st[e]=t}function g(t){return typeof t=="string"?st[t]||st[t.toLowerCase()]:void 0}function ct(t){var e,r,n={};for(r in t)d(t,r)&&(e=g(r))&&(n[e]=t[r]);return n}var lt={};function r(t,e){lt[t]=e}function ut(t){return t%4==0&&t%100!=0||t%400==0}function y(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function m(t){var t=+t,e=0;return e=t!=0&&isFinite(t)?y(t):e}function ht(e,r){return function(t){return t!=null?(ft(this,e,t),f.updateOffset(this,r),this):dt(this,e)}}function dt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function ft(t,e,r){t.isValid()&&!isNaN(r)&&(e==="FullYear"&&ut(t.year())&&t.month()===1&&t.date()===29?(r=m(r),t._d["set"+(t._isUTC?"UTC":"")+e](r,t.month(),Ot(r,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](r))}var i=/\d/,b=/\d\d/,pt=/\d{3}/,gt=/\d{4}/,yt=/[+-]?\d{6}/,_=/\d\d?/,mt=/\d\d\d\d?/,bt=/\d\d\d\d\d\d?/,_t=/\d{1,3}/,vt=/\d{1,4}/,xt=/[+-]?\d{1,6}/,kt=/\d+/,wt=/[+-]?\d+/,Et=/Z|[+-]\d\d:?\d\d/gi,Tt=/Z|[+-]\d\d(?::?\d\d)?/gi,Ct=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function v(t,r,n){At[t]=h(r)?r:function(t,e){return t&&n?n:r}}function St(t,e){return d(At,t)?At[t](e._strict,e._locale):new RegExp(x(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,r,n,i){return e||r||n||i})))}function x(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var At={},Mt={};function k(t,r){var e,n,i=r;for(typeof t=="string"&&(t=[t]),c(r)&&(i=function(t,e){e[r]=m(t)}),n=t.length,e=0;e<n;e++)Mt[t[e]]=i}function Nt(t,i){k(t,function(t,e,r,n){r._w=r._w||{},i(t,r._w,r,n)})}var w,E=0,T=1,C=2,S=3,A=4,M=5,Dt=6,Lt=7,Bt=8;function Ot(t,e){if(isNaN(t)||isNaN(e))return NaN;var r=(e%(r=12)+r)%r;return t+=(e-r)/12,r==1?ut(t)?29:28:31-r%7%2}w=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;++e)if(this[e]===t)return e;return-1},n("M",["MM",2],"Mo",function(){return this.month()+1}),n("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),n("MMMM",0,0,function(t){return this.localeData().months(this,t)}),e("month","M"),r("month",8),v("M",_),v("MM",_,b),v("MMM",function(t,e){return e.monthsShortRegex(t)}),v("MMMM",function(t,e){return e.monthsRegex(t)}),k(["M","MM"],function(t,e){e[T]=m(t)-1}),k(["MMM","MMMM"],function(t,e,r,n){n=r._locale.monthsParse(t,n,r._strict),n!=null?e[T]=n:p(r).invalidMonth=t});var It="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Rt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ft=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pt=Ct,$t=Ct;function jt(t,e){var r;if(t.isValid()){if(typeof e=="string")if(/^\d+$/.test(e))e=m(e);else if(!c(e=t.localeData().monthsParse(e)))return;r=Math.min(t.date(),Ot(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,r)}}function Yt(t){return t!=null?(jt(this,t),f.updateOffset(this,!0),this):dt(this,"Month")}function zt(){function t(t,e){return e.length-t.length}for(var e,r=[],n=[],i=[],a=0;a<12;a++)e=l([2e3,a]),r.push(this.monthsShort(e,"")),n.push(this.months(e,"")),i.push(this.months(e,"")),i.push(this.monthsShort(e,""));for(r.sort(t),n.sort(t),i.sort(t),a=0;a<12;a++)r[a]=x(r[a]),n[a]=x(n[a]);for(a=0;a<24;a++)i[a]=x(i[a]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ut(t){return ut(t)?366:365}n("Y",0,0,function(){var t=this.year();return t<=9999?a(t,4):"+"+t}),n(0,["YY",2],0,function(){return this.year()%100}),n(0,["YYYY",4],0,"year"),n(0,["YYYYY",5],0,"year"),n(0,["YYYYYY",6,!0],0,"year"),e("year","y"),r("year",1),v("Y",wt),v("YY",_,b),v("YYYY",vt,gt),v("YYYYY",xt,yt),v("YYYYYY",xt,yt),k(["YYYYY","YYYYYY"],E),k("YYYY",function(t,e){e[E]=t.length===2?f.parseTwoDigitYear(t):m(t)}),k("YY",function(t,e){e[E]=f.parseTwoDigitYear(t)}),k("Y",function(t,e){e[E]=parseInt(t,10)}),f.parseTwoDigitYear=function(t){return m(t)+(68<m(t)?1900:2e3)};var Wt=ht("FullYear",!0);function qt(t,e,r,n,i,a,o){var s;return t<100&&0<=t?(s=new Date(t+400,e,r,n,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,r,n,i,a,o),s}function Ht(t){var e;return t<100&&0<=t?((e=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,e)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Vt(t,e,r){return r=7+e-r,r-(7+Ht(t,0,r).getUTCDay()-e)%7-1}function Gt(t,e,r,n,i){var a,e=1+7*(e-1)+(7+r-n)%7+Vt(t,n,i),r=e<=0?Ut(a=t-1)+e:e>Ut(t)?(a=t+1,e-Ut(t)):(a=t,e);return{year:a,dayOfYear:r}}function Xt(t,e,r){var n,i,a=Vt(t.year(),e,r),a=Math.floor((t.dayOfYear()-a-1)/7)+1;return a<1?n=a+N(i=t.year()-1,e,r):a>N(t.year(),e,r)?(n=a-N(t.year(),e,r),i=t.year()+1):(i=t.year(),n=a),{week:n,year:i}}function N(t,e,r){var n=Vt(t,e,r),e=Vt(t+1,e,r);return(Ut(t)-n+e)/7}function Zt(t,e){return t.slice(e,7).concat(t.slice(0,e))}n("w",["ww",2],"wo","week"),n("W",["WW",2],"Wo","isoWeek"),e("week","w"),e("isoWeek","W"),r("week",5),r("isoWeek",5),v("w",_),v("ww",_,b),v("W",_),v("WW",_,b),Nt(["w","ww","W","WW"],function(t,e,r,n){e[n.substr(0,1)]=m(t)}),n("d",0,"do","day"),n("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),n("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),n("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),n("e",0,0,"weekday"),n("E",0,0,"isoWeekday"),e("day","d"),e("weekday","e"),e("isoWeekday","E"),r("day",11),r("weekday",11),r("isoWeekday",11),v("d",_),v("e",_),v("E",_),v("dd",function(t,e){return e.weekdaysMinRegex(t)}),v("ddd",function(t,e){return e.weekdaysShortRegex(t)}),v("dddd",function(t,e){return e.weekdaysRegex(t)}),Nt(["dd","ddd","dddd"],function(t,e,r,n){n=r._locale.weekdaysParse(t,n,r._strict),n!=null?e.d=n:p(r).invalidWeekday=t}),Nt(["d","e","E"],function(t,e,r,n){e[n]=m(t)});var Kt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),te=Ct,ee=Ct,re=Ct;function ne(){function t(t,e){return e.length-t.length}for(var e,r,n,i=[],a=[],o=[],s=[],c=0;c<7;c++)n=l([2e3,1]).day(c),e=x(this.weekdaysMin(n,"")),r=x(this.weekdaysShort(n,"")),n=x(this.weekdays(n,"")),i.push(e),a.push(r),o.push(n),s.push(e),s.push(r),s.push(n);i.sort(t),a.sort(t),o.sort(t),s.sort(t),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ie(){return this.hours()%12||12}function ae(t,e){n(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function oe(t,e){return e._meridiemParse}n("H",["HH",2],0,"hour"),n("h",["hh",2],0,ie),n("k",["kk",2],0,function(){return this.hours()||24}),n("hmm",0,0,function(){return""+ie.apply(this)+a(this.minutes(),2)}),n("hmmss",0,0,function(){return""+ie.apply(this)+a(this.minutes(),2)+a(this.seconds(),2)}),n("Hmm",0,0,function(){return""+this.hours()+a(this.minutes(),2)}),n("Hmmss",0,0,function(){return""+this.hours()+a(this.minutes(),2)+a(this.seconds(),2)}),ae("a",!0),ae("A",!1),e("hour","h"),r("hour",13),v("a",oe),v("A",oe),v("H",_),v("h",_),v("k",_),v("HH",_,b),v("hh",_,b),v("kk",_,b),v("hmm",mt),v("hmmss",bt),v("Hmm",mt),v("Hmmss",bt),k(["H","HH"],S),k(["k","kk"],function(t,e,r){t=m(t),e[S]=t===24?0:t}),k(["a","A"],function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t}),k(["h","hh"],function(t,e,r){e[S]=m(t),p(r).bigHour=!0}),k("hmm",function(t,e,r){var n=t.length-2;e[S]=m(t.substr(0,n)),e[A]=m(t.substr(n)),p(r).bigHour=!0}),k("hmmss",function(t,e,r){var n=t.length-4,i=t.length-2;e[S]=m(t.substr(0,n)),e[A]=m(t.substr(n,2)),e[M]=m(t.substr(i)),p(r).bigHour=!0}),k("Hmm",function(t,e,r){var n=t.length-2;e[S]=m(t.substr(0,n)),e[A]=m(t.substr(n))}),k("Hmmss",function(t,e,r){var n=t.length-4,i=t.length-2;e[S]=m(t.substr(0,n)),e[A]=m(t.substr(n,2)),e[M]=m(t.substr(i))});var Ct=ht("Hours",!0),se,ce={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:It,monthsShort:Rt,week:{dow:0,doy:6},weekdays:Kt,weekdaysMin:Jt,weekdaysShort:Qt,meridiemParse:/[ap]\.?m?\.?/i},D={},le={};function ue(t){return t&&t.toLowerCase().replace("_","-")}function he(t){for(var e,r,n,i,a=0;a<t.length;){for(e=(i=ue(t[a]).split("-")).length,r=(r=ue(t[a+1]))?r.split("-"):null;0<e;){if(n=de(i.slice(0,e).join("-")))return n;if(r&&r.length>=e&&function(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}(i,r)>=e-1)break;e--}a++}return se}function de(t){var e;if(D[t]===void 0&&!0&&Dr&&Dr.exports&&t.match("^[^/\\\\]*$")!=null)try{e=se._abbr,Nr("./locale/"+t),fe(e)}catch{D[t]=null}return D[t]}function fe(t,e){return t&&((e=s(e)?L(t):pe(t,e))?se=e:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),se._abbr}function pe(t,e){if(e===null)return delete D[t],null;var r,n=ce;if(e.abbr=t,D[t]!=null)K("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=D[t]._config;else if(e.parentLocale!=null)if(D[e.parentLocale]!=null)n=D[e.parentLocale]._config;else{if((r=de(e.parentLocale))==null)return le[e.parentLocale]||(le[e.parentLocale]=[]),le[e.parentLocale].push({name:t,config:e}),null;n=r._config}return D[t]=new J(Q(n,e)),le[t]&&le[t].forEach(function(t){pe(t.name,t.config)}),fe(t),D[t]}function L(t){var e;if(!(t=t&&t._locale&&t._locale._abbr?t._locale._abbr:t))return se;if(!o(t)){if(e=de(t))return e;t=[t]}return he(t)}function ge(t){var e=t._a;return e&&p(t).overflow===-2&&(e=e[T]<0||11<e[T]?T:e[C]<1||e[C]>Ot(e[E],e[T])?C:e[S]<0||24<e[S]||e[S]===24&&(e[A]!==0||e[M]!==0||e[Dt]!==0)?S:e[A]<0||59<e[A]?A:e[M]<0||59<e[M]?M:e[Dt]<0||999<e[Dt]?Dt:-1,p(t)._overflowDayOfYear&&(e<E||C<e)&&(e=C),p(t)._overflowWeeks&&e===-1&&(e=Lt),p(t)._overflowWeekday&&e===-1&&(e=Bt),p(t).overflow=e),t}var ye=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,be=/Z|[+-]\d\d(?::?\d\d)?/,_e=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ve=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xe=/^\/?Date\((-?\d+)/i,ke=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,we={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ee(t){var e,r,n,i,a,o,s=t._i,c=ye.exec(s)||me.exec(s),s=_e.length,l=ve.length;if(c){for(p(t).iso=!0,e=0,r=s;e<r;e++)if(_e[e][1].exec(c[1])){i=_e[e][0],n=_e[e][2]!==!1;break}if(i==null)t._isValid=!1;else{if(c[3]){for(e=0,r=l;e<r;e++)if(ve[e][1].exec(c[3])){a=(c[2]||" ")+ve[e][0];break}if(a==null)return void(t._isValid=!1)}if(n||a==null){if(c[4]){if(!be.exec(c[4]))return void(t._isValid=!1);o="Z"}t._f=i+(a||"")+(o||""),Me(t)}else t._isValid=!1}}else t._isValid=!1}function Te(t,e,r,n,i,a){return t=[function(t){t=parseInt(t,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(t),Rt.indexOf(e),parseInt(r,10),parseInt(n,10),parseInt(i,10)],a&&t.push(parseInt(a,10)),t}function Ce(t){var e,r,n,i,a=ke.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));a?(e=Te(a[4],a[3],a[2],a[5],a[6],a[7]),r=a[1],n=e,i=t,r&&Qt.indexOf(r)!==new Date(n[0],n[1],n[2]).getDay()?(p(i).weekdayMismatch=!0,i._isValid=!1):(t._a=e,t._tzm=(r=a[8],n=a[9],i=a[10],r?we[r]:n?0:60*(((r=parseInt(i,10))-(n=r%100))/100)+n),t._d=Ht.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0)):t._isValid=!1}function Se(t,e,r){return t!=null?t:e!=null?e:r}function Ae(t){var e,r,n,i,a,o,s,c,l,u,h,d=[];if(!t._d){for(n=t,i=new Date(f.now()),r=n._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()],t._w&&t._a[C]==null&&t._a[T]==null&&((i=(n=t)._w).GG!=null||i.W!=null||i.E!=null?(c=1,l=4,a=Se(i.GG,n._a[E],Xt(B(),1,4).year),o=Se(i.W,1),((s=Se(i.E,1))<1||7<s)&&(u=!0)):(c=n._locale._week.dow,l=n._locale._week.doy,h=Xt(B(),c,l),a=Se(i.gg,n._a[E],h.year),o=Se(i.w,h.week),i.d!=null?((s=i.d)<0||6<s)&&(u=!0):i.e!=null?(s=i.e+c,(i.e<0||6<i.e)&&(u=!0)):s=c),o<1||o>N(a,c,l)?p(n)._overflowWeeks=!0:u!=null?p(n)._overflowWeekday=!0:(h=Gt(a,o,s,c,l),n._a[E]=h.year,n._dayOfYear=h.dayOfYear)),t._dayOfYear!=null&&(i=Se(t._a[E],r[E]),(t._dayOfYear>Ut(i)||t._dayOfYear===0)&&(p(t)._overflowDayOfYear=!0),u=Ht(i,0,t._dayOfYear),t._a[T]=u.getUTCMonth(),t._a[C]=u.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=d[e]=r[e];for(;e<7;e++)t._a[e]=d[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[S]===24&&t._a[A]===0&&t._a[M]===0&&t._a[Dt]===0&&(t._nextDay=!0,t._a[S]=0),t._d=(t._useUTC?Ht:qt).apply(null,d),a=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[S]=24),t._w&&t._w.d!==void 0&&t._w.d!==a&&(p(t).weekdayMismatch=!0)}}function Me(t){if(t._f===f.ISO_8601)Ee(t);else if(t._f===f.RFC_2822)Ce(t);else{t._a=[],p(t).empty=!0;for(var e,r,n,i,a,o=""+t._i,s=o.length,c=0,l=ot(t._f,t._locale).match(et)||[],u=l.length,h=0;h<u;h++)r=l[h],(e=(o.match(St(r,t))||[])[0])&&(0<(n=o.substr(0,o.indexOf(e))).length&&p(t).unusedInput.push(n),o=o.slice(o.indexOf(e)+e.length),c+=e.length),it[r]?(e?p(t).empty=!1:p(t).unusedTokens.push(r),n=r,a=t,(i=e)!=null&&d(Mt,n)&&Mt[n](i,a._a,a,n)):t._strict&&!e&&p(t).unusedTokens.push(r);p(t).charsLeftOver=s-c,0<o.length&&p(t).unusedInput.push(o),t._a[S]<=12&&p(t).bigHour===!0&&0<t._a[S]&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[S]=function(t,e,r){return r==null?e:t.meridiemHour!=null?t.meridiemHour(e,r):t.isPM!=null?((t=t.isPM(r))&&e<12&&(e+=12),e=t||e!==12?e:0):e}(t._locale,t._a[S],t._meridiem),(s=p(t).era)!==null&&(t._a[E]=t._locale.erasConvertYear(s,t._a[E])),Ae(t),ge(t)}}function Ne(t){var e,r,n,i=t._i,a=t._f;return t._locale=t._locale||L(t._l),i===null||a===void 0&&i===""?U({nullInput:!0}):(typeof i=="string"&&(t._i=i=t._locale.preparse(i)),u(i)?new G(ge(i)):($(i)?t._d=i:o(a)?function(t){var e,r,n,i,a,o,s=!1,c=t._f.length;if(c===0)return p(t).invalidFormat=!0,t._d=new Date(NaN);for(i=0;i<c;i++)a=0,o=!1,e=V({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],Me(e),z(e)&&(o=!0),a=(a+=p(e).charsLeftOver)+10*p(e).unusedTokens.length,p(e).score=a,s?a<n&&(n=a,r=e):(n==null||a<n||o)&&(n=a,r=e,o&&(s=!0));Y(t,r||e)}(t):a?Me(t):s(a=(i=t)._i)?i._d=new Date(f.now()):$(a)?i._d=new Date(a.valueOf()):typeof a=="string"?(r=i,(e=xe.exec(r._i))!==null?r._d=new Date(+e[1]):(Ee(r),r._isValid===!1&&(delete r._isValid,Ce(r),r._isValid===!1&&(delete r._isValid,r._strict?r._isValid=!1:f.createFromInputFallback(r))))):o(a)?(i._a=j(a.slice(0),function(t){return parseInt(t,10)}),Ae(i)):F(a)?(e=i)._d||(n=(r=ct(e._i)).day===void 0?r.date:r.day,e._a=j([r.year,r.month,n,r.hour,r.minute,r.second,r.millisecond],function(t){return t&&parseInt(t,10)}),Ae(e)):c(a)?i._d=new Date(a):f.createFromInputFallback(i),z(t)||(t._d=null),t))}function De(t,e,r,n,i){var a={};return e!==!0&&e!==!1||(n=e,e=void 0),r!==!0&&r!==!1||(n=r,r=void 0),(F(t)&&P(t)||o(t)&&t.length===0)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=r,a._i=t,a._f=e,a._strict=n,(i=new G(ge(Ne(i=a))))._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function B(t,e,r,n){return De(t,e,r,n,!1)}function Le(t,e){var r,n;if(!(e=e.length===1&&o(e[0])?e[0]:e).length)return B();for(r=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](r)||(r=e[n]);return r}f.createFromInputFallback=t("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),f.ISO_8601=function(){},f.RFC_2822=function(){};var mt=t("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=B.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:U()}),bt=t("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=B.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:U()}),Be=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Oe(t){var t=ct(t),e=t.year||0,r=t.quarter||0,n=t.month||0,i=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,s=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(t){var e,r,n=!1,i=Be.length;for(e in t)if(d(t,e)&&(w.call(Be,e)===-1||t[e]!=null&&isNaN(t[e])))return!1;for(r=0;r<i;++r)if(t[Be[r]]){if(n)return!1;parseFloat(t[Be[r]])!==m(t[Be[r]])&&(n=!0)}return!0}(t),this._milliseconds=+l+1e3*c+6e4*s+1e3*o*60*60,this._days=+a+7*i,this._months=+n+3*r+12*e,this._data={},this._locale=L(),this._bubble()}function Ie(t){return t instanceof Oe}function Re(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Fe(t,r){n(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+a(~~(t/60),2)+r+a(~~t%60,2)})}Fe("Z",":"),Fe("ZZ",""),v("Z",Tt),v("ZZ",Tt),k(["Z","ZZ"],function(t,e,r){r._useUTC=!0,r._tzm=$e(Tt,t)});var Pe=/([\+\-]|\d\d)/gi;function $e(t,e){var e=(e||"").match(t);return e===null?null:(e=60*(t=((e[e.length-1]||[])+"").match(Pe)||["-",0,0])[1]+m(t[2]))===0?0:t[0]==="+"?e:-e}function je(t,e){var r;return e._isUTC?(e=e.clone(),r=(u(t)||$(t)?t:B(t)).valueOf()-e.valueOf(),e._d.setTime(e._d.valueOf()+r),f.updateOffset(e,!1),e):B(t).local()}function Ye(t){return-Math.round(t._d.getTimezoneOffset())}function ze(){return!!this.isValid()&&this._isUTC&&this._offset===0}f.updateOffset=function(){};var Ue=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,We=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function O(t,e){var r,n=t,i=null;return Ie(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=Ue.exec(t))?(r=i[1]==="-"?-1:1,n={y:0,d:m(i[C])*r,h:m(i[S])*r,m:m(i[A])*r,s:m(i[M])*r,ms:m(Re(1e3*i[Dt]))*r}):(i=We.exec(t))?(r=i[1]==="-"?-1:1,n={y:qe(i[2],r),M:qe(i[3],r),w:qe(i[4],r),d:qe(i[5],r),h:qe(i[6],r),m:qe(i[7],r),s:qe(i[8],r)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(e=function(t,e){var r;return!t.isValid()||!e.isValid()?{milliseconds:0,months:0}:(e=je(e,t),t.isBefore(e)?r=He(t,e):((r=He(e,t)).milliseconds=-r.milliseconds,r.months=-r.months),r)}(B(n.from),B(n.to)),(n={}).ms=e.milliseconds,n.M=e.months),i=new Oe(n),Ie(t)&&d(t,"_locale")&&(i._locale=t._locale),Ie(t)&&d(t,"_isValid")&&(i._isValid=t._isValid),i}function qe(t,e){return t=t&&parseFloat(t.replace(",",".")),(isNaN(t)?0:t)*e}function He(t,e){var r={};return r.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,"M"),r}function Ve(n,i){return function(t,e){var r;return e===null||isNaN(+e)||(K(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=t,t=e,e=r),Ge(this,O(t,e),n),this}}function Ge(t,e,r,n){var i=e._milliseconds,a=Re(e._days),e=Re(e._months);t.isValid()&&(n=n==null||n,e&&jt(t,dt(t,"Month")+e*r),a&&ft(t,"Date",dt(t,"Date")+a*r),i&&t._d.setTime(t._d.valueOf()+i*r),n&&f.updateOffset(t,a||e))}function Xe(t){return typeof t=="string"||t instanceof String}function Ze(t){return u(t)||$(t)||Xe(t)||c(t)||function(e){var t=o(e),r=!1;return t&&(r=e.filter(function(t){return!c(t)&&Xe(e)}).length===0),t&&r}(t)||function(t){var e,r,n=F(t)&&!P(t),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],o=a.length;for(e=0;e<o;e+=1)r=a[e],i=i||d(t,r);return n&&i}(t)||t==null}function Ke(t,e){if(t.date()<e.date())return-Ke(e,t);var r=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(r,"months"),e=e-n<0?(e-n)/(n-t.clone().add(r-1,"months")):(e-n)/(t.clone().add(1+r,"months")-n);return-(r+e)||0}function Qe(t){return t===void 0?this._locale._abbr:((t=L(t))!=null&&(this._locale=t),this)}function Je(){return this._locale}O.fn=Oe.prototype,O.invalid=function(){return O(NaN)},It=Ve(1,"add"),Kt=Ve(-1,"subtract"),f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Jt=t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)}),tr=126227808e5;function er(t,e){return(t%e+e)%e}function rr(t,e,r){return t<100&&0<=t?new Date(t+400,e,r)-tr:new Date(t,e,r).valueOf()}function nr(t,e,r){return t<100&&0<=t?Date.UTC(t+400,e,r)-tr:Date.UTC(t,e,r)}function ir(t,e){return e.erasAbbrRegex(t)}function ar(){for(var t=[],e=[],r=[],n=[],i=this.eras(),a=0,o=i.length;a<o;++a)e.push(x(i[a].name)),t.push(x(i[a].abbr)),r.push(x(i[a].narrow)),n.push(x(i[a].name)),n.push(x(i[a].abbr)),n.push(x(i[a].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function or(t,e){n(0,[t,t.length],0,e)}function sr(t,e,r,n,i){var a;return t==null?Xt(this,n,i).year:(a=N(t,n,i),function(t,e,r,n,i){return t=Gt(t,e,r,n,i),e=Ht(t.year,0,t.dayOfYear),this.year(e.getUTCFullYear()),this.month(e.getUTCMonth()),this.date(e.getUTCDate()),this}.call(this,t,e=a<e?a:e,r,n,i))}n("N",0,0,"eraAbbr"),n("NN",0,0,"eraAbbr"),n("NNN",0,0,"eraAbbr"),n("NNNN",0,0,"eraName"),n("NNNNN",0,0,"eraNarrow"),n("y",["y",1],"yo","eraYear"),n("y",["yy",2],0,"eraYear"),n("y",["yyy",3],0,"eraYear"),n("y",["yyyy",4],0,"eraYear"),v("N",ir),v("NN",ir),v("NNN",ir),v("NNNN",function(t,e){return e.erasNameRegex(t)}),v("NNNNN",function(t,e){return e.erasNarrowRegex(t)}),k(["N","NN","NNN","NNNN","NNNNN"],function(t,e,r,n){n=r._locale.erasParse(t,n,r._strict),n?p(r).era=n:p(r).invalidEra=t}),v("y",kt),v("yy",kt),v("yyy",kt),v("yyyy",kt),v("yo",function(t,e){return e._eraYearOrdinalRegex||kt}),k(["y","yy","yyy","yyyy"],E),k(["yo"],function(t,e,r,n){var i;r._locale._eraYearOrdinalRegex&&(i=t.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?e[E]=r._locale.eraYearOrdinalParse(t,i):e[E]=parseInt(t,10)}),n(0,["gg",2],0,function(){return this.weekYear()%100}),n(0,["GG",2],0,function(){return this.isoWeekYear()%100}),or("gggg","weekYear"),or("ggggg","weekYear"),or("GGGG","isoWeekYear"),or("GGGGG","isoWeekYear"),e("weekYear","gg"),e("isoWeekYear","GG"),r("weekYear",1),r("isoWeekYear",1),v("G",wt),v("g",wt),v("GG",_,b),v("gg",_,b),v("GGGG",vt,gt),v("gggg",vt,gt),v("GGGGG",xt,yt),v("ggggg",xt,yt),Nt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,r,n){e[n.substr(0,2)]=m(t)}),Nt(["gg","GG"],function(t,e,r,n){e[n]=f.parseTwoDigitYear(t)}),n("Q",0,"Qo","quarter"),e("quarter","Q"),r("quarter",7),v("Q",i),k("Q",function(t,e){e[T]=3*(m(t)-1)}),n("D",["DD",2],"Do","date"),e("date","D"),r("date",9),v("D",_),v("DD",_,b),v("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),k(["D","DD"],C),k("Do",function(t,e){e[C]=m(t.match(_)[0])}),vt=ht("Date",!0),n("DDD",["DDDD",3],"DDDo","dayOfYear"),e("dayOfYear","DDD"),r("dayOfYear",4),v("DDD",_t),v("DDDD",pt),k(["DDD","DDDD"],function(t,e,r){r._dayOfYear=m(t)}),n("m",["mm",2],0,"minute"),e("minute","m"),r("minute",14),v("m",_),v("mm",_,b),k(["m","mm"],A);var cr,gt=ht("Minutes",!1),xt=(n("s",["ss",2],0,"second"),e("second","s"),r("second",15),v("s",_),v("ss",_,b),k(["s","ss"],M),ht("Seconds",!1));for(n("S",0,0,function(){return~~(this.millisecond()/100)}),n(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),n(0,["SSS",3],0,"millisecond"),n(0,["SSSS",4],0,function(){return 10*this.millisecond()}),n(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),n(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),n(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),n(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),n(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),e("millisecond","ms"),r("millisecond",16),v("S",_t,i),v("SS",_t,b),v("SSS",_t,pt),cr="SSSS";cr.length<=9;cr+="S")v(cr,kt);function lr(t,e){e[Dt]=m(1e3*("0."+t))}for(cr="S";cr.length<=9;cr+="S")k(cr,lr);function ur(t){return t}function hr(t,e,r,n){var i=L(),n=l().set(n,e);return i[r](n,t)}function dr(t,e,r){if(c(t)&&(e=t,t=void 0),t=t||"",e!=null)return hr(t,e,r,"month");for(var n=[],i=0;i<12;i++)n[i]=hr(t,i,r,"month");return n}function fr(t,e,r,n){e=(typeof t=="boolean"?c(e)&&(r=e,e=void 0):(e=t,t=!1,c(r=e)&&(r=e,e=void 0)),e||"");var i,a=L(),o=t?a._week.dow:0,s=[];if(r!=null)return hr(e,(r+o)%7,n,"day");for(i=0;i<7;i++)s[i]=hr(e,(i+o)%7,n,"day");return s}yt=ht("Milliseconds",!1),n("z",0,0,"zoneAbbr"),n("zz",0,0,"zoneName"),(i=G.prototype).add=It,i.calendar=function(t,e){arguments.length===1&&(arguments[0]?Ze(arguments[0])?(t=arguments[0],e=void 0):function(t){for(var e=F(t)&&!P(t),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<n.length;i+=1)r=r||d(t,n[i]);return e&&r}(arguments[0])&&(e=arguments[0],t=void 0):e=t=void 0);var t=t||B(),r=je(t,this).startOf("day"),r=f.calendarFormat(this,r)||"sameElse",e=e&&(h(e[r])?e[r].call(this,t):e[r]);return this.format(e||this.localeData().calendar(r,this,B(t)))},i.clone=function(){return new G(this)},i.diff=function(t,e,r){var n,i,a;if(!this.isValid())return NaN;if(!(n=je(t,this)).isValid())return NaN;switch(i=6e4*(n.utcOffset()-this.utcOffset()),e=g(e)){case"year":a=Ke(this,n)/12;break;case"month":a=Ke(this,n);break;case"quarter":a=Ke(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-i)/864e5;break;case"week":a=(this-n-i)/6048e5;break;default:a=this-n}return r?a:y(a)},i.endOf=function(t){var e,r;if((t=g(t))===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?nr:rr,t){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-er(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-er(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-er(e,1e3)-1;break}return this._d.setTime(e),f.updateOffset(this,!0),this},i.format=function(t){return t=t||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat),t=at(this,t),this.localeData().postformat(t)},i.from=function(t,e){return this.isValid()&&(u(t)&&t.isValid()||B(t).isValid())?O({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},i.fromNow=function(t){return this.from(B(),t)},i.to=function(t,e){return this.isValid()&&(u(t)&&t.isValid()||B(t).isValid())?O({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},i.toNow=function(t){return this.to(B(),t)},i.get=function(t){return h(this[t=g(t)])?this[t]():this},i.invalidAt=function(){return p(this).overflow},i.isAfter=function(t,e){return t=u(t)?t:B(t),!(!this.isValid()||!t.isValid())&&((e=g(e)||"millisecond")==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf())},i.isBefore=function(t,e){return t=u(t)?t:B(t),!(!this.isValid()||!t.isValid())&&((e=g(e)||"millisecond")==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf())},i.isBetween=function(t,e,r,n){return t=u(t)?t:B(t),e=u(e)?e:B(e),!!(this.isValid()&&t.isValid()&&e.isValid())&&((n=n||"()")[0]==="("?this.isAfter(t,r):!this.isBefore(t,r))&&(n[1]===")"?this.isBefore(e,r):!this.isAfter(e,r))},i.isSame=function(t,e){var t=u(t)?t:B(t);return!(!this.isValid()||!t.isValid())&&((e=g(e)||"millisecond")==="millisecond"?this.valueOf()===t.valueOf():(t=t.valueOf(),this.clone().startOf(e).valueOf()<=t&&t<=this.clone().endOf(e).valueOf()))},i.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},i.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},i.isValid=function(){return z(this)},i.lang=Jt,i.locale=Qe,i.localeData=Je,i.max=bt,i.min=mt,i.parsingFlags=function(){return Y({},p(this))},i.set=function(t,e){if(typeof t=="object")for(var r=function(t){var e,r=[];for(e in t)d(t,e)&&r.push({unit:e,priority:lt[e]});return r.sort(function(t,e){return t.priority-e.priority}),r}(t=ct(t)),n=r.length,i=0;i<n;i++)this[r[i].unit](t[r[i].unit]);else if(h(this[t=g(t)]))return this[t](e);return this},i.startOf=function(t){var e,r;if((t=g(t))===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?nr:rr,t){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=er(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=er(e,6e4);break;case"second":e=this._d.valueOf(),e-=er(e,1e3);break}return this._d.setTime(e),f.updateOffset(this,!0),this},i.subtract=Kt,i.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},i.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},i.toDate=function(){return new Date(this.valueOf())},i.toISOString=function(t){if(!this.isValid())return null;var e=(t=t!==!0)?this.clone().utc():this;return e.year()<0||9999<e.year()?at(e,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):h(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",at(e,"Z")):at(e,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},i.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",r="";return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+(r+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(i[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},i.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},i.eraName=function(){for(var t,e=this.localeData().eras(),r=0,n=e.length;r<n;++r)if(t=this.clone().startOf("day").valueOf(),e[r].since<=t&&t<=e[r].until||e[r].until<=t&&t<=e[r].since)return e[r].name;return""},i.eraNarrow=function(){for(var t,e=this.localeData().eras(),r=0,n=e.length;r<n;++r)if(t=this.clone().startOf("day").valueOf(),e[r].since<=t&&t<=e[r].until||e[r].until<=t&&t<=e[r].since)return e[r].narrow;return""},i.eraAbbr=function(){for(var t,e=this.localeData().eras(),r=0,n=e.length;r<n;++r)if(t=this.clone().startOf("day").valueOf(),e[r].since<=t&&t<=e[r].until||e[r].until<=t&&t<=e[r].since)return e[r].abbr;return""},i.eraYear=function(){for(var t,e,r=this.localeData().eras(),n=0,i=r.length;n<i;++n)if(t=r[n].since<=r[n].until?1:-1,e=this.clone().startOf("day").valueOf(),r[n].since<=e&&e<=r[n].until||r[n].until<=e&&e<=r[n].since)return(this.year()-f(r[n].since).year())*t+r[n].offset;return this.year()},i.year=Wt,i.isLeapYear=function(){return ut(this.year())},i.weekYear=function(t){return sr.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},i.isoWeekYear=function(t){return sr.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},i.quarter=i.quarters=function(t){return t==null?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},i.month=Yt,i.daysInMonth=function(){return Ot(this.year(),this.month())},i.week=i.weeks=function(t){var e=this.localeData().week(this);return t==null?e:this.add(7*(t-e),"d")},i.isoWeek=i.isoWeeks=function(t){var e=Xt(this,1,4).week;return t==null?e:this.add(7*(t-e),"d")},i.weeksInYear=function(){var t=this.localeData()._week;return N(this.year(),t.dow,t.doy)},i.weeksInWeekYear=function(){var t=this.localeData()._week;return N(this.weekYear(),t.dow,t.doy)},i.isoWeeksInYear=function(){return N(this.year(),1,4)},i.isoWeeksInISOWeekYear=function(){return N(this.isoWeekYear(),1,4)},i.date=vt,i.day=i.days=function(t){if(!this.isValid())return t!=null?this:NaN;var e,r,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(e=t,r=this.localeData(),t=typeof e!="string"?e:isNaN(e)?typeof(e=r.weekdaysParse(e))=="number"?e:null:parseInt(e,10),this.add(t-n,"d")):n},i.weekday=function(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")},i.isoWeekday=function(t){return this.isValid()?t!=null?(e=t,r=this.localeData(),r=typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e,this.day(this.day()%7?r:r-7)):this.day()||7:t!=null?this:NaN;var e,r},i.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")},i.hour=i.hours=Ct,i.minute=i.minutes=gt,i.second=i.seconds=xt,i.millisecond=i.milliseconds=yt,i.utcOffset=function(t,e,r){var n,i=this._offset||0;if(!this.isValid())return t!=null?this:NaN;if(t==null)return this._isUTC?i:Ye(this);if(typeof t=="string"){if((t=$e(Tt,t))===null)return this}else Math.abs(t)<16&&!r&&(t*=60);return!this._isUTC&&e&&(n=Ye(this)),this._offset=t,this._isUTC=!0,n!=null&&this.add(n,"m"),i!==t&&(!e||this._changeInProgress?Ge(this,O(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},i.utc=function(t){return this.utcOffset(0,t)},i.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ye(this),"m")),this},i.parseZone=function(){var t;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((t=$e(Et,this._i))!=null?this.utcOffset(t):this.utcOffset(0,!0)),this},i.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?B(t).utcOffset():0,(this.utcOffset()-t)%60==0)},i.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},i.isLocal=function(){return!!this.isValid()&&!this._isUTC},i.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},i.isUtc=ze,i.isUTC=ze,i.zoneAbbr=function(){return this._isUTC?"UTC":""},i.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},i.dates=t("dates accessor is deprecated. Use date instead.",vt),i.months=t("months accessor is deprecated. Use month instead",Yt),i.years=t("years accessor is deprecated. Use year instead",Wt),i.zone=t("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return t!=null?(this.utcOffset(t=typeof t!="string"?-t:t,e),this):-this.utcOffset()}),i.isDSTShifted=t("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t,e={};return V(e,this),(e=Ne(e))._a?(t=(e._isUTC?l:B)(e._a),this._isDSTShifted=this.isValid()&&0<function(t,e,r){for(var n=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),a=0,o=0;o<n;o++)(r&&t[o]!==e[o]||!r&&m(t[o])!==m(e[o]))&&a++;return a+i}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),(b=J.prototype).calendar=function(t,e,r){return h(t=this._calendar[t]||this._calendar.sameElse)?t.call(e,r):t},b.longDateFormat=function(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.match(et).map(function(t){return t==="MMMM"||t==="MM"||t==="DD"||t==="dddd"?t.slice(1):t}).join(""),this._longDateFormat[t])},b.invalidDate=function(){return this._invalidDate},b.ordinal=function(t){return this._ordinal.replace("%d",t)},b.preparse=ur,b.postformat=ur,b.relativeTime=function(t,e,r,n){var i=this._relativeTime[r];return h(i)?i(t,e,r,n):i.replace(/%d/i,t)},b.pastFuture=function(t,e){return h(t=this._relativeTime[0<t?"future":"past"])?t(e):t.replace(/%s/i,e)},b.set=function(t){var e,r;for(r in t)d(t,r)&&(h(e=t[r])?this[r]=e:this["_"+r]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},b.eras=function(t,e){for(var r,n=this._eras||L("en")._eras,i=0,a=n.length;i<a;++i){switch(typeof n[i].since){case"string":r=f(n[i].since).startOf("day"),n[i].since=r.valueOf();break}switch(typeof n[i].until){case"undefined":n[i].until=1/0;break;case"string":r=f(n[i].until).startOf("day").valueOf(),n[i].until=r.valueOf();break}}return n},b.erasParse=function(t,e,r){var n,i,a,o,s,c=this.eras();for(t=t.toUpperCase(),n=0,i=c.length;n<i;++n)if(a=c[n].name.toUpperCase(),o=c[n].abbr.toUpperCase(),s=c[n].narrow.toUpperCase(),r)switch(e){case"N":case"NN":case"NNN":if(o===t)return c[n];break;case"NNNN":if(a===t)return c[n];break;case"NNNNN":if(s===t)return c[n];break}else if(0<=[a,o,s].indexOf(t))return c[n]},b.erasConvertYear=function(t,e){var r=t.since<=t.until?1:-1;return e===void 0?f(t.since).year():f(t.since).year()+(e-t.offset)*r},b.erasAbbrRegex=function(t){return d(this,"_erasAbbrRegex")||ar.call(this),t?this._erasAbbrRegex:this._erasRegex},b.erasNameRegex=function(t){return d(this,"_erasNameRegex")||ar.call(this),t?this._erasNameRegex:this._erasRegex},b.erasNarrowRegex=function(t){return d(this,"_erasNarrowRegex")||ar.call(this),t?this._erasNarrowRegex:this._erasRegex},b.months=function(t,e){return t?(o(this._months)?this._months:this._months[(this._months.isFormat||Ft).test(e)?"format":"standalone"])[t.month()]:o(this._months)?this._months:this._months.standalone},b.monthsShort=function(t,e){return t?(o(this._monthsShort)?this._monthsShort:this._monthsShort[Ft.test(e)?"format":"standalone"])[t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},b.monthsParse=function(t,e,r){var n,i;if(this._monthsParseExact)return function(t,e,r){var n,i,a,t=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=l([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return r?e==="MMM"?(i=w.call(this._shortMonthsParse,t))!==-1?i:null:(i=w.call(this._longMonthsParse,t))!==-1?i:null:e==="MMM"?(i=w.call(this._shortMonthsParse,t))!==-1||(i=w.call(this._longMonthsParse,t))!==-1?i:null:(i=w.call(this._longMonthsParse,t))!==-1||(i=w.call(this._shortMonthsParse,t))!==-1?i:null}.call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++)if(i=l([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(i="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&e==="MMMM"&&this._longMonthsParse[n].test(t)||r&&e==="MMM"&&this._shortMonthsParse[n].test(t)||!r&&this._monthsParse[n].test(t))return n},b.monthsRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=$t),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},b.monthsShortRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Pt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},b.week=function(t){return Xt(t,this._week.dow,this._week.doy).week},b.firstDayOfYear=function(){return this._week.doy},b.firstDayOfWeek=function(){return this._week.dow},b.weekdays=function(t,e){return e=o(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"],t===!0?Zt(e,this._week.dow):t?e[t.day()]:e},b.weekdaysMin=function(t){return t===!0?Zt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},b.weekdaysShort=function(t){return t===!0?Zt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},b.weekdaysParse=function(t,e,r){var n,i;if(this._weekdaysParseExact)return function(t,e,r){var n,i,a,t=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=l([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return r?e==="dddd"?(i=w.call(this._weekdaysParse,t))!==-1?i:null:e==="ddd"?(i=w.call(this._shortWeekdaysParse,t))!==-1?i:null:(i=w.call(this._minWeekdaysParse,t))!==-1?i:null:e==="dddd"?(i=w.call(this._weekdaysParse,t))!==-1||(i=w.call(this._shortWeekdaysParse,t))!==-1||(i=w.call(this._minWeekdaysParse,t))!==-1?i:null:e==="ddd"?(i=w.call(this._shortWeekdaysParse,t))!==-1||(i=w.call(this._weekdaysParse,t))!==-1||(i=w.call(this._minWeekdaysParse,t))!==-1?i:null:(i=w.call(this._minWeekdaysParse,t))!==-1||(i=w.call(this._weekdaysParse,t))!==-1||(i=w.call(this._shortWeekdaysParse,t))!==-1?i:null}.call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++)if(i=l([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&e==="dddd"&&this._fullWeekdaysParse[n].test(t)||r&&e==="ddd"&&this._shortWeekdaysParse[n].test(t)||r&&e==="dd"&&this._minWeekdaysParse[n].test(t)||!r&&this._weekdaysParse[n].test(t))return n},b.weekdaysRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ne.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=te),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},b.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ne.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ee),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},b.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ne.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=re),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},b.isPM=function(t){return(t+"").toLowerCase().charAt(0)==="p"},b.meridiem=function(t,e,r){return 11<t?r?"pm":"PM":r?"am":"AM"},fe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(m(t%100/10)===1?"th":e==1?"st":e==2?"nd":e==3?"rd":"th")}}),f.lang=t("moment.lang is deprecated. Use moment.locale instead.",fe),f.langData=t("moment.langData is deprecated. Use moment.localeData instead.",L);var pr=Math.abs;function gr(t,e,r,n){return e=O(e,r),t._milliseconds+=n*e._milliseconds,t._days+=n*e._days,t._months+=n*e._months,t._bubble()}function yr(t){return t<0?Math.floor(t):Math.ceil(t)}function mr(t){return 4800*t/146097}function br(t){return 146097*t/4800}function _r(t){return function(){return this.as(t)}}function vr(t){return function(){return this.isValid()?this._data[t]:NaN}}_t=_r("ms"),pt=_r("s"),It=_r("m"),bt=_r("h"),mt=_r("d"),Kt=_r("w"),Ct=_r("M"),gt=_r("Q"),xt=_r("y");var yt=vr("milliseconds"),vt=vr("seconds"),Wt=vr("minutes"),b=vr("hours"),xr=vr("days"),kr=vr("months"),wr=vr("years"),Er=Math.round,Tr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Cr(t,e,r,n){var i=O(t).abs(),a=Er(i.as("s")),o=Er(i.as("m")),s=Er(i.as("h")),c=Er(i.as("d")),l=Er(i.as("M")),u=Er(i.as("w")),i=Er(i.as("y")),a=(a<=r.ss?["s",a]:a<r.s&&["ss",a])||o<=1&&["m"]||o<r.m&&["mm",o]||s<=1&&["h"]||s<r.h&&["hh",s]||c<=1&&["d"]||c<r.d&&["dd",c];return(a=(a=r.w!=null?a||u<=1&&["w"]||u<r.w&&["ww",u]:a)||l<=1&&["M"]||l<r.M&&["MM",l]||i<=1&&["y"]||["yy",i])[2]=e,a[3]=0<+t,a[4]=n,function(t,e,r,n,i){return i.relativeTime(e||1,!!r,t,n)}.apply(null,a)}var Sr=Math.abs;function Ar(t){return(0<t)-(t<0)||+t}function Mr(){if(!this.isValid())return this.localeData().invalidDate();var t,e,r,n,i,a,o,s=Sr(this._milliseconds)/1e3,c=Sr(this._days),l=Sr(this._months),u=this.asSeconds();return u?(t=y(s/60),e=y(t/60),s%=60,t%=60,r=y(l/12),l%=12,n=s?s.toFixed(3).replace(/\.?0+$/,""):"",i=Ar(this._months)!==Ar(u)?"-":"",a=Ar(this._days)!==Ar(u)?"-":"",o=Ar(this._milliseconds)!==Ar(u)?"-":"",(u<0?"-":"")+"P"+(r?i+r+"Y":"")+(l?i+l+"M":"")+(c?a+c+"D":"")+(e||t||s?"T":"")+(e?o+e+"H":"")+(t?o+t+"M":"")+(s?o+n+"S":"")):"P0D"}var I=Oe.prototype;return I.isValid=function(){return this._isValid},I.abs=function(){var t=this._data;return this._milliseconds=pr(this._milliseconds),this._days=pr(this._days),this._months=pr(this._months),t.milliseconds=pr(t.milliseconds),t.seconds=pr(t.seconds),t.minutes=pr(t.minutes),t.hours=pr(t.hours),t.months=pr(t.months),t.years=pr(t.years),this},I.add=function(t,e){return gr(this,t,e,1)},I.subtract=function(t,e){return gr(this,t,e,-1)},I.as=function(t){if(!this.isValid())return NaN;var e,r,n=this._milliseconds;if((t=g(t))==="month"||t==="quarter"||t==="year")switch(e=this._days+n/864e5,r=this._months+mr(e),t){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(e=this._days+Math.round(br(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},I.asMilliseconds=_t,I.asSeconds=pt,I.asMinutes=It,I.asHours=bt,I.asDays=mt,I.asWeeks=Kt,I.asMonths=Ct,I.asQuarters=gt,I.asYears=xt,I.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12):NaN},I._bubble=function(){var t=this._milliseconds,e=this._days,r=this._months,n=this._data;return 0<=t&&0<=e&&0<=r||t<=0&&e<=0&&r<=0||(t+=864e5*yr(br(r)+e),r=e=0),n.milliseconds=t%1e3,t=y(t/1e3),n.seconds=t%60,t=y(t/60),n.minutes=t%60,t=y(t/60),n.hours=t%24,e+=y(t/24),r+=t=y(mr(e)),e-=yr(br(t)),t=y(r/12),r%=12,n.days=e,n.months=r,n.years=t,this},I.clone=function(){return O(this)},I.get=function(t){return t=g(t),this.isValid()?this[t+"s"]():NaN},I.milliseconds=yt,I.seconds=vt,I.minutes=Wt,I.hours=b,I.days=xr,I.weeks=function(){return y(this.days()/7)},I.months=kr,I.years=wr,I.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=Tr;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(r=t),typeof e=="object"&&(n=Object.assign({},Tr,e),e.s!=null&&e.ss==null&&(n.ss=e.s-1)),t=this.localeData(),e=Cr(this,!r,n,t),r&&(e=t.pastFuture(+this,e)),t.postformat(e)},I.toISOString=Mr,I.toString=Mr,I.toJSON=Mr,I.locale=Qe,I.localeData=Je,I.toIsoString=t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mr),I.lang=Jt,n("X",0,0,"unix"),n("x",0,0,"valueOf"),v("x",wt),v("X",/[+-]?\d+(\.\d{1,3})?/),k("X",function(t,e,r){r._d=new Date(1e3*parseFloat(t))}),k("x",function(t,e,r){r._d=new Date(m(t))}),f.version="2.29.4",R=B,f.fn=i,f.min=function(){return Le("isBefore",[].slice.call(arguments,0))},f.max=function(){return Le("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=l,f.unix=function(t){return B(1e3*t)},f.months=function(t,e){return dr(t,e,"months")},f.isDate=$,f.locale=fe,f.invalid=U,f.duration=O,f.isMoment=u,f.weekdays=function(t,e,r){return fr(t,e,r,"weekdays")},f.parseZone=function(){return B.apply(null,arguments).parseZone()},f.localeData=L,f.isDuration=Ie,f.monthsShort=function(t,e){return dr(t,e,"monthsShort")},f.weekdaysMin=function(t,e,r){return fr(t,e,r,"weekdaysMin")},f.defineLocale=pe,f.updateLocale=function(t,e){var r,n;return e!=null?(n=ce,D[t]!=null&&D[t].parentLocale!=null?D[t].set(Q(D[t]._config,e)):(e=Q(n=(r=de(t))!=null?r._config:n,e),r==null&&(e.abbr=t),(n=new J(e)).parentLocale=D[t],D[t]=n),fe(t)):D[t]!=null&&(D[t].parentLocale!=null?(D[t]=D[t].parentLocale,t===fe()&&fe(t)):D[t]!=null&&delete D[t]),D[t]},f.locales=function(){return tt(D)},f.weekdaysShort=function(t,e,r){return fr(t,e,r,"weekdaysShort")},f.normalizeUnits=g,f.relativeTimeRounding=function(t){return t===void 0?Er:typeof t=="function"&&(Er=t,!0)},f.relativeTimeThreshold=function(t,e){return Tr[t]!==void 0&&(e===void 0?Tr[t]:(Tr[t]=e,t==="s"&&(Tr.ss=e-1),!0))},f.calendarFormat=function(t,e){return(t=t.diff(e,"days",!0))<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},f.prototype=i,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f}();function $(t="fatal"){let e=j.fatal;"string"==typeof t?(t=t.toLowerCase())in j&&(e=j[t]):"number"==typeof t&&(e=t),C.trace=()=>{},C.debug=()=>{},C.info=()=>{},C.warn=()=>{},C.error=()=>{},C.fatal=()=>{},e<=j.fatal&&(C.fatal=console.error?console.error.bind(console,Y("FATAL"),"color: orange"):console.log.bind(console,"[35m",Y("FATAL"))),e<=j.error&&(C.error=console.error?console.error.bind(console,Y("ERROR"),"color: orange"):console.log.bind(console,"[31m",Y("ERROR"))),e<=j.warn&&(C.warn=console.warn?console.warn.bind(console,Y("WARN"),"color: orange"):console.log.bind(console,"[33m",Y("WARN"))),e<=j.info&&(C.info=console.info?console.info.bind(console,Y("INFO"),"color: lightblue"):console.log.bind(console,"[34m",Y("INFO"))),e<=j.debug&&(C.debug=console.debug?console.debug.bind(console,Y("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",Y("DEBUG"))),e<=j.trace&&(C.trace=console.debug?console.debug.bind(console,Y("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",Y("TRACE")))}const G=P.exports,j={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},C={trace:()=>{},debug:()=>{},info:()=>{},warn:()=>{},error:()=>{},fatal:()=>{}},Y=t=>`%c${G().format("ss.SSS")} : ${t} : `;var P={},z=(Object.defineProperty(P,"__esModule",{value:!0}),P.sanitizeUrl=void 0),U=/^([^\w]*)(javascript|data|vbscript)/im,W=/&#(\w+)(^\w|;)?/g,q=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,X=/^([^:]+):/gm,Z=[".","/"];function K(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function Q(t,e){return null==t||null==e?NaN:e<t?-1:t<e?1:t<=e?0:NaN}function J(r){let a,o,i;function s(t,e,r=0,n=t.length){if(r<n){if(0!==a(e,e))return n;do{var i=r+n>>>1;o(t[i],e)<0?r=1+i:n=i}while(r<n)}return r}return i=2!==r.length?(a=K,o=(t,e)=>K(r(t),e),(t,e)=>r(t)-e):(a=r===K||r===Q?r:tt,o=r),{left:s,center:function(t,e,r=0,n=t.length){return n=s(t,e,r,n-1),r<n&&i(t[n-1],e)>-i(t[n],e)?n-1:n},right:function(t,e,r=0,n=t.length){if(r<n){if(0!==a(e,e))return n;do{var i=r+n>>>1;o(t[i],e)<=0?r=1+i:n=i}while(r<n)}return r}}}function tt(){return 0}function et(t){return null===t?NaN:+t}function*rt(e,r){if(void 0===r)for(var t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(var n of e)null!=(n=r(n,++t,e))&&(n=+n)>=n&&(yield n)}}z=P.sanitizeUrl=function(t){var e;return!(t=(t||"").replace(W,function(t,e){return String.fromCharCode(e)}).replace(q,"").trim())||!(-1<Z.indexOf(t[0]))&&(e=t.match(X))&&(e=e[0],U.test(e))?"about:blank":t};const nt=J(K),it=nt.right,at=nt.left,ot=J(et).center,st=it;const ct=ut(ft),lt=ut(function(t){const a=ft(t);return(t,e,r,n,i)=>{r<<=2,n<<=2,i<<=2,a(t,e,r+0,n+0,i),a(t,e,r+1,n+1,i),a(t,e,r+2,n+2,i),a(t,e,r+3,n+3,i)}});function ut(c){return function(t,e,r=e){if(!(0<=(e=+e)))throw new RangeError("invalid rx");if(!(0<=(r=+r)))throw new RangeError("invalid ry");var n,i,{data:a,width:o,height:s}=t;if(!(0<=(o=Math.floor(o))))throw new RangeError("invalid width");if(0<=(s=Math.floor(void 0!==s?s:a.length/o)))return o&&s&&(e||r)&&(n=e&&c(e),r=r&&c(r),i=a.slice(),n&&r?(ht(n,i,a,o,s),ht(n,a,i,o,s),ht(n,i,a,o,s),dt(r,a,i,o,s),dt(r,i,a,o,s),dt(r,a,i,o,s)):n?(ht(n,a,i,o,s),ht(n,i,a,o,s),ht(n,a,i,o,s)):r&&(dt(r,a,i,o,s),dt(r,i,a,o,s),dt(r,a,i,o,s))),t;throw new RangeError("invalid height")}}function ht(r,n,i,a,o){for(let t=0,e=a*o;t<e;)r(n,i,t,t+=a,1)}function dt(r,n,i,a,o){for(let t=0,e=a*o;t<a;++t)r(n,i,t,t+e,a)}function ft(t){const e=Math.floor(t);if(e===t){var l=t;const u=2*l+1;return(n,i,a,o,s)=>{if((o-=s)>=a){let r=l*i[a];var c=s*l;for(let t=a,e=a+c;t<e;t+=s)r+=i[Math.min(o,t)];for(let t=a,e=o;t<=e;t+=s)r+=i[Math.min(o,t+c)],n[t]=r/u,r-=i[Math.max(a,t-c)]}}}{const h=t-e,d=2*t+1;return(n,i,a,o,s)=>{if((o-=s)>=a){let r=e*i[a];var c=s*e,l=c+s;for(let t=a,e=a+c;t<e;t+=s)r+=i[Math.min(o,t)];for(let t=a,e=o;t<=e;t+=s)r+=i[Math.min(o,t+c)],n[t]=(r+h*(i[Math.max(a,t-l)]+i[Math.min(o,t+l)]))/d,r-=i[Math.max(a,t-c)]}}}}function pt(e,r){let n=0;if(void 0===r)for(var t of e)null!=t&&(t=+t)>=t&&++n;else{let t=-1;for(var i of e)null!=(i=r(i,++t,e))&&(i=+i)>=i&&++n}return n}function gt(t){return 0|t.length}function yt(t){return!(0<t)}function mt(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function bt(e,r){let n=0,i,a=0,o=0;if(void 0===r)for(var t of e)null!=t&&(t=+t)>=t&&(i=t-a,a+=i/++n,o+=i*(t-a));else{let t=-1;for(var s of e)null!=(s=r(s,++t,e))&&(s=+s)>=s&&(i=s-a,a+=i/++n,o+=i*(s-a))}if(1<n)return o/(n-1)}function _t(t,e){t=bt(t,e);return t&&Math.sqrt(t)}function vt(e,r){let n,i;if(void 0===r)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=i=t):(n>t&&(n=t),i<t&&(i=t)));else{let t=-1;for(var a of e)null!=(a=r(a,++t,e))&&(void 0===n?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)))}return[n,i]}class xt{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){var r=this._partials;let n=0;for(let t=0;t<this._n&&t<32;t++){var i=r[t],a=e+i,i=Math.abs(e)<Math.abs(i)?e-(a-i):i-(a-e);i&&(r[n++]=i),e=a}return r[n]=e,this._n=n+1,this}valueOf(){var t=this._partials;let e=this._n,r,n,i,a=0;if(0<e){for(a=t[--e];0<e&&(r=a,n=t[--e],a=r+n,!(i=n-(a-r))););0<e&&(i<0&&t[e-1]<0||0<i&&0<t[e-1])&&(n=2*i,r=a+n,n==r-a)&&(a=r)}return a}}class kt extends Map{constructor(t,e=St){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(var[r,n]of t)this.set(r,n)}get(t){return super.get(Et(this,t))}has(t){return super.has(Et(this,t))}set(t,e){return super.set(Tt(this,t),e)}delete(t){return super.delete(Ct(this,t))}}class wt extends Set{constructor(t,e=St){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const r of t)this.add(r)}has(t){return super.has(Et(this,t))}add(t){return super.add(Tt(this,t))}delete(t){return super.delete(Ct(this,t))}}function Et({_intern:t,_key:e},r){e=e(r);return t.has(e)?t.get(e):r}function Tt({_intern:t,_key:e},r){e=e(r);return t.has(e)?t.get(e):(t.set(e,r),r)}function Ct({_intern:t,_key:e},r){e=e(r);return t.has(e)&&(r=t.get(e),t.delete(e)),r}function St(t){return null!==t&&"object"==typeof t?t.valueOf():t}function At(t){return t}function Mt(t,...e){return It(t,At,At,e)}function Nt(t,...e){return It(t,Array.from,At,e)}function Dt(r,n){for(let t=1,e=n.length;t<e;++t)r=r.flatMap(r=>r.pop().map(([t,e])=>[...r,t,e]));return r}function Lt(t,e,...r){return It(t,At,e,r)}function Bt(t,e,...r){return It(t,Array.from,e,r)}function Ot(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function It(t,h,d,f){return function t(e,r){if(r>=f.length)return d(e);var n,i,a=new kt,o=f[r++];let s=-1;for(const u of e){var c=o(u,++s,e),l=a.get(c);l?l.push(u):a.set(c,[u])}for([n,i]of a)a.set(n,t(i,r));return h(a)}(t,0)}function Rt(e,t){return Array.from(t,t=>e[t])}function Ft(e,...i){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[r]=i;var t;return r&&2!==r.length||1<i.length?(t=Uint32Array.from(e,(t,e)=>e),1<i.length?(i=i.map(t=>e.map(t)),t.sort((t,e)=>{for(const n of i){var r=$t(n[t],n[e]);if(r)return r}})):(r=e.map(r),t.sort((t,e)=>$t(r[t],r[e]))),Rt(e,t)):e.sort(Pt(r))}function Pt(n=K){if(n===K)return $t;if("function"!=typeof n)throw new TypeError("compare is not a function");return(t,e)=>{var r=n(t,e);return r||0===r?r:(0===n(e,e))-(0===n(t,t))}}function $t(t,e){return(null==t||!(t<=t))-(null==e||!(e<=e))||(t<e?-1:e<t?1:0)}var jt=Array.prototype.slice;function Yt(t){return()=>t}var zt=Math.sqrt(50),Ut=Math.sqrt(10),Wt=Math.sqrt(2);function qt(r,n,t){var e,i,a,o,s=-1;if(t=+t,(r=+r)===(n=+n)&&0<t)return[r];if((e=n<r)&&(i=r,r=n,n=i),0===(o=Ht(r,n,t))||!isFinite(o))return[];if(0<o){let t=Math.round(r/o),e=Math.round(n/o);for(t*o<r&&++t,e*o>n&&--e,a=new Array(i=e-t+1);++s<i;)a[s]=(t+s)*o}else{o=-o;let t=Math.round(r*o),e=Math.round(n*o);for(t/o<r&&++t,e/o>n&&--e,a=new Array(i=e-t+1);++s<i;)a[s]=(t+s)/o}return e&&a.reverse(),a}function Ht(t,e,r){e=(e-t)/Math.max(0,r),t=Math.floor(Math.log(e)/Math.LN10),r=e/Math.pow(10,t);return 0<=t?(zt<=r?10:Ut<=r?5:Wt<=r?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(zt<=r?10:Ut<=r?5:Wt<=r?2:1)}function Vt(t,e,r){var r=Math.abs(e-t)/Math.max(0,r),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/n;return zt<=r?n*=10:Ut<=r?n*=5:Wt<=r&&(n*=2),e<t?-n:n}function Gt(t,e,r){let n;for(;;){var i=Ht(t,e,r);if(i===n||0===i||!isFinite(i))return[t,e];0<i?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),n=i}}function Xt(t){return Math.ceil(Math.log(pt(t))/Math.LN2)+1}function Zt(){var g=At,y=vt,m=Xt;function e(t){for(var e,r,n=(t=Array.isArray(t)?t:Array.from(t)).length,i=new Array(n),a=0;a<n;++a)i[a]=g(t[a],a,t);var o,s=y(i),c=s[0],l=s[1],u=m(i,c,l);Array.isArray(u)||(s=l,o=+u,y===vt&&([c,l]=Gt(c,l,o)),(u=qt(c,l,o))[0]<=c&&(r=Ht(c,l,o)),u[u.length-1]>=l&&(l<=s&&y===vt?(s=Ht(c,l,o),isFinite(s)&&(0<s?l=(Math.floor(l/s)+1)*s:s<0&&(l=(Math.ceil(l*-s)+1)/-s))):u.pop()));for(var h=u.length;u[0]<=c;)u.shift(),--h;for(;u[h-1]>l;)u.pop(),--h;var d,f,p=new Array(h+1);for(a=0;a<=h;++a)(d=p[a]=[]).x0=0<a?u[a-1]:c,d.x1=a<h?u[a]:l;if(isFinite(r)){if(0<r)for(a=0;a<n;++a)null!=(e=i[a])&&c<=e&&e<=l&&p[Math.min(h,Math.floor((e-c)/r))].push(t[a]);else if(r<0)for(a=0;a<n;++a)null!=(e=i[a])&&c<=e&&e<=l&&(f=Math.floor((c-e)*r),p[Math.min(h,f+(u[f]<=e))].push(t[a]))}else for(a=0;a<n;++a)null!=(e=i[a])&&c<=e&&e<=l&&p[st(u,e,0,h)].push(t[a]);return p}return e.value=function(t){return arguments.length?(g="function"==typeof t?t:Yt(t),e):g},e.domain=function(t){return arguments.length?(y="function"==typeof t?t:Yt([t[0],t[1]]),e):y},e.thresholds=function(t){return arguments.length?(m="function"==typeof t?t:Array.isArray(t)?Yt(jt.call(t)):Yt(t),e):m},e}function Kt(e,r){let n;if(void 0===r)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let t=-1;for(var i of e)null!=(i=r(i,++t,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Qt(t,e){let r,n=-1,i=-1;if(void 0===e)for(const o of t)++i,null!=o&&(r<o||void 0===r&&o>=o)&&(r=o,n=i);else for(var a of t)null!=(a=e(a,++i,t))&&(r<a||void 0===r&&a>=a)&&(r=a,n=i);return n}function Jt(e,r){let n;if(void 0===r)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let t=-1;for(var i of e)null!=(i=r(i,++t,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function te(t,e){let r,n=-1,i=-1;if(void 0===e)for(const o of t)++i,null!=o&&(r>o||void 0===r&&o>=o)&&(r=o,n=i);else for(var a of t)null!=(a=e(a,++i,t))&&(r>a||void 0===r&&a>=a)&&(r=a,n=i);return n}function ee(r,n,i=0,a=r.length-1,o){for(o=void 0===o?$t:Pt(o);i<a;){600<a-i&&(s=a-i+1,c=n-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),u=.5*Math.sqrt(u*l*(s-l)/s)*(c-s/2<0?-1:1),ee(r,n,Math.max(i,Math.floor(n-c*l/s+u)),Math.min(a,Math.floor(n+(s-c)*l/s+u)),o));var s,c,l,u,h=r[n];let t=i,e=a;for(re(r,i,n),0<o(r[a],h)&&re(r,i,a);t<e;){for(re(r,t,e),++t,--e;o(r[t],h)<0;)++t;for(;0<o(r[e],h);)--e}0===o(r[i],h)?re(r,i,e):re(r,++e,a),e<=n&&(i=e+1),n<=e&&(a=e-1)}return r}function re(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function ne(e,r=K){let n,i=!1;if(1===r.length){let t;for(const o of e){var a=r(o);(i?0<K(a,t):0===K(a,a))&&(n=o,t=a,i=!0)}}else for(const t of e)(i?0<r(t,n):0===r(t,t))&&(n=t,i=!0);return n}function ie(t,e,r){var n;if(r=(t=Float64Array.from(rt(t,r))).length)return(e=+e)<=0||r<2?Jt(t):1<=e?Kt(t):(r=(r-1)*e,(n=Kt(ee(t,e=Math.floor(r)).subarray(0,e+1)))+(Jt(t.subarray(e+1))-n)*(r-e))}function ae(t,e,r=et){var n,i;if(n=t.length)return(e=+e)<=0||n<2?+r(t[0],0,t):1<=e?+r(t[n-1],n-1,t):(n=(n-1)*e,(i=+r(t[e=Math.floor(n)],e,t))+(+r(t[e+1],e+1,t)-i)*(n-e))}function oe(r,t,e){if(e=(r=Float64Array.from(rt(r,e))).length)return(t=+t)<=0||e<2?te(r):1<=t?Qt(r):(t=Math.floor((e-1)*t),ne(ee(Uint32Array.from(r,(t,e)=>e),t,0,e-1,(t,e)=>$t(r[t],r[e])).subarray(0,t+1),t=>r[t]))}function se(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function ce(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((e-t)/r)),a=new Array(i);++n<i;)a[n]=t+n*r;return a}function le(t,e=K){if(1===e.length)return te(t,e);let r,n=-1,i=-1;for(const a of t)++i,(n<0?0===e(a,a):e(a,r)<0)&&(r=a,n=i);return n}P=ue(Math.random);function ue(o){return function(t,e=0,r=t.length){let n=r-(e=+e);for(;n;){var i=o()*n--|0,a=t[n+e];t[n+e]=t[i+e],t[i+e]=a}return t}}function he(t){if(!(i=t.length))return[];for(var e=-1,r=Jt(t,de),n=new Array(r);++e<r;)for(var i,a=-1,o=n[e]=new Array(i);++a<i;)o[a]=t[a][e];return n}function de(t){return t.length}function fe(t){return t instanceof wt?t:new wt(t)}function pe(t,e){var r=t[Symbol.iterator](),n=new Set;for(const s of e){var i,a=ge(s);if(!n.has(a))for(;{value:i,done:o}=r.next();){if(o)return!1;var o=ge(i);if(n.add(o),Object.is(a,o))break}}return!0}function ge(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ye(t){return t}var me=1,be=2,_e=3,ve=4,xe=1e-6;function ke(t){return"translate("+t+",0)"}function we(t){return"translate(0,"+t+")"}function Ee(e){return t=>+e(t)}function Te(e,r){return r=Math.max(0,e.bandwidth()-2*r)/2,e.round()&&(r=Math.round(r)),t=>+e(t)+r}function Ce(){return!this.__axis}function Se(f,p){var g=[],y=null,m=null,b=6,_=6,v=3,x=typeof window<"u"&&1<window.devicePixelRatio?0:.5,k=f===me||f===ve?-1:1,w=f===ve||f===be?"x":"y",E=f===me||f===_e?ke:we;function e(t){var e=null==y?p.ticks?p.ticks.apply(p,g):p.domain():y,r=null==m?p.tickFormat?p.tickFormat.apply(p,g):ye:m,n=Math.max(b,0)+v,i=p.range(),a=+i[0]+x,i=+i[i.length-1]+x,o=(p.bandwidth?Te:Ee)(p.copy(),x),s=t.selection?t.selection():t,c=s.selectAll(".domain").data([null]),l=(e=s.selectAll(".tick").data(e,p).order()).exit(),u=e.enter().append("g").attr("class","tick"),h=e.select("line"),d=e.select("text"),c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),e=e.merge(u),h=h.merge(u.append("line").attr("stroke","currentColor").attr(w+"2",k*b)),d=d.merge(u.append("text").attr("fill","currentColor").attr(w,k*n).attr("dy",f===me?"0em":f===_e?"0.71em":"0.32em"));t!==s&&(c=c.transition(t),e=e.transition(t),h=h.transition(t),d=d.transition(t),l=l.transition(t).attr("opacity",xe).attr("transform",function(t){return isFinite(t=o(t))?E(t+x):this.getAttribute("transform")}),u.attr("opacity",xe).attr("transform",function(t){var e=this.parentNode.__axis;return E((e&&isFinite(e=e(t))?e:o(t))+x)})),l.remove(),c.attr("d",f===ve||f===be?_?"M"+k*_+","+a+"H"+x+"V"+i+"H"+k*_:"M"+x+","+a+"V"+i:_?"M"+a+","+k*_+"V"+x+"H"+i+"V"+k*_:"M"+a+","+x+"H"+i),e.attr("opacity",1).attr("transform",function(t){return E(o(t)+x)}),h.attr(w+"2",k*b),d.attr(w,k*n).text(r),s.filter(Ce).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",f===be?"start":f===ve?"end":"middle"),s.each(function(){this.__axis=o})}return e.scale=function(t){return arguments.length?(p=t,e):p},e.ticks=function(){return g=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(g=null==t?[]:Array.from(t),e):g.slice()},e.tickValues=function(t){return arguments.length?(y=null==t?null:Array.from(t),e):y&&y.slice()},e.tickFormat=function(t){return arguments.length?(m=t,e):m},e.tickSize=function(t){return arguments.length?(b=_=+t,e):b},e.tickSizeInner=function(t){return arguments.length?(b=+t,e):b},e.tickSizeOuter=function(t){return arguments.length?(_=+t,e):_},e.tickPadding=function(t){return arguments.length?(v=+t,e):v},e.offset=function(t){return arguments.length?(x=+t,e):x},e}function Ae(t){return Se(me,t)}function Me(t){return Se(_e,t)}var Ne={value:()=>{}};function De(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Le(n)}function Le(t){this._=t}function Be(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=Ne,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}Le.prototype=De.prototype={constructor:Le,on:function(t,e){var r,n,i=this._,a=(n=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(0<=r&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=a[o]).type)i[r]=Be(i[r],t.name,e);else if(null==e)for(r in i)i[r]=Be(i[r],t.name,null);return this}for(;++o<s;)if(r=(r=(t=a[o]).type)&&function(t,e){for(var r,n=0,i=t.length;n<i;++n)if((r=t[n]).name===e)return r.value}(i[r],t.name))return r},copy:function(){var t,e={},r=this._;for(t in r)e[t]=r[t].slice();return new Le(e)},call:function(t,e){if(0<(r=arguments.length-2))for(var r,n,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,r=(n=this._[t]).length;a<r;++a)n[a].value.apply(e,i)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}};var Oe="http://www.w3.org/1999/xhtml";const Ie={svg:"http://www.w3.org/2000/svg",xhtml:Oe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Re(t){var e=t+="",r=e.indexOf(":");return 0<=r&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),Ie.hasOwnProperty(e)?{space:Ie[e],local:t}:t}function Fe(t){t=Re(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(r){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Oe&&t.documentElement.namespaceURI===Oe?t.createElement(r):t.createElementNS(e,r)}})(t)}function Pe(){}function $e(t){return null==t?Pe:function(){return this.querySelector(t)}}function je(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Ye(){return[]}function ze(t){return null==t?Ye:function(){return this.querySelectorAll(t)}}function Ue(t){return function(){return this.matches(t)}}function We(e){return function(t){return t.matches(e)}}var qe=Array.prototype.find;function He(){return this.firstElementChild}var Ve=Array.prototype.filter;function Ge(){return Array.from(this.children)}function Xe(t){return new Array(t.length)}function Ze(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Ke(t,e,r,n,i,a){for(var o,s=0,c=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],n[s]=o):r[s]=new Ze(t,a[s]);for(;s<c;++s)(o=e[s])&&(i[s]=o)}function Qe(t,e,r,n,i,a,o){for(var s,c,l=new Map,u=e.length,h=a.length,d=new Array(u),f=0;f<u;++f)(s=e[f])&&(d[f]=c=o.call(s,s.__data__,f,e)+"",l.has(c)?i[f]=s:l.set(c,s));for(f=0;f<h;++f)c=o.call(t,a[f],f,a)+"",(s=l.get(c))?((n[f]=s).__data__=a[f],l.delete(c)):r[f]=new Ze(t,a[f]);for(f=0;f<u;++f)(s=e[f])&&l.get(d[f])===s&&(i[f]=s)}function Je(t){return t.__data__}function tr(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function er(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function rr(t,e){return t.style.getPropertyValue(e)||er(t).getComputedStyle(t,null).getPropertyValue(e)}function nr(t){return t.trim().split(/^|\s+/)}function ir(t){return t.classList||new ar(t)}function ar(t){this._node=t,this._names=nr(t.getAttribute("class")||"")}function or(t,e){for(var r=ir(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function sr(t,e){for(var r=ir(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function cr(){this.textContent=""}function lr(){this.innerHTML=""}function ur(){this.nextSibling&&this.parentNode.appendChild(this)}function hr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dr(){return null}function fr(){var t=this.parentNode;t&&t.removeChild(this)}function pr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yr(a){return function(){var t=this.__on;if(t){for(var e,r=0,n=-1,i=t.length;r<i;++r)e=t[r],a.type&&e.type!==a.type||e.name!==a.name?t[++n]=e:this.removeEventListener(e.type,e.listener,e.options);++n?t.length=n:delete this.__on}}}function mr(o,s,c){return function(){function t(t){r.call(this,t,this.__data__)}var e,r,n=this.__on;r=s;if(n)for(var i=0,a=n.length;i<a;++i)if((e=n[i]).type===o.type&&e.name===o.name)return this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=t,e.options=c),void(e.value=s);this.addEventListener(o.type,t,c),e={type:o.type,name:o.name,value:s,listener:t,options:c},n?n.push(e):this.__on=[e]}}function br(t,e,r){var n=er(t),i=n.CustomEvent;"function"==typeof i?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}Ze.prototype={constructor:Ze,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ar.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var _r=[null];function vr(t,e){this._groups=t,this._parents=e}function xr(){return new vr([[document.documentElement]],_r)}function H(t){return"string"==typeof t?new vr([[document.querySelector(t)]],[document.documentElement]):new vr([[t]],_r)}vr.prototype=xr.prototype={constructor:vr,select:function(t){"function"!=typeof t&&(t=$e(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,o,s=e[i],c=s.length,l=n[i]=new Array(c),u=0;u<c;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),l[u]=o);return new vr(n,this._parents)},selectAll:function(t){var e;t="function"==typeof t?(e=t,function(){return je(e.apply(this,arguments))}):ze(t);for(var r=this._groups,n=r.length,i=[],a=[],o=0;o<n;++o)for(var s,c=r[o],l=c.length,u=0;u<l;++u)(s=c[u])&&(i.push(t.call(s,s.__data__,u,c)),a.push(s));return new vr(i,a)},selectChild:function(t){return this.select(null==t?He:(e="function"==typeof t?t:We(t),function(){return qe.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?Ge:(e="function"==typeof t?t:We(t),function(){return Ve.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=Ue(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,o=e[i],s=o.length,c=n[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new vr(n,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Je);var r,n=e?Qe:Ke,i=this._parents,a=this._groups;"function"!=typeof t&&(r=t,t=function(){return r});for(var o=a.length,s=new Array(o),c=new Array(o),l=new Array(o),u=0;u<o;++u){var h=i[u],d=a[u],f=d.length,p="object"==typeof(p=t.call(h,h&&h.__data__,u,i))&&"length"in p?p:Array.from(p),g=p.length,y=c[u]=new Array(g),m=s[u]=new Array(g);n(h,d,y,m,l[u]=new Array(f),p,e);for(var b,_,v=0,x=0;v<g;++v)if(b=y[v]){for(x<=v&&(x=v+1);!(_=m[x])&&++x<g;);b._next=_||null}}return(s=new vr(s,i))._enter=c,s._exit=l,s},enter:function(){return new vr(this._enter||this._groups.map(Xe),this._parents)},exit:function(){return new vr(this._exit||this._groups.map(Xe),this._parents)},join:function(t,e,r){var n=this.enter(),i=this,a=this.exit(),n="function"==typeof t?(n=t(n))&&n.selection():n.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==r?a.remove():r(a),n&&i?n.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,r=t._groups,n=e.length,t=r.length,i=Math.min(n,t),a=new Array(n),o=0;o<i;++o)for(var s,c=e[o],l=r[o],u=c.length,h=a[o]=new Array(u),d=0;d<u;++d)(s=c[d]||l[d])&&(h[d]=s);for(;o<n;++o)a[o]=e[o];return new vr(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n,i=t[e],a=i.length-1,o=i[a];0<=--a;)(n=i[a])&&(o&&4^n.compareDocumentPosition(o)&&o.parentNode.insertBefore(n,o),o=n);return this},sort:function(r){function t(t,e){return t&&e?r(t.__data__,e.__data__):!t-!e}r=r||tr;for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a){for(var o,s=e[a],c=s.length,l=i[a]=new Array(c),u=0;u<c;++u)(o=s[u])&&(l[u]=o);l.sort(t)}return new vr(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i,a=e[r],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var r,t=Re(t);return arguments.length<2?(r=this.node(),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)):this.each((null==e?t.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?t.local?function(e,r){return function(){var t=r.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,r){return function(){var t=r.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:t.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(t,e))},style:function(t,e,r){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,r,n){return function(){var t=r.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,n)}}:function(t,e,r){return function(){this.style.setProperty(t,e,r)}})(t,e,null==r?"":r)):rr(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,r){return function(){var t=r.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var r=nr(t+"");if(arguments.length<2){for(var n=ir(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?or:sr)(this,t)}}:e?function(t){return function(){or(this,t)}}:function(t){return function(){sr(this,t)}})(r,e))},text:function(t){return arguments.length?this.each(null==t?cr:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?lr:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(ur)},lower:function(){return this.each(hr)},append:function(t){var e="function"==typeof t?t:Fe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var r="function"==typeof t?t:Fe(t),n=null==e?dr:"function"==typeof e?e:$e(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(fr)},clone:function(t){return this.select(t?gr:pr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,r){var n,i,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");return 0<=r&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}}),o=a.length;if(!(arguments.length<2)){for(s=e?mr:yr,n=0;n<o;++n)this.each(s(a[n],e,r));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(n=0,c=s[l];n<o;++n)if((i=a[n]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return br(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return br(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n,i=t[e],a=0,o=i.length;a<o;++a)(n=i[a])&&(yield n)}};var kr=0;function wr(){return new Er}function Er(){this._="@"+(++kr).toString(36)}function Tr(t){for(var e;e=t.sourceEvent;)t=e;return t}function Cr(t,e){if(t=Tr(t),e=void 0===e?t.currentTarget:e){var r=e.ownerSVGElement||e;if(r.createSVGPoint)return(r=r.createSVGPoint()).x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y];if(e.getBoundingClientRect)return r=e.getBoundingClientRect(),[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}return[t.pageX,t.pageY]}function Sr(t){return"string"==typeof t?new vr([document.querySelectorAll(t)],[document.documentElement]):new vr([je(t)],_r)}const Ar={passive:!(Er.prototype=wr.prototype={constructor:Er,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}})},Mr={capture:!0,passive:!1};function Lr(t){t.stopImmediatePropagation()}function Br(t){t.preventDefault(),t.stopImmediatePropagation()}function Or(t){var e=t.document.documentElement,t=H(t).on("dragstart.drag",Br,Mr);"onselectstart"in e?t.on("selectstart.drag",Br,Mr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ir(t,e){var r=t.document.documentElement,n=H(t).on("dragstart.drag",null);e&&(n.on("click.drag",Br,Mr),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Rr=t=>()=>t;function Fr(t,{sourceEvent:e,subject:r,target:n,identifier:i,active:a,x:o,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}function Pr(t){return!t.ctrlKey&&!t.button}function $r(){return this.parentNode}function jr(t,e){return null==e?{x:t.x,y:t.y}:e}function Yr(){return navigator.maxTouchPoints||"ontouchstart"in this}function zr(t,e,r){(t.prototype=e.prototype=r).constructor=t}function Ur(t,e){var r,n=Object.create(t.prototype);for(r in e)n[r]=e[r];return n}function Wr(){}Fr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var qr=1/.7,Hr="\\s*([+-]?\\d+)\\s*",Vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xr=/^#([0-9a-f]{3,8})$/,Zr=new RegExp(`^rgb\\(${Hr},${Hr},${Hr}\\)$`),Kr=new RegExp(`^rgb\\(${Gr},${Gr},${Gr}\\)$`),Qr=new RegExp(`^rgba\\(${Hr},${Hr},${Hr},${Vr}\\)$`),Jr=new RegExp(`^rgba\\(${Gr},${Gr},${Gr},${Vr}\\)$`),tn=new RegExp(`^hsl\\(${Vr},${Gr},${Gr}\\)$`),en=new RegExp(`^hsla\\(${Vr},${Gr},${Gr},${Vr}\\)$`),rn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function nn(){return this.rgb().formatHex()}function an(){return this.rgb().formatRgb()}function on(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Xr.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?sn(e):3===r?new hn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?cn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?cn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Zr.exec(t))?new hn(e[1],e[2],e[3],1):(e=Kr.exec(t))?new hn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Qr.exec(t))?cn(e[1],e[2],e[3],e[4]):(e=Jr.exec(t))?cn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=tn.exec(t))?mn(e[1],e[2]/100,e[3]/100,1):(e=en.exec(t))?mn(e[1],e[2]/100,e[3]/100,e[4]):rn.hasOwnProperty(t)?sn(rn[t]):"transparent"===t?new hn(NaN,NaN,NaN,0):null}function sn(t){return new hn(t>>16&255,t>>8&255,255&t,1)}function cn(t,e,r,n){return new hn(t=n<=0?e=r=NaN:t,e,r,n)}function ln(t){return(t=t instanceof Wr?t:on(t))?new hn((t=t.rgb()).r,t.g,t.b,t.opacity):new hn}function un(t,e,r,n){return 1===arguments.length?ln(t):new hn(t,e,r,null==n?1:n)}function hn(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function dn(){return"#"+yn(this.r)+yn(this.g)+yn(this.b)}function fn(){var t=pn(this.opacity);return(1===t?"rgb(":"rgba(")+gn(this.r)+`, ${gn(this.g)}, `+gn(this.b)+(1===t?")":`, ${t})`)}function pn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yn(t){return((t=gn(t))<16?"0":"")+t.toString(16)}function mn(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||1<=r?t=e=NaN:e<=0&&(t=NaN),new vn(t,e,r,n)}function bn(t){var e,r,n,i,a,o,s,c;return t instanceof vn?new vn(t.h,t.s,t.l,t.opacity):(t=t instanceof Wr?t:on(t))?t instanceof vn?t:(e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=NaN,c=((a=Math.max(e,r,n))+i)/2,(s=a-i)?(o=e===a?(r-n)/s+6*(r<n):r===a?(n-e)/s+2:(e-r)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=0<c&&c<1?0:o,new vn(o,s,c,t.opacity)):new vn}function _n(t,e,r,n){return 1===arguments.length?bn(t):new vn(t,e,r,null==n?1:n)}function vn(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function xn(t){return(t=(t||0)%360)<0?t+360:t}function kn(t){return Math.max(0,Math.min(1,t||0))}function wn(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}zr(Wr,on,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nn,formatHex:nn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return bn(this).formatHsl()},formatRgb:an,toString:an}),zr(hn,un,Ur(Wr,{brighter(t){return t=null==t?qr:Math.pow(qr,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new hn(gn(this.r),gn(this.g),gn(this.b),pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dn,formatHex:dn,formatHex8:function(){return"#"+yn(this.r)+yn(this.g)+yn(this.b)+yn(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:fn,toString:fn})),zr(vn,_n,Ur(Wr,{brighter(t){return t=null==t?qr:Math.pow(qr,t),new vn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new vn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,e=r+(r<.5?r:1-r)*e,r=2*r-e;return new hn(wn(240<=t?t-240:120+t,r,e),wn(t,r,e),wn(t<120?240+t:t-120,r,e),this.opacity)},clamp(){return new vn(xn(this.h),kn(this.s),kn(this.l),pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var t=pn(this.opacity);return(1===t?"hsl(":"hsla(")+xn(this.h)+`, ${100*kn(this.s)}%, ${100*kn(this.l)}%`+(1===t?")":`, ${t})`)}}));const En=Math.PI/180,Tn=180/Math.PI,Cn=.96422,Sn=1,An=.82521,Mn=4/29,Nn=6/29,Dn=3*Nn*Nn,Ln=Nn*Nn*Nn;function Bn(t){var e,r,n,i,a,o;return t instanceof In?new In(t.l,t.a,t.b,t.opacity):t instanceof zn?Un(t):(i=Rn((.2225045*(e=$n((t=t instanceof hn?t:ln(t)).r))+.7168786*(r=$n(t.g))+.0606169*(n=$n(t.b)))/Sn),e===r&&r===n?a=o=i:(a=Rn((.4360747*e+.3850649*r+.1430804*n)/Cn),o=Rn((.0139322*e+.0971045*r+.7141733*n)/An)),new In(116*i-16,500*(a-i),200*(i-o),t.opacity))}function On(t,e,r,n){return 1===arguments.length?Bn(t):new In(t,e,r,null==n?1:n)}function In(t,e,r,n){this.l=+t,this.a=+e,this.b=+r,this.opacity=+n}function Rn(t){return t>Ln?Math.pow(t,1/3):t/Dn+Mn}function Fn(t){return t>Nn?t*t*t:Dn*(t-Mn)}function Pn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function $n(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function jn(t){var e;return t instanceof zn?new zn(t.h,t.c,t.l,t.opacity):0===(t=t instanceof In?t:Bn(t)).a&&0===t.b?new zn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity):new zn((e=Math.atan2(t.b,t.a)*Tn)<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Yn(t,e,r,n){return 1===arguments.length?jn(t):new zn(t,e,r,null==n?1:n)}function zn(t,e,r,n){this.h=+t,this.c=+e,this.l=+r,this.opacity=+n}function Un(t){var e;return isNaN(t.h)?new In(t.l,0,0,t.opacity):(e=t.h*En,new In(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity))}zr(In,On,Ur(Wr,{brighter(t){return new In(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new In(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return new hn(Pn(3.1338561*(e=Cn*Fn(e))-1.6168667*(t=Sn*Fn(t))-.4906146*(r=An*Fn(r))),Pn(-.9787684*e+1.9161415*t+.033454*r),Pn(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),zr(zn,Yn,Ur(Wr,{brighter(t){return new zn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new zn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Un(this).rgb()}}));var Wn=1.78277,qn=-.29227,Hn=-.90649,Vn=1.97294,Gn=Vn*Hn,Xn=Vn*Wn,Zn=Wn*qn- -.14861*Hn;function Kn(t,e,r,n){return 1===arguments.length?(i=t)instanceof Qn?new Qn(i.h,i.s,i.l,i.opacity):(a=(i=i instanceof hn?i:ln(i)).r/255,o=i.g/255,c=i.b/255,c=(Vn*(o-(a=(Zn*c+Gn*a-Xn*o)/(Zn+Gn-Xn)))-qn*(o=c-a))/Hn,new Qn((c=(s=Math.sqrt(c*c+o*o)/(Vn*a*(1-a)))?Math.atan2(c,o)*Tn-120:NaN)<0?c+360:c,s,a,i.opacity)):new Qn(t,e,r,null==n?1:n);var i,a,o,s,c}function Qn(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function Jn(t,e,r,n,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*r+(1+3*t+3*a-3*o)*n+o*i)/6}function ti(o){var s=o.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),r=o[e],n=o[e+1],i=0<e?o[e-1]:2*r-n,a=e<s-1?o[e+2]:2*n-r;return Jn((t-e/s)*s,i,r,n,a)}}function ei(o){var s=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),r=o[(e+s-1)%s],n=o[e%s],i=o[(e+1)%s],a=o[(e+2)%s];return Jn((t-e/s)*s,r,n,i,a)}}zr(Qn,Kn,Ur(Wr,{brighter(t){return t=null==t?qr:Math.pow(qr,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*En,e=+this.l,r=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),t=Math.sin(t);return new hn(255*(e+r*(-.14861*n+Wn*t)),255*(e+r*(qn*n+Hn*t)),255*(e+Vn*n*r),this.opacity)}}));const ri=t=>()=>t;function ni(e,r){return function(t){return e+t*r}}function ii(t,e){var r=e-t;return r?ni(t,180<r||r<-180?r-360*Math.round(r/360):r):ri(isNaN(t)?e:t)}function ai(a){return 1==(a=+a)?oi:function(t,e){return e-t?(r=t,n=e,i=a,r=Math.pow(r,i),n=Math.pow(n,i)-r,i=1/i,function(t){return Math.pow(r+t*n,i)}):ri(isNaN(t)?e:t);var r,n,i}}function oi(t,e){var r=e-t;return r?ni(t,r):ri(isNaN(t)?e:t)}const si=function t(e){var o=ai(e);function r(e,t){var r=o((e=un(e)).r,(t=un(t)).r),n=o(e.g,t.g),i=o(e.b,t.b),a=oi(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=n(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=t,r}(1);function ci(s){return function(t){for(var e,r=t.length,n=new Array(r),i=new Array(r),a=new Array(r),o=0;o<r;++o)e=un(t[o]),n[o]=e.r||0,i[o]=e.g||0,a[o]=e.b||0;return n=s(n),i=s(i),a=s(a),e.opacity=1,function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e+""}}}var li=ci(ti),Hr=ci(ei);function ui(e,r){r=r||[];var n,i=e?Math.min(r.length,e.length):0,a=r.slice();return function(t){for(n=0;n<i;++n)a[n]=e[n]*(1-t)+r[n]*t;return a}}function hi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function di(t,e){for(var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o=0;o<n;++o)i[o]=_i(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(t){for(o=0;o<n;++o)a[o]=i[o](t);return a}}function fi(e,r){var n=new Date;return e=+e,r=+r,function(t){return n.setTime(e*(1-t)+r*t),n}}function pi(e,r){return e=+e,r=+r,function(t){return e*(1-t)+r*t}}function gi(t,e){var r,n={},i={};for(r in null!==t&&"object"==typeof t||(t={}),e=null!==e&&"object"==typeof e?e:{})r in t?n[r]=_i(t[r],e[r]):i[r]=e[r];return function(t){for(r in n)i[r]=n[r](t);return i}}var yi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mi=new RegExp(yi.source,"g");function bi(t,n){var e,r,i,a,o,s=yi.lastIndex=mi.lastIndex=0,c=-1,l=[],u=[];for(t+="",n+="";(e=yi.exec(t))&&(r=mi.exec(n));)(i=r.index)>s&&(i=n.slice(s,i),l[c]?l[c]+=i:l[++c]=i),(e=e[0])===(r=r[0])?l[c]?l[c]+=r:l[++c]=r:(l[++c]=null,u.push({i:c,x:pi(e,r)})),s=mi.lastIndex;return s<n.length&&(i=n.slice(s),l[c]?l[c]+=i:l[++c]=i),l.length<2?u[0]?(o=u[0].x,function(t){return o(t)+""}):(a=n,function(){return a}):(n=u.length,function(t){for(var e,r=0;r<n;++r)l[(e=u[r]).i]=e.x(t);return l.join("")})}function _i(t,e){var r=typeof e;return null==e||"boolean"==r?ri(e):("number"==r?pi:"string"==r?(r=on(e))?(e=r,si):bi:e instanceof on?si:e instanceof Date?fi:hi(e)?ui:Array.isArray(e)?di:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?gi:pi)(t,e)}function vi(e,r){return e=+e,r=+r,function(t){return Math.round(e*(1-t)+r*t)}}var xi,ki=180/Math.PI,wi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ei(t,e,r,n,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*r+e*n)&&(r-=t*c,n-=e*c),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,c/=s),t*n<e*r&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*ki,skewX:Math.atan(c)*ki,scaleX:o,scaleY:s}}function Ti(h,d,f,p){function g(t){return t.length?t.pop()+" ":""}return function(t,e){var r,n,i,a,o,s,c,l=[],u=[];return t=h(t),e=h(e),r=t.translateX,n=t.translateY,i=e.translateX,a=e.translateY,o=l,s=u,r!==i||n!==a?(c=o.push("translate(",null,d,null,f),s.push({i:c-4,x:pi(r,i)},{i:c-2,x:pi(n,a)})):(i||a)&&o.push("translate("+i+d+a+f),s=t.rotate,r=e.rotate,c=l,n=u,s!==r?(180<s-r?r+=360:180<r-s&&(s+=360),n.push({i:c.push(g(c)+"rotate(",null,p)-2,x:pi(s,r)})):r&&c.push(g(c)+"rotate("+r+p),o=t.skewX,i=e.skewX,a=l,n=u,o!==i?n.push({i:a.push(g(a)+"skewX(",null,p)-2,x:pi(o,i)}):i&&a.push(g(a)+"skewX("+i+p),s=t.scaleX,r=t.scaleY,n=e.scaleX,o=e.scaleY,a=l,i=u,s!==n||r!==o?(t=a.push(g(a)+"scale(",null,",",null,")"),i.push({i:t-4,x:pi(s,n)},{i:t-2,x:pi(r,o)})):1===n&&1===o||a.push(g(a)+"scale("+n+","+o+")"),function(t){for(var e,r=-1,n=u.length;++r<n;)l[(e=u[r]).i]=e.x(t);return l.join("")}}}var Ci=Ti(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?wi:Ei(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Si=Ti(function(t){return null!=t&&((xi=xi||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),t=xi.transform.baseVal.consolidate())?Ei((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):wi},", ",")",")");function Ai(t){return((t=Math.exp(t))+1/t)/2}const Mi=function r(h,d,f){function t(t,e){var n,i,a,o=t[0],s=t[1],c=t[2],t=e[0],r=e[1],e=e[2],l=t-o,u=r-s,t=l*l+u*u;return(e=t<1e-12?(a=Math.log(e/c)/h,function(t){return[o+t*l,s+t*u,c*Math.exp(h*t*a)]}):(n=Math.sqrt(t),r=(e*e-c*c+f*t)/(2*c*d*n),t=(e*e-c*c-f*t)/(2*e*d*n),i=Math.log(Math.sqrt(r*r+1)-r),a=(Math.log(Math.sqrt(t*t+1)-t)-i)/h,function(t){var t=t*a,e=Ai(i),r=c/(d*n)*(e*(r=h*t+i,((r=Math.exp(2*r))-1)/(r+1))-(r=i,((r=Math.exp(i))-1/r)/2));return[o+r*l,s+r*u,c*e/Ai(h*t+i)]})).duration=1e3*a*h/Math.SQRT2,e}return t.rho=function(t){var t=Math.max(.001,+t),e=t*t;return r(t,e,e*e)},t}(Math.SQRT2,2,4);function Ni(o){return function(e,t){var r=o((e=_n(e)).h,(t=_n(t)).h),n=oi(e.s,t.s),i=oi(e.l,t.l),a=oi(e.opacity,t.opacity);return function(t){return e.h=r(t),e.s=n(t),e.l=i(t),e.opacity=a(t),e+""}}}Gr=Ni(ii),Vr=Ni(oi);function Di(o){return function(e,t){var r=o((e=Yn(e)).h,(t=Yn(t)).h),n=oi(e.c,t.c),i=oi(e.l,t.l),a=oi(e.opacity,t.opacity);return function(t){return e.h=r(t),e.c=n(t),e.l=i(t),e.opacity=a(t),e+""}}}const Li=Di(ii);var Bi=Di(oi);function Oi(s){return function t(o){function e(e,t){var r=s((e=Kn(e)).h,(t=Kn(t)).h),n=oi(e.s,t.s),i=oi(e.l,t.l),a=oi(e.opacity,t.opacity);return function(t){return e.h=r(t),e.s=n(t),e.l=i(Math.pow(t,o)),e.opacity=a(t),e+""}}return o=+o,e.gamma=t,e}(1)}var Ii=Oi(ii),Ri=Oi(oi);function Fi(t,e){void 0===e&&(e=t,t=_i);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(t){var e=Math.max(0,Math.min(n-1,Math.floor(t*=n)));return a[e](t-e)}}var Pi,$i,ji=0,Yi=0,zi=0,Ui=1e3,Wi=0,qi=0,Hi=0,Vi="object"==typeof performance&&performance.now?performance:Date,Gi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return qi||(Gi(Zi),qi=Vi.now()+Hi)}function Zi(){qi=0}function Ki(){this._call=this._time=this._next=null}function Qi(t,e,r){var n=new Ki;return n.restart(t,e,r),n}function Ji(){Xi(),++ji;for(var t,e=Pi;e;)0<=(t=qi-e._time)&&e._call.call(void 0,t),e=e._next;--ji}function ta(){qi=(Wi=Vi.now())+Hi,ji=Yi=0;try{Ji()}finally{for(var t,e,r=Pi,n=1/(ji=0);r;)r=r._call?(n>r._time&&(n=r._time),(t=r)._next):(e=r._next,r._next=null,t?t._next=e:Pi=e);$i=t,ra(n),qi=0}}function ea(){var t=Vi.now(),e=t-Wi;Ui<e&&(Hi-=e,Wi=t)}function ra(t){ji||(Yi=Yi&&clearTimeout(Yi),24<t-qi?(t<1/0&&(Yi=setTimeout(ta,t-Vi.now()-Hi)),zi=zi&&clearInterval(zi)):(zi||(Wi=Vi.now(),zi=setInterval(ea,Ui)),ji=1,Gi(ta)))}function na(e,r,t){var n=new Ki;return r=null==r?0:+r,n.restart(t=>{n.stop(),e(t+r)},r,t),n}Ki.prototype=Qi.prototype={constructor:Ki,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?Xi():+r)+(null==e?0:+e),this._next||$i===this||($i?$i._next=this:Pi=this,$i=this),this._call=t,this._time=r,ra()},stop:function(){this._call&&(this._call=null,this._time=1/0,ra())}};var ia=De("start","end","cancel","interrupt"),aa=[],oa=0,sa=1,ca=2,la=3,ua=4,ha=5,da=6;function fa(t,e,r,n,i,a){var o,s,c,l,u,h=t.__transition;if(h){if(r in h)return}else t.__transition={};function d(t){var e,r,n,i;if(c.state!==sa)return p();for(e in u)if(i=u[e],i.name===c.name){if(i.state===la)return na(d);i.state===ua?(i.state=da,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete u[e]):+e<s&&(i.state=da,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete u[e])}if(na(function(){c.state===la&&(c.state=ua,c.timer.restart(f,c.delay,c.time),f(t))}),c.state=ca,c.on.call("start",o,o.__data__,c.index,c.group),c.state===ca){for(c.state=la,l=new Array(n=c.tween.length),e=0,r=-1;e<n;++e)(i=c.tween[e].value.call(o,o.__data__,c.index,c.group))&&(l[++r]=i);l.length=r+1}}function f(t){for(var e=t<c.duration?c.ease.call(null,t/c.duration):(c.timer.restart(p),c.state=ha,1),r=-1,n=l.length;++r<n;)l[r].call(o,e);c.state===ha&&(c.on.call("end",o,o.__data__,c.index,c.group),p())}function p(){for(var t in c.state=da,c.timer.stop(),delete u[s],u)return;delete o.__transition}o=t,s=r,c={name:e,index:n,group:i,on:ia,tween:aa,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:oa},((u=o.__transition)[s]=c).timer=Qi(function(t){c.state=sa,c.timer.restart(d,c.delay,c.time),c.delay<=t&&d(t-c.delay)},0,c.time)}function pa(t,e){t=ya(t,e);if(t.state>oa)throw new Error("too late; already scheduled");return t}function ga(t,e){t=ya(t,e);if(t.state>la)throw new Error("too late; already running");return t}function ya(t,e){t=t.__transition;if(t=t&&t[e])return t;throw new Error("transition not found")}function ma(t,e){var r,n,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(r=a[i]).name!==e?o=!1:(n=r.state>ca&&r.state<ha,r.state=da,r.timer.stop(),r.on.call(n?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete a[i]);o&&delete t.__transition}}function ba(t,e,r){var n=t._id;return t.each(function(){var t=ga(this,n);(t.value||(t.value={}))[e]=r.apply(this,arguments)}),function(t){return ya(t,n).value[e]}}function _a(t,e){var r;return("number"==typeof e?pi:e instanceof on?si:(r=on(e))?(e=r,si):bi)(t,e)}function va(n,i){var a,o;function t(){var e,r,t=i.apply(this,arguments);return a=t!==o?(o=t)&&(e=n,r=t,function(t){this.setAttributeNS(e.space,e.local,r.call(this,t))}):a}return t._value=i,t}function xa(n,i){var a,o;function t(){var e,r,t=i.apply(this,arguments);return a=t!==o?(o=t)&&(e=n,r=t,function(t){this.setAttribute(e,r.call(this,t))}):a}return t._value=i,t}var ka=xr.prototype.constructor;function wa(t){return function(){this.style.removeProperty(t)}}function Ea(i,a,o){var s,c;function t(){var e,r,n,t=a.apply(this,arguments);return s=t!==c?(c=t)&&(e=i,r=t,n=o,function(t){this.style.setProperty(e,r.call(this,t),n)}):s}return t._value=a,t}function Ta(r){var n,i;function t(){var e,t=r.apply(this,arguments);return n=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):n}return t._value=r,t}var Ca=0;function Sa(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Aa(t){return xr().transition(t)}var Ma=xr.prototype;Sa.prototype=Aa.prototype={constructor:Sa,select:function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=$e(t));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s,c,l=n[o],u=l.length,h=a[o]=new Array(u),d=0;d<u;++d)(s=l[d])&&(c=t.call(s,s.__data__,d,l))&&("__data__"in s&&(c.__data__=s.__data__),h[d]=c,fa(h[d],e,r,d,h,ya(s,r)));return new Sa(a,this._parents,e,r)},selectAll:function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=ze(t));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var c,l=n[s],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var d,f=t.call(c,c.__data__,h,l),p=ya(c,r),g=0,y=f.length;g<y;++g)(d=f[g])&&fa(d,e,r,g,f,p);a.push(f),o.push(c)}return new Sa(a,o,e,r)},selectChild:Ma.selectChild,selectChildren:Ma.selectChildren,filter:function(t){"function"!=typeof t&&(t=Ue(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,o=e[i],s=o.length,c=n[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new Sa(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,t=r.length,i=Math.min(n,t),a=new Array(n),o=0;o<i;++o)for(var s,c=e[o],l=r[o],u=c.length,h=a[o]=new Array(u),d=0;d<u;++d)(s=c[d]||l[d])&&(h[d]=s);for(;o<n;++o)a[o]=e[o];return new Sa(a,this._parents,this._name,this._id)},selection:function(){return new ka(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,r=++Ca,n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],c=s.length,l=0;l<c;++l)(o=s[l])&&fa(o,t,r,l,s,{time:(o=ya(o,e)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new Sa(n,this._parents,t,r)},call:Ma.call,nodes:Ma.nodes,node:Ma.node,size:Ma.size,empty:Ma.empty,each:Ma.each,on:function(t,e){var r,n,i,a,o,s,c=this._id;return arguments.length<2?ya(this.node(),c).on.on(t):this.each((r=c,i=e,s=((n=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?pa:ga,function(){var t=s(this,r),e=t.on;e!==a&&(o=(a=e).copy()).on(n,i),t.on=o}))},attr:function(t,e){var r=Re(t),n="transform"===r?Si:_a;return this.attrTween(t,"function"==typeof e?(r.local?function(n,i,a){var o,s,c;return function(){var t,e,r=a(this);return null==r?void this.removeAttributeNS(n.space,n.local):(t=this.getAttributeNS(n.space,n.local))===(e=r+"")?null:t===o&&e===s?c:(s=e,c=i(o=t,r))}}:function(n,i,a){var o,s,c;return function(){var t,e,r=a(this);return null==r?void this.removeAttribute(n):(t=this.getAttribute(n))===(e=r+"")?null:t===o&&e===s?c:(s=e,c=i(o=t,r))}})(r,n,ba(this,"attr."+t,e)):null==e?(r.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(r):(r.local?function(e,r,n){var i,a,o=n+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?a:a=r(i=t,n)}}:function(e,r,n){var i,a,o=n+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?a:a=r(i=t,n)}})(r,n,e))},attrTween:function(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return t=Re(t),this.tween(r,(t.local?va:xa)(t,e))},style:function(t,e,r){var n,i,a,o,s,c,l,u,h,d,f,p,g,y,m,b,_,v,x,k,w,E,T,C,S,A="transform"==(t+="")?Ci:_a;return null==e?this.styleTween(t,(w=t,E=A,function(){var t=rr(this,w),e=(this.style.removeProperty(w),rr(this,w));return t===e?null:t===T&&e===C?S:S=E(T=t,C=e)})).on("end.style."+t,wa(t)):"function"==typeof e?this.styleTween(t,(b=A,_=ba(this,"style."+(m=t),e),function(){var t=rr(this,m),e=_(this),r=e+"";return null==e&&(this.style.removeProperty(m),r=e=rr(this,m)),t===r?null:t===v&&r===x?k:(x=r,k=b(v=t,e))})).each((l=this._id,y="end."+(g="style."+(u=t)),function(){var t=ga(this,l),e=t.on,r=null==t.value[g]?p=p||wa(u):void 0;e===h&&f===r||(d=(h=e).copy()).on(y,f=r),t.on=d})):this.styleTween(t,(n=t,i=A,c=(a=e)+"",function(){var t=rr(this,n);return t===c?null:t===o?s:s=i(o=t,a)}),r).on("end.style."+t,null)},styleTween:function(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,Ea(t,e,null==r?"":r))},text:function(t){return this.tween("text","function"==typeof t?(r=ba(this,"text",t),function(){var t=r(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,r},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ta(t))},remove:function(){return this.on("end.remove",(r=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==r)return;e&&e.removeChild(this)}));var r},tween:function(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n,i=ya(this.node(),r).tween,a=0,o=i.length;a<o;++a)if((n=i[a]).name===t)return n.value;return null}return this.each((null==e?function(i,a){var o,s;return function(){var t=ga(this,i),e=t.tween;if(e!==o)for(var r=0,n=(s=o=e).length;r<n;++r)if(s[r].name===a){(s=s.slice()).splice(r,1);break}t.tween=s}}:function(a,o,s){var c,l;if("function"!=typeof s)throw new Error;return function(){var t=ga(this,a),e=t.tween;if(e!==c){l=(c=e).slice();for(var r={name:o,value:s},n=0,i=l.length;n<i;++n)if(l[n].name===o){l[n]=r;break}n===i&&l.push(r)}t.tween=l}})(r,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){pa(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){pa(this,t).delay=e}})(e,t)):ya(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ga(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ga(this,t).duration=e}})(e,t)):ya(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){ga(this,t).ease=e}}(e,t)):ya(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,r=t,function(){var t=r.apply(this,arguments);if("function"!=typeof t)throw new Error;ga(this,e).ease=t}));var e,r},end:function(){var i,a,o=this,s=o._id,c=o.size();return new Promise(function(t,e){var r={value:e},n={value:function(){0==--c&&t()}};o.each(function(){var t=ga(this,s),e=t.on;e!==i&&((a=(i=e).copy())._.cancel.push(r),a._.interrupt.push(r),a._.end.push(n)),t.on=a}),0===c&&t()})},[Symbol.iterator]:Ma[Symbol.iterator]};function Na(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Da(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ma=function t(e){function r(t){return Math.pow(t,e)}return e=+e,r.exponent=t,r}(3),La=function t(e){function r(t){return 1-Math.pow(1-t,e)}return e=+e,r.exponent=t,r}(3),Ba=function t(e){function r(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,r.exponent=t,r}(3),Oa=Math.PI,Ia=Oa/2;function Ra(t){return(1-Math.cos(Oa*t))/2}function Fa(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Pa(t){return((t*=2)<=1?Fa(1-t):2-Fa(t-1))/2}function $a(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ja=7.5625;function Ya(t){return(t=+t)<4/11?ja*t*t:t<8/11?ja*(t-=6/11)*t+.75:t<10/11?ja*(t-=9/11)*t+.9375:ja*(t-=21/22)*t+63/64}var t=1.70158,za=function t(e){function r(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,r.overshoot=t,r}(t),Ua=function t(e){function r(t){return--t*t*((t+1)*e+t)+1}return e=+e,r.overshoot=t,r}(t),t=function t(e){function r(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,r.overshoot=t,r}(t),Wa=2*Math.PI,qa=function e(r,n){var i=Math.asin(1/(r=Math.max(1,r)))*(n/=Wa);function t(t){return r*Fa(- --t)*Math.sin((i-t)/n)}return t.amplitude=function(t){return e(t,n*Wa)},t.period=function(t){return e(r,t)},t}(1,.3),Ha=function e(r,n){var i=Math.asin(1/(r=Math.max(1,r)))*(n/=Wa);function t(t){return 1-r*Fa(t=+t)*Math.sin((t+i)/n)}return t.amplitude=function(t){return e(t,n*Wa)},t.period=function(t){return e(r,t)},t}(1,.3),Va=function e(r,n){var i=Math.asin(1/(r=Math.max(1,r)))*(n/=Wa);function t(t){return((t=2*t-1)<0?r*Fa(-t)*Math.sin((i-t)/n):2-r*Fa(t)*Math.sin((i+t)/n))/2}return t.amplitude=function(t){return e(t,n*Wa)},t.period=function(t){return e(r,t)},t}(1,.3),Ga={time:null,delay:0,duration:250,ease:Da};xr.prototype.interrupt=function(t){return this.each(function(){ma(this,t)})},xr.prototype.transition=function(t){var e,r;t=t instanceof Sa?(e=t._id,t._name):(e=++Ca,(r=Ga).time=Xi(),null==t?null:t+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o,s=n[a],c=s.length,l=0;l<c;++l)(o=s[l])&&fa(o,t,e,l,s,r||function(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}(o,e));return new Sa(n,this._parents,t,e)};var Xa=[null];const Za=t=>()=>t;function Ka(t,{sourceEvent:e,target:r,selection:n,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Qa(t){t.preventDefault(),t.stopImmediatePropagation()}var Ja={name:"drag"},to={name:"space"},eo={name:"handle"},ro={name:"center"};const{abs:no,max:io,min:ao}=Math;function oo(t){return[+t[0],+t[1]]}function so(t){return[oo(t[0]),oo(t[1])]}var co={name:"x",handles:["w","e"].map(mo),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},lo={name:"y",handles:["n","s"].map(mo),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},uo={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(mo),input:function(t){return null==t?null:so(t)},output:function(t){return t}},ho={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},po={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},go={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yo={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function mo(t){return{type:t}}function bo(t){return!t.ctrlKey&&!t.button}function _o(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function vo(){return navigator.maxTouchPoints||"ontouchstart"in this}function xo(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ko(I){var R,e=_o,F=bo,r=vo,P=!0,i=De("start","brush","end"),n=6;function a(t){var e=t.property("__brush",u).selectAll(".overlay").data([mo("overlay")]),e=(e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ho.overlay).merge(e).each(function(){var t=xo(this).extent;H(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([mo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ho.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges"),t.selectAll(".handle").data(I.handles,function(t){return t.type}));e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return ho[t.type]}),t.each($).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(r).on("touchstart.brush",s).on("touchmove.brush",c).on("touchend.brush touchcancel.brush",l).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $(){var t=H(this),e=xo(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-n/2:e[0][0]-n/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-n/2:e[0][1]-n/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+n:n}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+n:n})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function j(t,e,r){var n=t.__brush.emitter;return!n||r&&n.clean?new o(t,e,r):n}function o(t,e,r){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=r}function s(t){var a,i,o,s,c,l,u,h,d,f,p,g,y,m,b,_,v,x,k,w,E,T,C,S,A,M,N,e,r,D,n;function L(t){for(const r of t.changedTouches||[t])for(const n of M)n.identifier===r.identifier&&(n.cur=Cr(r,a));var e;!C||S||A||1!==M.length||(e=M[0],no(e.cur[0]-e[0])>no(e.cur[1]-e[1])?A=!0:S=!0);for(const i of M)i.cur&&(i[0]=i.cur[0],i[1]=i.cur[1]);T=!0,Qa(t),B(t)}function B(t){var e,r=M[0],n=r.point0;switch(w=r[0]-n[0],E=r[1]-n[1],o){case to:case Ja:s&&(w=io(h-d,ao(m-b,w)),f=d+w,_=b+w),c&&(E=io(p-g,ao(v-x,E)),y=g+E,k=x+E);break;case eo:M[1]?(s&&(f=io(h,ao(m,M[0][0])),_=io(h,ao(m,M[1][0])),s=1),c&&(y=io(p,ao(v,M[0][1])),k=io(p,ao(v,M[1][1])),c=1)):(s<0?(w=io(h-d,ao(m-d,w)),f=d+w,_=b):0<s&&(w=io(h-b,ao(m-b,w)),f=d,_=b+w),c<0?(E=io(p-g,ao(v-g,E)),y=g+E,k=x):0<c&&(E=io(p-x,ao(v-x,E)),y=g,k=x+E));break;case ro:s&&(f=io(h,ao(m,d-w*s)),_=io(h,ao(m,b+w*s))),c&&(y=io(p,ao(v,g-E*c)),k=io(p,ao(v,x+E*c)))}_<f&&(s*=-1,e=d,d=b,b=e,e=f,f=_,_=e,i in fo)&&D.attr("cursor",ho[i=fo[i]]),k<y&&(c*=-1,e=g,g=x,x=e,e=y,y=k,k=e,i in po)&&D.attr("cursor",ho[i=po[i]]),l.selection&&(u=l.selection),S&&(f=u[0][0],_=u[1][0]),A&&(y=u[0][1],k=u[1][1]),u[0][0]===f&&u[0][1]===y&&u[1][0]===_&&u[1][1]===k||(l.selection=[[f,y],[_,k]],$.call(a),N.brush(t,o.name))}function O(t){if(t.stopImmediatePropagation(),t.touches){if(t.touches.length)return;R&&clearTimeout(R),R=setTimeout(function(){R=null},500)}else Ir(t.view,T),n.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var e;r.attr("pointer-events","all"),D.attr("cursor",ho.overlay),l.selection&&(u=l.selection),(e=u)[0][0]!==e[1][0]&&e[0][1]!==e[1][1]||(l.selection=null,$.call(a)),N.end(t,o.name)}R&&!t.touches||!F.apply(this,arguments)||(a=this,i=t.target.__data__.type,o="selection"===(P&&t.metaKey?i="overlay":i)?Ja:P&&t.altKey?ro:eo,s=I===lo?null:go[i],c=I===co?null:yo[i],e=(l=xo(a)).extent,u=l.selection,h=e[0][0],p=e[0][1],m=e[1][0],v=e[1][1],E=w=0,C=s&&c&&P&&t.shiftKey,M=Array.from(t.touches||[t],t=>{var e=t.identifier;return(t=Cr(t,a)).point0=t.slice(),t.identifier=e,t}),ma(a),N=j(a,arguments,!0).beforestart(),"overlay"===i?(u&&(T=!0),e=[M[0],M[1]||M[0]],l.selection=u=[[d=I===lo?h:ao(e[0][0],e[1][0]),g=I===co?p:ao(e[0][1],e[1][1])],[b=I===lo?m:io(e[0][0],e[1][0]),x=I===co?v:io(e[0][1],e[1][1])]],1<M.length&&B(t)):(d=u[0][0],g=u[0][1],b=u[1][0],x=u[1][1]),f=d,y=g,_=b,k=x,r=H(a).attr("pointer-events","none"),D=r.selectAll(".overlay").attr("cursor",ho[i]),t.touches?(N.moved=L,N.ended=O):(n=H(t.view).on("mousemove.brush",L,!0).on("mouseup.brush",O,!0),P&&n.on("keydown.brush",function(t){switch(t.keyCode){case 16:C=s&&c;break;case 18:o===eo&&(s&&(b=_-w*s,d=f+w*s),c&&(x=k-E*c,g=y+E*c),o=ro,B(t));break;case 32:o!==eo&&o!==ro||(s<0?b=_-w:0<s&&(d=f-w),c<0?x=k-E:0<c&&(g=y-E),o=to,D.attr("cursor",ho.selection),B(t));break;default:return}Qa(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:C&&(S=A=C=!1,B(t));break;case 18:o===ro&&(s<0?b=_:0<s&&(d=f),c<0?x=k:0<c&&(g=y),o=eo,B(t));break;case 32:o===to&&(o=t.altKey?(s&&(b=_-w*s,d=f+w*s),c&&(x=k-E*c,g=y+E*c),ro):(s<0?b=_:0<s&&(d=f),c<0?x=k:0<c&&(g=y),eo),D.attr("cursor",ho[i]),B(t));break;default:return}Qa(t)},!0),Or(t.view)),$.call(a),N.start(t,o.name))}function c(t){j(this,arguments).moved(t)}function l(t){j(this,arguments).ended(t)}function u(){var t=this.__brush||{selection:null};return t.extent=so(e.apply(this,arguments)),t.dim=I,t}return a.move=function(t,s,n){t.tween?t.on("start.brush",function(t){j(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){j(this,arguments).end(t)}).tween("brush",function(){var e=this,r=e.__brush,n=j(e,arguments),t=r.selection,i=I.input("function"==typeof s?s.apply(this,arguments):s,r.extent),a=_i(t,i);function o(t){r.selection=1===t&&null===i?null:a(t),$.call(e),n.brush()}return null!==t&&null!==i?o:o(1)}):t.each(function(){var t=arguments,e=this.__brush,r=I.input("function"==typeof s?s.apply(this,t):s,e.extent),t=j(this,t).beforestart();ma(this),e.selection=null===r?null:r,$.call(this),t.start(n).brush(n).end(n)})},a.clear=function(t,e){a.move(t,null,e)},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(t,e,r){var n=H(this.that).datum();i.call(t,this.that,new Ka(t,{sourceEvent:e,target:a,selection:I.output(this.state.selection),mode:r,dispatch:i}),n)}},a.extent=function(t){return arguments.length?(e="function"==typeof t?t:Za(so(t)),a):e},a.filter=function(t){return arguments.length?(F="function"==typeof t?t:Za(!!t),a):F},a.touchable=function(t){return arguments.length?(r="function"==typeof t?t:Za(!!t),a):r},a.handleSize=function(t){return arguments.length?(n=+t,a):n},a.keyModifiers=function(t){return arguments.length?(P=!!t,a):P},a.on=function(){var t=i.on.apply(i,arguments);return t===i?a:t},a}var wo=Math.abs,Eo=Math.cos,To=Math.sin,Co=Math.PI,So=Co/2,Ao=2*Co,Mo=Math.max,No=1e-12;function Do(r,t){return Array.from({length:t-r},(t,e)=>r+e)}function Lo(g,e){var y=0,m=null,b=null,_=null;function n(n){var t,i=n.length,a=new Array(i),r=Do(0,i),o=new Array(i*i),s=new Array(i),c=0;n=Float64Array.from({length:i*i},e?(t,e)=>n[e%i][e/i|0]:(t,e)=>n[e/i|0][e%i]);for(let r=0;r<i;++r){let e=0;for(let t=0;t<i;++t)e+=n[r*i+t]+g*n[t*i+r];c+=a[r]=e}t=(c=Mo(0,Ao-y*i)/c)?y:Ao/i;{let e=0;m&&r.sort((t,e)=>m(a[t],a[e]));for(const d of r){var l=e;if(g){var u=Do(1+~i,i).filter(t=>t<0?n[~t*i+d]:n[d*i+t]);b&&u.sort((t,e)=>b(t<0?-n[~t*i+d]:n[d*i+t],e<0?-n[~e*i+d]:n[d*i+e]));for(const f of u)f<0?(o[~f*i+d]||(o[~f*i+d]={source:null,target:null})).target={index:d,startAngle:e,endAngle:e+=n[~f*i+d]*c,value:n[~f*i+d]}:(o[d*i+f]||(o[d*i+f]={source:null,target:null})).source={index:d,startAngle:e,endAngle:e+=n[d*i+f]*c,value:n[d*i+f]}}else{var h,u=Do(0,i).filter(t=>n[d*i+t]||n[t*i+d]);b&&u.sort((t,e)=>b(n[d*i+t],n[d*i+e]));for(const p of u){let t;d<p?(t=o[d*i+p]||(o[d*i+p]={source:null,target:null})).source={index:d,startAngle:e,endAngle:e+=n[d*i+p]*c,value:n[d*i+p]}:((t=o[p*i+d]||(o[p*i+d]={source:null,target:null})).target={index:d,startAngle:e,endAngle:e+=n[d*i+p]*c,value:n[d*i+p]},d===p&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value&&(h=t.source,t.source=t.target,t.target=h)}}s[d]={index:d,startAngle:l,endAngle:e,value:a[d]},e+=t}}return(o=Object.values(o)).groups=s,_?o.sort(_):o}return n.padAngle=function(t){return arguments.length?(y=Mo(0,t),n):y},n.sortGroups=function(t){return arguments.length?(m=t,n):m},n.sortSubgroups=function(t){return arguments.length?(b=t,n):b},n.sortChords=function(t){return arguments.length?(null==t?_=null:(r=t,(_=function(t,e){return r(t.source.value+t.target.value,e.source.value+e.target.value)})._=t),n):_&&_._;var r},n}const Bo=Math.PI,Oo=2*Bo,Io=1e-6,Ro=Oo-Io;function Fo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Po(){return new Fo}Fo.prototype=Po.prototype={constructor:Fo,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,r,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(t,e,r,n,i,a){this._+="C"+ +t+","+ +e+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,r,n,i){var a,o,s=this._x1,c=this._y1,l=(r=+r)-(t=+t),u=(n=+n)-(e=+e),h=s-t,d=c-e,f=h*h+d*d;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):f>Io&&(Math.abs(d*l-u*h)>Io&&i?(o=l*l+u*u,n=(r=r-s)*r+(s=n-c)*s,c=Math.sqrt(o),a=Math.sqrt(f),f=(o=i*Math.tan((Bo-Math.acos((o+f-n)/(2*c*a)))/2))/a,n=o/c,Math.abs(f-1)>Io&&(this._+="L"+(t+f*h)+","+(e+f*d)),this._+="A"+i+","+i+",0,0,"+ +(h*s<d*r)+","+(this._x1=t+n*l)+","+(this._y1=e+n*u)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,r,n,i,a){t=+t,e=+e,a=!!a;var o=(r=+r)*Math.cos(n),s=r*Math.sin(n),c=t+o,l=e+s,u=1^a,a=a?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>Io||Math.abs(this._y1-l)>Io)&&(this._+="L"+c+","+l),r&&((a=a<0?a%Oo+Oo:a)>Ro?this._+="A"+r+","+r+",0,1,"+u+","+(t-o)+","+(e-s)+"A"+r+","+r+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):a>Io&&(this._+="A"+r+","+r+",0,"+ +(a>=Bo)+","+u+","+(this._x1=t+r*Math.cos(i))+","+(this._y1=e+r*Math.sin(i))))},rect:function(t,e,r,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var $o=Array.prototype.slice;function jo(t){return function(){return t}}function Yo(t){return t.source}function zo(t){return t.target}function Uo(t){return t.radius}function Wo(t){return t.startAngle}function qo(t){return t.endAngle}function Ho(){return 0}function Vo(){return 10}function Go(c){var l=Yo,u=zo,h=Uo,d=Uo,f=Wo,p=qo,g=Ho,y=null;function e(){var t,e=l.apply(this,arguments),r=u.apply(this,arguments),n=g.apply(this,arguments)/2,i=$o.call(arguments),e=+h.apply(this,(i[0]=e,i)),a=f.apply(this,i)-So,o=p.apply(this,i)-So,r=+d.apply(this,(i[0]=r,i)),s=f.apply(this,i)-So,i=p.apply(this,i)-So;if(y=y||(t=Po()),No<n&&(wo(o-a)>2*n+No?a<o?(a+=n,o-=n):(a-=n,o+=n):a=o=(a+o)/2,wo(i-s)>2*n+No?s<i?(s+=n,i-=n):(s-=n,i+=n):s=i=(s+i)/2),y.moveTo(e*Eo(a),e*To(a)),y.arc(0,0,e,a,o),a===s&&o===i||(c?(n=r-+c.apply(this,arguments),o=(s+i)/2,y.quadraticCurveTo(0,0,n*Eo(s),n*To(s)),y.lineTo(r*Eo(o),r*To(o)),y.lineTo(n*Eo(i),n*To(i))):(y.quadraticCurveTo(0,0,r*Eo(s),r*To(s)),y.arc(0,0,r,s,i))),y.quadraticCurveTo(0,0,e*Eo(a),e*To(a)),y.closePath(),t)return y=null,t+""||null}return c&&(e.headRadius=function(t){return arguments.length?(c="function"==typeof t?t:jo(+t),e):c}),e.radius=function(t){return arguments.length?(h=d="function"==typeof t?t:jo(+t),e):h},e.sourceRadius=function(t){return arguments.length?(h="function"==typeof t?t:jo(+t),e):h},e.targetRadius=function(t){return arguments.length?(d="function"==typeof t?t:jo(+t),e):d},e.startAngle=function(t){return arguments.length?(f="function"==typeof t?t:jo(+t),e):f},e.endAngle=function(t){return arguments.length?(p="function"==typeof t?t:jo(+t),e):p},e.padAngle=function(t){return arguments.length?(g="function"==typeof t?t:jo(+t),e):g},e.source=function(t){return arguments.length?(l=t,e):l},e.target=function(t){return arguments.length?(u=t,e):u},e.context=function(t){return arguments.length?(y=null==t?null:t,e):y},e}var Xo=Array.prototype.slice;function Zo(t,e){return t-e}const Ko=t=>()=>t;function Qo(t,e){for(var r,n=-1,i=e.length;++n<i;)if(r=function(t,e){for(var r=e[0],n=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var c=t[a],l=c[0],u=c[1],h=t[s],d=h[0],f=h[1];if(function(t,e,r){return function(t,e,r){return(e[0]-t[0])*(r[1]-t[1])==(r[0]-t[0])*(e[1]-t[1])}(t,e,r)&&function(t,e,r){return t<=e&&e<=r||r<=e&&e<=t}(t[t=+(t[0]===e[0])],r[t],e[t])}(c,h,e))return 0;n<u!=n<f&&r<(d-l)*(n-u)/(f-u)+l&&(i=-i)}return i}(t,e[n]))return r;return 0}function Jo(){}var ts=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function es(){var y=1,m=1,i=Xt,b=e;function r(e){var t,r,n=i(e);return(n=Array.isArray(n)?n.slice().sort(Zo):(r=Vt((t=vt(e))[0],t[1],n),qt(Math.floor(t[0]/r)*r,Math.floor(t[1]/r-1)*r,n))).map(t=>a(e,t))}function a(e,r){var o,s,t,n,i,a,c=[],l=[],u=e,h=r,d=function(t){b(t,e,r),0<function(t){for(var e=0,r=t.length,n=t[r-1][1]*t[0][0]-t[r-1][0]*t[0][1];++e<r;)n+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return n}(t)?c.push([t]):l.push(t)},f=new Array,p=new Array;for(o=s=-1,n=u[0]>=h,ts[n<<1].forEach(g);++o<y-1;)t=n,n=u[o+1]>=h,ts[t|n<<1].forEach(g);for(ts[n<<0].forEach(g);++s<m-1;){for(o=-1,n=u[s*y+y]>=h,i=u[s*y]>=h,ts[n<<1|i<<2].forEach(g);++o<y-1;)t=n,n=u[s*y+y+o+1]>=h,a=i,i=u[s*y+o+1]>=h,ts[t|n<<1|i<<2|a<<3].forEach(g);ts[n|i<<3].forEach(g)}for(o=-1,i=u[s*y]>=h,ts[i<<2].forEach(g);++o<y-1;)a=i,i=u[s*y+o+1]>=h,ts[i<<2|a<<3].forEach(g);function g(t){var e,r,n=[t[0][0]+o,t[0][1]+s],t=[t[1][0]+o,t[1][1]+s],i=_(n),a=_(t);(e=p[i])?(r=f[a])?(delete p[e.end],delete f[r.start],e===r?(e.ring.push(t),d(e.ring)):f[e.start]=p[r.end]={start:e.start,end:r.end,ring:e.ring.concat(r.ring)}):(delete p[e.end],e.ring.push(t),p[e.end=a]=e):(e=f[a])?(r=p[i])?(delete f[e.start],delete p[r.end],e===r?(e.ring.push(t),d(e.ring)):f[r.start]=p[e.end]={start:r.start,end:e.end,ring:r.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(n),f[e.start=i]=e):f[i]=p[a]={start:i,end:a,ring:[n,t]}}return ts[i<<3].forEach(g),l.forEach(function(t){for(var e,r=0,n=c.length;r<n;++r)if(-1!==Qo((e=c[r])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:r,coordinates:c}}function _(t){return 2*t[0]+t[1]*(y+1)*4}function e(t,s,c){t.forEach(function(t){var e,r=t[0],n=t[1],i=0|r,a=0|n,o=s[a*y+i];0<r&&r<y&&i===r&&(e=s[a*y+i-1],t[0]=r+(c-e)/(o-e)-.5),0<n&&n<m&&a===n&&(e=s[(a-1)*y+i],t[1]=n+(c-e)/(o-e)-.5)})}return r.contour=a,r.size=function(t){if(!arguments.length)return[y,m];var e=Math.floor(t[0]),t=Math.floor(t[1]);if(0<=e&&0<=t)return y=e,m=t,r;throw new Error("invalid size")},r.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?Ko(Xo.call(t)):Ko(t),r):i},r.smooth=function(t){return arguments.length?(b=t?e:Jo,r):b===e},r}function rs(t){return t[0]}function ns(t){return t[1]}function is(){return 1}const as=11102230246251565e-32,os=134217729,ss=(3+8*as)*as;function cs(t,e,r,n,i){let a,o,s,c,l=e[0],u=n[0],h=0,d=0,f=(u>l==u>-l?(a=l,l=e[++h]):(a=u,u=n[++d]),0);if(h<t&&d<r)for(u>l==u>-l?(o=l+a,s=a-(o-l),l=e[++h]):(o=u+a,s=a-(o-u),u=n[++d]),a=o,0!==s&&(i[f++]=s);h<t&&d<r;)u>l==u>-l?(o=a+l,c=o-a,s=a-(o-c)+(l-c),l=e[++h]):(o=a+u,c=o-a,s=a-(o-c)+(u-c),u=n[++d]),a=o,0!==s&&(i[f++]=s);for(;h<t;)o=a+l,c=o-a,s=a-(o-c)+(l-c),l=e[++h],a=o,0!==s&&(i[f++]=s);for(;d<r;)o=a+u,c=o-a,s=a-(o-c)+(u-c),u=n[++d],a=o,0!==s&&(i[f++]=s);return 0===a&&0!==f||(i[f++]=a),f}function ls(t){return new Float64Array(t)}const us=(2+12*as)*as,hs=(9+64*as)*as*as,ds=ls(4),fs=ls(8),ps=ls(12),gs=ls(16),ys=ls(4);function ms(t,e,r,n,i,a,o){let s,c,l,u,h,d,f,p,g,y,m,b,_,v,x,k,w,E;var T=t-i,C=r-i,S=e-a,A=n-a;v=T*A,k=S*C,m=(x=(p=T-(f=(d=os*T)-(d-T)))*(y=A-(g=(d=os*A)-(d-A)))-(v-f*g-p*g-f*y))-(w=(p=S-(f=(d=os*S)-(d-S)))*(y=C-(g=(d=os*C)-(d-C)))-(k-f*g-p*g-f*y)),h=x-m,ds[0]=x-(m+h)+(h-w),m=(_=v-((b=v+m)-(h=b-v))+(m-h))-k,h=_-m,ds[1]=_-(m+h)+(h-k),E=b+m,h=E-b,ds[2]=b-(E-h)+(m-h),ds[3]=E;let M=function(e,r){let n=r[0];for(let t=1;t<e;t++)n+=r[t];return n}(4,ds),N=us*o;if(M>=N||-M>=N||(h=t-T,s=t-(T+h)+(h-i),h=r-C,l=r-(C+h)+(h-i),h=e-S,c=e-(S+h)+(h-a),h=n-A,u=n-(A+h)+(h-a),0===s&&0===c&&0===l&&0===u)||(N=hs*o+ss*Math.abs(M),(M+=T*u+A*s-(S*l+C*c))>=N||-M>=N))return M;v=s*A,f=(d=os*s)-(d-s),x=(p=s-f)*(y=A-(g=(d=os*A)-(d-A)))-(v-f*g-p*g-f*y),k=c*C,f=(d=os*c)-(d-c),m=x-(w=(p=c-f)*(y=C-(g=(d=os*C)-(d-C)))-(k-f*g-p*g-f*y)),h=x-m,ys[0]=x-(m+h)+(h-w),m=(_=v-((b=v+m)-(h=b-v))+(m-h))-k,h=_-m,ys[1]=_-(m+h)+(h-k),E=b+m,h=E-b,ys[2]=b-(E-h)+(m-h),ys[3]=E;t=cs(4,ds,4,ys,fs),v=T*u,p=T-(f=(d=os*T)-(d-T)),g=(d=os*u)-(d-u),x=p*(y=u-g)-(v-f*g-p*g-f*y),k=S*l,p=S-(f=(d=os*S)-(d-S)),g=(d=os*l)-(d-l),m=x-(w=p*(y=l-g)-(k-f*g-p*g-f*y)),h=x-m,ys[0]=x-(m+h)+(h-w),m=(_=v-((b=v+m)-(h=b-v))+(m-h))-k,h=_-m,ys[1]=_-(m+h)+(h-k),E=b+m,h=E-b,ys[2]=b-(E-h)+(m-h),ys[3]=E,r=cs(t,fs,4,ys,ps),v=s*u,f=(d=os*s)-(d-s),p=s-f,g=(d=os*u)-(d-u),x=p*(y=u-g)-(v-f*g-p*g-f*y),k=c*l,f=(d=os*c)-(d-c),p=c-f,g=(d=os*l)-(d-l),m=x-(w=p*(y=l-g)-(k-f*g-p*g-f*y)),h=x-m,ys[0]=x-(m+h)+(h-w),m=(_=v-((b=v+m)-(h=b-v))+(m-h))-k,h=_-m,ys[1]=_-(m+h)+(h-k),E=b+m,h=E-b,ys[2]=b-(E-h)+(m-h),ys[3]=E,i=cs(r,ps,4,ys,gs);return gs[i-1]}function bs(t,e,r,n,i,a){var o=(e-a)*(r-i),s=(t-i)*(n-a),c=o-s;return 0==o||0==s||0<o!=0<s||(o=Math.abs(o+s),Math.abs(c)>=33306690738754716e-32*o)?c:-ms(t,e,r,n,i,a,o)}const _s=Math.pow(2,-52),vs=new Uint32Array(512);class xs{static from(e,r=function(t){return t[0]},n=function(t){return t[1]}){var i=e.length,a=new Float64Array(2*i);for(let t=0;t<i;t++){var o=e[t];a[2*t]=r(o),a[2*t+1]=n(o)}return new xs(a)}constructor(t){var e=t.length>>1;if(0<e&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;t=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*t),this._halfedges=new Int32Array(3*t),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){var{coords:o,_hullPrev:s,_hullNext:c,_hullTri:l,_hullHash:u}=this,n=o.length>>1;let e=1/0,r=1/0,i=-1/0,R=-1/0;for(let t=0;t<n;t++){var a=o[2*t],h=o[2*t+1];a<e&&(e=a),h<r&&(r=h),a>i&&(i=a),h>R&&(R=h),this._ids[t]=t}var F=(e+i)/2,P=(r+R)/2;let d=1/0,f,p,g;for(let t=0;t<n;t++){var $=ks(F,P,o[2*t],o[2*t+1]);$<d&&(f=t,d=$)}var j,y,m,b,_,v,x,Y,k=o[2*f],w=o[2*f+1];d=1/0;for(let t=0;t<n;t++)t!==f&&((j=ks(k,w,o[2*t],o[2*t+1]))<d&&0<j)&&(p=t,d=j);let E=o[2*p],T=o[2*p+1],z=1/0;for(let t=0;t<n;t++)t!==f&&t!==p&&(y=k,m=w,b=E,_=T,v=o[2*t],x=o[2*t+1],Y=void 0,b-=y,v-=y,(y=(y=((y=x-m)*(x=b*b+(_-=m)*_)-_*(m=v*v+y*y))*(Y=.5/(b*y-_*v)))*y+(_=(b*m-v*x)*Y)*_)<z)&&(g=t,z=y);let t=o[2*g],C=o[2*g+1];if(z===1/0){for(let t=0;t<n;t++)this._dists[t]=o[2*t]-o[0]||o[2*t+1]-o[1];ws(this._ids,this._dists,0,n-1);var U=new Uint32Array(n);let r=0;for(let t=0,e=-1/0;t<n;t++){var W=this._ids[t];this._dists[W]>e&&(U[r++]=W,e=this._dists[W])}this.hull=U.subarray(0,r),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}else{bs(k,w,E,T,t,C)<0&&(S=p,A=E,M=T,p=g,E=t,T=C,g=S,t=A,C=M),S=k,A=E,M=T,N=t,D=C;var S,A,M,N,D,q,H,V,L={x:S+=((D-=w)*(q=(A-=S)*A+(M-=w)*M)-M*(H=(N-=S)*N+D*D))*(V=.5/(A*D-M*N)),y:D=w+(A*H-N*q)*V};this._cx=L.x,this._cy=L.y;for(let t=0;t<n;t++)this._dists[t]=ks(o[2*t],o[2*t+1],L.x,L.y);ws(this._ids,this._dists,0,n-1);let a=3;c[this._hullStart=f]=s[g]=p,c[p]=s[f]=g,l[c[g]=s[p]=f]=0,l[p]=1,l[g]=2,u.fill(-1),u[this._hashKey(k,w)]=f,u[this._hashKey(E,T)]=p,u[this._hashKey(t,C)]=g,this.trianglesLen=0,this._addTriangle(f,p,g,-1,-1,-1);for(let t=0,e,r;t<this._ids.length;t++){var B=this._ids[t],O=o[2*B],I=o[2*B+1];if(!(0<t&&Math.abs(O-e)<=_s&&Math.abs(I-r)<=_s||(e=O,r=I,B===f)||B===p||B===g)){let r=0;for(let t=0,e=this._hashKey(O,I);t<this._hashSize&&(-1===(r=u[(e+t)%this._hashSize])||r===c[r]);t++);let n=r=s[r],i;for(;i=c[n],0<=bs(O,I,o[2*n],o[2*n+1],o[2*i],o[2*i+1]);)if((n=i)===r){n=-1;break}if(-1!==n){let t=this._addTriangle(n,B,c[n],-1,-1,l[n]),e=(l[B]=this._legalize(t+2),l[n]=t,a++,c[n]);for(;i=c[e],bs(O,I,o[2*e],o[2*e+1],o[2*i],o[2*i+1])<0;)t=this._addTriangle(e,B,i,l[B],-1,l[e]),l[B]=this._legalize(t+2),c[e]=e,a--,e=i;if(n===r)for(;bs(O,I,o[2*(i=s[n])],o[2*i+1],o[2*n],o[2*n+1])<0;)t=this._addTriangle(i,B,n,-1,l[n],l[i]),this._legalize(t+2),l[i]=t,c[n]=n,a--,n=i;c[this._hullStart=s[B]=n]=s[e]=B,c[B]=e,u[this._hashKey(O,I)]=B,u[this._hashKey(o[2*n],o[2*n+1])]=n}}}this.hull=new Uint32Array(a);for(let t=0,e=this._hullStart;t<a;t++)e=c[this.hull[t]=e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}}_hashKey(t,e){return Math.floor(function(t,e){t/=Math.abs(t)+Math.abs(e);return(0<e?3-t:1+t)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(e){var t,r,n,i,a,{_triangles:o,_halfedges:s,coords:c}=this;let l=0,u=0;for(;;){var h=s[e],d=e-e%3;if(u=d+(e+2)%3,-1===h){if(0===l)break;e=vs[--l]}else{var f=h-h%3,p=f+(h+2)%3,g=o[u],y=o[e],d=o[d+(e+1)%3],m=o[p];if(t=c[2*g],r=c[2*g+1],n=c[2*y],y=c[2*y+1],i=c[2*d],d=c[2*d+1],a=c[2*m],_=c[2*m+1],b=void 0,r-=_,n-=a,(t-=a)*((y-=_)*(b=(i-=a)*i+(a=d-_)*a)-(_=n*n+y*y)*a)-r*(n*b-_*i)+(d=t*t+r*r)*(n*a-y*i)<0){o[e]=m,o[h]=g;var b=s[p];if(-1===b){let t=this._hullStart;do{if(this._hullTri[t]===p){this._hullTri[t]=e;break}}while((t=this._hullPrev[t])!==this._hullStart)}this._link(e,b),this._link(h,s[u]),this._link(u,p);var _=f+(h+1)%3;l<vs.length&&(vs[l++]=_)}else{if(0===l)break;e=vs[--l]}}}return u}_link(t,e){-1!==(this._halfedges[t]=e)&&(this._halfedges[e]=t)}_addTriangle(t,e,r,n,i,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=r,this._link(o,n),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}function ks(t,e,r,n){t-=r,r=e-n;return t*t+r*r}function ws(r,n,i,a){if(a-i<=20)for(let e=i+1;e<=a;e++){var o=r[e],s=n[o];let t=e-1;for(;t>=i&&n[r[t]]>s;)r[t+1]=r[t--];r[t+1]=o}else{let t=i+1,e=a;Es(r,i+a>>1,t),n[r[i]]>n[r[a]]&&Es(r,i,a),n[r[t]]>n[r[a]]&&Es(r,t,a),n[r[i]]>n[r[t]]&&Es(r,i,t);for(var c=r[t],l=n[c];;){for(;n[r[++t]]<l;);for(;n[r[--e]]>l;);if(e<t)break;Es(r,t,e)}r[i+1]=r[e],r[e]=c,a-t+1>=e-i?(ws(r,n,t,a),ws(r,n,i,e-1)):(ws(r,n,i,e-1),ws(r,n,t,a))}}function Es(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}class Ts{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},`+(this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},`+(this._y1=+e)}arc(t,e,r){var n=(t=+t)+(r=+r),i=e=+e;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${n},`+i:(1e-6<Math.abs(this._x1-n)||1e-6<Math.abs(this._y1-i))&&(this._+="L"+n+","+i),r&&(this._+=`A${r},${r},0,1,1,${t-r},${e}A${r},${r},0,1,1,${this._x1=n},`+(this._y1=i))}rect(t,e,r,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+r}v${+n}h${-r}Z`}value(){return this._||null}}class Cs{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Ss{constructor(t,[e,r,n,i]=[0,0,960,500]){if(!((n=+n)>=(e=+e)&&(i=+i)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=n,this.xmin=e,this.ymax=i,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){var{delaunay:{points:a,hull:e,triangles:o},vectors:r}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let t=0,e=0,r=o.length,n,i;t<r;t+=3,e+=2){var c,l,u=2*o[t],h=2*o[t+1],d=2*o[t+2],f=a[u],u=a[1+u],p=a[h],h=a[1+h],g=a[d],d=a[1+d],p=p-f,h=h-u,y=g-f,m=d-u,b=2*(p*m-h*y);i=Math.abs(b)<1e-9?(c=1e9,l=2*o[0],c*=Math.sign((a[l]-f)*m-(a[1+l]-u)*y),n=(f+g)/2-c*m,(u+d)/2+c*y):(l=1/b,g=p*p+h*h,d=y*y+m*m,n=f+(m*g-h*d)*l,u+(p*d-y*g)*l),s[e]=n,s[e+1]=i}let n=e[e.length-1],i,_=4*n,v,x=a[2*n],k,w=a[2*n+1];r.fill(0);for(let t=0;t<e.length;++t)n=e[t],i=_,v=x,k=w,_=4*n,x=a[2*n],w=a[2*n+1],r[i+2]=r[_]=k-w,r[i+3]=r[_+1]=x-v}render(r){var t=null==r?r=new Ts:void 0,{delaunay:{halfedges:n,inedges:e,hull:i},circumcenters:a,vectors:o}=this;if(i.length<=1)return null;for(let t=0,e=n.length;t<e;++t){var s,c,l,u=n[t];u<t||(c=2*Math.floor(t/3),u=2*Math.floor(u/3),s=a[c],c=a[1+c],l=a[u],u=a[1+u],this._renderSegment(s,c,l,u,r))}let h,d=i[i.length-1];for(let t=0;t<i.length;++t){h=d,d=i[t];var f=2*Math.floor(e[d]/3),p=a[f],f=a[1+f],g=4*h,g=this._project(p,f,o[2+g],o[3+g]);g&&this._renderSegment(p,f,g[0],g[1],r)}return t&&t.value()}renderBounds(t){var e=null==t?t=new Ts:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,r){var n=null==r?r=new Ts:void 0,i=this._clip(t);if(null!==i&&i.length){r.moveTo(i[0],i[1]);let e=i.length;for(;i[0]===i[e-2]&&i[1]===i[e-1]&&1<e;)e-=2;for(let t=2;t<e;t+=2)i[t]===i[t-2]&&i[t+1]===i[t-1]||r.lineTo(i[t],i[t+1]);return r.closePath(),n&&n.value()}}*cellPolygons(){var{points:r}=this["delaunay"];for(let t=0,e=r.length/2;t<e;++t){var n=this.cellPolygon(t);n&&(n.index=t,yield n)}}cellPolygon(t){var e=new Cs;return this.renderCell(t,e),e.value()}_renderSegment(t,e,r,n,i){var a=this._regioncode(t,e),o=this._regioncode(r,n);0===a&&0===o?(i.moveTo(t,e),i.lineTo(r,n)):(t=this._clipSegment(t,e,r,n,a,o))&&(i.moveTo(t[0],t[1]),i.lineTo(t[2],t[3]))}contains(t,e,r){return(e=+e)==e&&(r=+r)==r&&this.delaunay._step(t,e,r)===t}*neighbors(t){var i=this._clip(t);if(i)for(const o of this.delaunay.neighbors(t)){var a=this._clip(o);if(a)t:for(let r=0,n=i.length;r<n;r+=2)for(let t=0,e=a.length;t<e;t+=2)if(i[r]==a[t]&&i[r+1]==a[t+1]&&i[(r+2)%n]==a[(t+e-2)%e]&&i[(r+3)%n]==a[(t+e-1)%e]){yield o;break t}}}_cell(t){var{circumcenters:e,delaunay:{inedges:r,halfedges:n,triangles:i}}=this,a=r[t];if(-1===a)return null;var o=[];let s=a;do{var c=Math.floor(s/3);if(o.push(e[2*c],e[2*c+1]),i[s=s%3==2?s-2:s+1]!==t)break}while((s=n[s])!==a&&-1!==s);return o}_clip(t){var e,r,n;return 0===t&&1===this.delaunay.hull.length?[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin]:null===(e=this._cell(t))?null:(r=this["vectors"],r[n=4*t]||r[1+n]?this._clipInfinite(t,e,r[n],r[1+n],r[2+n],r[3+n]):this._clipFinite(t,e))}_clipFinite(a,e){var r=e.length;let o=null,s,c,l=e[r-2],u=e[r-1],h,d=this._regioncode(l,u),f,p=0;for(let t=0;t<r;t+=2)if(s=l,c=u,l=e[t],u=e[t+1],h=d,d=this._regioncode(l,u),0===h&&0===d)f=p,p=0,o?o.push(l,u):o=[l,u];else{let t,e,r,n,i;if(0===h){if(null===(t=this._clipSegment(s,c,l,u,h,d)))continue;[e,r,n,i]=t}else{if(null===(t=this._clipSegment(l,u,s,c,d,h)))continue;[n,i,e,r]=t,f=p,p=this._edgecode(e,r),f&&p&&this._edge(a,f,p,o,o.length),o?o.push(e,r):o=[e,r]}f=p,p=this._edgecode(n,i),f&&p&&this._edge(a,f,p,o,o.length),o?o.push(n,i):o=[n,i]}if(o)f=p,p=this._edgecode(o[0],o[1]),f&&p&&this._edge(a,f,p,o,o.length);else if(this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return o}_clipSegment(n,i,a,o,s,c){for(;;){if(0===s&&0===c)return[n,i,a,o];if(s&c)return null;let t,e,r=s||c;8&r?(t=n+(a-n)*(this.ymax-i)/(o-i),e=this.ymax):4&r?(t=n+(a-n)*(this.ymin-i)/(o-i),e=this.ymin):t=2&r?(e=i+(o-i)*(this.xmax-n)/(a-n),this.xmax):(e=i+(o-i)*(this.xmin-n)/(a-n),this.xmin),s?(n=t,i=e,s=this._regioncode(n,i)):(a=t,o=e,c=this._regioncode(a,o))}}_clipInfinite(i,t,e,r,n,a){let o=Array.from(t),s;if((s=this._project(o[0],o[1],e,r))&&o.unshift(s[0],s[1]),(s=this._project(o[o.length-2],o[o.length-1],n,a))&&o.push(s[0],s[1]),o=this._clipFinite(i,o))for(let t=0,e=o.length,r,n=this._edgecode(o[e-2],o[e-1]);t<e;t+=2)r=n,n=this._edgecode(o[t],o[t+1]),r&&n&&(t=this._edge(i,r,n,o,t),e=o.length);else this.contains(i,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(r,n,t,i,a){for(;n!==t;){let t,e;switch(n){case 5:n=4;continue;case 4:n=6,t=this.xmax,e=this.ymin;break;case 6:n=2;continue;case 2:n=10,t=this.xmax,e=this.ymax;break;case 10:n=8;continue;case 8:n=9,t=this.xmin,e=this.ymax;break;case 9:n=1;continue;case 1:n=5,t=this.xmin,e=this.ymin}i[a]===t&&i[a+1]===e||!this.contains(r,t,e)||(i.splice(a,0,t,e),a+=2)}if(4<i.length)for(let t=0;t<i.length;t+=2){var e=(t+2)%i.length,o=(t+4)%i.length;(i[t]===i[e]&&i[e]===i[o]||i[t+1]===i[1+e]&&i[1+e]===i[1+o])&&(i.splice(e,2),t-=2)}return a}_project(t,e,r,n){let i=1/0,a,o,s;if(n<0){if(e<=this.ymin)return null;(a=(this.ymin-e)/n)<i&&(s=this.ymin,o=t+(i=a)*r)}else if(0<n){if(e>=this.ymax)return null;(a=(this.ymax-e)/n)<i&&(s=this.ymax,o=t+(i=a)*r)}if(0<r){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<i&&(o=this.xmax,s=e+(i=a)*n)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<i&&(o=this.xmin,s=e+(i=a)*n)}return[o,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const As=2*Math.PI,Ms=Math.pow;var Ns={},Ds={};function Ls(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Bs(t){var r=Object.create(null),n=[];return t.forEach(function(t){for(var e in t)e in r||n.push(r[e]=e)}),n}function Os(t,e){var t=t+"",r=t.length;return r<e?new Array(e-r+1).join(0)+t:t}function Is(t){var e,r=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Os(-e,6):9999<e?"+"+Os(e,6):Os(e,4))+"-"+Os(t.getUTCMonth()+1,2)+"-"+Os(t.getUTCDate(),2)+(a?"T"+Os(r,2)+":"+Os(n,2)+":"+Os(i,2)+"."+Os(a,3)+"Z":i?"T"+Os(r,2)+":"+Os(n,2)+":"+Os(i,2)+"Z":n||r?"T"+Os(r,2)+":"+Os(n,2)+"Z":"")}function Rs(n){var e=new RegExp('["'+n+`
\r]`),h=n.charCodeAt(0);function r(n,t){var e,r=[],i=n.length,a=0,o=0,s=i<=0,c=!1;function l(){if(s)return Ds;if(c)return c=!1,Ns;var t,e,r=a;if(34===n.charCodeAt(r)){for(;a++<i&&34!==n.charCodeAt(a)||34===n.charCodeAt(++a););return(t=a)>=i?s=!0:10===(e=n.charCodeAt(a++))?c=!0:13===e&&(c=!0,10===n.charCodeAt(a))&&++a,n.slice(r+1,t-1).replace(/""/g,'"')}for(;a<i;){if(10===(e=n.charCodeAt(t=a++)))c=!0;else if(13===e)c=!0,10===n.charCodeAt(a)&&++a;else if(e!==h)continue;return n.slice(r,t)}return s=!0,n.slice(r,i)}for(10===n.charCodeAt(i-1)&&--i,13===n.charCodeAt(i-1)&&--i;(e=l())!==Ds;){for(var u=[];e!==Ns&&e!==Ds;)u.push(e),e=l();t&&null==(u=t(u,o++))||r.push(u)}return r}function i(t,r){return t.map(function(e){return r.map(function(t){return o(e[t])}).join(n)})}function a(t){return t.map(o).join(n)}function o(t){return null==t?"":t instanceof Date?Is(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,a){var o,s;return(t=r(t,function(t,e){if(o)return o(t,e-1);var r,n,i;s=t,o=a?(n=a,i=Ls(r=t),function(t,e){return n(i(t),e,r)}):Ls(t)})).columns=s||[],t},parseRows:r,format:function(t,e){return[(e=null==e?Bs(t):e).map(o).join(n)].concat(i(t,e)).join(`
`)},formatBody:function(t,e){return i(t,e=null==e?Bs(t):e).join(`
`)},formatRows:function(t){return t.map(a).join(`
`)},formatRow:a,formatValue:o}}var Co=Rs(","),Fs=Co.parse,Ps=Co.parseRows,$s=Co.format,js=Co.formatBody,Ys=Co.formatRows,zs=Co.formatRow,Co=Co.formatValue,Us=Rs("\t"),Ws=Us.parse,qs=Us.parseRows,Hs=Us.format,Vs=Us.formatBody,Gs=Us.formatRows,Xs=Us.formatRow,Us=Us.formatValue;const Zs=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ks(t){if(t.ok)return t.blob();throw new Error(t.status+" "+t.statusText)}function Qs(t){if(t.ok)return t.arrayBuffer();throw new Error(t.status+" "+t.statusText)}function Js(t){if(t.ok)return t.text();throw new Error(t.status+" "+t.statusText)}function tc(t,e){return fetch(t,e).then(Js)}function ec(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),tc(t,e).then(function(t){return n(t,r)})}}var rc=ec(Fs),nc=ec(Ws);function ic(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function ac(r){return(t,e)=>tc(t,e).then(t=>(new DOMParser).parseFromString(t,r))}var oc=ac("application/xml"),sc=ac("text/html"),cc=ac("image/svg+xml");function lc(t,e,r,n){if(!isNaN(e)&&!isNaN(r)){var i,a,o,s,c,l,u,h,d,f=t._root,p={data:n},g=t._x0,y=t._y0,m=t._x1,b=t._y1;if(f){for(;f.length;)if((l=e>=(a=(g+m)/2))?g=a:m=a,(u=r>=(o=(y+b)/2))?y=o:b=o,!(f=(i=f)[h=u<<1|l]))return i[h]=p,t;if(s=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===s&&r===c)p.next=f,i?i[h]=p:t._root=p;else{for(;i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(a=(g+m)/2))?g=a:m=a,(u=r>=(o=(y+b)/2))?y=o:b=o,(h=u<<1|l)==(d=(o<=c)<<1|a<=s););i[d]=f,i[h]=p}}else t._root=p}return t}function uc(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i}function hc(t){return t[0]}function dc(t){return t[1]}function fc(t,e,r){e=new pc(null==e?hc:e,null==r?dc:r,NaN,NaN,NaN,NaN);return null==t?e:e.addAll(t)}function pc(t,e,r,n,i,a){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function gc(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var yc=fc.prototype=pc.prototype;function mc(t){return function(){return t}}function bc(t){return 1e-6*(t()-.5)}function _c(t){return t.x+t.vx}function vc(t){return t.y+t.vy}function xc(t){return t.index}function kc(t,e){t=t.get(e);if(t)return t;throw new Error("node not found: "+e)}yc.copy=function(){var t,e,r=new pc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(n)if(n.length)for(t=[{source:n,target:r._root=new Array(4)}];n=t.pop();)for(var i=0;i<4;++i)(e=n.source[i])&&(e.length?t.push({source:e,target:n.target[i]=new Array(4)}):n.target[i]=gc(e));else r._root=gc(n);return r},yc.add=function(t){var e=+this._x.call(null,t),r=+this._y.call(null,t);return lc(this.cover(e,r),e,r,t)},yc.addAll=function(t){for(var e,r,n=t.length,i=new Array(n),a=new Array(n),o=1/0,s=1/0,c=-1/0,l=-1/0,u=0;u<n;++u)isNaN(e=+this._x.call(null,r=t[u]))||isNaN(r=+this._y.call(null,r))||((i[u]=e)<o&&(o=e),c<e&&(c=e),(a[u]=r)<s&&(s=r),l<r&&(l=r));if(!(c<o||l<s))for(this.cover(o,s).cover(c,l),u=0;u<n;++u)lc(this,i[u],a[u],t[u]);return this},yc.cover=function(t,e){if(!isNaN(t=+t)&&!isNaN(e=+e)){var r=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,a=(n=Math.floor(e))+1;else{for(var o,s,c=i-r||1,l=this._root;t<r||i<=t||e<n||a<=e;)switch(s=(e<n)<<1|t<r,o=new Array(4),o[s]=l,l=o,c*=2,s){case 0:i=r+c,a=n+c;break;case 1:r=i-c,a=n+c;break;case 2:i=r+c,n=a-c;break;case 3:r=i-c,n=a-c}this._root&&this._root.length&&(this._root=l)}this._x0=r,this._y0=n,this._x1=i,this._y1=a}return this},yc.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},yc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},yc.find=function(t,e,r){var n,i,a,o,s,c,l,u,h=this._x0,d=this._y0,f=this._x1,p=this._y1,g=[],y=this._root;for(y&&g.push(new uc(y,h,d,f,p)),null==r?r=1/0:(h=t-r,d=e-r,f=t+r,p=e+r,r*=r);n=g.pop();)!(y=n.node)||(s=n.x0)>f||(c=n.y0)>p||(o=n.x1)<h||(i=n.y1)<d||(y.length?(g.push(new uc(y[3],a=(s+o)/2,l=(c+i)/2,o,i),new uc(y[2],s,l,a,i),new uc(y[1],a,c,o,l),new uc(y[0],s,c,a,l)),(i=(l<=e)<<1|a<=t)&&(n=g[g.length-1],g[g.length-1]=g[g.length-1-i],g[g.length-1-i]=n)):(c=(o=t-+this._x.call(null,y.data))*o+(s=e-+this._y.call(null,y.data))*s)<r&&(h=t-(l=Math.sqrt(r=c)),d=e-l,f=t+l,p=e+l,u=y.data));return u},yc.remove=function(t){if(!isNaN(a=+this._x.call(null,t))&&!isNaN(o=+this._y.call(null,t))){var e,r,n,i,a,o,s,c,l,u,h,d=this._root,f=this._x0,p=this._y0,g=this._x1,y=this._y1;if(d){if(d.length)for(;;){if((c=a>=(s=(f+g)/2))?f=s:g=s,(l=o>=(s=(p+y)/2))?p=s:y=s,!(d=(e=d)[u=l<<1|c]))return this;if(!d.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(r=e,h=u)}for(;d.data!==t;)if(!(d=(n=d).next))return this;(i=d.next)&&delete d.next,n?i?n.next=i:delete n.next:e?(i?e[u]=i:delete e[u],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(r?r[h]=d:this._root=d)):this._root=i}}return this},yc.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},yc.root=function(){return this._root},yc.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},yc.visit=function(t){var e,r,n,i,a,o,s,c=[],l=this._root;for(l&&c.push(new uc(l,this._x0,this._y0,this._x1,this._y1));a=c.pop();)!t(l=a.node,r=a.x0,n=a.y0,i=a.x1,a=a.y1)&&l.length&&(o=(r+i)/2,s=(n+a)/2,(e=l[3])&&c.push(new uc(e,o,s,i,a)),(e=l[2])&&c.push(new uc(e,r,s,o,a)),(e=l[1])&&c.push(new uc(e,o,n,i,s)),e=l[0])&&c.push(new uc(e,r,n,o,s));return this},yc.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new uc(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var i,a,o,s,c,l,u,h=e.node;h.length&&(a=e.x0,o=e.y0,l=(a+(s=e.x1))/2,u=(o+(c=e.y1))/2,(i=h[0])&&r.push(new uc(i,a,o,l,u)),(i=h[1])&&r.push(new uc(i,l,o,s,u)),(i=h[2])&&r.push(new uc(i,a,u,l,c)),i=h[3])&&r.push(new uc(i,l,u,s,c)),n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},yc.x=function(t){return arguments.length?(this._x=t,this):this._x},yc.y=function(t){return arguments.length?(this._y=t,this):this._y};const wc=1664525,Ec=1013904223,Tc=4294967296;function Cc(t){return t.x}function Sc(t){return t.y}var Ac=Math.PI*(3-Math.sqrt(5));function Mc(t,e){var r;return(e=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:[1<(r=t.slice(0,e)).length?r[0]+r.slice(2):r,+t.slice(e+1)]}function Nc(t){return(t=Mc(Math.abs(t)))?t[1]:NaN}var Dc,Lc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bc(t){var e;if(e=Lc.exec(t))return new Oc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]});throw new Error("invalid format: "+t)}function Oc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ic(t,e){var r,e=Mc(t,e);return e?(r=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+r:r.length>e+1?r.slice(0,e+1)+"."+r.slice(e+1):r+new Array(e-r.length+2).join("0")):t+""}Bc.prototype=Oc.prototype,Oc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Rc={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ic(100*t,e),r:Ic,s:function(t,e){var r,n,i=Mc(t,e);return i?(r=i[0],(i=(i=i[1])-(Dc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1)===(n=r.length)?r:n<i?r+new Array(i-n+1).join("0"):0<i?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Mc(t,Math.max(0,e+i-1))[0]):t+""},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Fc(t){return t}var Pc,$c,jc,Yc=Array.prototype.map,zc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Uc(t){var e,s,c,k=void 0===t.grouping||void 0===t.thousands?Fc:(s=Yc.call(t.grouping,Number),c=t.thousands+"",function(t,e){for(var r=t.length,n=[],i=0,a=s[0],o=0;0<r&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),n.push(t.substring(r-=a,r+a)),!((o+=a+1)>e));)a=s[i=(i+1)%s.length];return n.reverse().join(c)}),n=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",w=void 0===t.decimal?".":t.decimal+"",E=void 0===t.numerals?Fc:(e=Yc.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),a=void 0===t.percent?"%":t.percent+"",T=void 0===t.minus?"":t.minus+"",C=void 0===t.nan?"NaN":t.nan+"";function o(t){var l=(t=Bc(t)).fill,u=t.align,h=t.sign,e=t.symbol,d=t.zero,f=t.width,p=t.comma,g=t.precision,y=t.trim,m=t.type,b=("n"===m?(p=!0,m="g"):Rc[m]||(void 0===g&&(g=12),y=!0,m="g"),(d||"0"===l&&"="===u)&&(d=!0,l="0",u="="),"$"===e?n:"#"===e&&/[boxX]/.test(m)?"0"+m.toLowerCase():""),_="$"===e?i:/[%p]/.test(m)?a:"",v=Rc[m],x=/[defgprs%]/.test(m);function r(t){var e,r,n,i=b,a=_;if("c"===m)a=v(t)+a,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?C:v(Math.abs(t),g),y&&(t=function(t){t:for(var e,r=t.length,n=1,i=-1;n<r;++n)switch(t[n]){case".":i=e=n;break;case"0":0===i&&(i=n),e=n;break;default:if(!+t[n])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t}(t)),i=((o=o&&0==+t&&"+"!==h?!1:o)?"("===h?h:T:"-"===h||"("===h?"":h)+i,a=("s"===m?zc[8+Dc/3]:"")+a+(o&&"("===h?")":""),x)for(e=-1,r=t.length;++e<r;)if((n=t.charCodeAt(e))<48||57<n){a=(46===n?w+t.slice(e+1):t.slice(e))+a,t=t.slice(0,e);break}}p&&!d&&(t=k(t,1/0));var s=i.length+t.length+a.length,c=s<f?new Array(f-s+1).join(l):"";switch(p&&d&&(t=k(c+t,c.length?f-a.length:1/0),c=""),u){case"<":t=i+t+a+c;break;case"=":t=i+c+t+a;break;case"^":t=c.slice(0,s=c.length>>1)+i+t+a+c.slice(s);break;default:t=c+i+t+a}return E(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),r.toString=function(){return t+""},r}return{format:o,formatPrefix:function(t,e){var r=o(((t=Bc(t)).type="f",t)),t=3*Math.max(-8,Math.min(8,Math.floor(Nc(e)/3))),n=Math.pow(10,-t),i=zc[8+t/3];return function(t){return r(n*t)+i}}}}function Wc(t){return Pc=Uc(t),$c=Pc.format,jc=Pc.formatPrefix,Pc}function qc(t){return Math.max(0,-Nc(Math.abs(t)))}function Hc(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Nc(e)/3)))-Nc(Math.abs(t)))}function Vc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nc(e)-Nc(t))+1}Wc({thousands:",",grouping:[3],currency:["$",""]});var Gc=1e-6,Xc=1e-12,Zc=Math.PI,Kc=Zc/2,Qc=Zc/4,Jc=2*Zc,tl=180/Zc,el=Zc/180,rl=Math.abs,nl=Math.atan,il=Math.atan2,S=Math.cos,al=Math.ceil,ol=Math.exp,sl=Math.hypot,cl=Math.log,ll=Math.pow,A=Math.sin,ul=Math.sign||function(t){return 0<t?1:t<0?-1:0},hl=Math.sqrt,dl=Math.tan;function fl(t){return 1<t?0:t<-1?Zc:Math.acos(t)}function pl(t){return 1<t?Kc:t<-1?-Kc:Math.asin(t)}function gl(t){return(t=A(t/2))*t}function yl(){}function ml(t,e){t&&_l.hasOwnProperty(t.type)&&_l[t.type](t,e)}var bl={Feature:function(t,e){ml(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)ml(r[n].geometry,e)}},_l={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){vl(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)vl(r[n],e,0)},Polygon:function(t,e){xl(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)xl(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)ml(r[n],e)}};function vl(t,e,r){var n,i=-1,a=t.length-r;for(e.lineStart();++i<a;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function xl(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)vl(t[r],e,1);e.polygonEnd()}function kl(t,e){t&&bl.hasOwnProperty(t.type)?bl[t.type](t,e):ml(t,e)}var wl,El,Tl,Cl,Sl,Al=new xt,Ml=new xt,Nl={point:yl,lineStart:yl,lineEnd:yl,polygonStart:function(){Al=new xt,Nl.lineStart=Dl,Nl.lineEnd=Ll},polygonEnd:function(){var t=+Al;Ml.add(t<0?Jc+t:t),this.lineStart=this.lineEnd=this.point=yl},sphere:function(){Ml.add(Jc)}};function Dl(){Nl.point=Bl}function Ll(){Ol(wl,El)}function Bl(t,e){Nl.point=Ol,wl=t,El=e,Tl=t*=el,Cl=S(e=(e*=el)/2+Qc),Sl=A(e)}function Ol(t,e){var r=(t*=el)-Tl,n=0<=r?1:-1,r=n*r,i=S(e=(e*=el)/2+Qc),e=A(e),a=Sl*e,o=Cl*i+a*S(r),a=a*n*A(r);Al.add(il(a,o)),Tl=t,Cl=i,Sl=e}function Il(t){return[il(t[1],t[0]),pl(t[2])]}function Rl(t){var e=t[0],t=t[1],r=S(t);return[r*S(e),r*A(e),A(t)]}function Fl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pl(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $l(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function jl(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Yl(t){var e=hl(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var zl,Ul,Wl,ql,Hl,Vl,Gl,Xl,Zl,Kl,Ql,Jl={point:tu,lineStart:ru,lineEnd:nu,polygonStart:function(){Jl.point=iu,Jl.lineStart=au,Jl.lineEnd=ou,Zl=new xt,Nl.polygonStart()},polygonEnd:function(){Nl.polygonEnd(),Jl.point=tu,Jl.lineStart=ru,Jl.lineEnd=nu,Al<0?(zl=-(Wl=180),Ul=-(ql=90)):Gc<Zl?ql=90:Zl<-Gc&&(Ul=-90),Ql[0]=zl,Ql[1]=Wl},sphere:function(){zl=-(Wl=180),Ul=-(ql=90)}};function tu(t,e){Kl.push(Ql=[zl=t,Wl=t]),e<Ul&&(Ul=e),ql<e&&(ql=e)}function eu(t,e){var r,n,i,a,o,s=Rl([t*el,e*el]);Xl?(r=Pl(Xl,s),Yl(r=Pl([r[1],-r[0],0],r)),r=Il(r),o=t-Hl,i=r[0]*tl*(n=0<o?1:-1),(o=180<rl(o))^(n*Hl<i&&i<n*t)?(a=r[1]*tl,ql<a&&(ql=a)):o^(n*Hl<(i=(360+i)%360-180)&&i<n*t)?(a=-r[1]*tl)<Ul&&(Ul=a):(e<Ul&&(Ul=e),ql<e&&(ql=e)),o?t<Hl?su(zl,t)>su(zl,Wl)&&(Wl=t):su(t,Wl)>su(zl,Wl)&&(zl=t):zl<=Wl?(t<zl&&(zl=t),Wl<t&&(Wl=t)):Hl<t?su(zl,t)>su(zl,Wl)&&(Wl=t):su(t,Wl)>su(zl,Wl)&&(zl=t)):Kl.push(Ql=[zl=t,Wl=t]),e<Ul&&(Ul=e),ql<e&&(ql=e),Xl=s,Hl=t}function ru(){Jl.point=eu}function nu(){Ql[0]=zl,Ql[1]=Wl,Jl.point=tu,Xl=null}function iu(t,e){var r;Xl?(r=t-Hl,Zl.add(180<rl(r)?r+(0<r?360:-360):r)):(Vl=t,Gl=e),Nl.point(t,e),eu(t,e)}function au(){Nl.lineStart()}function ou(){iu(Vl,Gl),Nl.lineEnd(),rl(Zl)>Gc&&(zl=-(Wl=180)),Ql[0]=zl,Ql[1]=Wl,Xl=null}function su(t,e){return(e-=t)<0?e+360:e}function cu(t,e){return t[0]-e[0]}function lu(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var uu,hu,du,fu,pu,gu,yu,mu,bu,_u,vu,xu,ku,wu,Eu,Tu,Cu={sphere:yl,point:Su,lineStart:Mu,lineEnd:Lu,polygonStart:function(){Cu.lineStart=Bu,Cu.lineEnd=Ou},polygonEnd:function(){Cu.lineStart=Mu,Cu.lineEnd=Lu}};function Su(t,e){t*=el;var r=S(e*=el);Au(r*S(t),r*A(t),A(e))}function Au(t,e,r){du+=(t-du)/++uu,fu+=(e-fu)/uu,pu+=(r-pu)/uu}function Mu(){Cu.point=Nu}function Nu(t,e){t*=el;var r=S(e*=el);wu=r*S(t),Eu=r*A(t),Tu=A(e),Cu.point=Du,Au(wu,Eu,Tu)}function Du(t,e){t*=el;var r=S(e*=el),n=r*S(t),r=r*A(t),t=A(e),e=il(hl((e=Eu*t-Tu*r)*e+(e=Tu*n-wu*t)*e+(e=wu*r-Eu*n)*e),wu*n+Eu*r+Tu*t);hu+=e,gu+=e*(wu+(wu=n)),yu+=e*(Eu+(Eu=r)),mu+=e*(Tu+(Tu=t)),Au(wu,Eu,Tu)}function Lu(){Cu.point=Su}function Bu(){Cu.point=Iu}function Ou(){Ru(xu,ku),Cu.point=Su}function Iu(t,e){xu=t,ku=e,t*=el,e*=el,Cu.point=Ru;var r=S(e);wu=r*S(t),Eu=r*A(t),Tu=A(e),Au(wu,Eu,Tu)}function Ru(t,e){t*=el;var r=S(e*=el),n=r*S(t),r=r*A(t),t=A(e),e=Eu*t-Tu*r,i=Tu*n-wu*t,a=wu*r-Eu*n,o=sl(e,i,a),s=pl(o),o=o&&-s/o;bu.add(o*e),_u.add(o*i),vu.add(o*a),hu+=s,gu+=s*(wu+(wu=n)),yu+=s*(Eu+(Eu=r)),mu+=s*(Tu+(Tu=t)),Au(wu,Eu,Tu)}function Fu(t){return function(){return t}}function Pu(r,n){function t(t,e){return t=r(t,e),n(t[0],t[1])}return r.invert&&n.invert&&(t.invert=function(t,e){return(t=n.invert(t,e))&&r.invert(t[0],t[1])}),t}function $u(t,e){return[rl(t)>Zc?t+Math.round(-t/Jc)*Jc:t,e]}function ju(t,e,r){return(t%=Jc)?e||r?Pu(zu(t),Uu(e,r)):zu(t):e||r?Uu(e,r):$u}function Yu(r){return function(t,e){return[Zc<(t+=r)?t-Jc:t<-Zc?t+Jc:t,e]}}function zu(t){var e=Yu(t);return e.invert=Yu(-t),e}function Uu(t,e){var i=S(t),a=A(t),o=S(e),s=A(e);function r(t,e){var r=S(e),n=S(t)*r,t=A(t)*r,r=A(e),e=r*i+n*a;return[il(t*o-e*s,n*i-r*a),pl(e*o+t*s)]}return r.invert=function(t,e){var r=S(e),n=S(t)*r,t=A(t)*r,r=A(e),e=r*o-t*s;return[il(t*o+r*s,n*i+e*a),pl(e*i-n*a)]},r}function Wu(e){function t(t){return(t=e(t[0]*el,t[1]*el))[0]*=tl,t[1]*=tl,t}return e=ju(e[0]*el,e[1]*el,2<e.length?e[2]*el:0),t.invert=function(t){return(t=e.invert(t[0]*el,t[1]*el))[0]*=tl,t[1]*=tl,t},t}function qu(t,e,r,n,i,a){if(r){var o=S(e),s=A(e),c=n*r;null==i?(i=e+n*Jc,a=e-c/2):(i=Hu(o,i),a=Hu(o,a),(0<n?i<a:a<i)&&(i+=n*Jc));for(var l,u=i;0<n?a<u:u<a;u-=c)l=Il([o,-s*S(u),-s*A(u)]),t.point(l[0],l[1])}}function Hu(t,e){(e=Rl(e))[0]-=t,Yl(e);t=fl(-e[1]);return((-e[2]<0?-t:t)+Jc-Gc)%Jc}function Vu(){var n,e=[];return{point:function(t,e,r){n.push([t,e,r])},lineStart:function(){e.push(n=[])},lineEnd:yl,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}}function Gu(t,e){return rl(t[0]-e[0])<Gc&&rl(t[1]-e[1])<Gc}function Xu(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Zu(t,e,r,n,a){var o,i,s=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],i=t[e];if(Gu(n,i)){if(!n[2]&&!i[2]){for(a.lineStart(),o=0;o<e;++o)a.point((n=t[o])[0],n[1]);return void a.lineEnd()}i[0]+=2*Gc}s.push(r=new Xu(n,t,null,!0)),c.push(r.o=new Xu(n,null,r,!1)),s.push(r=new Xu(i,t,null,!1)),c.push(r.o=new Xu(i,null,r,!0))}}),s.length){for(c.sort(e),Ku(s),Ku(c),o=0,i=c.length;o<i;++o)c[o].e=r=!r;for(var l,u,h=s[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;l=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,i=l.length;o<i;++o)a.point((u=l[o])[0],u[1]);else n(d.x,d.n.x,1,a);d=d.n}else{if(f)for(l=d.p.z,o=l.length-1;0<=o;--o)a.point((u=l[o])[0],u[1]);else n(d.x,d.p.x,-1,a);d=d.p}}while(l=(d=d.o).z,f=!f,!d.v);a.lineEnd()}}}function Ku(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Qu(t){return rl(t[0])<=Zc?t[0]:ul(t[0])*((rl(t[0])+Zc)%Jc-Zc)}function Ju(t,e){var r=Qu(e),n=e[1],e=A(n),i=[A(r),-S(r),0],a=0,o=0,s=new xt;1===e?n=Kc+Gc:-1===e&&(n=-Kc-Gc);for(var c=0,l=t.length;c<l;++c)if(h=(u=t[c]).length)for(var u,h,d=u[h-1],f=Qu(d),p=d[1]/2+Qc,g=A(p),y=S(p),m=0;m<h;++m,f=_,g=x,y=v,d=b){var b=u[m],_=Qu(b),v=b[1]/2+Qc,x=A(v),v=S(v),k=_-f,w=0<=k?1:-1,E=w*k,T=Zc<E,C=g*x;s.add(il(C*w*A(E),y*v+C*S(E))),a+=T?k+w*Jc:k,T^r<=f^r<=_&&(Yl(C=Pl(Rl(d),Rl(b))),Yl(E=Pl(i,C)),(w=(T^0<=k?-1:1)*pl(E[2]))<n||n===w&&(C[0]||C[1]))&&(o+=T^0<=k?1:-1)}return(a<-Gc||a<Gc&&s<-Xc)^1&o}function th(y,m,b,_){return function(s){var c,l,u,r=m(s),h=Vu(),d=m(h),f=!1,e={point:n,lineStart:i,lineEnd:a,polygonStart:function(){e.point=p,e.lineStart=o,e.lineEnd=g,l=[],c=[]},polygonEnd:function(){e.point=n,e.lineStart=i,e.lineEnd=a,l=se(l);var t=Ju(c,_);l.length?(f||(s.polygonStart(),f=!0),Zu(l,rh,t,b,s)):t&&(f||(s.polygonStart(),f=!0),s.lineStart(),b(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),l=c=null},sphere:function(){s.polygonStart(),s.lineStart(),b(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function n(t,e){y(t,e)&&s.point(t,e)}function t(t,e){r.point(t,e)}function i(){e.point=t,r.lineStart()}function a(){e.point=n,r.lineEnd()}function p(t,e){u.push([t,e]),d.point(t,e)}function o(){d.lineStart(),u=[]}function g(){p(u[0][0],u[0][1]),d.lineEnd();var t,e,r,n,i=d.clean(),a=h.result(),o=a.length;if(u.pop(),c.push(u),u=null,o)if(1&i){if(0<(e=(r=a[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart(),t=0;t<e;++t)s.point((n=r[t])[0],n[1]);s.lineEnd()}}else 1<o&&2&i&&a.push(a.pop().concat(a.shift())),l.push(a.filter(eh))}return e}}function eh(t){return 1<t.length}function rh(t,e){return((t=t.x)[0]<0?t[1]-Kc-Gc:Kc-t[1])-((e=e.x)[0]<0?e[1]-Kc-Gc:Kc-e[1])}$u.invert=$u;const nh=th(function(){return 1},function(l){var u,h=NaN,d=NaN,f=NaN;return{lineStart:function(){l.lineStart(),u=1},point:function(t,e){var r,n,i,a,o,s=0<t?Zc:-Zc,c=rl(t-h);rl(c-Zc)<Gc?(l.point(h,d=0<(d+e)/2?Kc:-Kc),l.point(f,d),l.lineEnd(),l.lineStart(),l.point(s,d),l.point(t,d),u=0):f!==s&&Zc<=c&&(rl(h-f)<Gc&&(h-=f*Gc),rl(t-s)<Gc&&(t-=s*Gc),c=d,i=e,o=A((r=h)-(n=t)),d=rl(o)>Gc?nl((A(c)*(a=S(i))*A(n)-A(i)*(n=S(c))*A(r))/(n*a*o)):(c+i)/2,l.point(f,d),l.lineEnd(),l.lineStart(),l.point(s,d),u=0),l.point(h=t,d=e),f=s},lineEnd:function(){l.lineEnd(),h=d=NaN},clean:function(){return 2-u}}},function(t,e,r,n){var i;null==t?(i=r*Kc,n.point(-Zc,i),n.point(0,i),n.point(Zc,i),n.point(Zc,0),n.point(Zc,-i),n.point(0,-i),n.point(-Zc,-i),n.point(-Zc,0),n.point(-Zc,i)):rl(t[0]-e[0])>Gc?(t=t[0]<e[0]?Zc:-Zc,i=r*t/2,n.point(-t,i),n.point(0,i),n.point(t,i)):n.point(e[0],e[1])},[-Zc,-Kc]);function ih(i){var g=S(i),a=6*el,h=0<g,d=rl(g)>Gc;function f(t,e){return S(t)*S(e)>g}function p(t,e,r){var n,i,a,o,s,c,l,u=[1,0,0],h=Pl(Rl(t),Rl(e)),d=Fl(h,h),f=h[0],p=d-f*f;return p?(n=Pl(u,h),$l(u=jl(u,g*d/p),jl(h,-g*f/p)),(p=(h=Fl(u,d=n))*h-(f=Fl(d,d))*(Fl(u,u)-1))<0?void 0:($l(p=jl(d,(-h-(n=hl(p)))/f),u),p=Il(p),r?(i=t[0],a=e[0],o=t[1],e=e[1],a<i&&(l=i,i=a,a=l),!(c=rl((s=a-i)-Zc)<Gc)&&e<o&&(l=o,o=e,e=l),(c||s<Gc?c?0<o+e^p[1]<(rl(p[0]-i)<Gc?o:e):o<=p[1]&&p[1]<=e:Zc<s^(i<=p[0]&&p[0]<=a))?($l(l=jl(d,(-h+n)/f),u),[p,Il(l)]):void 0):p)):!r&&t}function y(t,e){var r=h?i:Zc-i,n=0;return t<-r?n|=1:r<t&&(n|=2),e<-r?n|=4:r<e&&(n|=8),n}return th(f,function(a){var o,s,c,l,u;return{lineStart:function(){l=c=!1,u=1},point:function(t,e){var r,n=[t,e],i=f(t,e),t=h?i?0:y(t,e):i?y(t+(t<0?Zc:-Zc),e):0;!o&&(l=c=i)&&a.lineStart(),i===c||(r=p(o,n))&&!Gu(o,r)&&!Gu(n,r)||(n[2]=1),i!==c?(u=0,i?(a.lineStart(),r=p(n,o),a.point(r[0],r[1])):(r=p(o,n),a.point(r[0],r[1],2),a.lineEnd()),o=r):d&&o&&h^i&&(t&s||!(e=p(n,o,!0))||(u=0,h?(a.lineStart(),a.point(e[0][0],e[0][1]),a.point(e[1][0],e[1][1]),a.lineEnd()):(a.point(e[1][0],e[1][1]),a.lineEnd(),a.lineStart(),a.point(e[0][0],e[0][1],3)))),!i||o&&Gu(o,n)||a.point(n[0],n[1]),o=n,c=i,s=t},lineEnd:function(){c&&a.lineEnd(),o=null},clean:function(){return u|(l&&c)<<1}}},function(t,e,r,n){qu(n,i,a,r,t,e)},h?[0,-i]:[-Zc,i-Zc])}var ah=1e9,oh=-ah;function sh(m,b,_,v){function x(t,e){return m<=t&&t<=_&&b<=e&&e<=v}function k(t,e,r,n){var i=0,a=0;if(null==t||(i=o(t,r))!==(a=o(e,r))||s(t,e)<0^0<r)for(;n.point(0===i||3===i?m:_,1<i?v:b),(i=(i+r+4)%4)!==a;);else n.point(e[0],e[1])}function o(t,e){return rl(t[0]-m)<Gc?0<e?0:3:rl(t[0]-_)<Gc?0<e?2:1:rl(t[1]-b)<Gc?0<e?1:0:0<e?3:2}function w(t,e){return s(t.x,e.x)}function s(t,e){var r=o(t,1),n=o(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(n){var i,h,a,o,s,c,l,u,d,f,p,g=n,t=Vu(),e={point:r,lineStart:function(){e.point=y,h&&h.push(a=[]),d=!(f=!0),l=u=NaN},lineEnd:function(){i&&(y(o,s),c&&d&&t.rejoin(),i.push(t.result())),e.point=r,d&&g.lineEnd()},polygonStart:function(){g=t,i=[],h=[],p=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,r=h.length;e<r;++e)for(var n,i,a=h[e],o=1,s=a.length,c=a[0],l=c[0],u=c[1];o<s;++o)n=l,i=u,c=a[o],l=c[0],u=c[1],i<=v?v<u&&(u-i)*(m-n)<(l-n)*(v-i)&&++t:u<=v&&(l-n)*(v-i)<(u-i)*(m-n)&&--t;return t}(),e=p&&t,r=(i=se(i)).length;(e||r)&&(n.polygonStart(),e&&(n.lineStart(),k(null,null,1,n),n.lineEnd()),r&&Zu(i,w,t,k,n),n.polygonEnd()),g=n,i=h=a=null}};function r(t,e){x(t,e)&&g.point(t,e)}function y(t,e){var r,n,i=x(t,e);h&&a.push([t,e]),f?(o=t,s=e,f=!1,(c=i)&&(g.lineStart(),g.point(t,e))):i&&d?g.point(t,e):!function(t,e,r,n,i,a){var o=t[0],s=t[1],c=0,l=1,u=e[0]-o,h=e[1]-s,r=r-o;if(u||!(0<r)){if(r/=u,u<0){if(r<c)return;r<l&&(l=r)}else if(0<u){if(l<r)return;c<r&&(c=r)}if(r=i-o,u||!(r<0)){if(r/=u,u<0){if(l<r)return;c<r&&(c=r)}else if(0<u){if(r<c)return;r<l&&(l=r)}if(r=n-s,h||!(0<r)){if(r/=h,h<0){if(r<c)return;r<l&&(l=r)}else if(0<h){if(l<r)return;c<r&&(c=r)}if(r=a-s,h||!(r<0)){if(r/=h,h<0){if(l<r)return;c<r&&(c=r)}else if(0<h){if(r<c)return;r<l&&(l=r)}return 0<c&&(t[0]=o+c*u,t[1]=s+c*h),l<1&&(e[0]=o+l*u,e[1]=s+l*h),1}}}}}(r=[l=Math.max(oh,Math.min(ah,l)),u=Math.max(oh,Math.min(ah,u))],n=[t=Math.max(oh,Math.min(ah,t)),e=Math.max(oh,Math.min(ah,e))],m,b,_,v)?i&&(g.lineStart(),g.point(t,e),p=!1):(d||(g.lineStart(),g.point(r[0],r[1])),g.point(n[0],n[1]),i||g.lineEnd(),p=!1),l=t,u=e,d=i}return e}}var ch,lh,uh,hh,dh={sphere:yl,point:yl,lineStart:function(){dh.point=ph,dh.lineEnd=fh},lineEnd:yl,polygonStart:yl,polygonEnd:yl};function fh(){dh.point=dh.lineEnd=yl}function ph(t,e){lh=t*=el,uh=A(e*=el),hh=S(e),dh.point=gh}function gh(t,e){t*=el;var r=A(e*=el),e=S(e),n=rl(t-lh),i=S(n),n=e*A(n),a=hh*r-uh*e*i,i=uh*r+hh*e*i;ch.add(il(hl(n*n+a*a),i)),lh=t,uh=r,hh=e}function yh(t){return ch=new xt,kl(t,dh),+ch}var mh=[null,null],bh={type:"LineString",coordinates:mh};function _h(t,e){return mh[0]=t,mh[1]=e,yh(bh)}var vh={Feature:function(t,e){return kh(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)if(kh(r[n].geometry,e))return!0;return!1}},xh={Sphere:function(){return!0},Point:function(t,e){return wh(t.coordinates,e)},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)if(wh(r[n],e))return!0;return!1},LineString:function(t,e){return Eh(t.coordinates,e)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)if(Eh(r[n],e))return!0;return!1},Polygon:function(t,e){return Th(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)if(Th(r[n],e))return!0;return!1},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)if(kh(r[n],e))return!0;return!1}};function kh(t,e){return!(!t||!xh.hasOwnProperty(t.type))&&xh[t.type](t,e)}function wh(t,e){return 0===_h(t,e)}function Eh(t,e){for(var r,n,i,a=0,o=t.length;a<o;a++){if(0===(n=_h(t[a],e))||0<a&&0<(i=_h(t[a],t[a-1]))&&r<=i&&n<=i&&(r+n-i)*(1-Math.pow((r-n)/i,2))<Xc*i)return!0;r=n}return!1}function Th(t,e){return!!Ju(t.map(Ch),Sh(e))}function Ch(t){return(t=t.map(Sh)).pop(),t}function Sh(t){return[t[0]*el,t[1]*el]}function Ah(t,e,r){var n=ce(t,e-Gc,r).concat(e);return function(e){return n.map(function(t){return[e,t]})}}function Mh(t,e,r){var n=ce(t,e-Gc,r).concat(e);return function(e){return n.map(function(t){return[t,e]})}}function Nh(){var e,r,n,i,a,o,s,c,l,u,h,d,f=10,p=f,g=90,y=360,m=2.5;function b(){return{type:"MultiLineString",coordinates:t()}}function t(){return ce(al(i/g)*g,n,g).map(h).concat(ce(al(c/y)*y,s,y).map(d)).concat(ce(al(r/f)*f,e,f).filter(function(t){return rl(t%g)>Gc}).map(l)).concat(ce(al(o/p)*p,a,p).filter(function(t){return rl(t%y)>Gc}).map(u))}return b.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(d(s).slice(1),h(n).reverse().slice(1),d(c).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.extentMajor(t).extentMinor(t):b.extentMinor()},b.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],c=+t[0][1],s=+t[1][1],n<i&&(t=i,i=n,n=t),s<c&&(t=c,c=s,s=t),b.precision(m)):[[i,c],[n,s]]},b.extentMinor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],e<r&&(t=r,r=e,e=t),a<o&&(t=o,o=a,a=t),b.precision(m)):[[r,o],[e,a]]},b.step=function(t){return arguments.length?b.stepMajor(t).stepMinor(t):b.stepMinor()},b.stepMajor=function(t){return arguments.length?(g=+t[0],y=+t[1],b):[g,y]},b.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],b):[f,p]},b.precision=function(t){return arguments.length?(m=+t,l=Ah(o,a,90),u=Mh(r,e,m),h=Ah(c,s,90),d=Mh(i,n,m),b):m},b.extentMajor([[-180,-90+Gc],[180,90-Gc]]).extentMinor([[-180,-80-Gc],[180,80+Gc]])}const Dh=t=>t;var Lh,Bh,Oh,Ih,Rh=new xt,Fh=new xt,Ph={point:yl,lineStart:yl,lineEnd:yl,polygonStart:function(){Ph.lineStart=$h,Ph.lineEnd=zh},polygonEnd:function(){Ph.lineStart=Ph.lineEnd=Ph.point=yl,Rh.add(rl(Fh)),Fh=new xt},result:function(){var t=Rh/2;return Rh=new xt,t}};function $h(){Ph.point=jh}function jh(t,e){Ph.point=Yh,Lh=Oh=t,Bh=Ih=e}function Yh(t,e){Fh.add(Ih*t-Oh*e),Oh=t,Ih=e}function zh(){Yh(Lh,Bh)}const Uh=Ph;var Wh=1/0,qh=Wh,Hh=-Wh,Vh=Hh;const Gh={point:function(t,e){t<Wh&&(Wh=t),Hh<t&&(Hh=t),e<qh&&(qh=e),Vh<e&&(Vh=e)},lineStart:yl,lineEnd:yl,polygonStart:yl,polygonEnd:yl,result:function(){var t=[[Wh,qh],[Hh,Vh]];return Hh=Vh=-(qh=Wh=1/0),t}};var Xh,Zh,Kh,Qh,Jh=0,t1=0,e1=0,r1=0,n1=0,i1=0,a1=0,o1=0,s1=0,c1={point:l1,lineStart:u1,lineEnd:f1,polygonStart:function(){c1.lineStart=p1,c1.lineEnd=g1},polygonEnd:function(){c1.point=l1,c1.lineStart=u1,c1.lineEnd=f1},result:function(){var t=s1?[a1/s1,o1/s1]:i1?[r1/i1,n1/i1]:e1?[Jh/e1,t1/e1]:[NaN,NaN];return Jh=t1=e1=r1=n1=i1=a1=o1=s1=0,t}};function l1(t,e){Jh+=t,t1+=e,++e1}function u1(){c1.point=h1}function h1(t,e){c1.point=d1,l1(Kh=t,Qh=e)}function d1(t,e){var r=t-Kh,n=e-Qh,r=hl(r*r+n*n);r1+=r*(Kh+t)/2,n1+=r*(Qh+e)/2,i1+=r,l1(Kh=t,Qh=e)}function f1(){c1.point=l1}function p1(){c1.point=y1}function g1(){m1(Xh,Zh)}function y1(t,e){c1.point=m1,l1(Xh=Kh=t,Zh=Qh=e)}function m1(t,e){var r=t-Kh,n=e-Qh,r=hl(r*r+n*n);r1+=r*(Kh+t)/2,n1+=r*(Qh+e)/2,i1+=r,a1+=(r=Qh*t-Kh*e)*(Kh+t),o1+=r*(Qh+e),s1+=3*r,l1(Kh=t,Qh=e)}const b1=c1;function _1(t){this._context=t}_1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Jc)}},result:yl};var v1,x1,k1,w1,E1,T1=new xt,C1={point:yl,lineStart:function(){C1.point=S1},lineEnd:function(){v1&&A1(x1,k1),C1.point=yl},polygonStart:function(){v1=!0},polygonEnd:function(){v1=null},result:function(){var t=+T1;return T1=new xt,t}};function S1(t,e){C1.point=A1,x1=w1=t,k1=E1=e}function A1(t,e){w1-=t,E1-=e,T1.add(hl(w1*w1+E1*E1)),w1=t,E1=e}const M1=C1;function N1(){this._string=[]}function D1(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function L1(n){return function(t){var e,r=new B1;for(e in n)r[e]=n[e];return r.stream=t,r}}function B1(){}function O1(t,e,r){var n=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=n&&t.clipExtent(null),kl(r,t.stream(Gh)),e(Gh.result()),null!=n&&t.clipExtent(n),t}function I1(i,a,t){return O1(i,function(t){var e=a[1][0]-a[0][0],r=a[1][1]-a[0][1],n=Math.min(e/(t[1][0]-t[0][0]),r/(t[1][1]-t[0][1])),e=+a[0][0]+(e-n*(t[1][0]+t[0][0]))/2,r=+a[0][1]+(r-n*(t[1][1]+t[0][1]))/2;i.scale(150*n).translate([e,r])},t)}function R1(t,e,r){return I1(t,[[0,0],e],r)}function F1(n,i,t){return O1(n,function(t){var e=+i,r=e/(t[1][0]-t[0][0]),e=(e-r*(t[1][0]+t[0][0]))/2,t=-r*t[0][1];n.scale(150*r).translate([e,t])},t)}function P1(i,a,t){return O1(i,function(t){var e=+a,r=e/(t[1][1]-t[0][1]),n=-r*t[0][0],e=(e-r*(t[1][1]+t[0][1]))/2;i.scale(150*r).translate([n,e])},t)}N1.prototype={_radius:4.5,_circle:D1(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=D1(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){var t;return this._string.length?(t=this._string.join(""),this._string=[],t):null}},B1.prototype={constructor:B1,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $1=16,j1=S(30*el);function Y1(t,e){return+e?(S=t,A=e,function(n){var r,i,a,o,s,c,l,u,h,d,f,p,g={point:t,lineStart:e,lineEnd:m,polygonStart:function(){n.polygonStart(),g.lineStart=b},polygonEnd:function(){n.polygonEnd(),g.lineStart=e}};function t(t,e){t=S(t,e),n.point(t[0],t[1])}function e(){u=NaN,g.point=y,n.lineStart()}function y(t,e){var r=Rl([t,e]),e=S(t,e);M(u,h,l,d,f,p,u=e[0],h=e[1],l=t,d=r[0],f=r[1],p=r[2],$1,n),n.point(u,h)}function m(){g.point=t,n.lineEnd()}function b(){e(),g.point=_,g.lineEnd=v}function _(t,e){y(r=t,e),i=u,a=h,o=d,s=f,c=p,g.point=y}function v(){M(u,h,l,d,f,p,i,a,r,o,s,c,$1,n),g.lineEnd=m,m()}return g}):(r=t,L1({point:function(t,e){t=r(t,e),this.stream.point(t[0],t[1])}}));var r,S,A;function M(t,e,r,n,i,a,o,s,c,l,u,h,d,f){var p,g,y,m,b,_,v,x,k,w,E=o-t,T=s-e,C=E*E+T*T;4*A<C&&d--&&(y=a+h,v=pl(y/=m=hl((p=n+l)*p+(g=i+u)*g+y*y)),b=rl(rl(y)-1)<Gc||rl(r-c)<Gc?(r+c)/2:il(g,p),_=(v=S(b,v))[0],v=v[1],A<(w=T*(x=_-t)-E*(k=v-e))*w/C||.3<rl((E*x+T*k)/C-.5)||n*l+i*u+a*h<j1)&&(M(t,e,r,n,i,a,_,v,b,p/=m,g/=m,y,d,f),f.point(_,v),M(_,v,b,p,g,y,o,s,c,l,u,h,d,f))}}var z1=L1({point:function(t,e){this.stream.point(t*el,e*el)}});function U1(t,r,n,i,a,e){var o,s,c,l,u,h,d,f,p,g,y,m;return e?(h=S(e),e=A(e),d=h*t,f=e*t,p=h/t,g=e/t,y=(e*n-h*r)/t,m=(e*r+h*n)/t,_.invert=function(t,e){return[i*(p*t-g*e+y),a*(m-g*t-p*e)]},_):(o=t,s=r,c=n,l=i,u=a,b.invert=function(t,e){return[(t-s)/o*l,(c-e)/o*u]},b);function b(t,e){return[s+o*(t*=l),c-o*(e*=u)]}function _(t,e){return[d*(t*=i)-f*(e*=a)+r,n-f*t-d*e]}}function W1(t){return q1(function(){return t})()}function q1(t){var e,n,r,i,a,o,s,c,l,u,h=150,d=480,f=250,p=0,g=0,y=0,m=0,b=0,_=0,v=1,x=1,k=null,w=nh,E=null,T=Dh,C=.5;function S(t){return c(t[0]*el,t[1]*el)}function A(t){return(t=c.invert(t[0],t[1]))&&[t[0]*tl,t[1]*tl]}function M(){var t=U1(h,0,0,v,x,_).apply(null,e(p,g)),t=U1(h,d-t[0],f-t[1],v,x,_);return n=ju(y,m,b),s=Pu(e,t),c=Pu(n,s),o=Y1(s,C),N()}function N(){return l=u=null,S}return S.stream=function(t){return l&&u===t?l:l=z1((r=n,L1({point:function(t,e){t=r(t,e);return this.stream.point(t[0],t[1])}})(w(o(T(u=t))))));var r},S.preclip=function(t){return arguments.length?(w=t,k=void 0,N()):w},S.postclip=function(t){return arguments.length?(T=t,E=r=i=a=null,N()):T},S.clipAngle=function(t){return arguments.length?(w=+t?ih(k=t*el):(k=null,nh),N()):k*tl},S.clipExtent=function(t){return arguments.length?(T=null==t?(E=r=i=a=null,Dh):sh(E=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),N()):null==E?null:[[E,r],[i,a]]},S.scale=function(t){return arguments.length?(h=+t,M()):h},S.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],M()):[d,f]},S.center=function(t){return arguments.length?(p=t[0]%360*el,g=t[1]%360*el,M()):[p*tl,g*tl]},S.rotate=function(t){return arguments.length?(y=t[0]%360*el,m=t[1]%360*el,b=2<t.length?t[2]%360*el:0,M()):[y*tl,m*tl,b*tl]},S.angle=function(t){return arguments.length?(_=t%360*el,M()):_*tl},S.reflectX=function(t){return arguments.length?(v=t?-1:1,M()):v<0},S.reflectY=function(t){return arguments.length?(x=t?-1:1,M()):x<0},S.precision=function(t){return arguments.length?(o=Y1(s,C=t*t),N()):hl(C)},S.fitExtent=function(t,e){return I1(S,t,e)},S.fitSize=function(t,e){return R1(S,t,e)},S.fitWidth=function(t,e){return F1(S,t,e)},S.fitHeight=function(t,e){return P1(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&A,M()}}function H1(t){var e=0,r=Zc/3,n=q1(t),t=n(e,r);return t.parallels=function(t){return arguments.length?n(e=t[0]*el,r=t[1]*el):[e*tl,r*tl]},t}function V1(t,e){var r,n,i,a=A(t),o=(a+A(e))/2;return rl(o)<Gc?(r=S(t),s.invert=function(t,e){return[t/r,pl(e*r)]},s):(i=hl(n=1+a*(2*o-a))/o,c.invert=function(t,e){var e=i-e,r=il(t,rl(e))*ul(e);return e*o<0&&(r-=Zc*ul(t)*ul(e)),[r/o,pl((n-(t*t+e*e)*o*o)/(2*o))]},c);function s(t,e){return[t*r,A(e)/r]}function c(t,e){e=hl(n-2*o*A(e))/o;return[e*A(t*=o),i-e*S(t)]}}function G1(){return H1(V1).scale(155.424).center([0,33.6442])}function X1(){return G1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Z1(i){return function(t,e){var r=S(t),n=S(e),r=i(r*n);return r===1/0?[2,0]:[r*n*A(t),r*A(e)]}}function K1(a){return function(t,e){var r=hl(t*t+e*e),n=a(r),i=A(n),n=S(n);return[il(t*i,r*n),pl(r&&e*i/r)]}}var Q1=Z1(function(t){return hl(2/(1+t))});Q1.invert=K1(function(t){return 2*pl(t/2)});var J1=Z1(function(t){return(t=fl(t))&&t/A(t)});function t0(t,e){return[t,cl(dl((Kc+e)/2))]}function e0(r){var n,i,a,o=W1(r),e=o.center,s=o.scale,c=o.translate,l=o.clipExtent,u=null;function h(){var t=Zc*s(),e=o(Wu(o.rotate()).invert([0,0]));return l(null==u?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:r===t0?[[Math.max(e[0]-t,u),n],[Math.min(e[0]+t,i),a]]:[[u,Math.max(e[1]-t,n)],[i,Math.min(e[1]+t,a)]])}return o.scale=function(t){return(arguments.length?(s(t),h):s)()},o.translate=function(t){return(arguments.length?(c(t),h):c)()},o.center=function(t){return(arguments.length?(e(t),h):e)()},o.clipExtent=function(t){return arguments.length?(null==t?u=n=i=a=null:(u=+t[0][0],n=+t[0][1],i=+t[1][0],a=+t[1][1]),h()):null==u?null:[[u,n],[i,a]]},h()}function r0(t){return dl((Kc+t)/2)}function n0(t,e){var r=S(t),i=t===e?A(t):cl(r/S(e))/cl(r0(e)/r0(t)),a=r*ll(r0(t),i)/i;return i?(n.invert=function(t,e){var e=a-e,r=ul(i)*hl(t*t+e*e),n=il(t,rl(e))*ul(e);return e*i<0&&(n-=Zc*ul(t)*ul(e)),[n/i,2*nl(ll(a/r,1/i))-Kc]},n):t0;function n(t,e){0<a?e<-Kc+Gc&&(e=-Kc+Gc):Kc-Gc<e&&(e=Kc-Gc);e=a/ll(r0(e),i);return[e*A(i*t),a-e*S(i*t)]}}function i0(t,e){return[t,e]}function a0(t,e){var r=S(t),n=t===e?A(t):(r-S(e))/(e-t),i=r/n+t;return rl(n)<Gc?i0:(a.invert=function(t,e){var e=i-e,r=il(t,rl(e))*ul(e);return e*n<0&&(r-=Zc*ul(t)*ul(e)),[r/n,i-ul(n)*hl(t*t+e*e)]},a);function a(t,e){e=i-e,t*=n;return[e*A(t),i-e*S(t)]}}J1.invert=K1(function(t){return t}),t0.invert=function(t,e){return[t,2*nl(ol(e))-Kc]},i0.invert=i0;var o0=1.340264,s0=-.081106,c0=893e-6,l0=.003796,u0=hl(3)/2;function h0(t,e){var e=pl(u0*A(e)),r=e*e,n=r*r*r;return[t*S(e)/(u0*(o0+3*s0*r+n*(7*c0+9*l0*r))),e*(o0+s0*r+n*(c0+l0*r))]}function d0(t,e){var r=S(e),n=S(t)*r;return[r*A(t)/n,A(e)/n]}function f0(t,e){var r=e*e,n=r*r;return[t*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791)),e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))]}function p0(t,e){return[S(e)*A(t),A(e)]}function g0(t,e){var r=S(e),n=1+S(t)*r;return[r*A(t)/n,A(e)/n]}function y0(t,e){return[cl(dl((Kc+e)/2)),-t]}function m0(t,e){return t.parent===e.parent?1:2}function b0(t,e){return t+e.x}function _0(t,e){return Math.max(t,e.y)}function v0(t){var e=0,r=t.children,n=r&&r.length;if(n)for(;0<=--n;)e+=r[n].value;else e=1;t.value=e}function x0(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=w0)):void 0===e&&(e=k0);for(var r,n,i,a,o,t=new C0(t),s=[t];r=s.pop();)if((i=e(r.data))&&(o=(i=Array.from(i)).length))for(r.children=i,a=o-1;0<=a;--a)s.push(n=i[a]=new C0(i[a])),n.parent=r,n.depth=r.depth+1;return t.eachBefore(T0)}function k0(t){return t.children}function w0(t){return Array.isArray(t)?t[1]:null}function E0(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function T0(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function C0(t){this.data=t,this.depth=this.height=0,this.parent=null}function S0(t){return null==t?null:A0(t)}function A0(t){if("function"!=typeof t)throw new Error;return t}function M0(){return 0}function N0(t){return function(){return t}}h0.invert=function(t,e){for(var r,n=e,i=n*n,a=i*i*i,o=0;o<12&&(a=(i=(n-=r=(n*(o0+s0*i+a*(c0+l0*i))-e)/(o0+3*s0*i+a*(7*c0+9*l0*i)))*n)*i*i,!(rl(r)<Xc));++o);return[u0*t*(o0+3*s0*i+a*(7*c0+9*l0*i))/S(n),pl(A(n)/u0)]},d0.invert=K1(nl),f0.invert=function(t,e){var r=e,n=25;do{var i=r*r,a=i*i}while(r-=a=(r*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))-e)/(1.007226+i*(.045255+a*(.259866*i-.311325-.005916*11*a))),rl(a)>Gc&&0<--n);return[t/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},p0.invert=K1(pl),g0.invert=K1(function(t){return 2*nl(t)}),y0.invert=function(t,e){return[-e,2*nl(ol(t))-Kc]},C0.prototype=x0.prototype={constructor:C0,count:function(){return this.eachAfter(v0)},each:function(t,e){let r=-1;for(const n of this)t.call(e,n,++r,this);return this},eachAfter:function(t,e){for(var r,n,i,a=this,o=[a],s=[],c=-1;a=o.pop();)if(s.push(a),r=a.children)for(n=0,i=r.length;n<i;++n)o.push(r[n]);for(;a=s.pop();)t.call(e,a,++c,this);return this},eachBefore:function(t,e){for(var r,n,i,a=[this],o=-1;r=a.pop();)if(t.call(e,r,++o,this),n=r.children)for(i=n.length-1;0<=i;--i)a.push(n[i]);return this},find:function(t,e){let r=-1;for(const n of this)if(t.call(e,n,++r,this))return n},sum:function(i){return this.eachAfter(function(t){for(var e=+i(t.data)||0,r=t.children,n=r&&r.length;0<=--n;)e+=r[n].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,r=function(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),i=null;for(t=r.pop(),e=n.pop();t===e;)i=t,t=r.pop(),e=n.pop();return i}(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var i=n.length;t!==r;)n.splice(i,0,t),t=t.parent;return n},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,r=[];return e.each(function(t){t!==e&&r.push({source:t.parent,target:t})}),r},copy:function(){return x0(this).eachBefore(E0)},[Symbol.iterator]:function*(){var t,e,r,n,i,a=[this];do{for(e=a.reverse(),a=[];t=e.pop();)if(yield t,r=t.children)for(n=0,i=r.length;n<i;++n)a.push(r[n])}while(a.length)}};const D0=1664525,L0=1013904223,B0=4294967296;function O0(){let t=1;return()=>(t=(D0*t+L0)%B0)/B0}function I0(t,e){for(var r,n,i=0,a=(t=function(t,e){let r=t.length,n,i;for(;r;)i=e()*r--|0,n=t[r],t[r]=t[i],t[i]=n;return t}(Array.from(t),e)).length,o=[];i<a;)r=t[i],n&&F0(n,r)?++i:(n=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return $0(t[0],t[1]);case 3:return j0(t[0],t[1],t[2])}}(o=function(t,e){var r,n;if(P0(e,t))return[e];for(r=0;r<t.length;++r)if(R0(e,t[r])&&P0($0(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(R0($0(t[r],t[n]),e)&&R0($0(t[r],e),t[n])&&R0($0(t[n],e),t[r])&&P0(j0(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}(o,r)),i=0);return n}function R0(t,e){var r=t.r-e.r,n=e.x-t.x,e=e.y-t.y;return r<0||r*r<n*n+e*e}function F0(t,e){var r=t.r-e.r+1e-9*Math.max(t.r,e.r,1),n=e.x-t.x,e=e.y-t.y;return 0<r&&n*n+e*e<r*r}function P0(t,e){for(var r=0;r<e.length;++r)if(!F0(t,e[r]))return;return 1}function $0(t,e){var r=t.x,n=t.y,t=t.r,i=e.x,a=e.y,e=e.r,o=i-r,s=a-n,c=e-t,l=Math.sqrt(o*o+s*s);return{x:(r+i+o/l*c)/2,y:(n+a+s/l*c)/2,r:(l+t+e)/2}}function j0(t,e,r){var n=t.x,i=t.y,t=t.r,a=e.x,o=e.y,e=e.r,s=r.x,c=r.y,r=r.r,l=n-a,u=n-s,h=i-o,d=i-c,f=e-t,p=r-t,g=n*n+i*i-t*t,a=g-a*a-o*o+e*e,o=g-s*s-c*c+r*r,e=u*h-l*d,g=(h*o-d*a)/(2*e)-n,s=(d*f-h*p)/e,c=(u*a-l*o)/(2*e)-i,r=(l*p-u*f)/e,d=s*s+r*r-1,h=2*(t+g*s+c*r),a=g*g+c*c-t*t,o=-(1e-6<Math.abs(d)?(h+Math.sqrt(h*h-4*d*a))/(2*d):a/h);return{x:n+g+s*o,y:i+c+r*o,r:o}}function Y0(t,e,r){var n,i,a,o,s=t.x-e.x,c=t.y-e.y,l=s*s+c*c;l?(i=e.r+r.r,o=t.r+r.r,(o*=o)<(i*=i)?(n=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-n*n)),r.x=t.x-n*s-a*c,r.y=t.y-n*c+a*s):(n=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-n*n)),r.x=e.x+n*s-a*c,r.y=e.y+n*c+a*s)):(r.x=e.x+r.r,r.y=e.y)}function z0(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,e=e.y-t.y;return 0<r&&n*n+e*e<r*r}function U0(t){var e=t._,t=t.next._,r=e.r+t.r,n=(e.x*t.r+t.x*e.r)/r,t=(e.y*t.r+t.y*e.r)/r;return n*n+t*t}function W0(t){this._=t,this.next=null,this.previous=null}function q0(t,e){if(!(a=(t="object"==typeof(r=t)&&"length"in r?r:Array.from(r)).length))return 0;var r,n,i,a,o,s,c,l,u,h,d,f=t[0];if(f.x=0,f.y=0,!(1<a))return f.r;if(n=t[1],f.x=-n.r,n.x=f.r,n.y=0,!(2<a))return f.r+n.r;Y0(n,f,i=t[2]),f=new W0(f),n=new W0(n),i=new W0(i),((f.next=i.previous=n).next=f.previous=i).next=n.previous=f;t:for(c=3;c<a;++c){Y0(f._,n._,i=t[c]),i=new W0(i),l=n.next,u=f.previous,h=n._.r,d=f._.r;do{if(h<=d){if(z0(l._,i._)){n=l,(f.next=n).previous=f,--c;continue t}h+=l._.r,l=l.next}else{if(z0(u._,i._)){((f=u).next=n).previous=f,--c;continue t}d+=u._.r,u=u.previous}}while(l!==u.next);for(i.previous=f,i.next=n,f.next=n.previous=n=i,o=U0(f);(i=i.next)!==n;)(s=U0(i))<o&&(f=i,o=s);n=f.next}for(f=[n._],i=n;(i=i.next)!==n;)f.push(i._);for(i=I0(f,e),c=0;c<a;++c)(f=t[c]).x-=i.x,f.y-=i.y;return i.r}function H0(t){return Math.sqrt(t.value)}function V0(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function G0(o,s,c){return function(t){if(e=t.children){var e,r,n,i=e.length,a=o(t)*s||0;if(a)for(r=0;r<i;++r)e[r].r+=a;if(n=q0(e,c),a)for(r=0;r<i;++r)e[r].r-=a;t.r=n+a}}}function X0(r){return function(t){var e=t.parent;t.r*=r,e&&(t.x=e.x+r*t.x,t.y=e.y+r*t.y)}}function Z0(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function K0(t,e,r,n,i){for(var a,o=t.children,s=-1,c=o.length,l=t.value&&(n-e)/t.value;++s<c;)(a=o[s]).y0=r,a.y1=i,a.x0=e,a.x1=e+=a.value*l}var Q0={depth:-1},J0={},td={};function ed(t){return t.id}function rd(t){return t.parentId}function nd(t){let e=t.length;if(e<2)return"";for(;1<--e&&!id(t,e););return t.slice(0,e)}function id(e,r){if("/"===e[r]){let t=0;for(;0<r&&"\\"===e[--r];)++t;if(0==(1&t))return 1}}function ad(t,e){return t.parent===e.parent?1:2}function od(t){var e=t.children;return e?e[0]:t.t}function sd(t){var e=t.children;return e?e[e.length-1]:t.t}function cd(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function ld(t,e,r,n,i){for(var a,o=t.children,s=-1,c=o.length,l=t.value&&(i-r)/t.value;++s<c;)(a=o[s]).x0=e,a.x1=n,a.y0=r,a.y1=r+=a.value*l}cd.prototype=Object.create(C0.prototype);yc=(1+Math.sqrt(5))/2;function ud(t,e,r,n,i,a){for(var o,s,c,l,u,h,d,f,p,g,y,m=[],b=e.children,_=0,v=0,x=b.length,k=e.value;_<x;){for(c=i-r,l=a-n;!(u=b[v++].value)&&v<x;);for(y=(h=d=u)*u*(g=Math.max(l/c,c/l)/(k*t)),p=Math.max(d/y,y/h);v<x;++v){if(u+=s=b[v].value,s<h&&(h=s),d<s&&(d=s),y=u*u*g,p<(f=Math.max(d/y,y/h))){u-=s;break}p=f}m.push(o={value:u,dice:c<l,children:b.slice(_,v)}),o.dice?K0(o,r,n,i,k?n+=l*u/k:a):ld(o,r,n,k?r+=c*u/k:i,a),k-=u,_=v}return m}const hd=function e(a){function t(t,e,r,n,i){ud(a,t,e,r,n,i)}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(yc);yc=function e(f){function t(t,e,r,n,i){if((a=t._squarify)&&a.ratio===f)for(var a,o,s,c,l,u=-1,h=a.length,d=t.value;++u<h;){for(s=(o=a[u]).children,c=o.value=0,l=s.length;c<l;++c)o.value+=s[c].value;o.dice?K0(o,e,r,n,d?r+=(i-r)*o.value/d:i):ld(o,e,r,d?e+=(n-e)*o.value/d:n,i),d-=o.value}else t._squarify=a=ud(f,t,e,r,n,i),a.ratio=f}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(yc);function dd(t,e){return t[0]-e[0]||t[1]-e[1]}function fd(t){var e,r,n,i=t.length,a=[0,1];let o=2,s;for(s=2;s<i;++s){for(;1<o&&(e=t[a[o-2]],r=t[a[o-1]],n=t[s],(r[0]-e[0])*(n[1]-e[1])-(r[1]-e[1])*(n[0]-e[0])<=0);)--o;a[o++]=s}return a.slice(0,o)}const pd=Math.random,gd=function t(r){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return r()*e+t}}return e.source=t,e}(pd),yd=function t(r){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(r()*e+t)}}return e.source=t,e}(pd),md=function t(a){function e(e,r){var n,i;return e=null==e?0:+e,r=null==r?1:+r,function(){var t;if(null!=n)t=n,n=null;else for(;n=2*a()-1,t=2*a()-1,!(i=n*n+t*t)||1<i;);return e+r*t*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(pd),bd=function t(e){var r=md.source(e);function n(){var t=r.apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(pd),_d=function t(n){function e(r){return(r=+r)<=0?()=>0:function(){for(var t=0,e=r;1<e;--e)t+=n();return t+e*n()}}return e.source=t,e}(pd),vd=function t(r){var n=_d.source(r);function e(t){var e;return 0==(t=+t)?r:(e=n(t),function(){return e()/t})}return e.source=t,e}(pd),xd=function t(e){function r(t){return function(){return-Math.log1p(-e())/t}}return r.source=t,r}(pd),kd=function t(e){function r(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return r.source=t,r}(pd),wd=function t(e){function r(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return r.source=t,r}(pd),Ed=function t(e){function r(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return r.source=t,r}(pd),Td=function t(s){var c=md.source(s)();function e(t,n){if((t=+t)<0)throw new RangeError("invalid k");var i,a,o;return 0===t?()=>0:(n=null==n?1:+n,1===t?()=>-Math.log1p(-s())*n:(i=(t<1?t+1:t)-1/3,a=1/(3*Math.sqrt(i)),o=t<1?()=>Math.pow(s(),1/t):()=>1,function(){do{do{var t=c(),e=1+a*t}while(e<=0);e*=e*e;var r=1-s()}while(1-.0331*t*t*t*t<=r&&Math.log(r)>=.5*t*t+i*(1-e+Math.log(e)));return i*e*o()*n}))}return e.source=t,e}(pd),Cd=function t(e){var i=Td.source(e);function r(t,e){var r=i(t),n=i(e);return function(){var t=r();return 0===t?0:t/(t+n())}}return r.source=t,r}(pd),Sd=function t(e){var h=Ed.source(e),d=Cd.source(e);function r(l,u){return l=+l,1<=(u=+u)?()=>l:u<=0?()=>0:function(){for(var t=0,e=l,r=u;16<e*r&&16<e*(1-r);){var n=Math.floor((e+1)*r),i=d(n,e-n+1)();i<=r?(t+=n,e-=n,r=(r-i)/(1-i)):(e=n-1,r/=i)}for(var a=r<.5,o=h(a?r:1-r),s=o(),c=0;s<=e;++c)s+=o();return t+(a?c:e-c)}}return r.source=t,r}(pd),Ad=function t(i){function e(e,t,r){var n=0==(e=+e)?t=>-Math.log(t):(e=1/e,t=>Math.pow(t,e));return t=null==t?0:+t,r=null==r?1:+r,function(){return t+r*n(-Math.log1p(-i()))}}return e.source=t,e}(pd),Md=function t(r){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*r())}}return e.source=t,e}(pd),Nd=function t(n){function e(e,r){return e=null==e?0:+e,r=null==r?1:+r,function(){var t=n();return e+r*Math.log(t/(1-t))}}return e.source=t,e}(pd),Dd=function t(s){var c=Td.source(s),l=Sd.source(s);function e(o){return function(){for(var t=0,e=o;16<e;){var r=Math.floor(.875*e),n=c(r)();if(e<n)return t+l(r-1,e/n)();t+=r,e-=n}for(var i=-Math.log1p(-s()),a=0;i<=e;++a)i-=Math.log1p(-s());return t+a}}return e.source=t,e}(pd),Ld=1/4294967296;function Bd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Od(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const Id=Symbol("implicit");function Rd(){var r=new kt,n=[],i=[],a=Id;function o(t){let e=r.get(t);if(void 0===e){if(a!==Id)return a;r.set(t,e=n.push(t)-1)}return i[e%i.length]}return o.domain=function(t){if(!arguments.length)return n.slice();n=[],r=new kt;for(const e of t)r.has(e)||r.set(e,n.push(e)-1);return o},o.range=function(t){return arguments.length?(i=Array.from(t),o):i.slice()},o.unknown=function(t){return arguments.length?(a=t,o):a},o.copy=function(){return Rd(n,i).unknown(a)},Bd.apply(o,arguments),o}function Fd(){var i,a,t=Rd().unknown(void 0),o=t.domain,s=t.range,c=0,l=1,u=!1,h=0,d=0,f=.5;function e(){var t=o().length,e=l<c,r=e?l:c,n=e?c:l,n=(i=(n-r)/Math.max(1,t-h+2*d),u&&(i=Math.floor(i)),r+=(n-r-i*(t-h))*f,a=i*(1-h),u&&(r=Math.round(r),a=Math.round(a)),ce(t).map(function(t){return r+i*t}));return s(e?n.reverse():n)}return delete t.unknown,t.domain=function(t){return(arguments.length?(o(t),e):o)()},t.range=function(t){return arguments.length?([c,l]=t,c=+c,l=+l,e()):[c,l]},t.rangeRound=function(t){return[c,l]=t,c=+c,l=+l,u=!0,e()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(t){return arguments.length?(u=!!t,e()):u},t.padding=function(t){return arguments.length?(h=Math.min(1,d=+t),e()):h},t.paddingInner=function(t){return arguments.length?(h=Math.min(1,t),e()):h},t.paddingOuter=function(t){return arguments.length?(d=+t,e()):d},t.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},t.copy=function(){return Fd(o(),[c,l]).round(u).paddingInner(h).paddingOuter(d).align(f)},Bd.apply(e(),arguments)}function Pd(t){return+t}var $d=[0,1];function jd(t){return t}function Yd(e,r){return(r-=e=+e)?function(t){return(t-e)/r}:(t=isNaN(r)?NaN:.5,function(){return t});var t}function zd(t,e,r){var n=t[0],t=t[1],i=e[0],e=e[1],i=t<n?(n=Yd(t,n),r(e,i)):(n=Yd(n,t),r(i,e));return function(t){return i(n(t))}}function Ud(r,t,e){var n=Math.min(r.length,t.length)-1,i=new Array(n),a=new Array(n),o=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=Yd(r[o],r[o+1]),a[o]=e(t[o],t[o+1]);return function(t){var e=st(r,t,1,n)-1;return a[e](i[e](t))}}function Wd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qd(){var r,n,e,i,a,o,s=$d,c=$d,l=_i,u=jd;function h(){var e,r,t,n=Math.min(s.length,c.length);return u!==jd&&(e=s[0],(r=s[n-1])<e&&(t=e,e=r,r=t),u=function(t){return Math.max(e,Math.min(r,t))}),i=2<n?Ud:zd,a=o=null,d}function d(t){return null==t||isNaN(t=+t)?e:(a=a||i(s.map(r),c,l))(r(u(t)))}return d.invert=function(t){return u(n((o=o||i(c,s.map(r),pi))(t)))},d.domain=function(t){return arguments.length?(s=Array.from(t,Pd),h()):s.slice()},d.range=function(t){return arguments.length?(c=Array.from(t),h()):c.slice()},d.rangeRound=function(t){return c=Array.from(t),l=vi,h()},d.clamp=function(t){return arguments.length?(u=!!t||jd,h()):u!==jd},d.interpolate=function(t){return arguments.length?(l=t,h()):l},d.unknown=function(t){return arguments.length?(e=t,d):e},function(t,e){return r=t,n=e,h()}}function Hd(){return qd()(jd,jd)}function Vd(t,e,r,n){var i,a=Vt(t,e,r);switch((n=Bc(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(i=Hc(a,o))||(n.precision=i),jc(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=Vc(a,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=qc(a))||(n.precision=i-2*("%"===n.type))}return $c(n)}function Gd(l){var u=l.domain;return l.ticks=function(t){var e=u();return qt(e[0],e[e.length-1],null==t?10:t)},l.tickFormat=function(t,e){var r=u();return Vd(r[0],r[r.length-1],null==t?10:t,e)},l.nice=function(t){null==t&&(t=10);var e,r,n=u(),i=0,a=n.length-1,o=n[i],s=n[a],c=10;for(s<o&&(r=o,o=s,s=r,r=i,i=a,a=r);0<c--;){if((r=Ht(o,s,t))===e)return n[i]=o,n[a]=s,u(n);if(0<r)o=Math.floor(o/r)*r,s=Math.ceil(s/r)*r;else{if(!(r<0))break;o=Math.ceil(o*r)/r,s=Math.floor(s*r)/r}e=r}return l},l}function Xd(){var t=Hd();return t.copy=function(){return Wd(t,Xd())},Bd.apply(t,arguments),Gd(t)}function Zd(t,e){var r,n=0,i=(t=t.slice()).length-1,a=t[n],o=t[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),t[n]=e.floor(a),t[i]=e.ceil(o),t}function Kd(t){return Math.log(t)}function Qd(t){return Math.exp(t)}function Jd(t){return-Math.log(-t)}function tf(t){return-Math.exp(-t)}function ef(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rf(r){return(t,e)=>-r(-t,e)}function nf(t){const i=t(Kd,Qd),l=i.domain;let u=10,h,d;function e(){return h=(r=u)===Math.E?Math.log:10===r&&Math.log10||2===r&&Math.log2||(r=Math.log(r),t=>Math.log(t)/r),d=10===(e=u)?ef:e===Math.E?Math.exp:t=>Math.pow(e,t),l()[0]<0?(h=rf(h),d=rf(d),t(Jd,tf)):t(Kd,Qd),i;var e,r}return i.base=function(t){return arguments.length?(u=+t,e()):u},i.domain=function(t){return(arguments.length?(l(t),e):l)()},i.ticks=t=>{var e=l();let r=e[0],n=e[e.length-1];e=n<r;e&&([r,n]=[n,r]);let i=h(r),a=h(n),o,s;t=null==t?10:+t;let c=[];if(!(u%1)&&a-i<t){if(i=Math.floor(i),a=Math.ceil(a),0<r){for(;i<=a;++i)for(o=1;o<u;++o)if(!((s=i<0?o/d(-i):o*d(i))<r)){if(s>n)break;c.push(s)}}else for(;i<=a;++i)for(o=u-1;1<=o;--o)if(!((s=0<i?o/d(-i):o*d(i))<r)){if(s>n)break;c.push(s)}2*c.length<t&&(c=qt(r,n,t))}else c=qt(i,a,Math.min(a-i,t)).map(d);return e?c.reverse():c},i.tickFormat=(t,r)=>{if(null==t&&(t=10),"function"!=typeof(r=null==r?10===u?"s":",":r)&&(u%1||null!=(r=Bc(r)).precision||(r.trim=!0),r=$c(r)),t===1/0)return r;const n=Math.max(1,u*t/i.ticks().length);return t=>{let e=t/d(Math.round(h(t)));return e*u<u-.5&&(e*=u),e<=n?r(t):""}},i.nice=()=>l(Zd(l(),{floor:t=>d(Math.floor(h(t))),ceil:t=>d(Math.ceil(h(t)))})),i}function af(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function of(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sf(e){var r=1,t=e(af(r),of(r));return t.constant=function(t){return arguments.length?e(af(r=+t),of(r)):r},Gd(t)}function cf(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function lf(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function uf(t){return t<0?-t*t:t*t}function hf(e){var t=e(jd,jd),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(jd,jd):.5===r?e(lf,uf):e(cf(r),cf(1/r)):r},Gd(t)}function df(){var t=hf(qd());return t.copy=function(){return Wd(t,df()).exponent(t.exponent())},Bd.apply(t,arguments),t}function ff(t){return Math.sign(t)*t*t}var pf=new Date,gf=new Date;function yf(a,o,r,n){function s(t){return a(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return a(t=new Date(+t)),t},s.ceil=function(t){return a(t=new Date(t-1)),o(t,1),a(t),t},s.round=function(t){var e=s(t),r=s.ceil(t);return t-e<r-t?e:r},s.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,r){var n,i=[];if(t=s.ceil(t),r=null==r?1:Math.floor(r),t<e&&0<r)for(;i.push(n=new Date(+t)),o(t,r),a(t),n<t&&t<e;);return i},s.filter=function(r){return yf(function(t){if(t<=t)for(;a(t),!r(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!r(t););else for(;0<=--e;)for(;o(t,1),!r(t););})},r&&(s.count=function(t,e){return pf.setTime(+t),gf.setTime(+e),a(pf),a(gf),Math.floor(r(pf,gf))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(n?function(t){return n(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var mf=yf(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});mf.every=function(r){return r=Math.floor(r),isFinite(r)&&0<r?1<r?yf(function(t){t.setTime(Math.floor(t/r)*r)},function(t,e){t.setTime(+t+e*r)},function(t,e){return(e-t)/r}):mf:null};const bf=mf;var _f=mf.range;const vf=1e3,xf=6e4,kf=36e5,wf=864e5,Ef=7*wf,Tf=(wf,365*wf);var Cf=yf(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*vf)},function(t,e){return(e-t)/vf},function(t){return t.getUTCSeconds()});const Sf=Cf;var Cf=Cf.range,Af=yf(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*vf)},function(t,e){t.setTime(+t+e*xf)},function(t,e){return(e-t)/xf},function(t){return t.getMinutes()});const Mf=Af;var Af=Af.range,Nf=yf(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*vf-t.getMinutes()*xf)},function(t,e){t.setTime(+t+e*kf)},function(t,e){return(e-t)/kf},function(t){return t.getHours()});const Df=Nf;var Nf=Nf.range,Lf=yf(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xf)/wf,t=>t.getDate()-1);const Bf=Lf;Lf=Lf.range;function Of(e){return yf(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xf)/Ef})}var If=Of(0),Rf=Of(1),Ff=Of(2),Pf=Of(3),$f=Of(4),jf=Of(5),Yf=Of(6),zf=If.range,Uf=Rf.range,Wf=Ff.range,qf=Pf.range,Hf=$f.range,Vf=jf.range,Gf=Yf.range,Xf=yf(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()});const Zf=Xf;var Xf=Xf.range,Kf=yf(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Kf.every=function(r){return isFinite(r=Math.floor(r))&&0<r?yf(function(t){t.setFullYear(Math.floor(t.getFullYear()/r)*r),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*r)}):null};const Qf=Kf;var Kf=Kf.range,Jf=yf(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*xf)},function(t,e){return(e-t)/xf},function(t){return t.getUTCMinutes()});const t2=Jf;var Jf=Jf.range,e2=yf(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*kf)},function(t,e){return(e-t)/kf},function(t){return t.getUTCHours()});const r2=e2;var e2=e2.range,n2=yf(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/wf},function(t){return t.getUTCDate()-1});const i2=n2;n2=n2.range;function a2(e){return yf(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Ef})}var o2=a2(0),s2=a2(1),c2=a2(2),l2=a2(3),u2=a2(4),h2=a2(5),d2=a2(6),f2=o2.range,p2=s2.range,g2=c2.range,y2=l2.range,m2=u2.range,b2=h2.range,_2=d2.range,v2=yf(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()});const x2=v2;var v2=v2.range,k2=yf(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});k2.every=function(r){return isFinite(r=Math.floor(r))&&0<r?yf(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/r)*r),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*r)}):null};const w2=k2;k2=k2.range;function E2(a,t,e,r,n,i){const o=[[Sf,1,vf],[Sf,5,5e3],[Sf,15,15e3],[Sf,30,3e4],[i,1,xf],[i,5,3e5],[i,15,9e5],[i,30,18e5],[n,1,kf],[n,3,3*kf],[n,6,6*kf],[n,12,432e5],[r,1,wf],[r,2,2*wf],[e,1,Ef],[t,1,2592e6],[t,3,7776e6],[a,1,Tf]];function s(t,e,r){var n=Math.abs(e-t)/r,i=J(([,,t])=>t).right(o,n);return i===o.length?a.every(Vt(t/Tf,e/Tf,r)):0===i?bf.every(Math.max(Vt(t,e,r),1)):([t,e]=o[n/o[i-1][2]<o[i][2]/n?i-1:i],t.every(e))}return[function(t,e,r){var n=e<t;n&&([t,e]=[e,t]);r=(r=r&&"function"==typeof r.range?r:s(t,e,r))?r.range(t,+e+1):[];return n?r.reverse():r},s]}const[T2,C2]=E2(w2,x2,o2,i2,r2,t2),[S2,A2]=E2(Qf,Zf,If,Bf,Df,Mf);function M2(t){var e;return 0<=t.y&&t.y<100?((e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L)).setFullYear(t.y),e):new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function N2(t){var e;return 0<=t.y&&t.y<100?((e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L))).setUTCFullYear(t.y),e):new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function D2(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function L2(t){var n=t.dateTime,i=t.date,a=t.time,e=t.periods,r=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,l=W2(e),u=q2(e),h=W2(r),d=q2(r),f=W2(o),p=q2(o),g=W2(s),y=q2(s),m=W2(c),b=q2(c),_={a:function(t){return o[t.getDay()]},A:function(t){return r[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:dp,e:dp,f:mp,g:Ap,G:Np,H:fp,I:pp,j:gp,L:yp,m:bp,M:_p,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Jp,s:tg,S:vp,u:xp,U:kp,V:Ep,w:Tp,W:Cp,x:null,X:null,y:Sp,Y:Mp,Z:Dp,"%":Qp},v={a:function(t){return o[t.getUTCDay()]},A:function(t){return r[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Lp,e:Lp,f:Fp,g:Gp,G:Zp,H:Bp,I:Op,j:Ip,L:Rp,m:Pp,M:$p,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Jp,s:tg,S:jp,u:Yp,U:zp,V:Wp,w:qp,W:Hp,x:null,X:null,y:Vp,Y:Xp,Z:Kp,"%":Qp},x={a:function(t,e,r){e=f.exec(e.slice(r));return e?(t.w=p.get(e[0].toLowerCase()),r+e[0].length):-1},A:function(t,e,r){e=h.exec(e.slice(r));return e?(t.w=d.get(e[0].toLowerCase()),r+e[0].length):-1},b:function(t,e,r){e=m.exec(e.slice(r));return e?(t.m=b.get(e[0].toLowerCase()),r+e[0].length):-1},B:function(t,e,r){e=g.exec(e.slice(r));return e?(t.m=y.get(e[0].toLowerCase()),r+e[0].length):-1},c:function(t,e,r){return E(t,n,e,r)},d:rp,e:rp,f:cp,g:Q2,G:K2,H:ip,I:ip,j:np,L:sp,m:ep,M:ap,p:function(t,e,r){e=l.exec(e.slice(r));return e?(t.p=u.get(e[0].toLowerCase()),r+e[0].length):-1},q:tp,Q:up,s:hp,S:op,u:V2,U:G2,V:X2,w:H2,W:Z2,x:function(t,e,r){return E(t,i,e,r)},X:function(t,e,r){return E(t,a,e,r)},y:Q2,Y:K2,Z:J2,"%":lp};function k(c,l){return function(t){var e,r,n,i=[],a=-1,o=0,s=c.length;for(t instanceof Date||(t=new Date(+t));++a<s;)37===c.charCodeAt(a)&&(i.push(c.slice(o,a)),null!=(r=P2[e=c.charAt(++a)])?e=c.charAt(++a):r="e"===e?" ":"0",(n=l[e])&&(e=n(t,r)),i.push(e),o=a+1);return i.push(c.slice(o,a)),i.join("")}}function w(i,a){return function(t){var e,r,n=D2(1900,void 0,1);if(E(n,i,t+="",0)!=t.length)return null;if("Q"in n)return new Date(n.Q);if("s"in n)return new Date(1e3*n.s+("L"in n?n.L:0));if(!a||"Z"in n||(n.Z=0),"p"in n&&(n.H=n.H%12+12*n.p),void 0===n.m&&(n.m="q"in n?n.q:0),"V"in n){if(n.V<1||53<n.V)return null;"w"in n||(n.w=1),"Z"in n?(e=4<(r=(e=N2(D2(n.y,0,1))).getUTCDay())||0===r?s2.ceil(e):s2(e),e=i2.offset(e,7*(n.V-1)),n.y=e.getUTCFullYear(),n.m=e.getUTCMonth(),n.d=e.getUTCDate()+(n.w+6)%7):(e=4<(r=(e=M2(D2(n.y,0,1))).getDay())||0===r?Rf.ceil(e):Rf(e),e=Bf.offset(e,7*(n.V-1)),n.y=e.getFullYear(),n.m=e.getMonth(),n.d=e.getDate()+(n.w+6)%7)}else("W"in n||"U"in n)&&("w"in n||(n.w="u"in n?n.u%7:"W"in n?1:0),r="Z"in n?N2(D2(n.y,0,1)).getUTCDay():M2(D2(n.y,0,1)).getDay(),n.m=0,n.d="W"in n?(n.w+6)%7+7*n.W-(r+5)%7:n.w+7*n.U-(r+6)%7);return("Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,N2):M2)(n)}}function E(t,e,r,n){for(var i,a,o=0,s=e.length,c=r.length;o<s;){if(c<=n)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in P2?e.charAt(o++):i])||(n=a(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}return _.x=k(i,_),_.X=k(a,_),_.c=k(n,_),v.x=k(i,v),v.X=k(a,v),v.c=k(n,v),{format:function(t){var e=k(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",v);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t+="",!0);return e.toString=function(){return t},e}}}var B2,O2,I2,R2,F2,P2={"-":"",_:" ",0:"0"},$2=/^\s*\d+/,j2=/^%/,Y2=/[\\^$*+?|[\]().{}]/g;function z2(t,e,r){var n=t<0?"-":"",t=(n?-t:t)+"",i=t.length;return n+(i<r?new Array(r-i+1).join(e)+t:t)}function U2(t){return t.replace(Y2,"\\$&")}function W2(t){return new RegExp("^(?:"+t.map(U2).join("|")+")","i")}function q2(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function H2(t,e,r){e=$2.exec(e.slice(r,r+1));return e?(t.w=+e[0],r+e[0].length):-1}function V2(t,e,r){e=$2.exec(e.slice(r,r+1));return e?(t.u=+e[0],r+e[0].length):-1}function G2(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.U=+e[0],r+e[0].length):-1}function X2(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.V=+e[0],r+e[0].length):-1}function Z2(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.W=+e[0],r+e[0].length):-1}function K2(t,e,r){e=$2.exec(e.slice(r,r+4));return e?(t.y=+e[0],r+e[0].length):-1}function Q2(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),r+e[0].length):-1}function J2(t,e,r){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),r+e[0].length):-1}function tp(t,e,r){e=$2.exec(e.slice(r,r+1));return e?(t.q=3*e[0]-3,r+e[0].length):-1}function ep(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.m=e[0]-1,r+e[0].length):-1}function rp(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.d=+e[0],r+e[0].length):-1}function np(t,e,r){e=$2.exec(e.slice(r,r+3));return e?(t.m=0,t.d=+e[0],r+e[0].length):-1}function ip(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.H=+e[0],r+e[0].length):-1}function ap(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.M=+e[0],r+e[0].length):-1}function op(t,e,r){e=$2.exec(e.slice(r,r+2));return e?(t.S=+e[0],r+e[0].length):-1}function sp(t,e,r){e=$2.exec(e.slice(r,r+3));return e?(t.L=+e[0],r+e[0].length):-1}function cp(t,e,r){e=$2.exec(e.slice(r,r+6));return e?(t.L=Math.floor(e[0]/1e3),r+e[0].length):-1}function lp(t,e,r){e=j2.exec(e.slice(r,r+1));return e?r+e[0].length:-1}function up(t,e,r){e=$2.exec(e.slice(r));return e?(t.Q=+e[0],r+e[0].length):-1}function hp(t,e,r){e=$2.exec(e.slice(r));return e?(t.s=+e[0],r+e[0].length):-1}function dp(t,e){return z2(t.getDate(),e,2)}function fp(t,e){return z2(t.getHours(),e,2)}function pp(t,e){return z2(t.getHours()%12||12,e,2)}function gp(t,e){return z2(1+Bf.count(Qf(t),t),e,3)}function yp(t,e){return z2(t.getMilliseconds(),e,3)}function mp(t,e){return yp(t,e)+"000"}function bp(t,e){return z2(t.getMonth()+1,e,2)}function _p(t,e){return z2(t.getMinutes(),e,2)}function vp(t,e){return z2(t.getSeconds(),e,2)}function xp(t){t=t.getDay();return 0===t?7:t}function kp(t,e){return z2(If.count(Qf(t)-1,t),e,2)}function wp(t){var e=t.getDay();return 4<=e||0===e?$f(t):$f.ceil(t)}function Ep(t,e){return t=wp(t),z2($f.count(Qf(t),t)+(4===Qf(t).getDay()),e,2)}function Tp(t){return t.getDay()}function Cp(t,e){return z2(Rf.count(Qf(t)-1,t),e,2)}function Sp(t,e){return z2(t.getFullYear()%100,e,2)}function Ap(t,e){return z2((t=wp(t)).getFullYear()%100,e,2)}function Mp(t,e){return z2(t.getFullYear()%1e4,e,4)}function Np(t,e){var r=t.getDay();return z2((t=4<=r||0===r?$f(t):$f.ceil(t)).getFullYear()%1e4,e,4)}function Dp(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+z2(t/60|0,"0",2)+z2(t%60,"0",2)}function Lp(t,e){return z2(t.getUTCDate(),e,2)}function Bp(t,e){return z2(t.getUTCHours(),e,2)}function Op(t,e){return z2(t.getUTCHours()%12||12,e,2)}function Ip(t,e){return z2(1+i2.count(w2(t),t),e,3)}function Rp(t,e){return z2(t.getUTCMilliseconds(),e,3)}function Fp(t,e){return Rp(t,e)+"000"}function Pp(t,e){return z2(t.getUTCMonth()+1,e,2)}function $p(t,e){return z2(t.getUTCMinutes(),e,2)}function jp(t,e){return z2(t.getUTCSeconds(),e,2)}function Yp(t){t=t.getUTCDay();return 0===t?7:t}function zp(t,e){return z2(o2.count(w2(t)-1,t),e,2)}function Up(t){var e=t.getUTCDay();return 4<=e||0===e?u2(t):u2.ceil(t)}function Wp(t,e){return t=Up(t),z2(u2.count(w2(t),t)+(4===w2(t).getUTCDay()),e,2)}function qp(t){return t.getUTCDay()}function Hp(t,e){return z2(s2.count(w2(t)-1,t),e,2)}function Vp(t,e){return z2(t.getUTCFullYear()%100,e,2)}function Gp(t,e){return z2((t=Up(t)).getUTCFullYear()%100,e,2)}function Xp(t,e){return z2(t.getUTCFullYear()%1e4,e,4)}function Zp(t,e){var r=t.getUTCDay();return z2((t=4<=r||0===r?u2(t):u2.ceil(t)).getUTCFullYear()%1e4,e,4)}function Kp(){return"+0000"}function Qp(){return"%"}function Jp(t){return+t}function tg(t){return Math.floor(+t/1e3)}function eg(t){return B2=L2(t),O2=B2.format,I2=B2.parse,R2=B2.utcFormat,F2=B2.utcParse,B2}eg({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var rg="%Y-%m-%dT%H:%M:%S.%LZ";var ng=Date.prototype.toISOString?function(t){return t.toISOString()}:R2(rg);rg=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:F2(rg);function ig(t){return new Date(t)}function ag(t){return t instanceof Date?+t:+new Date(+t)}function og(r,n,e,i,a,o,s,c,l,u){var h=Hd(),d=h.invert,f=h.domain,p=u(".%L"),g=u(":%S"),y=u("%I:%M"),m=u("%I %p"),b=u("%a %d"),_=u("%b %d"),v=u("%B"),x=u("%Y");function k(t){return(l(t)<t?p:c(t)<t?g:s(t)<t?y:o(t)<t?m:i(t)<t?a(t)<t?b:_:e(t)<t?v:x)(t)}return h.invert=function(t){return new Date(d(t))},h.domain=function(t){return arguments.length?f(Array.from(t,ag)):f().map(ig)},h.ticks=function(t){var e=f();return r(e[0],e[e.length-1],null==t?10:t)},h.tickFormat=function(t,e){return null==e?k:u(e)},h.nice=function(t){var e=f();return(t=t&&"function"==typeof t.range?t:n(e[0],e[e.length-1],null==t?10:t))?f(Zd(e,t)):h},h.copy=function(){return Wd(h,og(r,n,e,i,a,o,s,c,l,u))},h}function sg(){return Bd.apply(og(S2,A2,Qf,Zf,If,Bf,Df,Mf,Sf,O2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cg(){var e,r,n,i,a,o=0,s=1,c=jd,l=!1;function u(t){return null==t||isNaN(t=+t)?a:c(0===n?.5:(t=(i(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function t(r){return function(t){var e;return arguments.length?([t,e]=t,c=r(t,e),u):[c(0),c(1)]}}return u.domain=function(t){return arguments.length?([o,s]=t,e=i(o=+o),r=i(s=+s),n=e===r?0:1/(r-e),u):[o,s]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(c=t,u):c},u.range=t(_i),u.rangeRound=t(vi),u.unknown=function(t){return arguments.length?(a=t,u):a},function(t){return e=(i=t)(o),r=t(s),n=e===r?0:1/(r-e),u}}function lg(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ug(){var t=hf(cg());return t.copy=function(){return lg(t,ug()).exponent(t.exponent())},Od.apply(t,arguments)}function hg(){var e,r,n,i,a,o,s,c=0,l=.5,u=1,h=1,d=jd,f=!1;function p(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-r)*(h*t<h*r?i:a),d(f?Math.max(0,Math.min(1,t)):t))}function t(n){return function(t){var e,r;return arguments.length?([t,e,r]=t,d=Fi(n,[t,e,r]),p):[d(0),d(.5),d(1)]}}return p.domain=function(t){return arguments.length?([c,l,u]=t,e=o(c=+c),r=o(l=+l),n=o(u=+u),i=e===r?0:.5/(r-e),a=r===n?0:.5/(n-r),h=r<e?-1:1,p):[c,l,u]},p.clamp=function(t){return arguments.length?(f=!!t,p):f},p.interpolator=function(t){return arguments.length?(d=t,p):d},p.range=t(_i),p.rangeRound=t(vi),p.unknown=function(t){return arguments.length?(s=t,p):s},function(t){return e=(o=t)(c),r=t(l),n=t(u),i=e===r?0:.5/(r-e),a=r===n?0:.5/(n-r),h=r<e?-1:1,p}}function dg(){var t=hf(hg());return t.copy=function(){return lg(t,dg()).exponent(t.exponent())},Od.apply(t,arguments)}function fg(t){for(var e=t.length/6|0,r=new Array(e),n=0;n<e;)r[n]="#"+t.slice(6*n,6*++n);return r}var pg=fg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gg=fg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),yg=fg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),mg=fg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),bg=fg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),_g=fg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),vg=fg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),xg=fg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),kg=fg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),wg=fg("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Eg=t=>li(t[t.length-1]),Tg=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(fg),Cg=Eg(Tg),e=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(fg),r=Eg(e),Sg=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(fg),n=Eg(Sg),i=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(fg),a=Eg(i),o=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(fg),Ag=Eg(o),s=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(fg),l=Eg(s),u=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(fg),h=Eg(u),d=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(fg),f=Eg(d),Mg=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(fg),p=Eg(Mg),Ng=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(fg),Dg=Eg(Ng),Lg=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(fg),Bg=Eg(Lg),Og=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(fg),Ig=Eg(Og),g=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(fg),Rg=Eg(g),y=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(fg),Fg=Eg(y),m=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(fg),Pg=Eg(m),$g=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(fg),jg=Eg($g),b=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(fg),Yg=Eg(b),_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(fg),v=Eg(_),x=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(fg),k=Eg(x),zg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(fg),Ug=Eg(zg),Wg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(fg),qg=Eg(Wg),Hg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(fg),Vg=Eg(Hg),Gg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(fg),Xg=Eg(Gg),Zg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(fg),Kg=Eg(Zg),Qg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(fg),Jg=Eg(Qg),ty=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(fg),ey=Eg(ty),ry=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(fg),Eg=Eg(ry);var ny=Ri(Kn(300,.5,0),Kn(-240,.5,1)),iy=Ri(Kn(-100,.75,.35),Kn(80,1.5,.8)),ay=Ri(Kn(260,.75,.35),Kn(80,1.5,.8)),oy=Kn();var sy=un(),cy=Math.PI/3,ly=2*Math.PI/3;function uy(e){var r=e.length;return function(t){return e[Math.max(0,Math.min(r-1,Math.floor(t*r)))]}}var hy=uy(fg("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),dy=uy(fg("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),fy=uy(fg("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),py=uy(fg("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function gy(t){return function(){return t}}const yy=Math.abs,my=Math.atan2,by=Math.cos,_y=Math.max,vy=Math.min,xy=Math.sin,ky=Math.sqrt,wy=1e-12,Ey=Math.PI,Ty=Ey/2,Cy=2*Ey;function Sy(t){return 1<=t?Ty:t<=-1?-Ty:Math.asin(t)}function Ay(t){return t.innerRadius}function My(t){return t.outerRadius}function Ny(t){return t.startAngle}function Dy(t){return t.endAngle}function Ly(t){return t&&t.padAngle}function By(t,e,r,n,i,a,o){var s=t-r,c=e-n,o=(o?a:-a)/ky(s*s+c*c),c=o*c,o=-o*s,s=t+c,t=e+o,e=r+c,r=n+o,n=(s+e)/2,l=(t+r)/2,u=e-s,h=r-t,d=u*u+h*h,a=i-a,s=s*r-e*t,r=(h<0?-1:1)*ky(_y(0,a*a*d-s*s)),e=(s*h-u*r)/d,t=(-s*u-h*r)/d,f=(s*h+u*r)/d,s=(-s*u+h*r)/d,u=e-n,h=t-l,r=f-n,d=s-l;return r*r+d*d<u*u+h*h&&(e=f,t=s),{cx:e,cy:t,x01:-c,y01:-o,x11:e*(i/a-1),y11:t*(i/a-1)}}function Oy(){var A=Ay,M=My,N=gy(0),D=null,L=Ny,B=Dy,O=Ly,I=null;function e(){var t,e,r,n,i,a,o,s,c,l,u,h,d,f,p,g,y,m,b,_,v,x,k=+A.apply(this,arguments),w=+M.apply(this,arguments),E=L.apply(this,arguments)-Ty,T=B.apply(this,arguments)-Ty,C=yy(T-E),S=E<T;if(I=I||(t=Po()),w<k&&(e=w,w=k,k=e),w>wy?C>Cy-wy?(I.moveTo(w*by(E),w*xy(E)),I.arc(0,0,w,E,T,!S),k>wy&&(I.moveTo(k*by(T),k*xy(T)),I.arc(0,0,k,T,E,S))):(n=e=E,i=r=T,o=a=C,d=(u=O.apply(this,arguments)/2)>wy&&(D?+D.apply(this,arguments):ky(k*k+w*w)),x=v=s=vy(yy(w-k)/2,+N.apply(this,arguments)),d>wy&&(h=Sy(d/k*xy(u)),d=Sy(d/w*xy(u)),(a-=2*h)>wy?(n+=h*=S?1:-1,i-=h):(a=0,n=i=(E+T)/2),(o-=2*d)>wy?(e+=d*=S?1:-1,r-=d):(o=0,e=r=(E+T)/2)),u=w*by(e),h=w*xy(e),d=k*by(i),E=k*xy(i),s>wy&&(f=w*by(r),p=w*xy(r),g=k*by(n),y=k*xy(n),C<Ey)&&(T=function(t,e,r,n,i,a,o,s){var c=(s=s-a)*(r=r-t)-(o=o-i)*(n=n-e);if(!(c*c<wy))return[t+(c=(o*(e-a)-s*(t-i))/c)*r,e+c*n]}(u,h,g,y,f,p,d,E))&&(C=u-T[0],b=h-T[1],_=f-T[0],m=p-T[1],b=1/xy((1<(C=(C*_+b*m)/(ky(C*C+b*b)*ky(_*_+m*m)))?0:C<-1?Ey:Math.acos(C))/2),_=ky(T[0]*T[0]+T[1]*T[1]),v=vy(s,(k-_)/(b-1)),x=vy(s,(w-_)/(1+b))),o>wy?x>wy?(c=By(g,y,u,h,w,x,S),l=By(f,p,d,E,w,x,S),I.moveTo(c.cx+c.x01,c.cy+c.y01),x<s?I.arc(c.cx,c.cy,x,my(c.y01,c.x01),my(l.y01,l.x01),!S):(I.arc(c.cx,c.cy,x,my(c.y01,c.x01),my(c.y11,c.x11),!S),I.arc(0,0,w,my(c.cy+c.y11,c.cx+c.x11),my(l.cy+l.y11,l.cx+l.x11),!S),I.arc(l.cx,l.cy,x,my(l.y11,l.x11),my(l.y01,l.x01),!S))):(I.moveTo(u,h),I.arc(0,0,w,e,r,!S)):I.moveTo(u,h),k>wy&&a>wy?v>wy?(c=By(d,E,f,p,k,-v,S),l=By(u,h,g,y,k,-v,S),I.lineTo(c.cx+c.x01,c.cy+c.y01),v<s?I.arc(c.cx,c.cy,v,my(c.y01,c.x01),my(l.y01,l.x01),!S):(I.arc(c.cx,c.cy,v,my(c.y01,c.x01),my(c.y11,c.x11),!S),I.arc(0,0,k,my(c.cy+c.y11,c.cx+c.x11),my(l.cy+l.y11,l.cx+l.x11),S),I.arc(l.cx,l.cy,v,my(l.y11,l.x11),my(l.y01,l.x01),!S))):I.arc(0,0,k,i,n,S):I.lineTo(d,E)):I.moveTo(0,0),I.closePath(),t)return I=null,t+""||null}return e.centroid=function(){var t=(+A.apply(this,arguments)+ +M.apply(this,arguments))/2,e=(+L.apply(this,arguments)+ +B.apply(this,arguments))/2-Ey/2;return[by(e)*t,xy(e)*t]},e.innerRadius=function(t){return arguments.length?(A="function"==typeof t?t:gy(+t),e):A},e.outerRadius=function(t){return arguments.length?(M="function"==typeof t?t:gy(+t),e):M},e.cornerRadius=function(t){return arguments.length?(N="function"==typeof t?t:gy(+t),e):N},e.padRadius=function(t){return arguments.length?(D=null==t?null:"function"==typeof t?t:gy(+t),e):D},e.startAngle=function(t){return arguments.length?(L="function"==typeof t?t:gy(+t),e):L},e.endAngle=function(t){return arguments.length?(B="function"==typeof t?t:gy(+t),e):B},e.padAngle=function(t){return arguments.length?(O="function"==typeof t?t:gy(+t),e):O},e.context=function(t){return arguments.length?(I=null==t?null:t,e):I},e}var Iy=Array.prototype.slice;function Ry(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Fy(t){this._context=t}function Py(t){return new Fy(t)}function $y(t){return t[0]}function jy(t){return t[1]}function Yy(o,s){var c=gy(!0),l=null,u=Py,h=null;function e(t){var e,r,n,i=(t=Ry(t)).length,a=!1;for(null==l&&(h=u(n=Po())),e=0;e<=i;++e)!(e<i&&c(r=t[e],e,t))===a&&((a=!a)?h.lineStart():h.lineEnd()),a&&h.point(+o(r,e,t),+s(r,e,t));if(n)return h=null,n+""||null}return o="function"==typeof o?o:void 0===o?$y:gy(o),s="function"==typeof s?s:void 0===s?jy:gy(s),e.x=function(t){return arguments.length?(o="function"==typeof t?t:gy(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:gy(+t),e):s},e.defined=function(t){return arguments.length?(c="function"==typeof t?t:gy(!!t),e):c},e.curve=function(t){return arguments.length?(u=t,null!=l&&(h=u(l)),e):u},e.context=function(t){return arguments.length?(null==t?l=h=null:h=u(l=t),e):l},e}function zy(u,h,d){var f=null,p=gy(!0),g=null,y=Py,m=null;function e(t){var e,r,n,i,a,o=(t=Ry(t)).length,s=!1,c=new Array(o),l=new Array(o);for(null==g&&(m=y(a=Po())),e=0;e<=o;++e){if(!(e<o&&p(i=t[e],e,t))===s)if(s=!s)r=e,m.areaStart(),m.lineStart();else{for(m.lineEnd(),m.lineStart(),n=e-1;r<=n;--n)m.point(c[n],l[n]);m.lineEnd(),m.areaEnd()}s&&(c[e]=+u(i,e,t),l[e]=+h(i,e,t),m.point(f?+f(i,e,t):c[e],d?+d(i,e,t):l[e]))}if(a)return m=null,a+""||null}function t(){return Yy().defined(p).curve(y).context(g)}return u="function"==typeof u?u:void 0===u?$y:gy(+u),h="function"==typeof h?h:gy(void 0===h?0:+h),d="function"==typeof d?d:void 0===d?jy:gy(+d),e.x=function(t){return arguments.length?(u="function"==typeof t?t:gy(+t),f=null,e):u},e.x0=function(t){return arguments.length?(u="function"==typeof t?t:gy(+t),e):u},e.x1=function(t){return arguments.length?(f=null==t?null:"function"==typeof t?t:gy(+t),e):f},e.y=function(t){return arguments.length?(h="function"==typeof t?t:gy(+t),d=null,e):h},e.y0=function(t){return arguments.length?(h="function"==typeof t?t:gy(+t),e):h},e.y1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:gy(+t),e):d},e.lineX0=e.lineY0=function(){return t().x(u).y(h)},e.lineY1=function(){return t().x(u).y(d)},e.lineX1=function(){return t().x(f).y(h)},e.defined=function(t){return arguments.length?(p="function"==typeof t?t:gy(!!t),e):p},e.curve=function(t){return arguments.length?(y=t,null!=g&&(m=y(g)),e):y},e.context=function(t){return arguments.length?(null==t?g=m=null:m=y(g=t),e):g},e}function Uy(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function Wy(t){return t}function qy(){var f=Wy,p=Uy,g=null,y=gy(0),m=gy(Cy),b=gy(0);function e(r){for(var t,e,n,i=(r=Ry(r)).length,a=0,o=new Array(i),s=new Array(i),c=+y.apply(this,arguments),l=Math.min(Cy,Math.max(-Cy,m.apply(this,arguments)-c)),u=Math.min(Math.abs(l)/i,b.apply(this,arguments)),h=u*(l<0?-1:1),d=0;d<i;++d)0<(n=s[o[d]=d]=+f(r[d],d,r))&&(a+=n);for(null!=p?o.sort(function(t,e){return p(s[t],s[e])}):null!=g&&o.sort(function(t,e){return g(r[t],r[e])}),d=0,t=a?(l-i*h)/a:0;d<i;++d,c=e)e=o[d],n=s[e],s[e]={data:r[e],index:d,value:n,startAngle:c,endAngle:e=c+(0<n?n*t:0)+h,padAngle:u};return s}return e.value=function(t){return arguments.length?(f="function"==typeof t?t:gy(+t),e):f},e.sortValues=function(t){return arguments.length?(p=t,g=null,e):p},e.sort=function(t){return arguments.length?(g=t,p=null,e):g},e.startAngle=function(t){return arguments.length?(y="function"==typeof t?t:gy(+t),e):y},e.endAngle=function(t){return arguments.length?(m="function"==typeof t?t:gy(+t),e):m},e.padAngle=function(t){return arguments.length?(b="function"==typeof t?t:gy(+t),e):b},e}Fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Hy=Gy(Py);function Vy(t){this._curve=t}function Gy(e){function t(t){return new Vy(e(t))}return t._curve=e,t}function Xy(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Gy(t)):e()._curve},t}function Zy(){return Xy(Yy().curve(Hy))}function Ky(){var t=zy().curve(Hy),e=t.curve,r=t.lineX0,n=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Xy(r())},delete t.lineX0,t.lineEndAngle=function(){return Xy(n())},delete t.lineX1,t.lineInnerRadius=function(){return Xy(i())},delete t.lineY0,t.lineOuterRadius=function(){return Xy(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Gy(t)):e()._curve},t}function Qy(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}Vy.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class Jy{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class tm{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){var r,n,i;t=+t,e=+e,0==this._point++?(this._x0=t,this._y0=e):(r=Qy(this._x0,this._y0),n=Qy(this._x0,this._y0=(this._y0+e)/2),i=Qy(t,this._y0),t=Qy(t,e),this._context.moveTo(...r),this._context.bezierCurveTo(...n,...i,...t))}}function em(t){return new Jy(t,!0)}function rm(t){return new Jy(t,!1)}function nm(t){return new tm(t)}function im(t){return t.source}function am(t){return t.target}function om(i){let a=im,o=am,s=$y,c=jy,l=null,u=null;function e(){let t;var e=Iy.call(arguments),r=a.apply(this,e),n=o.apply(this,e);if((u=null==l?i(t=Po()):u).lineStart(),e[0]=r,u.point(+s.apply(this,e),+c.apply(this,e)),e[0]=n,u.point(+s.apply(this,e),+c.apply(this,e)),u.lineEnd(),t)return u=null,t+""||null}return e.source=function(t){return arguments.length?(a=t,e):a},e.target=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(s="function"==typeof t?t:gy(+t),e):s},e.y=function(t){return arguments.length?(c="function"==typeof t?t:gy(+t),e):c},e.context=function(t){return arguments.length?(null==t?l=u=null:u=i(l=t),e):l},e}const sm=ky(3),cm={draw(t,e){var e=.59436*ky(e+vy(e/28,.75)),r=e/2,n=r*sm;t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-n,-r),t.lineTo(n,r),t.moveTo(-n,r),t.lineTo(n,-r)}},lm={draw(t,e){e=ky(e/Ey);t.moveTo(e,0),t.arc(0,0,e,0,Cy)}},um={draw(t,e){e=ky(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},hm=ky(1/3),dm=2*hm,fm={draw(t,e){var e=ky(e/dm),r=e*hm;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},pm={draw(t,e){e=.62625*ky(e);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},gm={draw(t,e){e=.87559*ky(e-vy(e/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},ym={draw(t,e){var e=ky(e),r=-e/2;t.rect(r,r,e,e)}},mm={draw(t,e){e=.4431*ky(e);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}},bm=xy(Ey/10)/xy(7*Ey/10),_m=xy(Cy/10)*bm,vm=-by(Cy/10)*bm,xm={draw(e,t){var r=ky(.8908130915292852*t),n=_m*r,i=vm*r;e.moveTo(0,-r),e.lineTo(n,i);for(let t=1;t<5;++t){var a=Cy*t/5,o=by(a),a=xy(a);e.lineTo(a*r,-o*r),e.lineTo(o*n-a*i,a*n+o*i)}e.closePath()}},km=ky(3),wm={draw(t,e){e=-ky(e/(3*km));t.moveTo(0,2*e),t.lineTo(-km*e,-e),t.lineTo(km*e,-e),t.closePath()}},Em=ky(3),Tm={draw(t,e){var e=.6824*ky(e),r=e/2,n=e*Em/2;t.moveTo(0,-e),t.lineTo(n,r),t.lineTo(-n,r),t.closePath()}},Cm=-.5,Sm=ky(3)/2,Am=1/ky(12),Mm=3*(Am/2+1),Nm={draw(t,e){var e=ky(e/Mm),r=e/2,n=e*Am,i=r,e=e*Am+e,a=-i,o=e;t.moveTo(r,n),t.lineTo(i,e),t.lineTo(a,o),t.lineTo(Cm*r-Sm*n,Sm*r+Cm*n),t.lineTo(Cm*i-Sm*e,Sm*i+Cm*e),t.lineTo(Cm*a-Sm*o,Sm*a+Cm*o),t.lineTo(Cm*r+Sm*n,Cm*n-Sm*r),t.lineTo(Cm*i+Sm*e,Cm*e-Sm*i),t.lineTo(Cm*a+Sm*o,Cm*o-Sm*a),t.closePath()}},Dm={draw(t,e){e=.6189*ky(e-vy(e/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}},Lm=[lm,um,fm,ym,xm,wm,Nm],Bm=[lm,gm,Dm,Tm,cm,mm,pm];function Om(){}function Im(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Rm(t){this._context=t}function Fm(t){return new Rm(t)}function Pm(t){this._context=t}function $m(t){return new Pm(t)}function jm(t){this._context=t}function Ym(t){return new jm(t)}function zm(t,e){this._basis=new Rm(t),this._beta=e}Rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Im(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Im(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Pm.prototype={areaStart:Om,areaEnd:Om,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Im(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},jm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Im(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},zm.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(0<r)for(var n,i=t[0],a=e[0],o=t[r]-i,s=e[r]-a,c=-1;++c<=r;)this._basis.point(this._beta*t[c]+(1-this._beta)*(i+(n=c/r)*o),this._beta*e[c]+(1-this._beta)*(a+n*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Um=function e(r){function t(t){return 1===r?new Rm(t):new zm(t,r)}return t.beta=function(t){return e(+t)},t}(.85);function Wm(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function qm(t,e){this._context=t,this._k=(1-e)/6}qm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wm(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Wm(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Hm=function e(r){function t(t){return new qm(t,r)}return t.tension=function(t){return e(+t)},t}(0);function Vm(t,e){this._context=t,this._k=(1-e)/6}Vm.prototype={areaStart:Om,areaEnd:Om,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Wm(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gm=function e(r){function t(t){return new Vm(t,r)}return t.tension=function(t){return e(+t)},t}(0);function Xm(t,e){this._context=t,this._k=(1-e)/6}Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wm(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Zm=function e(r){function t(t){return new Xm(t,r)}return t.tension=function(t){return e(+t)},t}(0);function Km(t,e,r){var n,i,a=t._x1,o=t._y1,s=t._x2,c=t._y2;t._l01_a>wy&&(n=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a),a=(a*n-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,o=(o*n-t._y0*t._l12_2a+t._y2*t._l01_2a)/i),t._l23_a>wy&&(n=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,i=3*t._l23_a*(t._l23_a+t._l12_a),s=(s*n+t._x1*t._l23_2a-e*t._l12_2a)/i,c=(c*n+t._y1*t._l23_2a-r*t._l12_2a)/i),t._context.bezierCurveTo(a,o,s,c,t._x2,t._y2)}function Qm(t,e){this._context=t,this._alpha=e}Qm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r,n;switch(t=+t,e=+e,this._point&&(r=this._x2-t,n=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Km(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Jm=function e(r){function t(t){return r?new Qm(t,r):new qm(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function t3(t,e){this._context=t,this._alpha=e}t3.prototype={areaStart:Om,areaEnd:Om,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){var r,n;switch(t=+t,e=+e,this._point&&(r=this._x2-t,n=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Km(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var e3=function e(r){function t(t){return r?new t3(t,r):new Vm(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function r3(t,e){this._context=t,this._alpha=e}r3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r,n;switch(t=+t,e=+e,this._point&&(r=this._x2-t,n=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Km(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var n3=function e(r){function t(t){return r?new r3(t,r):new Xm(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function i3(t){this._context=t}function a3(t){return new i3(t)}function o3(t){return t<0?-1:1}function s3(t,e,r){var n=t._x1-t._x0,e=e-t._x1,i=(t._y1-t._y0)/(n||e<0&&-0),r=(r-t._y1)/(e||n<0&&-0),t=(i*e+r*n)/(n+e);return(o3(i)+o3(r))*Math.min(Math.abs(i),Math.abs(r),.5*Math.abs(t))||0}function c3(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function l3(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-n)/3;t._context.bezierCurveTo(n+s,i+s*e,a-s,o-s*r,a,o)}function u3(t){this._context=t}function h3(t){this._context=new d3(t)}function d3(t){this._context=t}function f3(t){return new u3(t)}function p3(t){return new h3(t)}function g3(t){this._context=t}function y3(t){var e,r,n=t.length-1,i=new Array(n),a=new Array(n),o=new Array(n);for(a[i[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;0<=e;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function m3(t){return new g3(t)}function b3(t,e){this._context=t,this._t=e}function _3(t){return new b3(t,.5)}function v3(t){return new b3(t,0)}function x3(t){return new b3(t,1)}function k3(t,e){if(1<(i=t.length))for(var r,n,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(n=o,o=t[e[a]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function w3(t){for(var e=t.length,r=new Array(e);0<=--e;)r[e]=e;return r}function E3(t,e){return t[e]}function T3(t){var e=[];return e.key=t,e}function C3(t){var r=t.map(S3);return w3(t).sort(function(t,e){return r[t]-r[e]})}function S3(t){for(var e,r=-1,n=0,i=t.length,a=-1/0;++r<i;)(e=+t[r][1])>a&&(a=e,n=r);return n}function A3(t){var r=t.map(M3);return w3(t).sort(function(t,e){return r[t]-r[e]})}function M3(t){for(var e,r=0,n=-1,i=t.length;++n<i;)(e=+t[n][1])&&(r+=e);return r}i3.prototype={areaStart:Om,areaEnd:Om,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},u3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l3(this,this._t0,c3(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,l3(this,c3(this,r=s3(this,t,e)),r);break;default:l3(this,this._t0,r=s3(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}},(h3.prototype=Object.create(u3.prototype)).point=function(t,e){u3.prototype.point.call(this,e,t)},d3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}},g3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===r)this._context.lineTo(t[1],e[1]);else for(var n=y3(t),i=y3(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},b3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var r;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(r=this._x*(1-this._t)+t*this._t,this._context.lineTo(r,this._y),this._context.lineTo(r,e))}this._x=t,this._y=e}};const N3=t=>()=>t;function D3(t,{sourceEvent:e,target:r,transform:n,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:i}})}function L3(t,e,r){this.k=t,this.x=e,this.y=r}L3.prototype={constructor:L3,scale:function(t){return 1===t?this:new L3(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new L3(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var B3=new L3(1,0,0);function O3(t){for(;!t.__zoom;)if(!(t=t.parentNode))return B3;return t.__zoom}function I3(t){t.stopImmediatePropagation()}function R3(t){t.preventDefault(),t.stopImmediatePropagation()}function F3(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function P3(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function $3(){return this.__zoom||B3}function j3(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Y3(){return navigator.maxTouchPoints||"ontouchstart"in this}function z3(t,e,r){var n=t.invertX(e[0][0])-r[0][0],i=t.invertX(e[1][0])-r[1][0],a=t.invertY(e[0][1])-r[0][1],e=t.invertY(e[1][1])-r[1][1];return t.translate(n<i?(n+i)/2:Math.min(0,n)||Math.max(0,i),a<e?(a+e)/2:Math.min(0,a)||Math.max(0,e))}O3.prototype=L3.prototype;P=Object.freeze(Object.defineProperty({__proto__:null,bisect:st,bisectRight:it,bisectLeft:at,bisectCenter:ot,ascending:K,bisector:J,blur:function(t,e){if(!(0<=(e=+e)))throw new RangeError("invalid r");var r,n=t.length;if(0<=(n=Math.floor(n)))return n&&e&&(e=ft(e),r=t.slice(),e(t,r,0,n,1),e(r,t,0,n,1),e(t,r,0,n,1)),t;throw new RangeError("invalid length")},blur2:ct,blurImage:lt,count:pt,cross:function(...r){var e,n="function"==typeof r[r.length-1]&&(e=r.pop(),t=>e(...t)),i=(r=r.map(mt)).map(gt),a=r.length-1,o=new Array(1+a).fill(0),s=[];if(a<0||i.some(yt))return s;for(;;){s.push(o.map((t,e)=>r[e][t]));let t=a;for(;++o[t]===i[t];){if(0===t)return n?s.map(n):s;o[t--]=0}}},cumsum:function(e,r){var n=0,i=0;return Float64Array.from(e,void 0===r?t=>n+=+t||0:t=>n+=+r(t,i++,e)||0)},descending:Q,deviation:_t,extent:vt,Adder:xt,fsum:function(e,r){var n=new xt;if(void 0===r)for(var t of e)(t=+t)&&n.add(t);else{let t=-1;for(var i of e)(i=+r(i,++t,e))&&n.add(i)}return+n},fcumsum:function(e,r){const n=new xt;let i=-1;return Float64Array.from(e,void 0===r?t=>n.add(+t||0):t=>n.add(+r(t,++i,e)||0))},group:Mt,flatGroup:function(t,...e){return Dt(Nt(t,...e),e)},flatRollup:function(t,e,...r){return Dt(Bt(t,e,...r),r)},groups:Nt,index:function(t,...e){return It(t,At,Ot,e)},indexes:function(t,...e){return It(t,Array.from,Ot,e)},rollup:Lt,rollups:Bt,groupSort:function(t,i,e){return(2!==i.length?Ft(Lt(t,i,e),([t,e],[r,n])=>K(e,n)||K(t,r)):Ft(Mt(t,e),([t,e],[r,n])=>i(e,n)||K(t,r))).map(([t])=>t)},bin:Zt,histogram:Zt,thresholdFreedmanDiaconis:function(t,e,r){return Math.ceil((r-e)/(2*(ie(t,.75)-ie(t,.25))*Math.pow(pt(t),-1/3)))},thresholdScott:function(t,e,r){return Math.ceil((r-e)*Math.cbrt(pt(t))/(3.49*_t(t)))},thresholdSturges:Xt,max:Kt,maxIndex:Qt,mean:function(e,r){let n=0,i=0;if(void 0===r)for(var t of e)null!=t&&(t=+t)>=t&&(++n,i+=t);else{let t=-1;for(var a of e)null!=(a=r(a,++t,e))&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n},median:function(t,e){return ie(t,.5,e)},medianIndex:function(t,e){return oe(t,.5,e)},merge:se,min:Jt,minIndex:te,mode:function(e,r){var t,n,i=new kt;if(void 0===r)for(var a of e)null!=a&&a>=a&&i.set(a,(i.get(a)||0)+1);else{let t=-1;for(var o of e)null!=(o=r(o,++t,e))&&o>=o&&i.set(o,(i.get(o)||0)+1)}let s,c=0;for([t,n]of i)n>c&&(c=n,s=t);return s},nice:Gt,pairs:function(t,e=function(t,e){return[t,e]}){var r=[];let n,i=!1;for(const a of t)i&&r.push(e(n,a)),n=a,i=!0;return r},permute:Rt,quantile:ie,quantileIndex:oe,quantileSorted:ae,quickselect:ee,range:ce,rank:function(t,r=K){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const i=new Float64Array(n.length),a=(2!==r.length&&(n=n.map(r),r=K),(t,e)=>r(n[t],n[e]));let o,s;return Uint32Array.from(n,(t,e)=>e).sort(r===K?(t,e)=>$t(n[t],n[e]):Pt(a)).forEach((t,e)=>{var r=a(t,void 0===o?t:o);0<=r?((void 0===o||0<r)&&(o=t,s=e),i[t]=s):i[t]=NaN}),i},least:function(e,r=K){let n,i=!1;if(1===r.length){let t;for(const o of e){var a=r(o);(i?K(a,t)<0:0===K(a,a))&&(n=o,t=a,i=!0)}}else for(const t of e)(i?r(t,n)<0:0===r(t,t))&&(n=t,i=!0);return n},leastIndex:le,greatest:ne,greatestIndex:function(t,e=K){if(1===e.length)return Qt(t,e);let r,n=-1,i=-1;for(const a of t)++i,(n<0?0===e(a,a):0<e(a,r))&&(r=a,n=i);return n},scan:function(t,e){return(t=le(t,e))<0?void 0:t},shuffle:P,shuffler:ue,sum:function(e,r){let n=0;if(void 0===r)for(var t of e)(t=+t)&&(n+=t);else{let t=-1;for(var i of e)(i=+r(i,++t,e))&&(n+=i)}return n},ticks:qt,tickIncrement:Ht,tickStep:Vt,transpose:he,variance:bt,zip:function(){return he(arguments)},every:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let r=-1;for(const n of t)if(!e(n,++r,t))return!1;return!0},some:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let r=-1;for(const n of t)if(e(n,++r,t))return!0;return!1},filter:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");var r=[];let n=-1;for(const i of t)e(i,++n,t)&&r.push(i);return r},map:function(r,n){if("function"!=typeof r[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof n)throw new TypeError("mapper is not a function");return Array.from(r,(t,e)=>n(t,e,r))},reduce:function(t,e,r){if("function"!=typeof e)throw new TypeError("reducer is not a function");var n=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:r}=n.next(),i)return;++o}for(;{done:i,value:a}=n.next(),!i;)r=e(r,a,++o,t);return r},reverse:function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},sort:Ft,difference:function(t,...e){t=new wt(t);for(const r of e)for(const n of r)t.delete(n);return t},disjoint:function(t,e){var r,n,i=e[Symbol.iterator](),a=new wt;for(const o of t){if(a.has(o))return!1;for(;({value:r,done:n}=i.next())&&!n;){if(Object.is(o,r))return!1;a.add(r)}}return!0},intersection:function(t,...e){t=new wt(t),e=e.map(fe);t:for(const r of t)for(const n of e)if(!n.has(r)){t.delete(r);continue t}return t},subset:function(t,e){return pe(e,t)},superset:pe,union:function(...t){var e=new wt;for(const r of t)for(const n of r)e.add(n);return e},InternMap:kt,InternSet:wt,axisTop:Ae,axisRight:function(t){return Se(be,t)},axisBottom:Me,axisLeft:function(t){return Se(ve,t)},brush:function(){return ko(uo)},brushX:function(){return ko(co)},brushY:function(){return ko(lo)},brushSelection:function(t){return(t=t.__brush)?t.dim.output(t.selection):null},chord:function(){return Lo(!1,!1)},chordTranspose:function(){return Lo(!1,!0)},chordDirected:function(){return Lo(!0,!1)},ribbon:function(){return Go()},ribbonArrow:function(){return Go(Vo)},color:on,rgb:un,hsl:_n,lab:On,hcl:Yn,lch:function(t,e,r,n){return 1===arguments.length?jn(t):new zn(r,e,t,null==n?1:n)},gray:function(t,e){return new In(t,0,0,null==e?1:e)},cubehelix:Kn,contours:es,contourDensity:function(){var u=rs,h=ns,d=is,r=960,n=500,f=20,p=2,g=3*f,y=r+2*g>>p,m=n+2*g>>p,i=Ko(20);function a(t){var e=new Float32Array(y*m),r=Math.pow(2,-p),n=-1;for(const l of t){var i,a,o=(u(l,++n,t)+g)*r,s=(h(l,n,t)+g)*r,c=+d(l,n,t);0<=o&&o<y&&0<=s&&s<m&&(e[(i=Math.floor(o))+(a=Math.floor(s))*y]+=(1-(o=o-i-.5))*(1-(s=s-a-.5))*c,e[i+1+a*y]+=o*(1-s)*c,e[i+1+(a+1)*y]+=o*s*c,e[i+(a+1)*y]+=(1-o)*s*c)}return ct({data:e,width:y,height:m},f*r),e}function e(t){var t=a(t),r=i(t),e=Math.pow(2,2*p);return Array.isArray(r)||(r=qt(Number.MIN_VALUE,Kt(t)/e,r)),es().size([y,m]).thresholds(r.map(t=>t*e))(t).map((t,e)=>(t.value=+r[e],o(t)))}function o(t){return t.coordinates.forEach(s),t}function s(t){t.forEach(c)}function c(t){t.forEach(l)}function l(t){t[0]=t[0]*Math.pow(2,p)-g,t[1]=t[1]*Math.pow(2,p)-g}function b(){return y=r+2*(g=3*f)>>p,m=n+2*g>>p,e}return e.contours=function(t){var r=a(t),n=es().size([y,m]),i=Math.pow(2,2*p),t=t=>{var e=o(n.contour(r,(t=+t)*i));return e.value=t,e};return Object.defineProperty(t,"max",{get:()=>Kt(r)/i}),t},e.x=function(t){return arguments.length?(u="function"==typeof t?t:Ko(+t),e):u},e.y=function(t){return arguments.length?(h="function"==typeof t?t:Ko(+t),e):h},e.weight=function(t){return arguments.length?(d="function"==typeof t?t:Ko(+t),e):d},e.size=function(t){if(!arguments.length)return[r,n];var e=+t[0],t=+t[1];if(0<=e&&0<=t)return r=e,n=t,b();throw new Error("invalid size")},e.cellSize=function(t){if(!arguments.length)return 1<<p;if(1<=(t=+t))return p=Math.floor(Math.log(t)/Math.LN2),b();throw new Error("invalid cell size")},e.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?Ko(Xo.call(t)):Ko(t),e):i},e.bandwidth=function(t){if(!arguments.length)return Math.sqrt(f*(f+1));if(0<=(t=+t))return f=(Math.sqrt(4*t*t+1)-1)/2,b();throw new Error("invalid bandwidth")},e},Delaunay:class D${static from(t,e=function(t){return t[0]},r=function(t){return t[1]},n){return new D$("length"in t?function(e,r,n,i){var a=e.length,o=new Float64Array(2*a);for(let t=0;t<a;++t){var s=e[t];o[2*t]=r.call(i,s,t,e),o[2*t+1]=n.call(i,s,t,e)}return o}(t,e,r,n):Float64Array.from(function*(t,e,r,n){let i=0;for(const a of t)yield e.call(n,a,i,t),yield r.call(n,a,i,t),++i}(t,e,r,n)))}constructor(t){this._delaunator=new xs(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,r=this.points;if(t.hull&&2<t.hull.length&&function(t){var{triangles:e,coords:r}=t;for(let t=0;t<e.length;t+=3){var n=2*e[t],i=2*e[t+1],a=2*e[t+2];if(1e-10<(r[a]-r[n])*(r[1+i]-r[1+n])-(r[i]-r[n])*(r[1+a]-r[1+n]))return}return 1}(t)){this.collinear=Int32Array.from({length:r.length/2},(t,e)=>e).sort((t,e)=>r[2*t]-r[2*e]||r[2*t+1]-r[2*e+1]);var e=this.collinear[0],n=this.collinear[this.collinear.length-1],e=[r[2*e],r[2*e+1],r[2*n],r[2*n+1]],i=1e-8*Math.hypot(e[3]-e[1],e[2]-e[0]);for(let t=0,e=r.length/2;t<e;++t)a=r[2*t],o=r[2*t+1],s=i,a=[a+Math.sin(a+o)*s,o+Math.cos(a-o)*s],r[2*t]=a[0],r[2*t+1]=a[1];this._delaunator=new xs(r)}else delete this.collinear;var a,o,s,c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,u=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let t=0,e=c.length;t<e;++t){var f=u[t%3==2?t-2:t+1];-1!==c[t]&&-1!==h[f]||(h[f]=t)}for(let t=0,e=l.length;t<e;++t)d[l[t]]=t;l.length<=2&&0<l.length&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],h[l[0]]=1,2===l.length)&&(h[l[1]]=0,this.triangles[1]=l[1],this.triangles[2]=l[1])}voronoi(t){return new Ss(this,t)}*neighbors(r){var t,{inedges:e,hull:n,_hullIndex:i,halfedges:a,triangles:o,collinear:s}=this;if(s)0<(t=s.indexOf(r))&&(yield s[t-1]),t<s.length-1&&(yield s[t+1]);else{var c,l=e[r];if(-1!==l){let t=l,e;do{if(yield e=o[t],o[t=t%3==2?t-2:t+1]!==r)return;if(-1===(t=a[t]))return void((c=n[(i[r]+1)%n.length])!==e&&(yield c))}while(t!==l)}}}find(t,e,r=0){if((t=+t)!=t||(e=+e)!=e)return-1;var n=r;let i;for(;0<=(i=this._step(r,t,e))&&i!==r&&i!==n;)r=i;return i}_step(t,e,r){var{inedges:n,hull:i,_hullIndex:a,halfedges:o,triangles:s,points:c}=this;if(-1===n[t]||!c.length)return(t+1)%(c.length>>1);let l=t,u=Ms(e-c[2*t],2)+Ms(r-c[2*t+1],2);var h=n[t];let d=h;do{var f=s[d],p=Ms(e-c[2*f],2)+Ms(r-c[2*f+1],2);if(p<u&&(u=p,l=f),s[d=d%3==2?d-2:d+1]!==t)break;if(-1===(d=o[d])){if((d=i[(a[t]+1)%i.length])!==f&&Ms(e-c[2*d],2)+Ms(r-c[2*d+1],2)<u)return d;break}}while(d!==h);return l}render(r){var t=null==r?r=new Ts:void 0,{points:n,halfedges:i,triangles:a}=this;for(let t=0,e=i.length;t<e;++t){var o,s=i[t];s<t||(o=2*a[t],s=2*a[s],r.moveTo(n[o],n[1+o]),r.lineTo(n[s],n[1+s]))}return this.renderHull(r),t&&t.value()}renderPoints(r,n){void 0!==n||r&&"function"==typeof r.moveTo||(n=r,r=null),n=null==n?2:+n;var t=null==r?r=new Ts:void 0,i=this.points;for(let t=0,e=i.length;t<e;t+=2){var a=i[t],o=i[t+1];r.moveTo(a+n,o),r.arc(a,o,n,0,As)}return t&&t.value()}renderHull(e){var t=null==e?e=new Ts:void 0,{hull:r,points:n}=this,i=2*r[0],a=r.length;e.moveTo(n[i],n[1+i]);for(let t=1;t<a;++t){var o=2*r[t];e.lineTo(n[o],n[1+o])}return e.closePath(),t&&t.value()}hullPolygon(){var t=new Cs;return this.renderHull(t),t.value()}renderTriangle(t,e){var r=null==e?e=new Ts:void 0,{points:n,triangles:i}=this,a=2*i[t*=3],o=2*i[t+1],i=2*i[t+2];return e.moveTo(n[a],n[1+a]),e.lineTo(n[o],n[1+o]),e.lineTo(n[i],n[1+i]),e.closePath(),r&&r.value()}*trianglePolygons(){var r=this.triangles;for(let t=0,e=r.length/3;t<e;++t)yield this.trianglePolygon(t)}trianglePolygon(t){var e=new Cs;return this.renderTriangle(t,e),e.value()}},Voronoi:Ss,dispatch:De,drag:function(){var n,i,a,o,s=Pr,c=$r,r=jr,e=Yr,g={},y=De("start","drag","end"),m=0,l=0;function b(t){t.on("mousedown.drag",u).filter(e).on("touchstart.drag",f).on("touchmove.drag",p,Ar).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(t,e){!o&&s.call(this,t,e)&&(e=v(this,c.call(this,t,e),t,e,"mouse"))&&(H(t.view).on("mousemove.drag",h,Mr).on("mouseup.drag",d,Mr),Or(t.view),Lr(t),a=!1,n=t.clientX,i=t.clientY,e("start",t))}function h(t){var e,r;Br(t),a||(e=t.clientX-n,r=t.clientY-i,a=l<e*e+r*r),g.mouse("drag",t)}function d(t){H(t.view).on("mousemove.drag mouseup.drag",null),Ir(t.view,a),Br(t),g.mouse("end",t)}function f(t,e){if(s.call(this,t,e))for(var r,n=t.changedTouches,i=c.call(this,t,e),a=n.length,o=0;o<a;++o)(r=v(this,i,t,e,n[o].identifier,n[o]))&&(Lr(t),r("start",t,n[o]))}function p(t){for(var e,r=t.changedTouches,n=r.length,i=0;i<n;++i)(e=g[r[i].identifier])&&(Br(t),e("drag",t,r[i]))}function _(t){var e,r,n=t.changedTouches,i=n.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<i;++e)(r=g[n[e].identifier])&&(Lr(t),r("end",t,n[e]))}function v(o,s,t,c,l,e){var u,h,d,f=y.copy(),p=Cr(e||t,s);if(null!=(d=r.call(o,new Fr("beforestart",{sourceEvent:t,target:b,identifier:l,active:m,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),c)))return u=d.x-p[0]||0,h=d.y-p[1]||0,function t(e,r,n){var i,a=p;switch(e){case"start":g[l]=t,i=m++;break;case"end":delete g[l],--m;case"drag":p=Cr(n||r,s),i=m}f.call(e,o,new Fr(e,{sourceEvent:r,subject:d,target:b,identifier:l,active:i,x:p[0]+u,y:p[1]+h,dx:p[0]-a[0],dy:p[1]-a[1],dispatch:f}),c)}}return b.filter=function(t){return arguments.length?(s="function"==typeof t?t:Rr(!!t),b):s},b.container=function(t){return arguments.length?(c="function"==typeof t?t:Rr(t),b):c},b.subject=function(t){return arguments.length?(r="function"==typeof t?t:Rr(t),b):r},b.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Rr(!!t),b):e},b.on=function(){var t=y.on.apply(y,arguments);return t===y?b:t},b.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,b):Math.sqrt(l)},b},dragDisable:Or,dragEnable:Ir,dsvFormat:Rs,csvParse:Fs,csvParseRows:Ps,csvFormat:$s,csvFormatBody:js,csvFormatRows:Ys,csvFormatRow:zs,csvFormatValue:Co,tsvParse:Ws,tsvParseRows:qs,tsvFormat:Hs,tsvFormatBody:Vs,tsvFormatRows:Gs,tsvFormatRow:Xs,tsvFormatValue:Us,autoType:function(t){for(var e in t){var r,n,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(r=+i)){if(!(n=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Zs&&n[4]&&!n[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=r;else i=null;t[e]=i}return t},easeLinear:t=>+t,easeQuad:Na,easeQuadIn:function(t){return t*t},easeQuadOut:function(t){return t*(2-t)},easeQuadInOut:Na,easeCubic:Da,easeCubicIn:function(t){return t*t*t},easeCubicOut:function(t){return--t*t*t+1},easeCubicInOut:Da,easePoly:Ba,easePolyIn:Ma,easePolyOut:La,easePolyInOut:Ba,easeSin:Ra,easeSinIn:function(t){return 1==+t?1:1-Math.cos(t*Ia)},easeSinOut:function(t){return Math.sin(t*Ia)},easeSinInOut:Ra,easeExp:Pa,easeExpIn:function(t){return Fa(1-+t)},easeExpOut:function(t){return 1-Fa(t)},easeExpInOut:Pa,easeCircle:$a,easeCircleIn:function(t){return 1-Math.sqrt(1-t*t)},easeCircleOut:function(t){return Math.sqrt(1- --t*t)},easeCircleInOut:$a,easeBounce:Ya,easeBounceIn:function(t){return 1-Ya(1-t)},easeBounceOut:Ya,easeBounceInOut:function(t){return((t*=2)<=1?1-Ya(1-t):Ya(t-1)+1)/2},easeBack:t,easeBackIn:za,easeBackOut:Ua,easeBackInOut:t,easeElastic:Ha,easeElasticIn:qa,easeElasticOut:Ha,easeElasticInOut:Va,blob:function(t,e){return fetch(t,e).then(Ks)},buffer:function(t,e){return fetch(t,e).then(Qs)},dsv:function(t,e,r,n){3===arguments.length&&"function"==typeof r&&(n=r,r=void 0);var i=Rs(t);return tc(e,r).then(function(t){return i.parse(t,n)})},csv:rc,tsv:nc,image:function(i,a){return new Promise(function(t,e){var r,n=new Image;for(r in a)n[r]=a[r];n.onerror=e,n.onload=function(){t(n)},n.src=i})},json:function(t,e){return fetch(t,e).then(ic)},text:tc,xml:oc,html:sc,svg:cc,forceCenter:function(a,o){var s,c=1;function e(){for(var t,e=s.length,r=0,n=0,i=0;i<e;++i)r+=(t=s[i]).x,n+=t.y;for(r=(r/e-a)*c,n=(n/e-o)*c,i=0;i<e;++i)(t=s[i]).x-=r,t.y-=n}return null==a&&(a=0),null==o&&(o=0),e.initialize=function(t){s=t},e.x=function(t){return arguments.length?(a=+t,e):a},e.y=function(t){return arguments.length?(o=+t,e):o},e.strength=function(t){return arguments.length?(c=+t,e):c},e},forceCollide:function(n){var a,o,d,f=1,p=1;function e(){for(var t,e,s,c,l,u,h,r=a.length,n=0;n<p;++n)for(e=fc(a,_c,vc).visitAfter(g),t=0;t<r;++t)s=a[t],u=o[s.index],h=u*u,c=s.x+s.vx,l=s.y+s.vy,e.visit(i);function i(t,e,r,n,i){var a=t.data,t=t.r,o=u+t;if(!a)return c+o<e||n<c-o||l+o<r||i<l-o;a.index>s.index&&(r=(e=c-a.x-a.vx)*e+(n=l-a.y-a.vy)*n)<o*o&&(0===e&&(r+=(e=bc(d))*e),0===n&&(r+=(n=bc(d))*n),r=(o-(r=Math.sqrt(r)))/r*f,s.vx+=(e*=r)*(o=(t*=t)/(h+t)),s.vy+=(n*=r)*o,a.vx-=e*(o=1-o),a.vy-=n*o)}}function g(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function r(){if(a){var t,e,r=a.length;for(o=new Array(r),t=0;t<r;++t)e=a[t],o[e.index]=+n(e,t,a)}}return"function"!=typeof n&&(n=mc(null==n?1:+n)),e.initialize=function(t,e){a=t,d=e,r()},e.iterations=function(t){return arguments.length?(p=+t,e):p},e.strength=function(t){return arguments.length?(f=+t,e):f},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:mc(+t),r(),e):n},e},forceLink:function(l){var u,h,a,o,d,f,s=xc,r=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},n=mc(30),p=1;function e(t){for(var e=0,r=l.length;e<p;++e)for(var n,i,a,o,s,c=0;c<r;++c)n=(i=l[c]).source,a=(i=i.target).x+i.vx-n.x-n.vx||bc(f),o=i.y+i.vy-n.y-n.vy||bc(f),o*=s=((s=Math.sqrt(a*a+o*o))-h[c])/s*t*u[c],i.vx-=(a*=s)*(s=d[c]),i.vy-=o*s,n.vx+=a*(s=1-s),n.vy+=o*s}function i(){if(a){var t,e=a.length,r=l.length,n=new Map(a.map((t,e)=>[s(t,e,a),t])),i=0;for(o=new Array(e);i<r;++i)(t=l[i]).index=i,"object"!=typeof t.source&&(t.source=kc(n,t.source)),"object"!=typeof t.target&&(t.target=kc(n,t.target)),o[t.source.index]=(o[t.source.index]||0)+1,o[t.target.index]=(o[t.target.index]||0)+1;for(i=0,d=new Array(r);i<r;++i)t=l[i],d[i]=o[t.source.index]/(o[t.source.index]+o[t.target.index]);u=new Array(r),c(),h=new Array(r),g()}}function c(){if(a)for(var t=0,e=l.length;t<e;++t)u[t]=+r(l[t],t,l)}function g(){if(a)for(var t=0,e=l.length;t<e;++t)h[t]=+n(l[t],t,l)}return null==l&&(l=[]),e.initialize=function(t,e){a=t,f=e,i()},e.links=function(t){return arguments.length?(l=t,i(),e):l},e.id=function(t){return arguments.length?(s=t,e):s},e.iterations=function(t){return arguments.length?(p=+t,e):p},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:mc(+t),c(),e):r},e.distance=function(t){return arguments.length?(n="function"==typeof t?t:mc(+t),g(),e):n},e},forceManyBody:function(){var i,c,l,u,h,n=mc(-30),d=1,f=1/0,p=.81;function e(t){var e,r=i.length,n=fc(i,Cc,Sc).visitAfter(a);for(u=t,e=0;e<r;++e)c=i[e],n.visit(o)}function r(){if(i){var t,e,r=i.length;for(h=new Array(r),t=0;t<r;++t)e=i[t],h[e.index]=+n(e,t,i)}}function a(t){var e,r,n,i,a,o=0,s=0;if(t.length){for(n=i=a=0;a<4;++a)(e=t[a])&&(r=Math.abs(e.value))&&(o+=e.value,s+=r,n+=r*e.x,i+=r*e.y);t.x=n/s,t.y=i/s}else for((e=t).x=e.data.x,e.y=e.data.y;o+=h[e.data.index],e=e.next;);t.value=o}function o(t,e,r,n){if(!t.value)return!0;var i=t.x-c.x,a=t.y-c.y,o=n-e,s=i*i+a*a;if(o*o/p<s)return s<f&&(0===i&&(s+=(i=bc(l))*i),0===a&&(s+=(a=bc(l))*a),s<d&&(s=Math.sqrt(d*s)),c.vx+=i*t.value*u/s,c.vy+=a*t.value*u/s),!0;if(!(t.length||f<=s))for((t.data!==c||t.next)&&(0===i&&(s+=(i=bc(l))*i),0===a&&(s+=(a=bc(l))*a),s<d)&&(s=Math.sqrt(d*s));t.data!==c&&(o=h[t.data.index]*u/s,c.vx+=i*o,c.vy+=a*o),t=t.next;);}return e.initialize=function(t,e){i=t,l=e,r()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:mc(+t),r(),e):n},e.distanceMin=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e.distanceMax=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.theta=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e},forceRadial:function(r,s,c){var l,u,h,n=mc(.1);function e(t){for(var e=0,r=l.length;e<r;++e){var n=l[e],i=n.x-s||1e-6,a=n.y-c||1e-6,o=Math.sqrt(i*i+a*a),o=(h[e]-o)*u[e]*t/o;n.vx+=i*o,n.vy+=a*o}}function i(){if(l){var t,e=l.length;for(u=new Array(e),h=new Array(e),t=0;t<e;++t)h[t]=+r(l[t],t,l),u[t]=isNaN(h[t])?0:+n(l[t],t,l)}}return"function"!=typeof r&&(r=mc(+r)),null==s&&(s=0),null==c&&(c=0),e.initialize=function(t){l=t,i()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:mc(+t),i(),e):n},e.radius=function(t){return arguments.length?(r="function"==typeof t?t:mc(+t),i(),e):r},e.x=function(t){return arguments.length?(s=+t,e):s},e.y=function(t){return arguments.length?(c=+t,e):c},e},forceSimulation:function(c){var a,o=1,e=.001,s=1-Math.pow(e,1/300),l=0,u=.6,h=new Map,t=Qi(i),r=De("tick","end"),n=function(){let t=1;return()=>(t=(wc*t+Ec)%Tc)/Tc}();function i(){d(),r.call("tick",a),o<e&&(t.stop(),r.call("end",a))}function d(t){var e,r,n=c.length;void 0===t&&(t=1);for(var i=0;i<t;++i)for(o+=(l-o)*s,h.forEach(function(t){t(o)}),e=0;e<n;++e)null==(r=c[e]).fx?r.x+=r.vx*=u:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=u:(r.y=r.fy,r.vy=0);return a}function f(){for(var t,e,r,n=0,i=c.length;n<i;++n)(r=c[n]).index=n,null!=r.fx&&(r.x=r.fx),null!=r.fy&&(r.y=r.fy),(isNaN(r.x)||isNaN(r.y))&&(t=10*Math.sqrt(.5+n),e=n*Ac,r.x=t*Math.cos(e),r.y=t*Math.sin(e)),(isNaN(r.vx)||isNaN(r.vy))&&(r.vx=r.vy=0)}function p(t){return t.initialize&&t.initialize(c,n),t}return null==c&&(c=[]),f(),a={tick:d,restart:function(){return t.restart(i),a},stop:function(){return t.stop(),a},nodes:function(t){return arguments.length?(c=t,f(),h.forEach(p),a):c},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(e=+t,a):e},alphaDecay:function(t){return arguments.length?(s=+t,a):+s},alphaTarget:function(t){return arguments.length?(l=+t,a):l},velocityDecay:function(t){return arguments.length?(u=1-t,a):1-u},randomSource:function(t){return arguments.length?(n=t,h.forEach(p),a):n},force:function(t,e){return 1<arguments.length?(null==e?h.delete(t):h.set(t,p(e)),a):h.get(t)},find:function(t,e,r){var n,i,a,o=0,s=c.length;for(null==r?r=1/0:r*=r,o=0;o<s;++o)(n=(n=t-(i=c[o]).x)*n+(n=e-i.y)*n)<r&&(a=i,r=n);return a},on:function(t,e){return 1<arguments.length?(r.on(t,e),a):r.on(t)}}},forceX:function(r){var i,a,o,n=mc(.1);function e(t){for(var e,r=0,n=i.length;r<n;++r)(e=i[r]).vx+=(o[r]-e.x)*a[r]*t}function s(){if(i){var t,e=i.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+r(i[t],t,i))?0:+n(i[t],t,i)}}return"function"!=typeof r&&(r=mc(null==r?0:+r)),e.initialize=function(t){i=t,s()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:mc(+t),s(),e):n},e.x=function(t){return arguments.length?(r="function"==typeof t?t:mc(+t),s(),e):r},e},forceY:function(r){var i,a,o,n=mc(.1);function e(t){for(var e,r=0,n=i.length;r<n;++r)(e=i[r]).vy+=(o[r]-e.y)*a[r]*t}function s(){if(i){var t,e=i.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+r(i[t],t,i))?0:+n(i[t],t,i)}}return"function"!=typeof r&&(r=mc(null==r?0:+r)),e.initialize=function(t){i=t,s()},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:mc(+t),s(),e):n},e.y=function(t){return arguments.length?(r="function"==typeof t?t:mc(+t),s(),e):r},e},formatDefaultLocale:Wc,get format(){return $c},get formatPrefix(){return jc},formatLocale:Uc,formatSpecifier:Bc,FormatSpecifier:Oc,precisionFixed:qc,precisionPrefix:Hc,precisionRound:Vc,geoArea:function(t){return Ml=new xt,kl(t,Nl),2*Ml},geoBounds:function(t){var e,r,n,i,a,o,s;if(ql=Wl=-(zl=Ul=1/0),Kl=[],kl(t,Jl),r=Kl.length){for(Kl.sort(cu),e=1,a=[n=Kl[0]];e<r;++e)lu(n,(i=Kl[e])[0])||lu(n,i[1])?(su(n[0],i[1])>su(n[0],n[1])&&(n[1]=i[1]),su(i[0],n[1])>su(n[0],n[1])&&(n[0]=i[0])):a.push(n=i);for(o=-1/0,e=0,n=a[r=a.length-1];e<=r;n=i,++e)(s=su(n[1],(i=a[e])[0]))>o&&(o=s,zl=i[0],Wl=n[1])}return Kl=Ql=null,zl===1/0||Ul===1/0?[[NaN,NaN],[NaN,NaN]]:[[zl,Ul],[Wl,ql]]},geoCentroid:function(t){uu=hu=du=fu=pu=gu=yu=mu=0,bu=new xt,_u=new xt,vu=new xt,kl(t,Cu);var e=+_u,r=+vu,n=sl(t=+bu,e,r);return n<Xc&&(t=gu,e=yu,r=mu,hu<Gc&&(t=du,e=fu,r=pu),(n=sl(t,e,r))<Xc)?[NaN,NaN]:[il(e,t)*tl,pl(r/n)*tl]},geoCircle:function(){var n,i,a=Fu([0,0]),o=Fu(90),s=Fu(6),c={point:function(t,e){n.push(t=i(t,e)),t[0]*=tl,t[1]*=tl}};function e(){var t=a.apply(this,arguments),e=o.apply(this,arguments)*el,r=s.apply(this,arguments)*el;return n=[],i=ju(-t[0]*el,-t[1]*el,0).invert,qu(c,e,r,1),t={type:"Polygon",coordinates:[n]},n=i=null,t}return e.center=function(t){return arguments.length?(a="function"==typeof t?t:Fu([+t[0],+t[1]]),e):a},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:Fu(+t),e):o},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:Fu(+t),e):s},e},geoClipAntimeridian:nh,geoClipCircle:ih,geoClipExtent:function(){var e,r,n,i=0,a=0,o=960,s=500;return n={stream:function(t){return e&&r===t?e:e=sh(i,a,o,s)(r=t)},extent:function(t){return arguments.length?(i=+t[0][0],a=+t[0][1],o=+t[1][0],s=+t[1][1],e=r=null,n):[[i,a],[o,s]]}}},geoClipRectangle:sh,geoContains:function(t,e){return(t&&vh.hasOwnProperty(t.type)?vh[t.type]:kh)(t,e)},geoDistance:_h,geoGraticule:Nh,geoGraticule10:function(){return Nh()()},geoInterpolate:function(t,e){var r=t[0]*el,n=t[1]*el,t=e[0]*el,e=e[1]*el,i=S(n),a=A(n),o=S(e),s=A(e),c=i*S(r),l=i*A(r),u=o*S(t),h=o*A(t),d=2*pl(hl(gl(e-n)+i*o*gl(t-r))),f=A(d);return(e=d?function(t){var e=A(t*=d)/f,t=A(d-t)/f,r=t*c+e*u,n=t*l+e*h,t=t*a+e*s;return[il(n,r)*tl,il(t,hl(r*r+n*n))*tl]}:function(){return[r*tl,n*tl]}).distance=d,e},geoLength:yh,geoPath:function(e,r){var n,i,a=4.5;function o(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),kl(t,n(i))),i.result()}return o.area=function(t){return kl(t,n(Uh)),Uh.result()},o.measure=function(t){return kl(t,n(M1)),M1.result()},o.bounds=function(t){return kl(t,n(Gh)),Gh.result()},o.centroid=function(t){return kl(t,n(b1)),b1.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,Dh):(e=t).stream,o):e},o.context=function(t){return arguments.length?(i=null==t?(r=null,new N1):new _1(r=t),"function"!=typeof a&&i.pointRadius(a),o):r},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),o):a},o.projection(e).context(r)},geoAlbers:X1,geoAlbersUsa:function(){var e,r,i,a,o,n,s=X1(),c=G1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=G1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){n=[t,e]}};function h(t){var e=t[0],t=t[1];return n=null,i.point(e,t),n||(a.point(e,t),n)||(o.point(e,t),n)}function d(){return e=r=null,h}return h.invert=function(t){var e=s.scale(),r=s.translate(),n=(t[0]-r[0])/e,r=(t[1]-r[1])/e;return(.12<=r&&r<.234&&-.425<=n&&n<-.214?c:.166<=r&&r<.234&&-.214<=n&&n<-.115?l:s).invert(t)},h.stream=function(t){return e&&r===t?e:(n=[s.stream(r=t),c.stream(t),l.stream(t)],i=n.length,e={point:function(t,e){for(var r=-1;++r<i;)n[r].point(t,e)},sphere:function(){for(var t=-1;++t<i;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)n[t].polygonEnd()}});var n,i},h.precision=function(t){return arguments.length?(s.precision(t),c.precision(t),l.precision(t),d()):s.precision()},h.scale=function(t){return arguments.length?(s.scale(t),c.scale(.35*t),l.scale(t),h.translate(s.translate())):s.scale()},h.translate=function(t){var e,r,n;return arguments.length?(e=s.scale(),r=+t[0],n=+t[1],i=s.translate(t).clipExtent([[r-.455*e,n-.238*e],[r+.455*e,n+.238*e]]).stream(u),a=c.translate([r-.307*e,n+.201*e]).clipExtent([[r-.425*e+Gc,n+.12*e+Gc],[r-.214*e-Gc,n+.234*e-Gc]]).stream(u),o=l.translate([r-.205*e,n+.212*e]).clipExtent([[r-.214*e+Gc,n+.166*e+Gc],[r-.115*e-Gc,n+.234*e-Gc]]).stream(u),d()):s.translate()},h.fitExtent=function(t,e){return I1(h,t,e)},h.fitSize=function(t,e){return R1(h,t,e)},h.fitWidth=function(t,e){return F1(h,t,e)},h.fitHeight=function(t,e){return P1(h,t,e)},h.scale(1070)},geoAzimuthalEqualArea:function(){return W1(Q1).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:Q1,geoAzimuthalEquidistant:function(){return W1(J1).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:J1,geoConicConformal:function(){return H1(n0).scale(109.5).parallels([30,30])},geoConicConformalRaw:n0,geoConicEqualArea:G1,geoConicEqualAreaRaw:V1,geoConicEquidistant:function(){return H1(a0).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:a0,geoEqualEarth:function(){return W1(h0).scale(177.158)},geoEqualEarthRaw:h0,geoEquirectangular:function(){return W1(i0).scale(152.63)},geoEquirectangularRaw:i0,geoGnomonic:function(){return W1(d0).scale(144.049).clipAngle(60)},geoGnomonicRaw:d0,geoIdentity:function(){var n,i,e,r,a,o,s,c=1,l=0,u=0,h=1,d=1,f=0,p=null,g=1,y=1,m=L1({point:function(t,e){t=v([t,e]);this.stream.point(t[0],t[1])}}),b=Dh;function _(){return g=c*h,y=c*d,o=s=null,v}function v(t){var e,r=t[0]*g,t=t[1]*y;return f&&(e=t*n-r*i,r=r*n+t*i,t=e),[r+l,t+u]}return v.invert=function(t){var e,r=t[0]-l,t=t[1]-u;return f&&(e=t*n+r*i,r=r*n-t*i,t=e),[r/g,t/y]},v.stream=function(t){return o&&s===t?o:o=m(b(s=t))},v.postclip=function(t){return arguments.length?(b=t,p=e=r=a=null,_()):b},v.clipExtent=function(t){return arguments.length?(b=null==t?(p=e=r=a=null,Dh):sh(p=+t[0][0],e=+t[0][1],r=+t[1][0],a=+t[1][1]),_()):null==p?null:[[p,e],[r,a]]},v.scale=function(t){return arguments.length?(c=+t,_()):c},v.translate=function(t){return arguments.length?(l=+t[0],u=+t[1],_()):[l,u]},v.angle=function(t){return arguments.length?(i=A(f=t%360*el),n=S(f),_()):f*tl},v.reflectX=function(t){return arguments.length?(h=t?-1:1,_()):h<0},v.reflectY=function(t){return arguments.length?(d=t?-1:1,_()):d<0},v.fitExtent=function(t,e){return I1(v,t,e)},v.fitSize=function(t,e){return R1(v,t,e)},v.fitWidth=function(t,e){return F1(v,t,e)},v.fitHeight=function(t,e){return P1(v,t,e)},v},geoProjection:W1,geoProjectionMutator:q1,geoMercator:function(){return e0(t0).scale(961/Jc)},geoMercatorRaw:t0,geoNaturalEarth1:function(){return W1(f0).scale(175.295)},geoNaturalEarth1Raw:f0,geoOrthographic:function(){return W1(p0).scale(249.5).clipAngle(90+Gc)},geoOrthographicRaw:p0,geoStereographic:function(){return W1(g0).scale(250).clipAngle(142)},geoStereographicRaw:g0,geoTransverseMercator:function(){var t=e0(y0),e=t.center,r=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?r([t[0],t[1],2<t.length?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:y0,geoRotation:Wu,geoStream:kl,geoTransform:function(t){return{stream:L1(t)}},cluster:function(){var s=m0,c=1,l=1,u=!1;function e(e){var n,i=0,t=(e.eachAfter(function(t){var e,r=t.children;r?(t.x=(e=r).reduce(b0,0)/e.length,t.y=1+r.reduce(_0,0)):(t.x=n?i+=s(t,n):0,t.y=0,n=t)}),function(t){for(var e;e=t.children;)t=e[0];return t}(e)),r=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),a=t.x-s(t,r)/2,o=r.x+s(r,t)/2;return e.eachAfter(u?function(t){t.x=(t.x-e.x)*c,t.y=(e.y-t.y)*l}:function(t){t.x=(t.x-a)/(o-a)*c,t.y=(1-(e.y?t.y/e.y:1))*l})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=!1,c=+t[0],l=+t[1],e):u?null:[c,l]},e.nodeSize=function(t){return arguments.length?(u=!0,c=+t[0],l=+t[1],e):u?[c,l]:null},e},hierarchy:x0,Node:C0,pack:function(){var r=null,n=1,i=1,a=M0;function e(t){var e=O0();return t.x=n/2,t.y=i/2,r?t.eachBefore(V0(r)).eachAfter(G0(a,.5,e)).eachBefore(X0(1)):t.eachBefore(V0(H0)).eachAfter(G0(M0,1,e)).eachAfter(G0(a,t.r/Math.min(n,i),e)).eachBefore(X0(Math.min(n,i)/(2*t.r))),t}return e.radius=function(t){return arguments.length?(r=S0(t),e):r},e.size=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.padding=function(t){return arguments.length?(a="function"==typeof t?t:N0(+t),e):a},e},packSiblings:function(t){return q0(t,O0()),t},packEnclose:function(t){return I0(t,O0())},partition:function(){var r=1,n=1,s=0,i=!1;function e(t){var a,o,e=t.height+1;return t.x0=t.y0=s,t.x1=r,t.y1=n/e,t.eachBefore((a=n,o=e,function(t){t.children&&K0(t,t.x0,a*(t.depth+1)/o,t.x1,a*(t.depth+2)/o);var e=t.x0,r=t.y0,n=t.x1-s,i=t.y1-s;n<e&&(e=n=(e+n)/2),i<r&&(r=i=(r+i)/2),t.x0=e,t.y0=r,t.x1=n,t.y1=i})),i&&t.eachBefore(Z0),t}return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(t){return arguments.length?(r=+t[0],n=+t[1],e):[r,n]},e.padding=function(t){return arguments.length?(s=+t,e):s},e},stratify:function(){var m,b=ed,_=rd;function e(r){var e,t,n,i,a,o,s,c,l=Array.from(r),u=b,h=_,d=new Map;if(null!=m){const f=l.map((t,e)=>{return t=m(t,e,r),e=(t=""+t).length,"/"===(t=id(t,e-1)&&!id(t,e-2)?t.slice(0,-1):t)[0]?t:"/"+t}),p=f.map(nd),g=new Set(f).add("");for(const y of p)g.has(y)||(g.add(y),f.push(y),p.push(nd(y)),l.push(td));u=(t,e)=>f[e],h=(t,e)=>p[e]}for(n=0,e=l.length;n<e;++n)t=l[n],o=l[n]=new C0(t),null!=(s=u(t,n,r))&&(s+="")&&(c=o.id=s,d.set(c,d.has(c)?J0:o)),null!=(s=h(t,n,r))&&(s+="")&&(o.parent=s);for(n=0;n<e;++n)if(s=(o=l[n]).parent){if(!(a=d.get(s)))throw new Error("missing: "+s);if(a===J0)throw new Error("ambiguous: "+s);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(i)throw new Error("multiple roots");i=o}if(!i)throw new Error("no root");if(null!=m){for(;i.data===td&&1===i.children.length;)i=i.children[0],--e;for(let t=l.length-1;0<=t&&(o=l[t]).data===td;--t)o.data=null}if(i.parent=Q0,i.eachBefore(function(t){t.depth=t.parent.depth+1,--e}).eachBefore(T0),i.parent=null,0<e)throw new Error("cycle");return i}return e.id=function(t){return arguments.length?(b=S0(t),e):b},e.parentId=function(t){return arguments.length?(_=S0(t),e):_},e.path=function(t){return arguments.length?(m=S0(t),e):m},e},tree:function(){var d=ad,c=1,l=1,u=null;function e(t){var e,r,n,i,a,o,s=function(t){for(var e,r,n,i,a,o=[t=new cd(t,0)];e=o.pop();)if(n=e._.children)for(e.children=new Array(a=n.length),i=a-1;0<=i;--i)o.push(r=e.children[i]=new cd(n[i],i)),r.parent=e;return(t.parent=new cd(null,0)).children=[t],t}(t);return s.eachAfter(h),s.parent.m=-s.z,s.eachBefore(f),u?t.eachBefore(p):((n=r=e=t).eachBefore(function(t){t.x<e.x&&(e=t),t.x>r.x&&(r=t),t.depth>n.depth&&(n=t)}),s=e===r?1:d(e,r)/2,i=s-e.x,a=c/(r.x+s+i),o=l/(n.depth||1),t.eachBefore(function(t){t.x=(t.x+i)*a,t.y=t.depth*o})),t}function h(t){var e=t.children,r=t.parent.children,n=t.i?r[t.i-1]:null;if(e){for(var i,a=0,o=0,s=t.children,c=s.length;0<=--c;)(i=s[c]).z+=a,i.m+=a,a+=i.s+(o+=i.c);e=(e[0].z+e[e.length-1].z)/2;n?(t.z=n.z+d(t._,n._),t.m=t.z-e):t.z=e}else n&&(t.z=n.z+d(t._,n._));t.parent.A=function(t,e,r){if(e){for(var n,i=t,a=t,o=e,s=i.parent.children[0],c=i.m,l=a.m,u=o.m,h=s.m;o=sd(o),i=od(i),o&&i;)s=od(s),(a=sd(a)).a=t,0<(n=o.z+u-i.z-c+d(o._,i._))&&(function(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}(function(t,e,r){return t.a.parent===e.parent?t.a:r}(o,t,r),t,n),c+=n,l+=n),u+=o.m,c+=i.m,h+=s.m,l+=a.m;o&&!sd(a)&&(a.t=o,a.m+=u-l),i&&!od(s)&&(s.t=i,s.m+=c-h,r=t)}return r}(t,n,t.parent.A||r[0])}function f(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function p(t){t.x*=c,t.y=t.depth*l}return e.separation=function(t){return arguments.length?(d=t,e):d},e.size=function(t){return arguments.length?(u=!1,c=+t[0],l=+t[1],e):u?null:[c,l]},e.nodeSize=function(t){return arguments.length?(u=!0,c=+t[0],l=+t[1],e):u?[c,l]:null},e},treemap:function(){var o=hd,e=!1,r=1,n=1,s=[0],c=M0,l=M0,u=M0,h=M0,d=M0;function i(t){return t.x0=t.y0=0,t.x1=r,t.y1=n,t.eachBefore(a),s=[0],e&&t.eachBefore(Z0),t}function a(t){var e=s[t.depth],r=t.x0+e,n=t.y0+e,i=t.x1-e,a=t.y1-e;i<r&&(r=i=(r+i)/2),a<n&&(n=a=(n+a)/2),t.x0=r,t.y0=n,t.x1=i,t.y1=a,t.children&&(e=s[t.depth+1]=c(t)/2,r+=d(t)-e,n+=l(t)-e,(i-=u(t)-e)<r&&(r=i=(r+i)/2),(a-=h(t)-e)<n&&(n=a=(n+a)/2),o(t,r,n,i,a))}return i.round=function(t){return arguments.length?(e=!!t,i):e},i.size=function(t){return arguments.length?(r=+t[0],n=+t[1],i):[r,n]},i.tile=function(t){return arguments.length?(o=A0(t),i):o},i.padding=function(t){return arguments.length?i.paddingInner(t).paddingOuter(t):i.paddingInner()},i.paddingInner=function(t){return arguments.length?(c="function"==typeof t?t:N0(+t),i):c},i.paddingOuter=function(t){return arguments.length?i.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):i.paddingTop()},i.paddingTop=function(t){return arguments.length?(l="function"==typeof t?t:N0(+t),i):l},i.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:N0(+t),i):u},i.paddingBottom=function(t){return arguments.length?(h="function"==typeof t?t:N0(+t),i):h},i.paddingLeft=function(t){return arguments.length?(d="function"==typeof t?t:N0(+t),i):d},i},treemapBinary:function(t,e,r,n,i){var a,o,g=t.children,s=g.length,y=new Array(s+1);for(y[0]=o=a=0;a<s;++a)y[a+1]=o+=g[a].value;!function t(e,r,n,i,a,o,s){if(r-1<=e)return(c=g[e]).x0=i,c.y0=a,c.x1=o,void(c.y1=s);for(var c=y[e],l=n/2+c,u=e+1,h=r-1;u<h;){var d=u+h>>>1;y[d]<l?u=1+d:h=d}l-y[u-1]<y[u]-l&&e+1<u&&--u;var c=y[u]-c,f=n-c;{var p;s-a<o-i?(t(e,u,c,i,a,p=n?(i*f+o*c)/n:o,s),t(u,r,f,p,a,o,s)):(t(e,u,c,i,a,o,p=n?(a*f+s*c)/n:s),t(u,r,f,i,p,o,s))}}(0,s,t.value,e,r,n,i)},treemapDice:K0,treemapSlice:ld,treemapSliceDice:function(t,e,r,n,i){(1&t.depth?ld:K0)(t,e,r,n,i)},treemapSquarify:hd,treemapResquarify:yc,interpolate:_i,interpolateArray:function(t,e){return(hi(e)?ui:di)(t,e)},interpolateBasis:ti,interpolateBasisClosed:ei,interpolateDate:fi,interpolateDiscrete:function(e){var r=e.length;return function(t){return e[Math.max(0,Math.min(r-1,Math.floor(t*r)))]}},interpolateHue:function(t,e){var r=ii(+t,+e);return function(t){t=r(t);return t-360*Math.floor(t/360)}},interpolateNumber:pi,interpolateNumberArray:ui,interpolateObject:gi,interpolateRound:vi,interpolateString:bi,interpolateTransformCss:Ci,interpolateTransformSvg:Si,interpolateZoom:Mi,interpolateRgb:si,interpolateRgbBasis:li,interpolateRgbBasisClosed:Hr,interpolateHsl:Gr,interpolateHslLong:Vr,interpolateLab:function(e,t){var r=oi((e=On(e)).l,(t=On(t)).l),n=oi(e.a,t.a),i=oi(e.b,t.b),a=oi(e.opacity,t.opacity);return function(t){return e.l=r(t),e.a=n(t),e.b=i(t),e.opacity=a(t),e+""}},interpolateHcl:Li,interpolateHclLong:Bi,interpolateCubehelix:Ii,interpolateCubehelixLong:Ri,piecewise:Fi,quantize:function(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t(n/(e-1));return r},path:Po,polygonArea:function(t){for(var e,r=-1,n=t.length,i=t[n-1],a=0;++r<n;)e=i,i=t[r],a+=e[1]*i[0]-e[0]*i[1];return a/2},polygonCentroid:function(t){for(var e,r,n=-1,i=t.length,a=0,o=0,s=t[i-1],c=0;++n<i;)e=s,s=t[n],c+=r=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*r,o+=(e[1]+s[1])*r;return[a/(c*=3),o/c]},polygonHull:function(t){if((e=t.length)<3)return null;for(var e,r=new Array(e),n=new Array(e),i=0;i<e;++i)r[i]=[+t[i][0],+t[i][1],i];for(r.sort(dd),i=0;i<e;++i)n[i]=[r[i][0],-r[i][1]];var a=fd(r),o=fd(n),s=o[0]===a[0],c=o[o.length-1]===a[a.length-1],l=[];for(i=a.length-1;0<=i;--i)l.push(t[r[a[i]][2]]);for(i=+s;i<o.length-c;++i)l.push(t[r[o[i]][2]]);return l},polygonContains:function(t,e){for(var r,n,i=t.length,a=t[i-1],o=e[0],s=e[1],c=a[0],l=a[1],u=!1,h=0;h<i;++h)r=(a=t[h])[0],s<(n=a[1])!=s<l&&o<(c-r)*(s-n)/(l-n)+r&&(u=!u),c=r,l=n;return u},polygonLength:function(t){for(var e,r,n=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],c=0;++n<i;)e=o,r=s,e-=o=(a=t[n])[0],r-=s=a[1],c+=Math.hypot(e,r);return c},quadtree:fc,randomUniform:gd,randomInt:yd,randomNormal:md,randomLogNormal:bd,randomBates:vd,randomIrwinHall:_d,randomExponential:xd,randomPareto:kd,randomBernoulli:wd,randomGeometric:Ed,randomBinomial:Sd,randomGamma:Td,randomBeta:Cd,randomWeibull:Ad,randomCauchy:Md,randomLogistic:Nd,randomPoisson:Dd,randomLcg:function(t=Math.random()){let e=0|(0<=t&&t<1?t/Ld:Math.abs(t));return()=>(e=1664525*e+1013904223|0,Ld*(e>>>0))},scaleBand:Fd,scalePoint:function(){return function t(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(r())},e}(Fd.apply(null,arguments).paddingInner(1))},scaleIdentity:function t(e){var r;function n(t){return null==t||isNaN(t=+t)?r:t}return(n.invert=n).domain=n.range=function(t){return arguments.length?(e=Array.from(t,Pd),n):e.slice()},n.unknown=function(t){return arguments.length?(r=t,n):r},n.copy=function(){return t(e).unknown(r)},e=arguments.length?Array.from(e,Pd):[0,1],Gd(n)},scaleLinear:Xd,scaleLog:function t(){const e=nf(qd()).domain([1,10]);return e.copy=()=>Wd(e,t()).base(e.base()),Bd.apply(e,arguments),e},scaleSymlog:function t(){var e=sf(qd());return e.copy=function(){return Wd(e,t()).constant(e.constant())},Bd.apply(e,arguments)},scaleOrdinal:Rd,scaleImplicit:Id,scalePow:df,scaleSqrt:function(){return df.apply(null,arguments).exponent(.5)},scaleRadial:function t(){var e,r=Hd(),n=[0,1],i=!1;function a(t){return t=r(t),t=Math.sign(t)*Math.sqrt(Math.abs(t)),isNaN(t)?e:i?Math.round(t):t}return a.invert=function(t){return r.invert(ff(t))},a.domain=function(t){return arguments.length?(r.domain(t),a):r.domain()},a.range=function(t){return arguments.length?(r.range((n=Array.from(t,Pd)).map(ff)),a):n.slice()},a.rangeRound=function(t){return a.range(t).round(!0)},a.round=function(t){return arguments.length?(i=!!t,a):i},a.clamp=function(t){return arguments.length?(r.clamp(t),a):r.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t(r.domain(),n).round(i).clamp(r.clamp()).unknown(e)},Bd.apply(a,arguments),Gd(a)},scaleQuantile:function t(){var e,r=[],n=[],i=[];function a(){var t=0,e=Math.max(1,n.length);for(i=new Array(e-1);++t<e;)i[t-1]=ae(r,t/e);return o}function o(t){return null==t||isNaN(t=+t)?e:n[st(i,t)]}return o.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[0<t?i[t-1]:r[0],t<i.length?i[t]:r[r.length-1]]},o.domain=function(t){if(!arguments.length)return r.slice();r=[];for(var e of t)null==e||isNaN(e=+e)||r.push(e);return r.sort(K),a()},o.range=function(t){return arguments.length?(n=Array.from(t),a()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return i.slice()},o.copy=function(){return t().domain(r).range(n).unknown(e)},Bd.apply(o,arguments)},scaleQuantize:function t(){var e,r=0,n=1,i=1,a=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[st(a,t,0,i)]:e}function c(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*n-(t-i)*r)/(i+1);return s}return s.domain=function(t){return arguments.length?([r,n]=t,r=+r,n=+n,c()):[r,n]},s.range=function(t){return arguments.length?(i=(o=Array.from(t)).length-1,c()):o.slice()},s.invertExtent=function(t){return(t=o.indexOf(t))<0?[NaN,NaN]:t<1?[r,a[0]]:i<=t?[a[i-1],n]:[a[t-1],a[t]]},s.unknown=function(t){return arguments.length&&(e=t),s},s.thresholds=function(){return a.slice()},s.copy=function(){return t().domain([r,n]).range(o).unknown(e)},Bd.apply(Gd(s),arguments)},scaleThreshold:function t(){var e,r=[.5],n=[0,1],i=1;function a(t){return null!=t&&t<=t?n[st(r,t,0,i)]:e}return a.domain=function(t){return arguments.length?(r=Array.from(t),i=Math.min(r.length,n.length-1),a):r.slice()},a.range=function(t){return arguments.length?(n=Array.from(t),i=Math.min(r.length,n.length-1),a):n.slice()},a.invertExtent=function(t){return t=n.indexOf(t),[r[t-1],r[t]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(r).range(n).unknown(e)},Bd.apply(a,arguments)},scaleTime:sg,scaleUtc:function(){return Bd.apply(og(T2,C2,w2,x2,o2,i2,r2,t2,Sf,R2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},scaleSequential:function t(){var e=Gd(cg()(jd));return e.copy=function(){return lg(e,t())},Od.apply(e,arguments)},scaleSequentialLog:function t(){var e=nf(cg()).domain([1,10]);return e.copy=function(){return lg(e,t()).base(e.base())},Od.apply(e,arguments)},scaleSequentialPow:ug,scaleSequentialSqrt:function(){return ug.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function t(){var e=sf(cg());return e.copy=function(){return lg(e,t()).constant(e.constant())},Od.apply(e,arguments)},scaleSequentialQuantile:function t(){var n=[],r=jd;function i(t){if(null!=t&&!isNaN(t=+t))return r((st(n,t,1)-1)/(n.length-1))}return i.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(K),i},i.interpolator=function(t){return arguments.length?(r=t,i):r},i.range=function(){return n.map((t,e)=>r(e/(n.length-1)))},i.quantiles=function(r){return Array.from({length:r+1},(t,e)=>ie(n,e/r))},i.copy=function(){return t(r).domain(n)},Od.apply(i,arguments)},scaleDiverging:function t(){var e=Gd(hg()(jd));return e.copy=function(){return lg(e,t())},Od.apply(e,arguments)},scaleDivergingLog:function t(){var e=nf(hg()).domain([.1,1,10]);return e.copy=function(){return lg(e,t()).base(e.base())},Od.apply(e,arguments)},scaleDivergingPow:dg,scaleDivergingSqrt:function(){return dg.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function t(){var e=sf(hg());return e.copy=function(){return lg(e,t()).constant(e.constant())},Od.apply(e,arguments)},tickFormat:Vd,schemeCategory10:pg,schemeAccent:gg,schemeDark2:yg,schemePaired:mg,schemePastel1:bg,schemePastel2:_g,schemeSet1:vg,schemeSet2:xg,schemeSet3:kg,schemeTableau10:wg,interpolateBrBG:Cg,schemeBrBG:Tg,interpolatePRGn:r,schemePRGn:e,interpolatePiYG:n,schemePiYG:Sg,interpolatePuOr:a,schemePuOr:i,interpolateRdBu:Ag,schemeRdBu:o,interpolateRdGy:l,schemeRdGy:s,interpolateRdYlBu:h,schemeRdYlBu:u,interpolateRdYlGn:f,schemeRdYlGn:d,interpolateSpectral:p,schemeSpectral:Mg,interpolateBuGn:Dg,schemeBuGn:Ng,interpolateBuPu:Bg,schemeBuPu:Lg,interpolateGnBu:Ig,schemeGnBu:Og,interpolateOrRd:Rg,schemeOrRd:g,interpolatePuBuGn:Fg,schemePuBuGn:y,interpolatePuBu:Pg,schemePuBu:m,interpolatePuRd:jg,schemePuRd:$g,interpolateRdPu:Yg,schemeRdPu:b,interpolateYlGnBu:v,schemeYlGnBu:_,interpolateYlGn:k,schemeYlGn:x,interpolateYlOrBr:Ug,schemeYlOrBr:zg,interpolateYlOrRd:qg,schemeYlOrRd:Wg,interpolateBlues:Vg,schemeBlues:Hg,interpolateGreens:Xg,schemeGreens:Gg,interpolateGreys:Kg,schemeGreys:Zg,interpolatePurples:Jg,schemePurples:Qg,interpolateReds:ey,schemeReds:ty,interpolateOranges:Eg,schemeOranges:ry,interpolateCividis:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCubehelixDefault:ny,interpolateRainbow:function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return oy.h=360*t-100,oy.s=1.5-1.5*e,oy.l=.8-.9*e,oy+""},interpolateWarm:iy,interpolateCool:ay,interpolateSinebow:function(t){var e;return t=(.5-t)*Math.PI,sy.r=255*(e=Math.sin(t))*e,sy.g=255*(e=Math.sin(t+cy))*e,sy.b=255*(e=Math.sin(t+ly))*e,sy+""},interpolateTurbo:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:hy,interpolateMagma:dy,interpolateInferno:fy,interpolatePlasma:py,create:function(t){return H(Fe(t).call(document.documentElement))},creator:Fe,local:wr,matcher:Ue,namespace:Re,namespaces:Ie,pointer:Cr,pointers:function(t,e){return t.target&&(t=Tr(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,t=>Cr(t,e))},select:H,selectAll:Sr,selection:xr,selector:$e,selectorAll:ze,style:rr,window:er,arc:Oy,area:zy,line:Yy,pie:qy,areaRadial:Ky,radialArea:Ky,lineRadial:Zy,radialLine:Zy,pointRadial:Qy,link:om,linkHorizontal:function(){return om(em)},linkVertical:function(){return om(rm)},linkRadial:function(){var t=om(nm);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},symbol:function(e,r){let n=null;function i(){let t;if(n=n||(t=Po()),e.apply(this,arguments).draw(n,+r.apply(this,arguments)),t)return n=null,t+""||null}return e="function"==typeof e?e:gy(e||lm),r="function"==typeof r?r:gy(void 0===r?64:+r),i.type=function(t){return arguments.length?(e="function"==typeof t?t:gy(t),i):e},i.size=function(t){return arguments.length?(r="function"==typeof t?t:gy(+t),i):r},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},symbolsStroke:Bm,symbolsFill:Lm,symbols:Lm,symbolAsterisk:cm,symbolCircle:lm,symbolCross:um,symbolDiamond:fm,symbolDiamond2:pm,symbolPlus:gm,symbolSquare:ym,symbolSquare2:mm,symbolStar:xm,symbolTriangle:wm,symbolTriangle2:Tm,symbolWye:Nm,symbolX:Dm,curveBasisClosed:$m,curveBasisOpen:Ym,curveBasis:Fm,curveBumpX:em,curveBumpY:rm,curveBundle:Um,curveCardinalClosed:Gm,curveCardinalOpen:Zm,curveCardinal:Hm,curveCatmullRomClosed:e3,curveCatmullRomOpen:n3,curveCatmullRom:Jm,curveLinearClosed:a3,curveLinear:Py,curveMonotoneX:f3,curveMonotoneY:p3,curveNatural:m3,curveStep:_3,curveStepAfter:x3,curveStepBefore:v3,stack:function(){var s=gy([]),c=w3,l=k3,u=E3;function e(t){var e,r,n=Array.from(s.apply(this,arguments),T3),i=n.length,a=-1;for(const o of t)for(e=0,++a;e<i;++e)(n[e][a]=[0,+u(o,n[e].key,a,t)]).data=o;for(e=0,r=Ry(c(n));e<i;++e)n[r[e]].index=e;return l(n,r),n}return e.keys=function(t){return arguments.length?(s="function"==typeof t?t:gy(Array.from(t)),e):s},e.value=function(t){return arguments.length?(u="function"==typeof t?t:gy(+t),e):u},e.order=function(t){return arguments.length?(c=null==t?w3:"function"==typeof t?t:gy(Array.from(t)),e):c},e.offset=function(t){return arguments.length?(l=null==t?k3:t,e):l},e},stackOffsetExpand:function(t,e){if(0<(n=t.length)){for(var r,n,i,a=0,o=t[0].length;a<o;++a){for(i=r=0;r<n;++r)i+=t[r][a][1]||0;if(i)for(r=0;r<n;++r)t[r][a][1]/=i}k3(t,e)}},stackOffsetDiverging:function(t,e){if(0<(s=t.length))for(var r,n,i,a,o,s,c=0,l=t[e[0]].length;c<l;++c)for(r=a=o=0;r<s;++r)0<(i=(n=t[e[r]][c])[1]-n[0])?(n[0]=a,n[1]=a+=i):i<0?(n[1]=o,n[0]=o+=i):(n[0]=0,n[1]=i)},stackOffsetNone:k3,stackOffsetSilhouette:function(t,e){if(0<(r=t.length)){for(var r,n=0,i=t[e[0]],a=i.length;n<a;++n){for(var o=0,s=0;o<r;++o)s+=t[o][n][1]||0;i[n][1]+=i[n][0]=-s/2}k3(t,e)}},stackOffsetWiggle:function(t,e){if(0<(i=t.length)&&0<(n=(r=t[e[0]]).length)){for(var r,n,i,a=0,o=1;o<n;++o){for(var s=0,c=0,l=0;s<i;++s){for(var u=t[e[s]],h=u[o][1]||0,d=(h-(u[o-1][1]||0))/2,f=0;f<s;++f){var p=t[e[f]];d+=(p[o][1]||0)-(p[o-1][1]||0)}c+=h,l+=d*h}r[o-1][1]+=r[o-1][0]=a,c&&(a-=l/c)}r[o-1][1]+=r[o-1][0]=a,k3(t,e)}},stackOrderAppearance:C3,stackOrderAscending:A3,stackOrderDescending:function(t){return A3(t).reverse()},stackOrderInsideOut:function(t){for(var e,r=t.length,n=t.map(M3),i=C3(t),a=0,o=0,s=[],c=[],l=0;l<r;++l)e=i[l],(a<o?(a+=n[e],s):(o+=n[e],c)).push(e);return c.reverse().concat(s)},stackOrderNone:w3,stackOrderReverse:function(t){return w3(t).reverse()},timeInterval:yf,timeMillisecond:bf,timeMilliseconds:_f,utcMillisecond:bf,utcMilliseconds:_f,timeSecond:Sf,timeSeconds:Cf,utcSecond:Sf,utcSeconds:Cf,timeMinute:Mf,timeMinutes:Af,timeHour:Df,timeHours:Nf,timeDay:Bf,timeDays:Lf,timeWeek:If,timeWeeks:zf,timeSunday:If,timeSundays:zf,timeMonday:Rf,timeMondays:Uf,timeTuesday:Ff,timeTuesdays:Wf,timeWednesday:Pf,timeWednesdays:qf,timeThursday:$f,timeThursdays:Hf,timeFriday:jf,timeFridays:Vf,timeSaturday:Yf,timeSaturdays:Gf,timeMonth:Zf,timeMonths:Xf,timeYear:Qf,timeYears:Kf,utcMinute:t2,utcMinutes:Jf,utcHour:r2,utcHours:e2,utcDay:i2,utcDays:n2,utcWeek:o2,utcWeeks:f2,utcSunday:o2,utcSundays:f2,utcMonday:s2,utcMondays:p2,utcTuesday:c2,utcTuesdays:g2,utcWednesday:l2,utcWednesdays:y2,utcThursday:u2,utcThursdays:m2,utcFriday:h2,utcFridays:b2,utcSaturday:d2,utcSaturdays:_2,utcMonth:x2,utcMonths:v2,utcYear:w2,utcYears:k2,utcTicks:T2,utcTickInterval:C2,timeTicks:S2,timeTickInterval:A2,timeFormatDefaultLocale:eg,get timeFormat(){return O2},get timeParse(){return I2},get utcFormat(){return R2},get utcParse(){return F2},timeFormatLocale:L2,isoFormat:ng,isoParse:rg,now:Xi,timer:Qi,timerFlush:Ji,timeout:na,interval:function(t,e,r){var a=new Ki,o=e;return null==e||(a._restart=a.restart,a.restart=function(r,n,i){n=+n,i=null==i?Xi():+i,a._restart(function t(e){e+=o,a._restart(t,o+=n,i),r(e)},n,i)}),a.restart(t,e,r),a},transition:Aa,active:function(t,e){var r,n,i=t.__transition;if(i)for(n in e=null==e?null:e+"",i)if((r=i[n]).state>sa&&r.name===e)return new Sa([[t]],Xa,e,+n);return null},interrupt:ma,zoom:function(){var l,u,s,h=F3,d=P3,f=z3,a=j3,e=Y3,o=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],c=250,g=Mi,r=De("start","zoom","end"),y=500,m=150,b=0,_=10;function v(t){t.property("__zoom",$3).on("wheel.zoom",i,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",S).filter(e).on("touchstart.zoom",A).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(t,e){return(e=Math.max(o[0],Math.min(o[1],e)))===t.k?t:new L3(e,t.x,t.y)}function k(t,e,r){var n=e[0]-r[0]*t.k,e=e[1]-r[1]*t.k;return n===t.x&&e===t.y?t:new L3(t.k,n,e)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function E(t,r,c,l){t.on("start.zoom",function(){T(this,arguments).event(l).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(l).end()}).tween("zoom",function(){var t=arguments,n=T(this,t).event(l),e=d.apply(this,t),i=null==c?w(e):"function"==typeof c?c.apply(this,t):c,a=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),e=this.__zoom,o="function"==typeof r?r.apply(this,t):r,s=g(e.invert(i).concat(a/e.k),o.invert(i).concat(a/o.k));return function(t){var e,r;t=1===t?o:(e=s(t),new L3(r=a/e[2],i[0]-e[0]*r,i[1]-e[1]*r)),n.zoom(null,t)}})}function T(t,e,r){return!r&&t.__zooming||new n(t,e)}function n(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=d.apply(t,e),this.taps=0}function i(t,...e){if(h.apply(this,arguments)){var r=T(this,e).event(t),e=this.__zoom,n=Math.max(o[0],Math.min(o[1],e.k*Math.pow(2,a.apply(this,arguments)))),i=Cr(t);if(r.wheel)r.mouse[0][0]===i[0]&&r.mouse[0][1]===i[1]||(r.mouse[1]=e.invert(r.mouse[0]=i)),clearTimeout(r.wheel);else{if(e.k===n)return;r.mouse=[i,e.invert(i)],ma(this),r.start()}R3(t),r.wheel=setTimeout(function(){r.wheel=null,r.end()},m),r.zoom("mouse",f(k(x(e,n),r.mouse[0],r.mouse[1]),r.extent,p))}}function C(t,...e){var n,i,r,a,o;!s&&h.apply(this,arguments)&&(n=t.currentTarget,i=T(this,e,!0).event(t),r=H(t.view).on("mousemove.zoom",function(t){{var e,r;R3(t),i.moved||(e=t.clientX-a,r=t.clientY-o,i.moved=b<e*e+r*r)}i.event(t).zoom("mouse",f(k(i.that.__zoom,i.mouse[0]=Cr(t,n),i.mouse[1]),i.extent,p))},!0).on("mouseup.zoom",function(t){r.on("mousemove.zoom mouseup.zoom",null),Ir(t.view,i.moved),R3(t),i.event(t).end()},!0),e=Cr(t,n),a=t.clientX,o=t.clientY,Or(t.view),I3(t),i.mouse=[e,this.__zoom.invert(e)],ma(this),i.start())}function S(t,...e){var r,n,i,a;h.apply(this,arguments)&&(a=this.__zoom,r=Cr(t.changedTouches?t.changedTouches[0]:t,this),n=a.invert(r),i=a.k*(t.shiftKey?.5:2),a=f(k(x(a,i),r,n),d.apply(this,e),p),R3(t),0<c?H(this).transition().duration(c).call(E,a,r,t):H(this).call(v.transform,a,r,t))}function A(t,...e){if(h.apply(this,arguments)){var r,n,i,a,o=t.touches,s=o.length,c=T(this,e,t.changedTouches.length===s).event(t);for(I3(t),n=0;n<s;++n)a=[a=Cr(i=o[n],this),this.__zoom.invert(a),i.identifier],c.touch0?c.touch1||c.touch0[2]===a[2]||(c.touch1=a,c.taps=0):(c.touch0=a,r=!0,c.taps=1+!!l);l=l&&clearTimeout(l),r&&(c.taps<2&&(u=a[0],l=setTimeout(function(){l=null},y)),ma(this),c.start())}}function M(t,...e){if(this.__zooming){var r,n=T(this,e).event(t),i=t.changedTouches,a=i.length;for(R3(t),r=0;r<a;++r)h=Cr(u=i[r],this),n.touch0&&n.touch0[2]===u.identifier?n.touch0[0]=h:n.touch1&&n.touch1[2]===u.identifier&&(n.touch1[0]=h);if(u=n.that.__zoom,n.touch1)var e=n.touch0[0],t=n.touch0[1],o=n.touch1[0],s=n.touch1[1],c=(c=o[0]-e[0])*c+(c=o[1]-e[1])*c,l=(l=s[0]-t[0])*l+(l=s[1]-t[1])*l,u=x(u,Math.sqrt(c/l)),h=[(e[0]+o[0])/2,(e[1]+o[1])/2],c=[(t[0]+s[0])/2,(t[1]+s[1])/2];else{if(!n.touch0)return;h=n.touch0[0],c=n.touch0[1]}n.zoom("touch",f(k(u,h,c),n.extent,p))}}function N(t,...e){if(this.__zooming){var r,n,i=T(this,e).event(t),a=t.changedTouches,o=a.length;for(I3(t),s&&clearTimeout(s),s=setTimeout(function(){s=null},y),r=0;r<o;++r)n=a[r],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):(i.end(),2===i.taps&&(n=Cr(n,this),Math.hypot(u[0]-n[0],u[1]-n[1])<_)&&((e=H(this).on("dblclick.zoom"))&&e.apply(this,arguments)))}}return v.transform=function(t,e,r,n){var i=t.selection?t.selection():t;i.property("__zoom",$3),t!==i?E(t,e,r,n):i.interrupt().each(function(){T(this,arguments).event(n).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},v.scaleBy=function(t,e,r,n){v.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},r,n)},v.scaleTo=function(t,a,o,e){v.transform(t,function(){var t=d.apply(this,arguments),e=this.__zoom,r=null==o?w(t):"function"==typeof o?o.apply(this,arguments):o,n=e.invert(r),i="function"==typeof a?a.apply(this,arguments):a;return f(k(x(e,i),r,n),t,p)},o,e)},v.translateBy=function(t,e,r,n){v.transform(t,function(){return f(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof r?r.apply(this,arguments):r),d.apply(this,arguments),p)},null,n)},v.translateTo=function(t,n,i,a,e){v.transform(t,function(){var t=d.apply(this,arguments),e=this.__zoom,r=null==a?w(t):"function"==typeof a?a.apply(this,arguments):a;return f(B3.translate(r[0],r[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof i?-i.apply(this,arguments):-i),t,p)},a,e)},n.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=H(this.that).datum();r.call(t,this.that,new D3(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:r}),e)}},v.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:N3(+t),v):a},v.filter=function(t){return arguments.length?(h="function"==typeof t?t:N3(!!t),v):h},v.touchable=function(t){return arguments.length?(e="function"==typeof t?t:N3(!!t),v):e},v.extent=function(t){return arguments.length?(d="function"==typeof t?t:N3([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):d},v.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],v):[o[0],o[1]]},v.translateExtent=function(t){return arguments.length?(p[0][0]=+t[0][0],p[1][0]=+t[1][0],p[0][1]=+t[0][1],p[1][1]=+t[1][1],v):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},v.constrain=function(t){return arguments.length?(f=t,v):f},v.duration=function(t){return arguments.length?(c=+t,v):c},v.interpolate=function(t){return arguments.length?(g=t,v):g},v.on=function(){var t=r.on.apply(r,arguments);return t===r?v:t},v.clickDistance=function(t){return arguments.length?(b=(t=+t)*t,v):Math.sqrt(b)},v.tapDistance=function(t){return arguments.length?(_=+t,v):_},v},zoomTransform:O3,zoomIdentity:B3,ZoomTransform:L3},Symbol.toStringTag,{value:"Module"}));function U3(t){return(U3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W3(t,e){return(W3=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q3(t,e,r){return(q3=function(){if(!("u"<typeof Reflect||!Reflect.construct||Reflect.construct.sham)){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch{}}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);e=new(Function.bind.apply(t,n));return r&&W3(e,r.prototype),e}).apply(null,arguments)}function H3(t){return function(t){if(Array.isArray(t))return V3(t)}(t)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var r;if(t)return"string"==typeof t?V3(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V3(t,e):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V3(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var G3,X3=Object.hasOwnProperty,Z3=Object.setPrototypeOf,K3=Object.isFrozen,Q3=Object.getPrototypeOf,J3=Object.getOwnPropertyDescriptor,t4=Object.freeze,Fs=Object.seal,e4=Object.create,Ps=typeof Reflect<"u"&&Reflect,r4=Ps.apply,n4=Ps.construct,r4=r4||function(t,e,r){return t.apply(e,r)},t4=t4||function(t){return t},Fs=Fs||function(t){return t},n4=n4||function(t,e){return q3(t,H3(e))},i4=p4(Array.prototype.forEach),a4=p4(Array.prototype.pop),o4=p4(Array.prototype.push),s4=p4(String.prototype.toLowerCase),c4=p4(String.prototype.match),l4=p4(String.prototype.replace),u4=p4(String.prototype.indexOf),h4=p4(String.prototype.trim),d4=p4(RegExp.prototype.test),f4=(G3=TypeError,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n4(G3,e)});function p4(i){return function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r4(i,t,r)}}function g4(t,e,r){r=r||s4,Z3&&Z3(t,null);for(var n=e.length;n--;){var i,a=e[n];"string"==typeof a&&(i=r(a))!==a&&(K3(e)||(e[n]=i),a=i),t[a]=!0}return t}function y4(t){var e,r=e4(null);for(e in t)r4(X3,t,[e])&&(r[e]=t[e]);return r}function m4(t,e){for(;null!==t;){var r=J3(t,e);if(r){if(r.get)return p4(r.get);if("function"==typeof r.value)return p4(r.value)}t=Q3(t)}return function(t){return console.warn("fallback value for",t),null}}var b4=t4(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_4=t4(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),v4=t4(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),x4=t4(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),k4=t4(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),w4=t4(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),E4=t4(["#text"]),T4=t4(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),C4=t4(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),S4=t4(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),A4=t4(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M4=Fs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),N4=Fs(/<%[\w\W]*|[\w\W]*%>/gm),D4=Fs(/^data-[\-\w.\u00B7-\uFFFF]/),L4=Fs(/^aria-[\-\w]+$/),B4=Fs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),O4=Fs(/^(?:\w+script|data):/i),I4=Fs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),R4=Fs(/^html$/i);var F4=function R(t){var s=0<arguments.length&&void 0!==t?t:"u"<typeof window?null:window,l=function(t){return R(t)};if(l.version="2.4.0",l.removed=[],s&&s.document&&9===s.document.nodeType){var c=s.document,i=s.document,F=s.DocumentFragment,t=s.HTMLTemplateElement,u=s.Node,P=s.Element,e=s.NodeFilter,$=void 0===(r=s.NamedNodeMap)?s.NamedNodeMap||s.MozNamedAttrMap:r,j=s.HTMLFormElement,Y=s.DOMParser,h=s.trustedTypes,z=m4(r=P.prototype,"cloneNode"),U=m4(r,"nextSibling"),W=m4(r,"childNodes"),d=m4(r,"parentNode"),f=("function"==typeof t&&(r=i.createElement("template")).content&&r.content.ownerDocument&&(i=r.content.ownerDocument),function(t,e){if("object"!==U3(t)||"function"!=typeof t.createPolicy)return null;var r=null,n="data-tt-policy-suffix",e="dompurify"+((r=e.currentScript&&e.currentScript.hasAttribute(n)?e.currentScript.getAttribute(n):r)?"#"+r:"");try{return t.createPolicy(e,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch{return console.warn("TrustedTypes policy "+e+" could not be created."),null}}(h,c)),q=f?f.createHTML(""):"",t=i,a=t.implementation,H=t.createNodeIterator,V=t.createDocumentFragment,G=t.getElementsByTagName,X=c.importNode,r={};try{r=y4(i).documentMode?i.documentMode:{}}catch{}var Z,o,p,n={},g=(l.isSupported="function"==typeof d&&a&&typeof a.createHTMLDocument<"u"&&9!==r,M4),y=N4,K=D4,Q=L4,J=O4,tt=I4,et=B4,m=null,rt=g4({},[].concat(H3(b4),H3(_4),H3(v4),H3(k4),H3(E4))),b=null,nt=g4({},[].concat(H3(T4),H3(C4),H3(S4),H3(A4))),_=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),v=null,it=null,at=!0,ot=!0,st=!1,x=!1,k=!1,ct=!1,lt=!1,w=!1,E=!1,T=!1,ut=!0,ht=!1,dt="user-content-",ft=!0,C=!1,S={},A=null,pt=g4({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),gt=null,yt=g4({},["audio","video","img","source","image","track"]),mt=null,bt=g4({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_t="http://www.w3.org/1998/Math/MathML",vt="http://www.w3.org/2000/svg",M="http://www.w3.org/1999/xhtml",N=M,xt=["application/xhtml+xml","text/html"],D=null,kt=i.createElement("form"),wt=function(t){return t instanceof RegExp||t instanceof Function},Et=function(t){D&&D===t||(t=y4(t=t&&"object"===U3(t)?t:{}),o=-1===xt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,p="application/xhtml+xml"===o?function(t){return t}:s4,m="ALLOWED_TAGS"in t?g4({},t.ALLOWED_TAGS,p):rt,b="ALLOWED_ATTR"in t?g4({},t.ALLOWED_ATTR,p):nt,mt="ADD_URI_SAFE_ATTR"in t?g4(y4(bt),t.ADD_URI_SAFE_ATTR,p):bt,gt="ADD_DATA_URI_TAGS"in t?g4(y4(yt),t.ADD_DATA_URI_TAGS,p):yt,A="FORBID_CONTENTS"in t?g4({},t.FORBID_CONTENTS,p):pt,v="FORBID_TAGS"in t?g4({},t.FORBID_TAGS,p):{},it="FORBID_ATTR"in t?g4({},t.FORBID_ATTR,p):{},S="USE_PROFILES"in t&&t.USE_PROFILES,at=!1!==t.ALLOW_ARIA_ATTR,ot=!1!==t.ALLOW_DATA_ATTR,st=t.ALLOW_UNKNOWN_PROTOCOLS||!1,x=t.SAFE_FOR_TEMPLATES||!1,k=t.WHOLE_DOCUMENT||!1,w=t.RETURN_DOM||!1,E=t.RETURN_DOM_FRAGMENT||!1,T=t.RETURN_TRUSTED_TYPE||!1,lt=t.FORCE_BODY||!1,ut=!1!==t.SANITIZE_DOM,ht=t.SANITIZE_NAMED_PROPS||!1,ft=!1!==t.KEEP_CONTENT,C=t.IN_PLACE||!1,et=t.ALLOWED_URI_REGEXP||et,N=t.NAMESPACE||M,t.CUSTOM_ELEMENT_HANDLING&&wt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&wt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(_.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),x&&(ot=!1),E&&(w=!0),S&&(m=g4({},H3(E4)),b=[],!0===S.html&&(g4(m,b4),g4(b,T4)),!0===S.svg&&(g4(m,_4),g4(b,C4),g4(b,A4)),!0===S.svgFilters&&(g4(m,v4),g4(b,C4),g4(b,A4)),!0===S.mathMl)&&(g4(m,k4),g4(b,S4),g4(b,A4)),t.ADD_TAGS&&g4(m=m===rt?y4(m):m,t.ADD_TAGS,p),t.ADD_ATTR&&g4(b=b===nt?y4(b):b,t.ADD_ATTR,p),t.ADD_URI_SAFE_ATTR&&g4(mt,t.ADD_URI_SAFE_ATTR,p),t.FORBID_CONTENTS&&g4(A=A===pt?y4(A):A,t.FORBID_CONTENTS,p),ft&&(m["#text"]=!0),k&&g4(m,["html","head","body"]),m.table&&(g4(m,["tbody"]),delete v.tbody),t4&&t4(t),D=t)},Tt=g4({},["mi","mo","mn","ms","mtext"]),Ct=g4({},["foreignobject","desc","title","annotation-xml"]),St=g4({},["title","style","font","a","script"]),L=g4({},_4),At=(g4(L,v4),g4(L,x4),g4({},k4)),B=(g4(At,w4),function(t){o4(l.removed,{element:t});try{t.parentNode.removeChild(t)}catch{try{t.outerHTML=q}catch{t.remove()}}}),Mt=function(t,e){try{o4(l.removed,{attribute:e.getAttributeNode(t),from:e})}catch{o4(l.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!b[t])if(w||E)try{B(e)}catch{}else try{e.setAttribute(t,"")}catch{}},Nt=function(t){lt?t="<remove></remove>"+t:r=(r=c4(t,/^[\r\n\t ]+/))&&r[0],"application/xhtml+xml"===o&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var e,r,n=f?f.createHTML(t):t;if(N===M)try{e=(new Y).parseFromString(n,o)}catch{}if(!e||!e.documentElement){e=a.createDocument(N,"template",null);try{e.documentElement.innerHTML=Z?"":n}catch{}}return n=e.body||e.documentElement,t&&r&&n.insertBefore(i.createTextNode(r),n.childNodes[0]||null),N===M?G.call(e,k?"html":"body")[0]:k?e.documentElement:n},Dt=function(t){return H.call(t.ownerDocument||t,t,e.SHOW_ELEMENT|e.SHOW_COMMENT|e.SHOW_TEXT,null,!1)},O=function(t){return"object"===U3(u)?t instanceof u:t&&"object"===U3(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},I=function(t,e,r){n[t]&&i4(n[t],function(t){t.call(l,e,r,D)})},Lt=function(t){if(I("beforeSanitizeElements",t,null),(!((a=t)instanceof j)||"string"==typeof a.nodeName&&"string"==typeof a.textContent&&"function"==typeof a.removeChild&&a.attributes instanceof $&&"function"==typeof a.removeAttribute&&"function"==typeof a.setAttribute&&"string"==typeof a.namespaceURI&&"function"==typeof a.insertBefore)&&!d4(/[\u0080-\uFFFF]/,t.nodeName)){var e,r,n,i,a=p(t.nodeName);if(I("uponSanitizeElement",t,{tagName:a,allowedTags:m}),!(t.hasChildNodes()&&!O(t.firstElementChild)&&(!O(t.content)||!O(t.content.firstElementChild))&&d4(/<[/\w]/g,t.innerHTML)&&d4(/<[/\w]/g,t.textContent)||"select"===a&&d4(/<template/i,t.innerHTML))){if(m[a]&&!v[a])return t instanceof P&&((r=d(e=t))&&r.tagName||(r={namespaceURI:M,tagName:"template"}),n=s4(e.tagName),i=s4(r.tagName),!(e.namespaceURI===vt?r.namespaceURI===M?"svg"===n:r.namespaceURI===_t?"svg"===n&&("annotation-xml"===i||Tt[i]):Boolean(L[n]):e.namespaceURI===_t?r.namespaceURI===M?"math"===n:r.namespaceURI===vt?"math"===n&&Ct[i]:Boolean(At[n]):e.namespaceURI===M&&!(r.namespaceURI===vt&&!Ct[i]||r.namespaceURI===_t&&!Tt[i]||At[n])&&(St[n]||!L[n])))||("noscript"===a||"noembed"===a)&&d4(/<\/no(script|embed)/i,t.innerHTML)?(B(t),!0):(x&&3===t.nodeType&&(e=t.textContent,e=l4(e,g," "),e=l4(e,y," "),t.textContent!==e)&&(o4(l.removed,{element:t.cloneNode()}),t.textContent=e),I("afterSanitizeElements",t,null),!1);if(!v[a]&&Ot(a)&&(_.tagNameCheck instanceof RegExp&&d4(_.tagNameCheck,a)||_.tagNameCheck instanceof Function&&_.tagNameCheck(a)))return!1;if(ft&&!A[a]){var o=d(t)||t.parentNode,s=W(t)||t.childNodes;if(s&&o)for(var c=s.length-1;0<=c;--c)o.insertBefore(z(s[c],!0),U(t))}}}return B(t),!0},Bt=function(t,e,r){if(ut&&("id"===e||"name"===e)&&(r in i||r in kt))return!1;if((!ot||it[e]||!d4(K,e))&&(!at||!d4(Q,e)))if(!b[e]||it[e]){if(!(Ot(t)&&(_.tagNameCheck instanceof RegExp&&d4(_.tagNameCheck,t)||_.tagNameCheck instanceof Function&&_.tagNameCheck(t))&&(_.attributeNameCheck instanceof RegExp&&d4(_.attributeNameCheck,e)||_.attributeNameCheck instanceof Function&&_.attributeNameCheck(e))||"is"===e&&_.allowCustomizedBuiltInElements&&(_.tagNameCheck instanceof RegExp&&d4(_.tagNameCheck,r)||_.tagNameCheck instanceof Function&&_.tagNameCheck(r))))return!1}else if(!mt[e]&&!d4(et,l4(r,tt,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==u4(r,"data:")||!gt[t])&&(!st||d4(J,l4(r,tt,"")))&&r)return!1;return!0},Ot=function(t){return 0<t.indexOf("-")},It=function(t){I("beforeSanitizeAttributes",t,null);var e=t.attributes;if(e){for(var r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:b},n=e.length;n--;){var i=(s=e[n]).name,a=s.namespaceURI,o="value"===i?s.value:h4(s.value),s=p(i);if(r.attrName=s,r.attrValue=o,r.keepAttr=!0,r.forceKeepAttr=void 0,I("uponSanitizeAttribute",t,r),o=r.attrValue,!r.forceKeepAttr&&(Mt(i,t),r.keepAttr))if(d4(/\/>/i,o))Mt(i,t);else{x&&(o=l4(o,g," "),o=l4(o,y," "));var c=p(t.nodeName);if(Bt(c,s,o)){if(!ht||"id"!==s&&"name"!==s||(Mt(i,t),o=dt+o),f&&"object"===U3(h)&&"function"==typeof h.getAttributeType&&!a)switch(h.getAttributeType(c,s)){case"TrustedHTML":o=f.createHTML(o);break;case"TrustedScriptURL":o=f.createScriptURL(o)}try{a?t.setAttributeNS(a,i,o):t.setAttribute(i,o),a4(l.removed)}catch{}}}}I("afterSanitizeAttributes",t,null)}},Rt=function t(e){var r,n=Dt(e);for(I("beforeSanitizeShadowDOM",e,null);r=n.nextNode();)I("uponSanitizeShadowNode",r,null),Lt(r)||(r.content instanceof F&&t(r.content),It(r));I("afterSanitizeShadowDOM",e,null)};l.sanitize=function(t){var e,r,n,i,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof(t=(Z=!t)?"\x3c!--\x3e":t)&&!O(t)){if("function"!=typeof t.toString)throw f4("toString is not a function");if("string"!=typeof(t=t.toString()))throw f4("dirty is not a string, aborting")}if(!l.isSupported){if("object"===U3(s.toStaticHTML)||"function"==typeof s.toStaticHTML){if("string"==typeof t)return s.toStaticHTML(t);if(O(t))return s.toStaticHTML(t.outerHTML)}return t}if(ct||Et(a),l.removed=[],C="string"!=typeof t&&C){if(t.nodeName){a=p(t.nodeName);if(!m[a]||v[a])throw f4("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)1===(a=(e=Nt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?e=a:e.appendChild(a);else{if(!w&&!x&&!k&&-1===t.indexOf("<"))return f&&T?f.createHTML(t):t;if(!(e=Nt(t)))return w?null:T?q:""}e&&lt&&B(e.firstChild);for(var o=Dt(C?t:e);r=o.nextNode();)3===r.nodeType&&r===n||Lt(r)||(r.content instanceof F&&Rt(r.content),It(r),n=r);if(n=null,C)return t;if(w){if(E)for(i=V.call(e.ownerDocument);e.firstChild;)i.appendChild(e.firstChild);else i=e;return i=b.shadowroot?X.call(c,i,!0):i}return a=k?e.outerHTML:e.innerHTML,k&&m["!doctype"]&&e.ownerDocument&&e.ownerDocument.doctype&&e.ownerDocument.doctype.name&&d4(R4,e.ownerDocument.doctype.name)&&(a="<!DOCTYPE "+e.ownerDocument.doctype.name+`>
`+a),x&&(a=l4(a,g," "),a=l4(a,y," ")),f&&T?f.createHTML(a):a},l.setConfig=function(t){Et(t),ct=!0},l.clearConfig=function(){D=null,ct=!1},l.isValidAttribute=function(t,e,r){return D||Et({}),t=p(t),e=p(e),Bt(t,e,r)},l.addHook=function(t,e){"function"==typeof e&&(n[t]=n[t]||[],o4(n[t],e))},l.removeHook=function(t){if(n[t])return a4(n[t])},l.removeHooks=function(t){n[t]&&(n[t]=[])},l.removeAllHooks=function(){n={}}}else l.isSupported=!1;return l}();const P4=t=>F4.sanitize(t),$4=(t,e)=>{var r;return!1!==(null==(r=e.flowchart)?void 0:r.htmlLabels)&&("antiscript"===(r=e.securityLevel)||"strict"===r?t=P4(t):"loose"!==r&&(t=(t=(t=U4(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=z4(t))),t},j4=(t,e)=>t&&(t=e.dompurifyConfig?F4.sanitize($4(t,e),e.dompurifyConfig).toString():F4.sanitize($4(t,e))),Y4=/<br\s*\/?>/gi,z4=t=>t.replace(/#br#/g,"<br/>"),U4=t=>t.replace(Y4,"#br#"),W4=t=>!(!1===t||["false","null","0"].includes(String(t).trim().toLowerCase())),q4=function(t){let e=t;return-1!==t.indexOf("~")?(e=(e=e.replace(/~([^~].*)/,"<$1")).replace(/~([^~]*)$/,">$1"),q4(e)):e},H4={getRows:t=>t?U4(t).replace(/\\n/g,"#br#").split("#br#"):[""],sanitizeText:j4,sanitizeTextOrArray:(t,e)=>"string"==typeof t?j4(t,e):t.flat().map(t=>j4(t,e)),hasBreaks:t=>Y4.test(t),splitBreaks:t=>t.split(Y4),lineBreakRegex:Y4,removeScript:P4,getUrl:t=>{let e="";return e=t?(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replaceAll(/\(/g,"\\(")).replaceAll(/\)/g,"\\)"):e},evaluate:W4},V4={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>255<=t?255:t<0?0:t,g:t=>255<=t?255:t<0?0:t,b:t=>255<=t?255:t<0?0:t,h:t=>t%360,s:t=>100<=t?100:t<0?0:t,l:t=>100<=t?100:t<0?0:t,a:t=>1<=t?1:t<0?0:t},toLinear:t=>{var e=t/255;return.03928<t?Math.pow((.055+e)/1.055,2.4):e/12.92},hue2rgb:(t,e,r)=>(r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t),hsl2rgb:({h:t,s:e,l:r},n)=>{if(!e)return 2.55*r;t/=360,e/=100;var i=(r/=100)<.5?r*(1+e):r+e-r*e,a=2*r-i;switch(n){case"r":return 255*V4.hue2rgb(a,i,t+1/3);case"g":return 255*V4.hue2rgb(a,i,t);case"b":return 255*V4.hue2rgb(a,i,t-1/3)}},rgb2hsl:({r:t,g:e,b:r},n)=>{t/=255,e/=255,r/=255;var i=Math.max(t,e,r),a=Math.min(t,e,r),o=(i+a)/2;if("l"===n)return 100*o;if(i===a)return 0;var s=i-a;if("s"===n)return 100*(.5<o?s/(2-i-a):s/(i+a));switch(i){case t:return 60*((e-r)/s+(e<r?6:0));case e:return 60*((r-t)/s+2);case r:return 60*((t-e)/s+4);default:return-1}}},G4={channel:V4,lang:{clamp:(t,e,r)=>r<e?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t)),round:t=>Math.round(1e10*t)/1e10},unit:{dec2hex:t=>{t=Math.round(t).toString(16);return 1<t.length?t:"0"+t}}},X4={};for(let t=0;t<=255;t++)X4[t]=G4.unit.dec2hex(t);const Z4={ALL:0,RGB:1,HSL:2};const K4=class{constructor(){this.type=Z4.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Z4.ALL}is(t){return this.type===t}};const Q4=class{constructor(t,e){this.color=e,this.changed=!1,this.data=t,this.type=new K4}set(t,e){return this.color=e,this.changed=!1,this.data=t,this.type.type=Z4.ALL,this}_ensureHSL(){var t=this.data,{h:e,s:r,l:n}=t;void 0===e&&(t.h=G4.channel.rgb2hsl(t,"h")),void 0===r&&(t.s=G4.channel.rgb2hsl(t,"s")),void 0===n&&(t.l=G4.channel.rgb2hsl(t,"l"))}_ensureRGB(){var t=this.data,{r:e,g:r,b:n}=t;void 0===e&&(t.r=G4.channel.hsl2rgb(t,"r")),void 0===r&&(t.g=G4.channel.hsl2rgb(t,"g")),void 0===n&&(t.b=G4.channel.hsl2rgb(t,"b"))}get r(){var t=this.data,e=t.r;return this.type.is(Z4.HSL)||void 0===e?(this._ensureHSL(),G4.channel.hsl2rgb(t,"r")):e}get g(){var t=this.data,e=t.g;return this.type.is(Z4.HSL)||void 0===e?(this._ensureHSL(),G4.channel.hsl2rgb(t,"g")):e}get b(){var t=this.data,e=t.b;return this.type.is(Z4.HSL)||void 0===e?(this._ensureHSL(),G4.channel.hsl2rgb(t,"b")):e}get h(){var t=this.data,e=t.h;return this.type.is(Z4.RGB)||void 0===e?(this._ensureRGB(),G4.channel.rgb2hsl(t,"h")):e}get s(){var t=this.data,e=t.s;return this.type.is(Z4.RGB)||void 0===e?(this._ensureRGB(),G4.channel.rgb2hsl(t,"s")):e}get l(){var t=this.data,e=t.l;return this.type.is(Z4.RGB)||void 0===e?(this._ensureRGB(),G4.channel.rgb2hsl(t,"l")):e}get a(){return this.data.a}set r(t){this.type.set(Z4.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Z4.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Z4.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Z4.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Z4.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Z4.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}},J4=new Q4({r:0,g:0,b:0,a:0},"transparent"),tb={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(35===t.charCodeAt(0)){var e,r,n,i,a,o=t.match(tb.re);if(o)return o=o[1],e=parseInt(o,16),r=(a=4<(o=o.length))?1:17,n=a?8:4,i=(o=o%4==0)?0:-1,a=a?255:15,J4.set({r:(e>>n*(3+i)&a)*r,g:(e>>n*(2+i)&a)*r,b:(e>>n*(1+i)&a)*r,a:o?(e&a)*r/255:1},t)}},stringify:t=>{var{r:t,g:e,b:r,a:n}=t;return n<1?"#"+X4[Math.round(t)]+X4[Math.round(e)]+X4[Math.round(r)]+X4[Math.round(255*n)]:"#"+X4[Math.round(t)]+X4[Math.round(e)]+X4[Math.round(r)]}},eb=tb,rb={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{var e=t.match(rb.hueRe);if(e){var[,r,e]=e;switch(e){case"grad":return G4.channel.clamp.h(.9*parseFloat(r));case"rad":return G4.channel.clamp.h(180*parseFloat(r)/Math.PI);case"turn":return G4.channel.clamp.h(360*parseFloat(r))}}return G4.channel.clamp.h(parseFloat(t))},parse:t=>{var e=t.charCodeAt(0);if(104===e||72===e){var r,n,i,a,e=t.match(rb.re);if(e)return[,e,r,n,i,a]=e,J4.set({h:rb._hue2deg(e),s:G4.channel.clamp.s(parseFloat(r)),l:G4.channel.clamp.l(parseFloat(n)),a:i?G4.channel.clamp.a(a?parseFloat(i)/100:parseFloat(i)):1},t)}},stringify:t=>{var{h:t,s:e,l:r,a:n}=t;return n<1?`hsla(${G4.lang.round(t)}, ${G4.lang.round(e)}%, ${G4.lang.round(r)}%, ${n})`:`hsl(${G4.lang.round(t)}, ${G4.lang.round(e)}%, ${G4.lang.round(r)}%)`}},nb=rb,ib={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();t=ib.colors[t];if(t)return eb.parse(t)},stringify:t=>{var e=eb.stringify(t);for(const r in ib.colors)if(ib.colors[r]===e)return r}},ab=ib,ob={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{var e=t.charCodeAt(0);if(114===e||82===e){var r,n,i,a,o,s,c,e=t.match(ob.re);if(e)return[,e,r,n,i,a,o,s,c]=e,J4.set({r:G4.channel.clamp.r(r?2.55*parseFloat(e):parseFloat(e)),g:G4.channel.clamp.g(i?2.55*parseFloat(n):parseFloat(n)),b:G4.channel.clamp.b(o?2.55*parseFloat(a):parseFloat(a)),a:s?G4.channel.clamp.a(c?parseFloat(s)/100:parseFloat(s)):1},t)}},stringify:t=>{var{r:t,g:e,b:r,a:n}=t;return n<1?`rgba(${G4.lang.round(t)}, ${G4.lang.round(e)}, ${G4.lang.round(r)}, ${G4.lang.round(n)})`:`rgb(${G4.lang.round(t)}, ${G4.lang.round(e)}, ${G4.lang.round(r)})`}},sb=ob,cb={format:{keyword:ab,hex:eb,rgb:sb,rgba:sb,hsl:nb,hsla:nb},parse:t=>{if("string"!=typeof t)return t;var e=eb.parse(t)||sb.parse(t)||nb.parse(t)||ab.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:(t.type.is(Z4.HSL)||void 0===t.data.r?nb:t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?sb:eb).stringify(t)},lb=(t,e)=>{var r=cb.parse(t);for(const n in e)r[n]=G4.channel.clamp[n](e[n]);return cb.stringify(r)},ub=(t,e,r=0,n=1)=>{return"number"!=typeof t?lb(t,{a:e}):(t=J4.set({r:G4.channel.clamp.r(t),g:G4.channel.clamp.g(e),b:G4.channel.clamp.b(r),a:G4.channel.clamp.a(n)}),cb.stringify(t))},hb=(t,e,r)=>{var t=cb.parse(t),n=t[e],r=G4.channel.clamp[e](n+r);return n!==r&&(t[e]=r),cb.stringify(t)},db=(t,e)=>hb(t,"l",e),fb=(t,e)=>hb(t,"l",-e),w=(t,e)=>{var r=cb.parse(t),n={};for(const i in e)e[i]&&(n[i]=r[i]+e[i]);return lb(t,n)},E=(t,e=100)=>{var r=cb.parse(t),[r,t,e=50]=(r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,[r,t,e]),{r,g:n,b:i,a}=cb.parse(r),{r:t,g:o,b:s,a:c}=cb.parse(t),l=2*(e=e/100)-1,u=a-c,r=r*(l=(1+(l*u==-1?l:(l+u)/(1+l*u)))/2)+t*(u=1-l),t=n*l+o*u,n=i*l+s*u,o=a*e+c*(1-e);return ub(r,t,n,o)},pb=(t,e)=>e?w(t,{s:-40,l:10}):w(t,{s:-40,l:-10}),gb="#ffffff",yb="#f2f2f2";class mb{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||w(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||w(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||pb(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||pb(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||pb(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||pb(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||E(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||E(this.tertiaryColor),this.lineColor=this.lineColor||E(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?fb(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||fb(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||E(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||db(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||w(this.primaryColor,{h:30}),this.cScale4=this.cScale4||w(this.primaryColor,{h:60}),this.cScale5=this.cScale5||w(this.primaryColor,{h:90}),this.cScale6=this.cScale6||w(this.primaryColor,{h:120}),this.cScale7=this.cScale7||w(this.primaryColor,{h:150}),this.cScale8=this.cScale8||w(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||w(this.primaryColor,{h:270}),this.cScale10=this.cScale10||w(this.primaryColor,{h:300}),this.cScale11=this.cScale11||w(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=fb(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=fb(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||E(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||db(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||fb(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||w(this.primaryColor,{h:64}),this.fillType3=this.fillType3||w(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||w(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||w(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||w(this.primaryColor,{h:128}),this.fillType7=this.fillType7||w(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||w(this.primaryColor,{l:-10}),this.pie5=this.pie5||w(this.secondaryColor,{l:-10}),this.pie6=this.pie6||w(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||w(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||w(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||w(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||w(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||w(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||w(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?fb(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||w(this.primaryColor,{h:-30}),this.git4=this.git4||w(this.primaryColor,{h:-60}),this.git5=this.git5||w(this.primaryColor,{h:-90}),this.git6=this.git6||w(this.primaryColor,{h:60}),this.git7=this.git7||w(this.primaryColor,{h:120}),this.darkMode?(this.git0=db(this.git0,25),this.git1=db(this.git1,25),this.git2=db(this.git2,25),this.git3=db(this.git3,25),this.git4=db(this.git4,25),this.git5=db(this.git5,25),this.git6=db(this.git6,25),this.git7=db(this.git7,25)):(this.git0=fb(this.git0,25),this.git1=fb(this.git1,25),this.git2=fb(this.git2,25),this.git3=fb(this.git3,25),this.git4=fb(this.git4,25),this.git5=fb(this.git5,25),this.git6=fb(this.git6,25),this.git7=fb(this.git7,25)),this.gitInv0=this.gitInv0||E(this.git0),this.gitInv1=this.gitInv1||E(this.git1),this.gitInv2=this.gitInv2||E(this.git2),this.gitInv3=this.gitInv3||E(this.git3),this.gitInv4=this.gitInv4||E(this.git4),this.gitInv5=this.gitInv5||E(this.git5),this.gitInv6=this.gitInv6||E(this.git6),this.gitInv7=this.gitInv7||E(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||yb}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class bb{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=db(this.primaryColor,16),this.tertiaryColor=w(this.primaryColor,{h:-160}),this.primaryBorderColor=E(this.background),this.secondaryBorderColor=pb(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=pb(this.tertiaryColor,this.darkMode),this.primaryTextColor=E(this.primaryColor),this.secondaryTextColor=E(this.secondaryColor),this.tertiaryTextColor=E(this.tertiaryColor),this.lineColor=E(this.background),this.textColor=E(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=db(E("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=ub(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=fb("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=ub(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=ub(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=db(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=db(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=db(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=w(this.primaryColor,{h:64}),this.fillType3=w(this.secondaryColor,{h:64}),this.fillType4=w(this.primaryColor,{h:-64}),this.fillType5=w(this.secondaryColor,{h:-64}),this.fillType6=w(this.primaryColor,{h:128}),this.fillType7=w(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||w(this.primaryColor,{h:30}),this.cScale4=this.cScale4||w(this.primaryColor,{h:60}),this.cScale5=this.cScale5||w(this.primaryColor,{h:90}),this.cScale6=this.cScale6||w(this.primaryColor,{h:120}),this.cScale7=this.cScale7||w(this.primaryColor,{h:150}),this.cScale8=this.cScale8||w(this.primaryColor,{h:210}),this.cScale9=this.cScale9||w(this.primaryColor,{h:270}),this.cScale10=this.cScale10||w(this.primaryColor,{h:300}),this.cScale11=this.cScale11||w(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||E(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||db(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?fb(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=db(this.secondaryColor,20),this.git1=db(this.pie2||this.secondaryColor,20),this.git2=db(this.pie3||this.tertiaryColor,20),this.git3=db(this.pie4||w(this.primaryColor,{h:-30}),20),this.git4=db(this.pie5||w(this.primaryColor,{h:-60}),20),this.git5=db(this.pie6||w(this.primaryColor,{h:-90}),10),this.git6=db(this.pie7||w(this.primaryColor,{h:60}),10),this.git7=db(this.pie8||w(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||E(this.git0),this.gitInv1=this.gitInv1||E(this.git1),this.gitInv2=this.gitInv2||E(this.git2),this.gitInv3=this.gitInv3||E(this.git3),this.gitInv4=this.gitInv4||E(this.git4),this.gitInv5=this.gitInv5||E(this.git5),this.gitInv6=this.gitInv6||E(this.git6),this.gitInv7=this.gitInv7||E(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||db(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||db(this.background,2)}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class _b{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=w(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=w(this.primaryColor,{h:-160}),this.primaryBorderColor=pb(this.primaryColor,this.darkMode),this.secondaryBorderColor=pb(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=pb(this.tertiaryColor,this.darkMode),this.primaryTextColor=E(this.primaryColor),this.secondaryTextColor=E(this.secondaryColor),this.tertiaryTextColor=E(this.tertiaryColor),this.lineColor=E(this.background),this.textColor=E(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=ub(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||w(this.primaryColor,{h:30}),this.cScale4=this.cScale4||w(this.primaryColor,{h:60}),this.cScale5=this.cScale5||w(this.primaryColor,{h:90}),this.cScale6=this.cScale6||w(this.primaryColor,{h:120}),this.cScale7=this.cScale7||w(this.primaryColor,{h:150}),this.cScale8=this.cScale8||w(this.primaryColor,{h:210}),this.cScale9=this.cScale9||w(this.primaryColor,{h:270}),this.cScale10=this.cScale10||w(this.primaryColor,{h:300}),this.cScale11=this.cScale11||w(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||fb(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||fb(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=fb(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||fb(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||w(this["cScale"+t],{h:180});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||E(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||E(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=db(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=w(this.primaryColor,{h:64}),this.fillType3=w(this.secondaryColor,{h:64}),this.fillType4=w(this.primaryColor,{h:-64}),this.fillType5=w(this.secondaryColor,{h:-64}),this.fillType6=w(this.primaryColor,{h:128}),this.fillType7=w(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||w(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||w(this.primaryColor,{l:-10}),this.pie5=this.pie5||w(this.secondaryColor,{l:-30}),this.pie6=this.pie6||w(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||w(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||w(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||w(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||w(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||w(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||w(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||w(this.primaryColor,{h:-30}),this.git4=this.git4||w(this.primaryColor,{h:-60}),this.git5=this.git5||w(this.primaryColor,{h:-90}),this.git6=this.git6||w(this.primaryColor,{h:60}),this.git7=this.git7||w(this.primaryColor,{h:120}),this.darkMode?(this.git0=db(this.git0,25),this.git1=db(this.git1,25),this.git2=db(this.git2,25),this.git3=db(this.git3,25),this.git4=db(this.git4,25),this.git5=db(this.git5,25),this.git6=db(this.git6,25),this.git7=db(this.git7,25)):(this.git0=fb(this.git0,25),this.git1=fb(this.git1,25),this.git2=fb(this.git2,25),this.git3=fb(this.git3,25),this.git4=fb(this.git4,25),this.git5=fb(this.git5,25),this.git6=fb(this.git6,25),this.git7=fb(this.git7,25)),this.gitInv0=this.gitInv0||fb(E(this.git0),25),this.gitInv1=this.gitInv1||E(this.git1),this.gitInv2=this.gitInv2||E(this.git2),this.gitInv3=this.gitInv3||E(this.git3),this.gitInv4=this.gitInv4||E(this.git4),this.gitInv5=this.gitInv5||E(this.git5),this.gitInv6=this.gitInv6||E(this.git6),this.gitInv7=this.gitInv7||E(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||E(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||E(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||yb}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class vb{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=db("#cde498",10),this.primaryBorderColor=pb(this.primaryColor,this.darkMode),this.secondaryBorderColor=pb(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=pb(this.tertiaryColor,this.darkMode),this.primaryTextColor=E(this.primaryColor),this.secondaryTextColor=E(this.secondaryColor),this.tertiaryTextColor=E(this.primaryColor),this.lineColor=E(this.background),this.textColor=E(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||w(this.primaryColor,{h:30}),this.cScale4=this.cScale4||w(this.primaryColor,{h:60}),this.cScale5=this.cScale5||w(this.primaryColor,{h:90}),this.cScale6=this.cScale6||w(this.primaryColor,{h:120}),this.cScale7=this.cScale7||w(this.primaryColor,{h:150}),this.cScale8=this.cScale8||w(this.primaryColor,{h:210}),this.cScale9=this.cScale9||w(this.primaryColor,{h:270}),this.cScale10=this.cScale10||w(this.primaryColor,{h:300}),this.cScale11=this.cScale11||w(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||fb(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||fb(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=fb(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||fb(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||w(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=fb(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=w(this.primaryColor,{h:64}),this.fillType3=w(this.secondaryColor,{h:64}),this.fillType4=w(this.primaryColor,{h:-64}),this.fillType5=w(this.secondaryColor,{h:-64}),this.fillType6=w(this.primaryColor,{h:128}),this.fillType7=w(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||w(this.primaryColor,{l:-30}),this.pie5=this.pie5||w(this.secondaryColor,{l:-30}),this.pie6=this.pie6||w(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||w(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||w(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||w(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||w(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||w(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||w(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||w(this.primaryColor,{h:-30}),this.git4=this.git4||w(this.primaryColor,{h:-60}),this.git5=this.git5||w(this.primaryColor,{h:-90}),this.git6=this.git6||w(this.primaryColor,{h:60}),this.git7=this.git7||w(this.primaryColor,{h:120}),this.darkMode?(this.git0=db(this.git0,25),this.git1=db(this.git1,25),this.git2=db(this.git2,25),this.git3=db(this.git3,25),this.git4=db(this.git4,25),this.git5=db(this.git5,25),this.git6=db(this.git6,25),this.git7=db(this.git7,25)):(this.git0=fb(this.git0,25),this.git1=fb(this.git1,25),this.git2=fb(this.git2,25),this.git3=fb(this.git3,25),this.git4=fb(this.git4,25),this.git5=fb(this.git5,25),this.git6=fb(this.git6,25),this.git7=fb(this.git7,25)),this.gitInv0=this.gitInv0||E(this.git0),this.gitInv1=this.gitInv1||E(this.git1),this.gitInv2=this.gitInv2||E(this.git2),this.gitInv3=this.gitInv3||E(this.git3),this.gitInv4=this.gitInv4||E(this.git4),this.gitInv5=this.gitInv5||E(this.git5),this.gitInv6=this.gitInv6||E(this.git6),this.gitInv7=this.gitInv7||E(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||yb}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class xb{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=db(this.contrast,55),this.background="#ffffff",this.tertiaryColor=w(this.primaryColor,{h:-160}),this.primaryBorderColor=pb(this.primaryColor,this.darkMode),this.secondaryBorderColor=pb(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=pb(this.tertiaryColor,this.darkMode),this.primaryTextColor=E(this.primaryColor),this.secondaryTextColor=E(this.secondaryColor),this.tertiaryTextColor=E(this.tertiaryColor),this.lineColor=E(this.background),this.textColor=E(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=db(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||E(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||db(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||fb(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=db(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=db(this.contrast,30),this.sectionBkgColor2=db(this.contrast,30),this.taskBorderColor=fb(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=db(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=fb(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=w(this.primaryColor,{h:64}),this.fillType3=w(this.secondaryColor,{h:64}),this.fillType4=w(this.primaryColor,{h:-64}),this.fillType5=w(this.secondaryColor,{h:-64}),this.fillType6=w(this.primaryColor,{h:128}),this.fillType7=w(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=fb(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||w(this.primaryColor,{h:-30}),this.git4=this.pie5||w(this.primaryColor,{h:-60}),this.git5=this.pie6||w(this.primaryColor,{h:-90}),this.git6=this.pie7||w(this.primaryColor,{h:60}),this.git7=this.pie8||w(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||E(this.git0),this.gitInv1=this.gitInv1||E(this.git1),this.gitInv2=this.gitInv2||E(this.git2),this.gitInv3=this.gitInv3||E(this.git3),this.gitInv4=this.gitInv4||E(this.git4),this.gitInv5=this.gitInv5||E(this.git5),this.gitInv6=this.gitInv6||E(this.git6),this.gitInv7=this.gitInv7||E(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||gb,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||yb}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}const kb={base:{getThemeVariables:t=>{var e=new mb;return e.calculate(t),e}},dark:{getThemeVariables:t=>{var e=new bb;return e.calculate(t),e}},default:{getThemeVariables:t=>{var e=new _b;return e.calculate(t),e}},forest:{getThemeVariables:t=>{var e=new vb;return e.calculate(t),e}},neutral:{getThemeVariables:t=>{var e=new xb;return e.calculate(t),e}}},wb={theme:"default",themeVariables:kb.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16},Eb=(wb.class&&(wb.class.arrowMarkerAbsolute=wb.arrowMarkerAbsolute),wb.gitGraph&&(wb.gitGraph.arrowMarkerAbsolute=wb.arrowMarkerAbsolute),(r,n="")=>Object.keys(r).reduce((t,e)=>Array.isArray(r[e])?t:"object"==typeof r[e]&&null!==r[e]?[...t,n+e,...Eb(r[e],"")]:[...t,n+e],[])),Tb=Eb(wb,""),Cb=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,Sb=/\s*%%.*\n/gm,Ab={},Mb=function(t,e){t=t.replace(Cb,"").replace(Sb,`
`);for(var[r,{detector:n}]of Object.entries(Ab))if(n(t,e))return r;throw new Error("No diagram type detected for text: "+t)},Nb=(t,e,r)=>{if(Ab[t])throw new Error(`Detector with key ${t} already exists`);Ab[t]={detector:e,loader:r},C.debug(`Detector with key ${t} added`+(r?" with loader":""))},Db=t=>Ab[t].loader,Lb=function(e,r,n){const{depth:i,clobber:a}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(r)&&!Array.isArray(e)?(r.forEach(t=>Lb(e,t,n)),e):Array.isArray(r)&&Array.isArray(e)?(r.forEach(t=>{-1===e.indexOf(t)&&e.push(t)}),e):"u"<typeof e||i<=0?null!=e&&"object"==typeof e&&"object"==typeof r?Object.assign(e,r):r:(typeof r<"u"&&"object"==typeof e&&"object"==typeof r&&Object.keys(r).forEach(t=>{"object"!=typeof r[t]||void 0!==e[t]&&"object"!=typeof e[t]?(a||"object"!=typeof e[t]&&"object"!=typeof r[t])&&(e[t]=r[t]):(void 0===e[t]&&(e[t]=Array.isArray(r[t])?[]:{}),e[t]=Lb(e[t],r[t],{depth:i-1,clobber:a}))}),e)};var Bb="object"==typeof F&&F&&F.Object===Object&&F,$s=Bb,js="object"==typeof self&&self&&self.Object===Object&&self,Ob=$s||js||Function("return this")(),Ib=Ob.Symbol,Ys=Ib,zs=Object.prototype,Rb=zs.hasOwnProperty,Fb=zs.toString,Pb=Ys?Ys.toStringTag:void 0;var $b=Object.prototype.toString;var jb=function(t){var e=Rb.call(t,Pb),r=t[Pb];try{var n=!(t[Pb]=void 0)}catch{}var i=Fb.call(t);return n&&(e?t[Pb]=r:delete t[Pb]),i},Yb=function(t){return $b.call(t)},zb=Ib?Ib.toStringTag:void 0;var Ub=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(zb&&zb in Object(t)?jb:Yb)(t)};var Wb=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},qb=Ub,Hb=Wb;var Vb=function(t){return!!Hb(t)&&("[object Function]"==(t=qb(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)},Co=Ob["__core-js_shared__"],Gb=(Ws=/[^.]+$/.exec(Co&&Co.keys&&Co.keys.IE_PROTO||""))?"Symbol(src)_1."+Ws:"";var Xb=Function.prototype.toString;var Zb=function(t){if(null!=t){try{return Xb.call(t)}catch{}try{return t+""}catch{}}return""},Kb=Vb,Qb=function(t){return!!Gb&&Gb in t},Jb=Wb,t5=Zb,e5=/^\[object .+?Constructor\]$/,qs=Function.prototype,Hs=Object.prototype,Vs=qs.toString,Gs=Hs.hasOwnProperty,r5=RegExp("^"+Vs.call(Gs).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var n5=function(t){return!(!Jb(t)||Qb(t))&&(Kb(t)?r5:e5).test(t5(t))},i5=function(t,e){return null==t?void 0:t[e]};var a5=function(t,e){return t=i5(t,e),n5(t)?t:void 0},Xs=a5(Object,"create"),o5=Xs;var s5=Xs,c5=Object.prototype.hasOwnProperty;var l5=Xs,u5=Object.prototype.hasOwnProperty;var h5=Xs;function d5(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t}function f5(t){var e,r=this.__data__;return s5?"__lodash_hash_undefined__"===(e=r[t])?void 0:e:c5.call(r,t)?r[t]:void 0}function p5(t){var e=this.__data__;return l5?void 0!==e[t]:u5.call(e,t)}function g5(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=h5&&void 0===e?"__lodash_hash_undefined__":e,this}function y5(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}y5.prototype.clear=function(){this.__data__=o5?o5(null):{},this.size=0},y5.prototype.delete=d5,y5.prototype.get=f5,y5.prototype.has=p5,y5.prototype.set=g5;Us=y5;var m5=function(t,e){return t===e||t!=t&&e!=e},b5=m5;function _5(t,e){for(var r=t.length;r--;)if(b5(t[r][0],e))return r;return-1}var v5=_5,x5=Array.prototype.splice;var k5=_5;var w5=_5;var E5=_5;function T5(t){var e=this.__data__;return!((t=v5(e,t))<0||(t==e.length-1?e.pop():x5.call(e,t,1),--this.size,0))}function C5(t){var e=this.__data__;return(t=k5(e,t))<0?void 0:e[t][1]}function S5(t){return-1<w5(this.__data__,t)}function A5(t,e){var r=this.__data__,n=E5(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function M5(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}M5.prototype.clear=function(){this.__data__=[],this.size=0},M5.prototype.delete=T5,M5.prototype.get=C5,M5.prototype.has=S5,M5.prototype.set=A5;var N5=M5,D5=a5(Ob,"Map"),L5=Us,B5=N5,O5=D5;var I5=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};function R5(t,e){return t=t.__data__,I5(e)?t["string"==typeof e?"string":"hash"]:t.map}var F5=R5;var P5=R5;var $5=R5;var j5=R5;function Y5(t){return t=F5(this,t).delete(t),this.size-=t?1:0,t}function z5(t){return P5(this,t).get(t)}function U5(t){return $5(this,t).has(t)}function W5(t,e){var r=j5(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function q5(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}q5.prototype.clear=function(){this.size=0,this.__data__={hash:new L5,map:new(O5||B5),string:new L5}},q5.prototype.delete=Y5,q5.prototype.get=z5,q5.prototype.has=U5,q5.prototype.set=W5;var H5=q5,V5=H5;function G5(n,i){if("function"!=typeof n||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");function a(){var t=arguments,e=i?i.apply(this,t):t[0],r=a.cache;return r.has(e)?r.get(e):(t=n.apply(this,t),a.cache=r.set(e,t)||r,t)}return a.cache=new(G5.Cache||V5),a}G5.Cache=V5;var X5=G5;function Z5(e,r=null){try{for(var t,n,i,a=new RegExp(`[%]{2}(?![{]${J5.source})(?=[}][%]{2}).*
`,"ig"),o=(e=e.trim().replace(a,"").replace(/'/gm,'"'),C.debug(`Detecting diagram directive${null!==r?" type:"+r:""} based on the text:`+e),[]);null!==(t=Q5.exec(e));)t.index===Q5.lastIndex&&Q5.lastIndex++,(t&&!r||r&&t[1]&&t[1].match(r)||r&&t[2]&&t[2].match(r))&&(n=t[1]||t[2],i=t[3]?t[3].trim():t[4]?JSON.parse(t[4].trim()):null,o.push({type:n,args:i}));return 0===o.length&&o.push({type:e,args:null}),1===o.length?o[0]:o}catch(t){return C.error(`ERROR: ${t.message} - Unable to parse directive
      ${null!==r?" type:"+r:""} based on the text:`+e),{type:null,args:null}}}const K5={curveBasis:Fm,curveBasisClosed:$m,curveBasisOpen:Ym,curveLinear:Py,curveLinearClosed:a3,curveMonotoneX:f3,curveMonotoneY:p3,curveNatural:m3,curveStep:_3,curveStepAfter:x3,curveStepBefore:v3},Q5=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,J5=/\s*(?:(?:(\w+)(?=:):|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,t_=(t,e)=>{return t&&(t="curve"+(t.charAt(0).toUpperCase()+t.slice(1)),K5[t])||e},e_=(t,e)=>t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0,r_=e=>{let r="",n="";for(let t=0;t<e.length;t++)typeof e[t]<"u"&&(e[t].startsWith("color:")||e[t].startsWith("text-align:")?n=n+e[t]+";":r=r+e[t]+";");return{style:r,labelStyle:n}};let n_=0;const i_=()=>(n_++,"id-"+Math.random().toString(36).substr(2,12)+"-"+n_);const a_=t=>{{var r=t.length;let e="";var n="0123456789abcdef",i=n.length;for(let t=0;t<r;t++)e+=n.charAt(Math.floor(Math.random()*i));return e}},o_=X5((t,o,s)=>{if(!t||(s=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},s),H4.lineBreakRegex.test(t)))return t;const c=t.split(" "),l=[];let u="";return c.forEach((t,e)=>{var r,n,i=l_(t+" ",s),a=l_(u,s);u=o<i?({hyphenatedStrings:r,remainingWord:n}=s_(t,o,"-",s),l.push(u,...r),n):o<=a+i?(l.push(u),t):[u,t].filter(Boolean).join(" "),e+1===c.length&&l.push(u)}),l.filter(t=>""!==t).join(s.joinWith)},(t,e,r)=>""+t+e+r.fontSize+r.fontWeight+r.fontFamily+r.joinWith),s_=X5((t,n,i="-",a)=>{a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},a);const o=t.split(""),s=[];let c="";return o.forEach((t,e)=>{var r,t=""+c+t;c=l_(t,a)>=n?(e=e+1,e=o.length===e,r=t+i,s.push(e?t:r),""):t}),{hyphenatedStrings:s,remainingWord:c}},(t,e,r="-",n)=>""+t+e+r+n.fontSize+n.fontWeight+n.fontFamily),c_=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),u_(t,e).height},l_=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),u_(t,e).width},u_=X5(function(t,e){var{fontSize:r,fontFamily:e,fontWeight:n}=e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e);if(!t)return{width:0,height:0};var e=["sans-serif",e],i=t.split(H4.lineBreakRegex),a=[],t=H("body");if(!t.remove)return{width:0,height:0,lineHeight:0};var o,s=t.append("svg");for(const d of e){var c,l={width:0,height:0,lineHeight:0};for(const f of i){var u={x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0},u=(u.text=f,o=s,h=c=void 0,c=(u=u).text.replace(H4.lineBreakRegex," "),(o=o.append("text")).attr("x",u.x),o.attr("y",u.y),o.style("text-anchor",u.anchor),o.style("font-family",u.fontFamily),o.style("font-size",u.fontSize),o.style("font-weight",u.fontWeight),o.attr("fill",u.fill),typeof u.class<"u"&&o.attr("class",u.class),(h=o.append("tspan")).attr("x",u.x+2*u.textMargin),h.attr("fill",u.fill),h.text(c),o.style("font-size",r).style("font-weight",n).style("font-family",d)),h=(u._groups||u)[0][0].getBBox();l.width=Math.round(Math.max(l.width,h.width)),c=Math.round(h.height),l.height+=c,l.lineHeight=Math.round(Math.max(l.lineHeight,c))}a.push(l)}return s.remove(),a[isNaN(a[1].height)||isNaN(a[1].width)||isNaN(a[1].lineHeight)||a[0].height>a[1].height&&a[0].width>a[1].width&&a[0].lineHeight>a[1].lineHeight?0:1]},(t,e)=>""+t+e.fontSize+e.fontWeight+e.fontFamily);let h_;const d_=e=>{if(C.debug("directiveSanitizer called with",e),"object"==typeof e&&(e.length?e.forEach(t=>d_(t)):Object.keys(e).forEach(t=>{C.debug("Checking key",t),0===t.indexOf("__")&&(C.debug("sanitize deleting __ option",t),delete e[t]),0<=t.indexOf("proto")&&(C.debug("sanitize deleting proto option",t),delete e[t]),0<=t.indexOf("constr")&&(C.debug("sanitize deleting constr option",t),delete e[t]),0<=t.indexOf("themeCSS")&&(C.debug("sanitizing themeCss option"),e[t]=f_(e[t])),0<=t.indexOf("fontFamily")&&(C.debug("sanitizing fontFamily option"),e[t]=f_(e[t])),0<=t.indexOf("altFontFamily")&&(C.debug("sanitizing altFontFamily option"),e[t]=f_(e[t])),Tb.indexOf(t)<0?(C.debug("sanitize deleting option",t),delete e[t]):"object"==typeof e[t]&&(C.debug("sanitize deleting object",t),d_(e[t]))})),e.themeVariables){var r=Object.keys(e.themeVariables);for(let t=0;t<r.length;t++){var n=r[t],i=e.themeVariables[n];i&&i.match&&!i.match(/^[a-zA-Z0-9#,";()%. ]+$/)&&(e.themeVariables[n]="")}}C.debug("After sanitization",e)},f_=e=>{let r=0,n=0;for(let t=0;t<e.length;t++){if(r<n)return"{ /* ERROR: Unbalanced CSS */ }";"{"===e[t]?r++:"}"===e[t]&&n++}return r!==n?"{ /* ERROR: Unbalanced CSS */ }":e};function p_(t){return"str"in t}const g_={assignWithDepth:Lb,wrapLabel:o_,calculateTextHeight:c_,calculateTextWidth:l_,calculateTextDimensions:u_,detectInit:function(t,r){var e,n=Z5(t,/(?:init\b)|(?:initialize\b)/);let i={};if(i=Array.isArray(n)?(e=n.map(t=>t.args),d_(e),Lb(i,[...e])):n.args){let e=Mb(t,r);["config"].forEach(t=>{typeof i[t]<"u"&&("flowchart-v2"===e&&(e="flowchart"),i[e]=i[t],delete i[t])})}return i},detectDirective:Z5,isSubstringInArray:function(e,r){for(let t=0;t<r.length;t++)if(r[t].match(e))return t;return-1},interpolateToCurve:t_,calcLabelPosition:t=>{if(1===t.length)return t[0];{let r,e=0,n=(t.forEach(t=>{e+=e_(t,r),r=t}),e/2),i;return r=void 0,t.forEach(t=>{var e;r&&!i&&((e=e_(t,r))<n?n-=e:((e=n/e)<=0&&(i=r),1<=e&&(i={x:t.x,y:t.y}),0<e&&e<1&&(i={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y}))),r=t}),i}},calcCardinalityPosition:(t,e,r)=>{let n,i=(C.info("our points",e),(e=e[0]!==r?e.reverse():e).forEach(t=>{totalDistance+=e_(t,n),n=t}),25),a;n=void 0,e.forEach(t=>{var e;n&&!a&&((e=e_(t,n))<i?i-=e:((e=i/e)<=0&&(a=n),1<=e&&(a={x:t.x,y:t.y}),0<e&&e<1&&(a={x:(1-e)*n.x+e*t.x,y:(1-e)*n.y+e*t.y}))),n=t});var r=t?10:5,t=Math.atan2(e[0].y-a.y,e[0].x-a.x),o={x:0,y:0};return o.x=Math.sin(t)*r+(e[0].x+a.x)/2,o.y=-Math.cos(t)*r+(e[0].y+a.y)/2,o},calcTerminalLabelPosition:(t,e,r)=>{let n=JSON.parse(JSON.stringify(r)),i,a=(C.info("our points",n),(n="start_left"!==e&&"start_right"!==e?n.reverse():n).forEach(t=>{i=t}),25+t),o;i=void 0,n.forEach(t=>{var e;i&&!o&&((e=e_(t,i))<a?a-=e:((e=a/e)<=0&&(o=i),1<=e&&(o={x:t.x,y:t.y}),0<e&&e<1&&(o={x:(1-e)*i.x+e*t.x,y:(1-e)*i.y+e*t.y}))),i=t});var r=10+.5*t,t=Math.atan2(n[0].y-o.y,n[0].x-o.x),s={x:0,y:0};return s.x=Math.sin(t)*r+(n[0].x+o.x)/2,s.y=-Math.cos(t)*r+(n[0].y+o.y)/2,"start_left"===e&&(s.x=Math.sin(t+Math.PI)*r+(n[0].x+o.x)/2,s.y=-Math.cos(t+Math.PI)*r+(n[0].y+o.y)/2),"end_right"===e&&(s.x=Math.sin(t-Math.PI)*r+(n[0].x+o.x)/2-5,s.y=-Math.cos(t-Math.PI)*r+(n[0].y+o.y)/2-5),"end_left"===e&&(s.x=Math.sin(t)*r+(n[0].x+o.x)/2-5,s.y=-Math.cos(t)*r+(n[0].y+o.y)/2-5),s},formatUrl:(t,e)=>{t=t.trim();if(t)return"loose"!==e.securityLevel?z(t):t},getStylesFromArray:r_,generateId:i_,random:a_,runFunc:(t,...e)=>{var r=t.split("."),n=r.length-1,t=r[n];let i=window;for(let t=0;t<n;t++)if(!(i=i[r[t]]))return;i[t](...e)},entityDecode:function(t){return h_=h_||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),h_.innerHTML=t,unescape(h_.textContent)},initIdGenerator:class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}},directiveSanitizer:d_,sanitizeCss:f_};var y_="comm",m_="rule",b_="decl",__="@import",v_="@keyframes",x_=Math.abs,k_=String.fromCharCode;function w_(t){return t.trim()}function E_(t,e,r){return t.replace(e,r)}function T_(t,e){return t.indexOf(e)}function C_(t,e){return 0|t.charCodeAt(e)}function S_(t,e,r){return t.slice(e,r)}function A_(t){return t.length}function M_(t){return t.length}function N_(t,e){return e.push(t),t}var D_=1,L_=1,B_=0,O_=0,I_=0,R_="";function F_(t,e,r,n,i,a,o){return{value:t,root:e,parent:r,type:n,props:i,children:a,line:D_,column:L_,length:o,return:""}}function P_(){return I_=0<O_?C_(R_,--O_):0,L_--,10===I_&&(L_=1,D_--),I_}function $_(){return I_=O_<B_?C_(R_,O_++):0,L_++,10===I_&&(L_=1,D_++),I_}function j_(){return C_(R_,O_)}function Y_(t,e){return S_(R_,t,e)}function z_(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function U_(t){return w_(Y_(O_-1,function t(e){for(;$_();)switch(I_){case e:return O_;case 34:case 39:34!==e&&39!==e&&t(I_);break;case 40:41===e&&t(e);break;case 92:$_()}return O_}(91===t?t+2:40===t?t+1:t)))}function W_(t){for(;(I_=j_())&&I_<33;)$_();return 2<z_(t)||3<z_(I_)?"":" "}function q_(t,e){for(;--e&&$_()&&!(I_<48||102<I_||57<I_&&I_<65||70<I_&&I_<97););return Y_(t,O_+(e<6&&32==j_()&&32==$_()))}function H_(t,e){for(;$_()&&t+I_!==57&&(t+I_!==84||47!==j_()););return"/*"+Y_(e,O_-1)+"*"+k_(47===t?t:$_())}function V_(t){for(;!z_(j_());)$_();return Y_(t,O_)}function G_(t){return t=function t(e,r,n,i,a,o,s,c,l){for(var u=0,h=0,d=s,f=0,p=0,g=0,y=1,m=1,b=1,_=0,v="",x=a,k=o,w=i,E=v;m;)switch(g=_,_=$_()){case 40:if(108!=g&&58==C_(E,d-1)){-1!=T_(E+=E_(U_(_),"&","&\f"),"&\f")&&(b=-1);break}case 34:case 39:case 91:E+=U_(_);break;case 9:case 10:case 13:case 32:E+=W_(g);break;case 92:E+=q_(O_-1,7);continue;case 47:switch(j_()){case 42:case 47:N_(Z_(H_($_(),O_),r,n),l);break;default:E+="/"}break;case 123*y:c[u++]=A_(E)*b;case 125*y:case 59:case 0:switch(_){case 0:case 125:m=0;case 59+h:0<p&&A_(E)-d&&N_(32<p?K_(E+";",i,n,d-1):K_(E_(E," ","")+";",i,n,d-2),l);break;case 59:E+=";";default:if(N_(w=X_(E,r,n,u,h,a,c,v,x=[],k=[],d),o),123===_)if(0===h)t(E,r,w,w,x,o,d,c,k);else switch(f){case 100:case 109:case 115:t(e,w,w,i&&N_(X_(e,w,w,0,0,a,c,v,a,x=[],d),k),a,k,d,c,i?x:k);break;default:t(E,w,w,w,[""],k,0,c,k)}}u=h=p=0,y=b=1,v=E="",d=s;break;case 58:d=1+A_(E),p=g;default:if(y<1)if(123==_)--y;else if(125==_&&0==y++&&125==P_())continue;switch(E+=k_(_),_*y){case 38:b=0<h?1:(E+="\f",-1);break;case 44:c[u++]=(A_(E)-1)*b,b=1;break;case 64:45===j_()&&(E+=U_($_())),f=j_(),h=d=A_(v=E+=V_(O_)),_++;break;case 45:45===g&&2==A_(E)&&(y=0)}}return o}("",null,null,null,[""],(D_=L_=1,B_=A_(R_=t),t=[]),O_=0,[0],t),R_="",t}function X_(t,e,r,n,i,a,o,s,c,l,u){for(var h,d=i-1,f=0===i?a:[""],p=M_(f),g=0,y=0;g<n;++g)for(var m,b=0,_=S_(t,d+1,d=x_(h=o[g]));b<p;++b)(m=w_(0<h?f[b]+" "+_:E_(_,/&\f/g,f[b])))&&(c[y++]=m);return F_(t,e,r,0===i?m_:s,c,l,u)}function Z_(t,e,r){return F_(t,e,r,y_,k_(I_),S_(t,2,-2),0)}function K_(t,e,r,n){return F_(t,e,r,b_,S_(t,0,n),S_(t,n+1,-1),n)}function Q_(t,e){for(var r="",n=M_(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function J_(t,e,r,n){switch(t.type){case __:case b_:return t.return=t.return||t.value;case y_:return"";case v_:return t.return=t.value+"{"+Q_(t.children,n)+"}";case m_:t.value=t.props.join(",")}return A_(r=Q_(t.children,n))?t.return=t.value+"{"+r+"}":""}const t6={name:"mermaid",version:"9.2.2",description:"Markdownish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main:"./dist/mermaid.min.js",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",type:"commonjs",exports:{".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts:{clean:"rimraf dist","build:code":"node .esbuild/esbuild.cjs","build:types":"tsc -p ./tsconfig.json --emitDeclarationOnly","build:watch":"yarn build:code --watch","build:esbuild":'concurrently "yarn build:code" "yarn build:types"',build:"yarn clean; yarn build:esbuild",dev:"node .esbuild/serve.cjs","docs:build":"ts-node-esm src/docs.mts","docs:verify":"yarn docs:build --verify","todo-postbuild":"documentation build src/mermaidAPI.ts src/config.ts src/defaultConfig.ts --shallow -f md --markdown-toc false > src/docs/Setup.md && prettier --write src/docs/Setup.md",release:"yarn build",lint:"eslint --cache --ignore-path .gitignore . && yarn lint:jison && prettier --check .","lint:fix":"eslint --fix --ignore-path .gitignore . && prettier --write .","lint:jison":"ts-node-esm src/jison/lint.mts",cypress:"cypress run","cypress:open":"cypress open",e2e:"start-server-and-test dev http://localhost:9000/ cypress","todo-prepare":'concurrently "husky install" "yarn build"',"pre-commit":"lint-staged"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0",dagre:"^0.8.5","dagre-d3":"^0.6.4",dompurify:"2.4.0","fast-clone":"^1.5.13",graphlib:"^2.1.8",khroma:"^2.0.0",lodash:"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies:{"@applitools/eyes-cypress":"^3.25.7","@commitlint/cli":"^17.1.2","@commitlint/config-conventional":"^17.0.0","@types/d3":"^7.4.0","@types/dompurify":"^2.3.4","@types/eslint":"^8.4.6","@types/express":"^4.17.13","@types/jsdom":"^20.0.0","@types/lodash":"^4.14.185","@types/prettier":"^2.7.0","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.37.0","@typescript-eslint/parser":"^5.37.0",concurrently:"^7.4.0",coveralls:"^3.1.1",cypress:"^10.0.0","cypress-image-snapshot":"^4.0.1",documentation:"13.2.0",esbuild:"^0.15.8",eslint:"^8.23.1","eslint-config-prettier":"^8.5.0","eslint-plugin-cypress":"^2.12.1","eslint-plugin-html":"^7.1.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-jsdoc":"^39.3.6","eslint-plugin-json":"^3.1.0","eslint-plugin-markdown":"^3.0.0",express:"^4.18.1",globby:"^13.1.2",husky:"^8.0.0","identity-obj-proxy":"^3.0.0",jison:"^0.4.18","js-base64":"3.7.2",jsdom:"^20.0.0","lint-staged":"^13.0.0",moment:"^2.23.0","path-browserify":"^1.0.1",prettier:"^2.7.1","prettier-plugin-jsdoc":"^0.4.2",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.12.6","ts-node":"^10.9.1",typescript:"^4.8.3","unist-util-flatmap":"^1.0.0"},resolutions:{d3:"^7.0.0"},files:["dist","README.md"],sideEffects:["**/*.css","**/*.scss"]},e6=Object.freeze(wb);let r6=Lb({},e6),n6,i6=[],a6=Lb({},e6);const o6=(t,e)=>{let r=Lb({},t),n={};for(let t=0;t<e.length;t++){var i=e[t];l6(i),n=Lb(n,i)}return r=Lb(r,n),n.theme&&n.theme in kb&&(t=Lb({},n6),t=Lb(t.themeVariables||{},n.themeVariables),r.theme)&&r.theme in kb&&(r.themeVariables=kb[r.theme].getThemeVariables(t)),a6=r,m6(a6),a6},s6=()=>Lb({},r6),c6=t=>(m6(t),Lb(a6,t),V()),V=()=>Lb({},a6),l6=e=>{var t;["secure",...null!=(t=r6.secure)?t:[]].forEach(t=>{typeof e[t]<"u"&&(C.debug("Denied attempt to modify a secure key "+t,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{0===t.indexOf("__")&&delete e[t]}),Object.keys(e).forEach(t=>{"string"==typeof e[t]&&(-1<e[t].indexOf("<")||-1<e[t].indexOf(">")||-1<e[t].indexOf("url(data:"))&&delete e[t],"object"==typeof e[t]&&l6(e[t])})},u6=t=>{!t.fontFamily||t.themeVariables&&t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}),i6.push(t),o6(r6,i6)},h6=(t=r6)=>{i6=[],o6(t,i6)};(Ma={}).LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.";var d6=Ma;function f6(t,e,r,n){e=_6(e,r,n),b6(t,e)}function p6(t,e,r,n){var i=e.node().getBBox(),a=i.width,o=i.height,o=(C.info(`SVG bounds: ${a}x`+o,i),C.info("Graph bounds: 0x0",t),t=a+2*r,a=o+2*r,C.info(`Calculated bounds: ${t}x`+a),f6(e,a,t,n),`${i.x-r} ${i.y-r} ${i.width+2*r} `+(i.height+2*r));e.attr("viewBox",o)}const g6={},y6=t=>{g6[t]||(C.warn(d6[t]),g6[t]=!0)},m6=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&y6("LAZY_LOAD_DEPRECATED")},b6=function(t,e){for(var r of e)t.attr(r[0],r[1])},_6=function(t,e,r){var n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${e}px;`)):n.set("width",e),n},v6=t=>`g.classGroup text {
  fill: ${t.nodeBorder};
  fill: ${t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

`,x6=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }
`,k6=()=>"",w6=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }
`,E6=t=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${t.fontFamily};
      fill: ${t.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${t.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${t.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,T6=()=>"",C6=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,S6=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 100%;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,A6=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,M6=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground||"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground||"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}
`,N6=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?"fill: "+t.faceColor:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?"fill: "+t.fillType0:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?"fill: "+t.fillType1:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?"fill: "+t.fillType2:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?"fill: "+t.fillType3:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?"fill: "+t.fillType4:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?"fill: "+t.fillType5:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?"fill: "+t.fillType6:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?"fill: "+t.fillType7:""};
  }

  .actor-0 {
    ${t.actor0?"fill: "+t.actor0:""};
  }
  .actor-1 {
    ${t.actor1?"fill: "+t.actor1:""};
  }
  .actor-2 {
    ${t.actor2?"fill: "+t.actor2:""};
  }
  .actor-3 {
    ${t.actor3?"fill: "+t.actor3:""};
  }
  .actor-4 {
    ${t.actor4?"fill: "+t.actor4:""};
  }
  .actor-5 {
    ${t.actor5?"fill: "+t.actor5:""};
  }
`,D6=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,L6={flowchart:w6,"flowchart-v2":w6,sequence:A6,gantt:E6,classDiagram:v6,"classDiagram-v2":v6,class:v6,stateDiagram:M6,state:M6,info:T6,pie:C6,er:x6,error:k6,journey:N6,requirement:S6,c4:D6},B6=(t,e,r)=>{let n="";return t in L6&&L6[t]?n=L6[t](r):C.warn("No theme found for "+t),` {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }

  /* Classes common for multiple diagrams */

  .error-icon {
    fill: ${r.errorBkgColor};
  }
  .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  .edge-thickness-normal {
    stroke-width: 2px;
  }
  .edge-thickness-thick {
    stroke-width: 3.5px
  }
  .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  .marker.cross {
    stroke: ${r.lineColor};
  }

  svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }

  ${n}

  ${e}
`},O6=C,I6=$,R6=V,F6=t=>j4(t,R6()),P6=p6,$6={},j6=(t,e,r)=>{var n;O6.debug("Registering diagram "+t),$6[t]&&O6.warn(`Diagram ${t} already registered.`),$6[t]=e,r&&Nb(t,r),r=t,n=e.styles,L6[r]=n,e.injectUtils&&e.injectUtils(O6,I6,R6,F6,P6),O6.debug(`Registered diagram ${t}. ${Object.keys($6).join(", ")} diagrams registered.`)},Y6=t=>{if(O6.debug(`Getting diagram ${t}. ${Object.keys($6).join(", ")} diagrams registered.`),t in $6)return $6[t];throw new z6(t)};class z6 extends Error{constructor(t){super(`Diagram ${t} not found.`)}}La=[8,14,20,22,24,25,27,29,32,37,40],Ba=[8,13,14,20,22,24,25,27,29,32,37,40],za=[1,26],Ua=[6,8,14,50,54],t=[8,14,54],qa=[1,65],Ha=[1,66],Va=[1,67],rc=[8,14,33,35,42,54],(nc={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ID:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,";":54,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",28:"ID",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[4,1],[4,1],[4,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 3:return a[s];case 4:return a[s-1];case 5:return n.setDirection(a[s-3]),a[s-1];case 7:n.setOptions(a[s-1]),this.$=a[s];break;case 8:a[s-1]+=a[s],this.$=a[s-1];break;case 10:this.$=[];break;case 11:a[s-1].push(a[s]),this.$=a[s-1];break;case 12:this.$=a[s-1];break;case 17:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 18:case 19:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 20:n.addSection(a[s].substr(8)),this.$=a[s].substr(8);break;case 22:n.checkout(a[s]);break;case 23:n.branch(a[s]);break;case 24:n.branch(a[s-2],a[s]);break;case 25:n.cherryPick(a[s],"",void 0);break;case 26:n.cherryPick(a[s-2],"",a[s]);break;case 27:case 29:n.cherryPick(a[s-2],"","");break;case 28:n.cherryPick(a[s],"",a[s-2]);break;case 30:n.merge(a[s],"","","");break;case 31:n.merge(a[s-2],a[s],"","");break;case 32:n.merge(a[s-2],"",a[s],"");break;case 33:n.merge(a[s-2],"","",a[s]);break;case 34:n.merge(a[s-4],a[s],"",a[s-2]);break;case 35:n.merge(a[s-4],"",a[s],a[s-2]);break;case 36:n.merge(a[s-4],"",a[s-2],a[s]);break;case 37:n.merge(a[s-4],a[s-2],a[s],"");break;case 38:n.merge(a[s-4],a[s-2],"",a[s]);break;case 39:n.merge(a[s-4],a[s],a[s-2],"");break;case 40:n.merge(a[s-6],a[s-4],a[s-2],a[s]);break;case 41:n.merge(a[s-6],a[s],a[s-4],a[s-2]);break;case 42:n.merge(a[s-6],a[s-4],a[s],a[s-2]);break;case 43:n.merge(a[s-6],a[s-2],a[s-4],a[s]);break;case 44:n.merge(a[s-6],a[s],a[s-2],a[s-4]);break;case 45:n.merge(a[s-6],a[s-2],a[s],a[s-4]);break;case 46:n.commit(a[s]);break;case 47:n.commit("","",n.commitType.NORMAL,a[s]);break;case 48:n.commit("","",a[s],"");break;case 49:n.commit("","",a[s],a[s-2]);break;case 50:n.commit("","",a[s-2],a[s]);break;case 51:n.commit("",a[s],n.commitType.NORMAL,"");break;case 52:n.commit("",a[s-2],n.commitType.NORMAL,a[s]);break;case 53:n.commit("",a[s],n.commitType.NORMAL,a[s-2]);break;case 54:n.commit("",a[s-2],a[s],"");break;case 55:n.commit("",a[s],a[s-2],"");break;case 56:n.commit("",a[s-4],a[s-2],a[s]);break;case 57:n.commit("",a[s-4],a[s],a[s-2]);break;case 58:n.commit("",a[s-2],a[s-4],a[s]);break;case 59:n.commit("",a[s],a[s-4],a[s-2]);break;case 60:n.commit("",a[s],a[s-2],a[s-4]);break;case 61:n.commit("",a[s-2],a[s],a[s-4]);break;case 62:n.commit(a[s],"",n.commitType.NORMAL,"");break;case 63:n.commit(a[s],"",n.commitType.NORMAL,a[s-2]);break;case 64:n.commit(a[s-2],"",n.commitType.NORMAL,a[s]);break;case 65:n.commit(a[s-2],"",a[s],"");break;case 66:n.commit(a[s],"",a[s-2],"");break;case 67:n.commit(a[s],a[s-2],n.commitType.NORMAL,"");break;case 68:n.commit(a[s-2],a[s],n.commitType.NORMAL,"");break;case 69:n.commit(a[s-4],"",a[s-2],a[s]);break;case 70:n.commit(a[s-4],"",a[s],a[s-2]);break;case 71:n.commit(a[s-2],"",a[s-4],a[s]);break;case 72:n.commit(a[s],"",a[s-4],a[s-2]);break;case 73:n.commit(a[s],"",a[s-2],a[s-4]);break;case 74:n.commit(a[s-2],"",a[s],a[s-4]);break;case 75:n.commit(a[s-4],a[s],a[s-2],"");break;case 76:n.commit(a[s-4],a[s-2],a[s],"");break;case 77:n.commit(a[s-2],a[s],a[s-4],"");break;case 78:n.commit(a[s],a[s-2],a[s-4],"");break;case 79:n.commit(a[s],a[s-4],a[s-2],"");break;case 80:n.commit(a[s-2],a[s-4],a[s],"");break;case 81:n.commit(a[s-4],a[s],n.commitType.NORMAL,a[s-2]);break;case 82:n.commit(a[s-4],a[s-2],n.commitType.NORMAL,a[s]);break;case 83:n.commit(a[s-2],a[s],n.commitType.NORMAL,a[s-4]);break;case 84:n.commit(a[s],a[s-2],n.commitType.NORMAL,a[s-4]);break;case 85:n.commit(a[s],a[s-4],n.commitType.NORMAL,a[s-2]);break;case 86:n.commit(a[s-2],a[s-4],n.commitType.NORMAL,a[s]);break;case 87:n.commit(a[s-6],a[s-4],a[s-2],a[s]);break;case 88:n.commit(a[s-6],a[s-4],a[s],a[s-2]);break;case 89:n.commit(a[s-6],a[s-2],a[s-4],a[s]);break;case 90:n.commit(a[s-6],a[s],a[s-4],a[s-2]);break;case 91:n.commit(a[s-6],a[s-2],a[s],a[s-4]);break;case 92:n.commit(a[s-6],a[s],a[s-2],a[s-4]);break;case 93:n.commit(a[s-4],a[s-6],a[s-2],a[s]);break;case 94:n.commit(a[s-4],a[s-6],a[s],a[s-2]);break;case 95:n.commit(a[s-2],a[s-6],a[s-4],a[s]);break;case 96:n.commit(a[s],a[s-6],a[s-4],a[s-2]);break;case 97:n.commit(a[s-2],a[s-6],a[s],a[s-4]);break;case 98:n.commit(a[s],a[s-6],a[s-2],a[s-4]);break;case 99:n.commit(a[s],a[s-4],a[s-2],a[s-6]);break;case 100:n.commit(a[s-2],a[s-4],a[s],a[s-6]);break;case 101:n.commit(a[s],a[s-2],a[s-4],a[s-6]);break;case 102:n.commit(a[s-2],a[s],a[s-4],a[s-6]);break;case 103:n.commit(a[s-4],a[s-2],a[s],a[s-6]);break;case 104:n.commit(a[s-4],a[s],a[s-2],a[s-6]);break;case 105:n.commit(a[s-2],a[s-4],a[s-6],a[s]);break;case 106:n.commit(a[s],a[s-4],a[s-6],a[s-2]);break;case 107:n.commit(a[s-2],a[s],a[s-6],a[s-4]);break;case 108:n.commit(a[s],a[s-2],a[s-6],a[s-4]);break;case 109:n.commit(a[s-4],a[s-2],a[s-6],a[s]);break;case 110:n.commit(a[s-4],a[s],a[s-6],a[s-2]);break;case 111:this.$="";break;case 112:this.$=a[s];break;case 113:this.$=n.commitType.NORMAL;break;case 114:this.$=n.commitType.REVERSE;break;case 115:this.$=n.commitType.HIGHLIGHT;break;case 118:n.parseDirective("%%{","open_directive");break;case 119:n.parseDirective(a[s],"type_directive");break;case 120:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 121:n.parseDirective("}%%","close_directive","gitGraph")}},table:[{3:1,4:2,5:3,6:nc=[1,4],8:oc=[1,7],14:sc=[1,5],46:8,50:cc=[1,9],54:yc=[1,6]},{1:[3]},{3:10,4:2,5:3,6:nc,8:oc,14:sc,46:8,50:cc,54:yc},{3:11,4:2,5:3,6:nc,8:oc,14:sc,46:8,50:cc,54:yc},{7:12,8:Hr=[2,6],9:[1,13],10:[1,14],11:15,14:Gr=[1,16]},T(Vr=[6,8,14,20,22,24,25,27,29,32,37,40,50,54],[2,122]),T(Vr,[2,123]),T(Vr,[2,124]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:Hr,11:15,14:Gr},{9:[1,21]},T(La,[2,10],{12:22,13:[1,23]}),T(Ba,[2,9]),{9:[1,25],48:24,53:za},T([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:Hr,11:15,14:Gr},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},T(Ba,[2,8]),T(Ua,[2,116]),{49:45,52:[1,46]},T(Ua,[2,121]),{1:[2,4]},{8:[1,47]},T(La,[2,11]),{4:48,8:oc,14:sc,54:yc},T(La,[2,13]),T(t,[2,14]),T(t,[2,15]),T(t,[2,16]),{21:[1,49]},{23:[1,50]},T(t,[2,19]),T(t,[2,20]),T(t,[2,21]),{28:[1,51]},T(t,[2,111],{41:52,33:[1,55],34:[1,57],35:[1,53],38:[1,54],42:[1,56]}),{28:[1,58]},{33:[1,59],35:[1,60]},{28:[1,61]},{48:62,53:za},{53:[2,120]},{1:[2,5]},T(La,[2,12]),T(t,[2,17]),T(t,[2,18]),T(t,[2,22]),T(t,[2,46]),{34:[1,63]},{39:64,43:qa,44:Ha,45:Va},{34:[1,68]},{34:[1,69]},T(t,[2,112]),T(t,[2,30],{33:[1,70],35:[1,72],38:[1,71]}),{34:[1,73]},{34:[1,74],36:[1,75]},T(t,[2,23],{30:[1,76]}),T(Ua,[2,117]),T(t,[2,47],{33:[1,78],38:[1,77],42:[1,79]}),T(t,[2,48],{33:[1,81],35:[1,80],42:[1,82]}),T(rc,[2,113]),T(rc,[2,114]),T(rc,[2,115]),T(t,[2,51],{35:[1,83],38:[1,84],42:[1,85]}),T(t,[2,62],{33:[1,88],35:[1,86],38:[1,87]}),{34:[1,89]},{39:90,43:qa,44:Ha,45:Va},{34:[1,91]},T(t,[2,25],{35:[1,92]}),{33:[1,93]},{33:[1,94]},{31:[1,95]},{39:96,43:qa,44:Ha,45:Va},{34:[1,97]},{34:[1,98]},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{39:103,43:qa,44:Ha,45:Va},{34:[1,104]},{34:[1,105]},{39:106,43:qa,44:Ha,45:Va},{34:[1,107]},T(t,[2,31],{35:[1,109],38:[1,108]}),T(t,[2,32],{33:[1,111],35:[1,110]}),T(t,[2,33],{33:[1,112],38:[1,113]}),{34:[1,114],36:[1,115]},{34:[1,116]},{34:[1,117]},T(t,[2,24]),T(t,[2,49],{33:[1,118],42:[1,119]}),T(t,[2,53],{38:[1,120],42:[1,121]}),T(t,[2,63],{33:[1,123],38:[1,122]}),T(t,[2,50],{33:[1,124],42:[1,125]}),T(t,[2,55],{35:[1,126],42:[1,127]}),T(t,[2,66],{33:[1,129],35:[1,128]}),T(t,[2,52],{38:[1,130],42:[1,131]}),T(t,[2,54],{35:[1,132],42:[1,133]}),T(t,[2,67],{35:[1,135],38:[1,134]}),T(t,[2,64],{33:[1,137],38:[1,136]}),T(t,[2,65],{33:[1,139],35:[1,138]}),T(t,[2,68],{35:[1,141],38:[1,140]}),{39:142,43:qa,44:Ha,45:Va},{34:[1,143]},{34:[1,144]},{34:[1,145]},{34:[1,146]},{39:147,43:qa,44:Ha,45:Va},T(t,[2,26]),T(t,[2,27]),T(t,[2,28]),T(t,[2,29]),{34:[1,148]},{34:[1,149]},{39:150,43:qa,44:Ha,45:Va},{34:[1,151]},{39:152,43:qa,44:Ha,45:Va},{34:[1,153]},{34:[1,154]},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{39:160,43:qa,44:Ha,45:Va},{34:[1,161]},{34:[1,162]},{34:[1,163]},{39:164,43:qa,44:Ha,45:Va},{34:[1,165]},{39:166,43:qa,44:Ha,45:Va},{34:[1,167]},{34:[1,168]},{34:[1,169]},{39:170,43:qa,44:Ha,45:Va},{34:[1,171]},T(t,[2,37],{35:[1,172]}),T(t,[2,38],{38:[1,173]}),T(t,[2,36],{33:[1,174]}),T(t,[2,39],{35:[1,175]}),T(t,[2,34],{38:[1,176]}),T(t,[2,35],{33:[1,177]}),T(t,[2,60],{42:[1,178]}),T(t,[2,73],{33:[1,179]}),T(t,[2,61],{42:[1,180]}),T(t,[2,84],{38:[1,181]}),T(t,[2,74],{33:[1,182]}),T(t,[2,83],{38:[1,183]}),T(t,[2,59],{42:[1,184]}),T(t,[2,72],{33:[1,185]}),T(t,[2,58],{42:[1,186]}),T(t,[2,78],{35:[1,187]}),T(t,[2,71],{33:[1,188]}),T(t,[2,77],{35:[1,189]}),T(t,[2,57],{42:[1,190]}),T(t,[2,85],{38:[1,191]}),T(t,[2,56],{42:[1,192]}),T(t,[2,79],{35:[1,193]}),T(t,[2,80],{35:[1,194]}),T(t,[2,86],{38:[1,195]}),T(t,[2,70],{33:[1,196]}),T(t,[2,81],{38:[1,197]}),T(t,[2,69],{33:[1,198]}),T(t,[2,75],{35:[1,199]}),T(t,[2,76],{35:[1,200]}),T(t,[2,82],{38:[1,201]}),{34:[1,202]},{39:203,43:qa,44:Ha,45:Va},{34:[1,204]},{34:[1,205]},{39:206,43:qa,44:Ha,45:Va},{34:[1,207]},{34:[1,208]},{34:[1,209]},{34:[1,210]},{39:211,43:qa,44:Ha,45:Va},{34:[1,212]},{39:213,43:qa,44:Ha,45:Va},{34:[1,214]},{34:[1,215]},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{39:221,43:qa,44:Ha,45:Va},{34:[1,222]},{34:[1,223]},{34:[1,224]},{39:225,43:qa,44:Ha,45:Va},{34:[1,226]},{39:227,43:qa,44:Ha,45:Va},{34:[1,228]},{34:[1,229]},{34:[1,230]},{39:231,43:qa,44:Ha,45:Va},T(t,[2,40]),T(t,[2,42]),T(t,[2,41]),T(t,[2,43]),T(t,[2,45]),T(t,[2,44]),T(t,[2,101]),T(t,[2,102]),T(t,[2,99]),T(t,[2,100]),T(t,[2,104]),T(t,[2,103]),T(t,[2,108]),T(t,[2,107]),T(t,[2,106]),T(t,[2,105]),T(t,[2,110]),T(t,[2,109]),T(t,[2,98]),T(t,[2,97]),T(t,[2,96]),T(t,[2,95]),T(t,[2,93]),T(t,[2,94]),T(t,[2,92]),T(t,[2,91]),T(t,[2,90]),T(t,[2,89]),T(t,[2,87]),T(t,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 28;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};var U6=new((W6.prototype=nc).Parser=W6);function T(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function W6(){this.yy={}}U6.parser=U6;const q6=t=>null!==t.match(/^\s*gitGraph/);let H6="",V6="",G6="";function X6(){H6="",G6="",V6=""}function Z6(t){H6=rv(t).replace(/^\s+/g,"")}function K6(){return H6||V6}function Q6(t){G6=rv(t).replace(/\n\s+/g,`
`)}function J6(){return G6}function tv(t){V6=rv(t)}function ev(){return V6}const rv=t=>j4(t,V());let nv=V().gitGraph.mainBranchName,iv=V().gitGraph.mainBranchOrder,av={},ov=null,sv={},cv=(sv[nv]={name:nv,order:iv},{}),lv=(cv[nv]=ov,nv),uv="LR",hv=0;function dv(){return a_({length:7})}let fv={};function pv(t){var e;if(t=H4.sanitizeText(t,V()),"u"<typeof cv[t])throw(e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")')).hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e;lv=t,e=cv[lv],ov=av[e]}function gv(t,e,r){e=t.indexOf(e);-1===e?t.push(r):t.splice(e,1,r)}function yv(t){const e=t.reduce((t,e)=>t.seq>e.seq?t:e,t[0]);let r="";t.forEach(function(t){t===e?r+="\t*":r+="\t|"});var n,i=[r,e.id,e.seq];for(n in cv)cv[n]===e.id&&i.push(n);if(C.debug(i.join(" ")),e.parents&&2==e.parents.length){var a=av[e.parents[0]];gv(t,e,a),t.push(av[e.parents[1]])}else{if(0==e.parents.length)return;a=av[e.parents];gv(t,e,a)}yv(t=function(t,n){const i=Object.create(null);return t.reduce((t,e)=>{var r=n(e);return i[r]||(i[r]=!0,t.push(e)),t},[])}(t,t=>t.id))}function mv(){var t=Object.keys(av).map(function(t){return av[t]});return t.forEach(function(t){C.debug(t.id)}),t.sort((t,e)=>t.seq-e.seq),t}const bv={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},_v={parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().gitGraph,setDirection:function(t){uv=t},setOptions:function(t){C.debug("options str",t),t=(t=t&&t.trim())||"{}";try{fv=JSON.parse(t)}catch(t){C.error("error while parsing gitGraph options",t.message)}},getOptions:function(){return fv},commit:function(t,e,r,n){C.debug("Entering commit:",t,e,r,n),e=H4.sanitizeText(e,V()),t=H4.sanitizeText(t,V()),n=H4.sanitizeText(n,V());e={id:e||hv+"-"+dv(),message:t,seq:hv++,type:r||bv.NORMAL,tag:n||"",parents:null==ov?[]:[ov.id],branch:lv};ov=e,av[e.id]=e,cv[lv]=e.id,C.debug("in pushCommit "+e.id)},branch:function(t,e){var r;if(t=H4.sanitizeText(t,V()),!("u"<typeof cv[t]))throw(r=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")')).hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},r;cv[t]=null!=ov?ov.id:null,sv[t]={name:t,order:e?parseInt(e,10):null},pv(t),C.debug("in createBranch")},merge:function(t,e,r,n){t=H4.sanitizeText(t,V()),e=H4.sanitizeText(e,V());var i,a=av[cv[lv]],o=av[cv[t]];if(lv===t)throw(i=new Error('Incorrect usage of "merge". Cannot merge a branch to itself')).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},i;if("u"<typeof a||!a)throw(i=new Error('Incorrect usage of "merge". Current branch ('+lv+")has no commits")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},i;if("u"<typeof cv[t])throw(i=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},i;if("u"<typeof o||!o)throw(i=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},i;if(a===o)throw(i=new Error('Incorrect usage of "merge". Both branches have same head')).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},i;if(e&&typeof av[e]<"u")throw(a=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id")).hash={text:"merge "+t+e+r+n,token:"merge "+t+e+r+n,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+r+" "+n]},a;o={id:e||hv+"-"+dv(),message:"merged branch "+t+" into "+lv,seq:hv++,parents:[null==ov?null:ov.id,cv[t]],branch:lv,type:bv.MERGE,customType:r,customId:!!e,tag:n||""};ov=o,av[o.id]=o,cv[lv]=o.id,C.debug(cv),C.debug("in mergeBranch")},cherryPick:function(t,e,r){if(C.debug("Entering cherryPick:",t,e,r),t=H4.sanitizeText(t,V()),e=H4.sanitizeText(e,V()),r=H4.sanitizeText(r,V()),!t||"u"<typeof av[t])throw(n=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n;var n=av[t],i=n.branch;if(n.type===bv.MERGE)throw(a=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a;if(!e||"u"<typeof av[e]){if(i===lv)throw(a=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a;var a,i=av[cv[lv]];if("u"<typeof i||!i)throw(a=new Error('Incorrect usage of "cherry-pick". Current branch ('+lv+")has no commits")).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a;i={id:hv+"-"+dv(),message:"cherry-picked "+n+" into "+lv,seq:hv++,parents:[null==ov?null:ov.id,n.id],branch:lv,type:bv.CHERRY_PICK,tag:null!=r?r:"cherry-pick:"+n.id};ov=i,av[i.id]=i,cv[lv]=i.id,C.debug(cv),C.debug("in cherryPick")}},checkout:pv,prettyPrint:function(){C.debug(av),yv([mv()[0]])},clear:function(){av={},ov=null;var t=V().gitGraph.mainBranchName,e=V().gitGraph.mainBranchOrder;(cv={})[t]=null,(sv={})[t]={name:t,order:e},lv=t,hv=0,X6()},getBranchesAsObjArray:function(){return Object.values(sv).map((t,e)=>null!==t.order?t:{...t,order:parseFloat("0."+e,10)}).sort((t,e)=>t.order-e.order).map(({name:t})=>({name:t}))},getBranches:function(){return cv},getCommits:function(){return av},getCommitsArray:mv,getCurrentBranch:function(){return lv},getDirection:function(){return uv},getHead:function(){return ov},setAccTitle:Z6,getAccTitle:K6,getAccDescription:J6,setAccDescription:Q6,commitType:bv};function vv(t,e,r){var n;"u"<typeof e.insert||(n=t.getAccTitle(),t=t.getAccDescription(),e.attr("role","img").attr("aria-labelledby","chart-title-"+r+" chart-desc-"+r),e.insert("desc",":first-child").attr("id","chart-desc-"+r).text(t),e.insert("title",":first-child").attr("id","chart-title-"+r).text(n))}let xv={};const kv={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},wv=8;let Ev={},Tv={},Cv=[],Sv=0;const Av=(t,o,s)=>{const c=R6().gitGraph,l=t.append("g").attr("class","commit-bullets"),u=t.append("g").attr("class","commit-labels");let h=0;Object.keys(o).sort((t,e)=>o[t].seq-o[e].seq).forEach(r=>{var t,n,e,r=o[r],i=Ev[r.branch].pos,a=h+10;if(s){let t,e=typeof r.customType<"u"&&""!==r.customType?r.customType:r.type;switch(e){case kv.NORMAL:t="commit-normal";break;case kv.REVERSE:t="commit-reverse";break;case kv.HIGHLIGHT:t="commit-highlight";break;case kv.MERGE:t="commit-merge";break;case kv.CHERRY_PICK:t="commit-cherry-pick";break;default:t="commit-normal"}e===kv.HIGHLIGHT?((n=l.append("rect")).attr("x",a-10),n.attr("y",i-10),n.attr("height",20),n.attr("width",20),n.attr("class",`commit ${r.id} commit-highlight${Ev[r.branch].index%wv} ${t}-outer`),l.append("rect").attr("x",a-6).attr("y",i-6).attr("height",12).attr("width",12).attr("class",`commit ${r.id} commit${Ev[r.branch].index%wv} ${t}-inner`)):e===kv.CHERRY_PICK?(l.append("circle").attr("cx",a).attr("cy",i).attr("r",10).attr("class",`commit ${r.id} `+t),l.append("circle").attr("cx",a-3).attr("cy",i+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} `+t),l.append("circle").attr("cx",a+3).attr("cy",i+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} `+t),l.append("line").attr("x1",a+3).attr("y1",i+1).attr("x2",a).attr("y2",i-5).attr("stroke","#fff").attr("class",`commit ${r.id} `+t),l.append("line").attr("x1",a-3).attr("y1",i+1).attr("x2",a).attr("y2",i-5).attr("stroke","#fff").attr("class",`commit ${r.id} `+t)):((n=l.append("circle")).attr("cx",a),n.attr("cy",i),n.attr("r",r.type===kv.MERGE?9:10),n.attr("class",`commit ${r.id} commit`+Ev[r.branch].index%wv),e===kv.MERGE&&((n=l.append("circle")).attr("cx",a),n.attr("cy",i),n.attr("r",6),n.attr("class",`commit ${t} ${r.id} commit`+Ev[r.branch].index%wv)),e===kv.REVERSE&&l.append("path").attr("d",`M ${a-5},${i-5}L${a+5},${i+5}M${a-5},${i+5}L${a+5},`+(i-5)).attr("class",`commit ${t} ${r.id} commit`+Ev[r.branch].index%wv))}Tv[r.id]={x:h+10,y:i},s&&(r.type!==kv.CHERRY_PICK&&(r.customId&&r.type===kv.MERGE||r.type!==kv.MERGE)&&c.showCommitLabel&&(a=(n=u.append("g")).insert("rect").attr("class","commit-label-bkg"),t=(e=n.append("text").attr("x",h).attr("y",i+25).attr("class","commit-label").text(r.id)).node().getBBox(),a.attr("x",h+10-t.width/2-2).attr("y",i+13.5).attr("width",t.width+4).attr("height",t.height+4),e.attr("x",h+10-t.width/2),c.rotateCommitLabel)&&(a=-7.5-(t.width+10)/25*9.5,e=10+t.width/25*8.5,n.attr("transform","translate("+a+", "+e+") rotate("+-45+", "+h+", "+i+")")),r.tag)&&(t=u.insert("polygon"),n=u.append("circle"),e=(a=u.append("text").attr("y",i-16).attr("class","tag-label").text(r.tag)).node().getBBox(),a.attr("x",h+10-e.width/2),r=e.height/2,a=i-19.2,t.attr("class","tag-label-bkg").attr("points",`
          ${h-e.width/2-2},${2+a}
          ${h-e.width/2-2},${a-2}
          ${h+10-e.width/2-4},${a-r-2}
          ${h+10+e.width/2+4},${a-r-2}
          ${h+10+e.width/2+4},${a+r+2}
          ${h+10-e.width/2-4},`+(a+r+2)),n.attr("cx",h-e.width/2+2).attr("cy",a).attr("r",1.5).attr("class","tag-hole")),(h+=50)>Sv&&(Sv=h)})},Mv=(e,r,n)=>0<Object.keys(n).filter(t=>n[t].branch===r.branch&&n[t].seq>e.seq&&n[t].seq<r.seq).length,Nv=(t,e,r)=>{var n,r=r||0,i=t+Math.abs(t-e)/2;if(5<r)return i;let a=!0;for(let t=0;t<Cv.length;t++)Math.abs(Cv[t]-i)<10&&(a=!1);return a?(Cv.push(i),i):(n=Math.abs(t-e),Nv(t,e-n/5,r+1))},Dv=(t,f)=>{const p=t.append("g").attr("class","commit-arrows");Object.keys(f).forEach(t=>{const d=f[t];d.parents&&0<d.parents.length&&d.parents.forEach(o=>{{var s=p,c=(o=f[o],d),l=f,u=Tv[o.id],h=Tv[c.id],l=Mv(o,c,l);let t="",e,r=0,n=0,i=Ev[c.branch].index,a;l?(t="A 10 10, 0, 0, 0,",e="A 10 10, 0, 0, 1,",r=10,n=10,i=Ev[c.branch].index,l=u.y<h.y?Nv(u.y,h.y):Nv(h.y,u.y),a=u.y<h.y?`M ${u.x} ${u.y} L ${u.x} ${l-r} ${t} ${u.x+n} ${l} L ${h.x-r} ${l} ${e} ${h.x} ${l+n} L ${h.x} `+h.y:`M ${u.x} ${u.y} L ${u.x} ${l+r} ${e} ${u.x+n} ${l} L ${h.x-r} ${l} ${t} ${h.x} ${l-n} L ${h.x} `+h.y):(u.y<h.y&&(t="A 20 20, 0, 0, 0,",r=20,n=20,i=Ev[c.branch].index,a=`M ${u.x} ${u.y} L ${u.x} ${h.y-r} ${t} ${u.x+n} ${h.y} L ${h.x} `+h.y),u.y>h.y&&(t="A 20 20, 0, 0, 0,",r=20,n=20,i=Ev[o.branch].index,a=`M ${u.x} ${u.y} L ${h.x-r} ${u.y} ${t} ${h.x} ${u.y-n} L ${h.x} `+h.y),u.y===h.y&&(i=Ev[o.branch].index,a=`M ${u.x} ${u.y} L ${u.x} ${h.y-r} ${t} ${u.x+n} ${h.y} L ${h.x} `+h.y)),s.append("path").attr("d",a).attr("class","arrow arrow"+i%wv)}})})},Lv=(t,e)=>{const a=R6().gitGraph,o=t.append("g");e.forEach((t,e)=>{var e=e%wv,r=Ev[t.name].pos,n=o.append("line"),n=(n.attr("x1",0),n.attr("y1",r),n.attr("x2",Sv),n.attr("y2",r),n.attr("class","branch branch"+e),Cv.push(r),t.name),t=(t=>{var e=document.createElementNS("http://www.w3.org/2000/svg","text");let r=[];r="string"==typeof t?t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?t:[];for(let t=0;t<r.length;t++){var n=document.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","0"),n.setAttribute("class","row"),n.textContent=r[t].trim(),e.appendChild(n)}return e})(n),n=o.insert("rect"),i=o.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+e),t=(i.node().appendChild(t),t.getBBox());n.attr("class","branchLabelBkg label"+e).attr("rx",4).attr("ry",4).attr("x",-t.width-4-(!0===a.rotateCommitLabel?30:0)).attr("y",-t.height/2+8).attr("width",t.width+18).attr("height",t.height+4),i.attr("transform","translate("+(-t.width-14-(!0===a.rotateCommitLabel?30:0))+", "+(r-t.height/2-1)+")"),n.attr("transform","translate(-19, "+(r-t.height/2)+")")})},Bv={draw:function(t,e,r,n){Ev={},Tv={},xv={},Sv=0,Cv=[];const i=R6(),a=R6().gitGraph;C.debug("in gitgraph renderer",t+`
`,"id:",e,r),xv=n.db.getCommits();t=n.db.getBranchesAsObjArray();let o=0;t.forEach((t,e)=>{Ev[t.name]={pos:o,index:e},o+=50+(a.rotateCommitLabel?40:0)});r=H(`[id="${e}"]`);vv(n.db,r,e),Av(r,xv,!1),a.showBranches&&Lv(r,t),Dv(r,xv),Av(r,xv,!0),P6(void 0,r,a.diagramPadding,i.useMaxWidth)}},Ov=e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  }
`;Bi=[1,33],Ii=[1,34],Ri=[1,35],pg=[1,36],gg=[1,37],yg=[1,72],mg=[1,73],bg=[1,74],_g=[1,75],vg=[1,76],xg=[1,77],kg=[1,78],wg=[1,38],Cg=[1,39],Tg=[1,40],r=[1,41],e=[1,42],n=[1,43],Sg=[1,44],a=[1,45],i=[1,46],Ag=[1,47],o=[1,48],l=[1,49],s=[1,50],h=[1,51],u=[1,52],f=[1,53],d=[1,54],p=[1,55],Mg=[1,56],Dg=[1,57],Ng=[1,59],Bg=[1,60],Lg=[1,61],Ig=[1,62],Og=[1,63],Rg=[1,64],g=[1,65],Fg=[1,66],y=[1,67],Pg=[1,68],m=[1,69],jg=[24,52],$g=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],Yg=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],b=[1,94],v=[1,95],_=[1,96],k=[1,97],x=[15,24,52],Ug=[7,8,9,10,18,22,25,26,27,28],zg=[15,24,43,52],qg=[15,24,43,52,86,87,89,90],Wg=[15,43],Vg=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],(Hg={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 4:n.setDirection("TB");break;case 5:n.setDirection("BT");break;case 6:n.setDirection("RL");break;case 7:n.setDirection("LR");break;case 11:n.parseDirective("%%{","open_directive");break;case 12:break;case 13:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 14:n.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:n.setC4Type(a[s-3]);break;case 26:n.setTitle(a[s].substring(6)),this.$=a[s].substring(6);break;case 27:n.setAccDescription(a[s].substring(15)),this.$=a[s].substring(15);break;case 28:this.$=a[s].trim(),n.setTitle(this.$);break;case 29:case 30:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 35:case 36:a[s].splice(2,0,"ENTERPRISE"),n.addPersonOrSystemBoundary(...a[s]),this.$=a[s];break;case 37:n.addPersonOrSystemBoundary(...a[s]),this.$=a[s];break;case 38:a[s].splice(2,0,"CONTAINER"),n.addContainerBoundary(...a[s]),this.$=a[s];break;case 39:n.addDeploymentNode("node",...a[s]),this.$=a[s];break;case 40:n.addDeploymentNode("nodeL",...a[s]),this.$=a[s];break;case 41:n.addDeploymentNode("nodeR",...a[s]),this.$=a[s];break;case 42:n.popBoundaryParseStack();break;case 46:n.addPersonOrSystem("person",...a[s]),this.$=a[s];break;case 47:n.addPersonOrSystem("external_person",...a[s]),this.$=a[s];break;case 48:n.addPersonOrSystem("system",...a[s]),this.$=a[s];break;case 49:n.addPersonOrSystem("system_db",...a[s]),this.$=a[s];break;case 50:n.addPersonOrSystem("system_queue",...a[s]),this.$=a[s];break;case 51:n.addPersonOrSystem("external_system",...a[s]),this.$=a[s];break;case 52:n.addPersonOrSystem("external_system_db",...a[s]),this.$=a[s];break;case 53:n.addPersonOrSystem("external_system_queue",...a[s]),this.$=a[s];break;case 54:n.addContainer("container",...a[s]),this.$=a[s];break;case 55:n.addContainer("container_db",...a[s]),this.$=a[s];break;case 56:n.addContainer("container_queue",...a[s]),this.$=a[s];break;case 57:n.addContainer("external_container",...a[s]),this.$=a[s];break;case 58:n.addContainer("external_container_db",...a[s]),this.$=a[s];break;case 59:n.addContainer("external_container_queue",...a[s]),this.$=a[s];break;case 60:n.addComponent("component",...a[s]),this.$=a[s];break;case 61:n.addComponent("component_db",...a[s]),this.$=a[s];break;case 62:n.addComponent("component_queue",...a[s]),this.$=a[s];break;case 63:n.addComponent("external_component",...a[s]),this.$=a[s];break;case 64:n.addComponent("external_component_db",...a[s]),this.$=a[s];break;case 65:n.addComponent("external_component_queue",...a[s]),this.$=a[s];break;case 67:n.addRel("rel",...a[s]),this.$=a[s];break;case 68:n.addRel("birel",...a[s]),this.$=a[s];break;case 69:n.addRel("rel_u",...a[s]),this.$=a[s];break;case 70:n.addRel("rel_d",...a[s]),this.$=a[s];break;case 71:n.addRel("rel_l",...a[s]),this.$=a[s];break;case 72:n.addRel("rel_r",...a[s]),this.$=a[s];break;case 73:n.addRel("rel_b",...a[s]),this.$=a[s];break;case 74:a[s].splice(0,1),n.addRel("rel",...a[s]),this.$=a[s];break;case 75:n.updateElStyle("update_el_style",...a[s]),this.$=a[s];break;case 76:n.updateRelStyle("update_rel_style",...a[s]),this.$=a[s];break;case 77:n.updateLayoutConfig("update_layout_config",...a[s]),this.$=a[s];break;case 78:this.$=[a[s]];break;case 79:a[s].unshift(a[s-1]),this.$=a[s];break;case 80:case 82:this.$=a[s].trim();break;case 81:var c={};c[a[s-1].trim()]=a[s].trim(),this.$=c;break;case 83:this.$=""}},table:[{3:1,4:2,5:3,6:4,7:Hg=[1,6],8:Xg=[1,7],9:Gg=[1,8],10:Kg=[1,9],11:5,12:10,18:Zg=[1,16],22:Jg=[1,11],25:Qg=[1,12],26:ey=[1,13],27:ty=[1,14],28:Eg=[1,15]},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:Hg,8:Xg,9:Gg,10:Kg,11:5,12:10,18:Zg,22:Jg,25:Qg,26:ey,27:ty,28:Eg},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:ry=[1,27]},M([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:Bi,33:Ii,34:Ri,36:pg,38:gg,39:58,40:70,42:71,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,53:32,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m},{23:79,29:29,30:30,31:31,32:Bi,33:Ii,34:Ri,36:pg,38:gg,39:58,40:70,42:71,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,53:32,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m},{23:80,29:29,30:30,31:31,32:Bi,33:Ii,34:Ri,36:pg,38:gg,39:58,40:70,42:71,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,53:32,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m},{23:81,29:29,30:30,31:31,32:Bi,33:Ii,34:Ri,36:pg,38:gg,39:58,40:70,42:71,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,53:32,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m},{23:82,29:29,30:30,31:31,32:Bi,33:Ii,34:Ri,36:pg,38:gg,39:58,40:70,42:71,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,53:32,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},M(jg,[2,20],{53:32,39:58,40:70,42:71,30:87,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m}),M(jg,[2,21]),M($g,[2,23],{15:[1,88]}),M(jg,[2,43],{15:[1,89]}),M(Yg,[2,26]),M(Yg,[2,27]),{35:[1,90]},{37:[1,91]},M(Yg,[2,30]),{45:92,85:93,86:b,87:v,89:_,90:k},{45:98,85:93,86:b,87:v,89:_,90:k},{45:99,85:93,86:b,87:v,89:_,90:k},{45:100,85:93,86:b,87:v,89:_,90:k},{45:101,85:93,86:b,87:v,89:_,90:k},{45:102,85:93,86:b,87:v,89:_,90:k},{45:103,85:93,86:b,87:v,89:_,90:k},{45:104,85:93,86:b,87:v,89:_,90:k},{45:105,85:93,86:b,87:v,89:_,90:k},{45:106,85:93,86:b,87:v,89:_,90:k},{45:107,85:93,86:b,87:v,89:_,90:k},{45:108,85:93,86:b,87:v,89:_,90:k},{45:109,85:93,86:b,87:v,89:_,90:k},{45:110,85:93,86:b,87:v,89:_,90:k},{45:111,85:93,86:b,87:v,89:_,90:k},{45:112,85:93,86:b,87:v,89:_,90:k},{45:113,85:93,86:b,87:v,89:_,90:k},{45:114,85:93,86:b,87:v,89:_,90:k},{45:115,85:93,86:b,87:v,89:_,90:k},{45:116,85:93,86:b,87:v,89:_,90:k},M(x,[2,66]),{45:117,85:93,86:b,87:v,89:_,90:k},{45:118,85:93,86:b,87:v,89:_,90:k},{45:119,85:93,86:b,87:v,89:_,90:k},{45:120,85:93,86:b,87:v,89:_,90:k},{45:121,85:93,86:b,87:v,89:_,90:k},{45:122,85:93,86:b,87:v,89:_,90:k},{45:123,85:93,86:b,87:v,89:_,90:k},{45:124,85:93,86:b,87:v,89:_,90:k},{45:125,85:93,86:b,87:v,89:_,90:k},{45:126,85:93,86:b,87:v,89:_,90:k},{45:127,85:93,86:b,87:v,89:_,90:k},{30:128,39:58,40:70,42:71,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,53:32,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m},{15:[1,130],43:[1,129]},{45:131,85:93,86:b,87:v,89:_,90:k},{45:132,85:93,86:b,87:v,89:_,90:k},{45:133,85:93,86:b,87:v,89:_,90:k},{45:134,85:93,86:b,87:v,89:_,90:k},{45:135,85:93,86:b,87:v,89:_,90:k},{45:136,85:93,86:b,87:v,89:_,90:k},{45:137,85:93,86:b,87:v,89:_,90:k},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},M(Ug,[2,9]),{14:142,21:ry},{21:[2,13]},{1:[2,15]},M(jg,[2,22]),M($g,[2,24],{31:31,29:143,32:Bi,33:Ii,34:Ri,36:pg,38:gg}),M(jg,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:Bi,33:Ii,34:Ri,36:pg,38:gg,44:yg,46:mg,47:bg,48:_g,49:vg,50:xg,51:kg,54:wg,55:Cg,56:Tg,57:r,58:e,59:n,60:Sg,61:a,62:i,63:Ag,64:o,65:l,66:s,67:h,68:u,69:f,70:d,71:p,72:Mg,73:Dg,74:Ng,75:Bg,76:Lg,77:Ig,78:Og,79:Rg,80:g,81:Fg,82:y,83:Pg,84:m}),M(Yg,[2,28]),M(Yg,[2,29]),M(x,[2,46]),M(zg,[2,78],{85:93,45:145,86:b,87:v,89:_,90:k}),M(qg,[2,80]),{88:[1,146]},M(qg,[2,82]),M(qg,[2,83]),M(x,[2,47]),M(x,[2,48]),M(x,[2,49]),M(x,[2,50]),M(x,[2,51]),M(x,[2,52]),M(x,[2,53]),M(x,[2,54]),M(x,[2,55]),M(x,[2,56]),M(x,[2,57]),M(x,[2,58]),M(x,[2,59]),M(x,[2,60]),M(x,[2,61]),M(x,[2,62]),M(x,[2,63]),M(x,[2,64]),M(x,[2,65]),M(x,[2,67]),M(x,[2,68]),M(x,[2,69]),M(x,[2,70]),M(x,[2,71]),M(x,[2,72]),M(x,[2,73]),M(x,[2,74]),M(x,[2,75]),M(x,[2,76]),M(x,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},M(Wg,[2,35]),M(Wg,[2,36]),M(Wg,[2,37]),M(Wg,[2,38]),M(Wg,[2,39]),M(Wg,[2,40]),M(Wg,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},M($g,[2,25]),M(jg,[2,45]),M(zg,[2,79]),M(qg,[2,81]),M(x,[2,31]),M(x,[2,42]),M(Vg,[2,32]),M(Vg,[2,33],{15:[1,152]}),M(Ug,[2,10]),M(Vg,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:case 58:return this.begin("rel_u"),76;case 59:case 60:return this.begin("rel_d"),77;case 61:case 62:return this.begin("rel_l"),78;case 63:case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};var Iv,Rv=new((Fv.prototype=Hg).Parser=Fv);function M(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function Fv(){this.yy={}}Rv.parser=Rv;const Pv=t=>null!==t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/);let $v=[],jv=[""],Yv="global",zv="",Uv=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Wv=[],qv="",Hv=!1,Vv=4,Gv=2;function Xv(e){return null==e?$v:$v.filter(t=>t.parentBoundary===e)}function Zv(){return Hv}function Kv(t,e){var r=t.append("rect");if(r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),r.attr("rx",e.rx),r.attr("ry",e.ry),"undefined"!==e.attrs&&null!==e.attrs)for(var n in e.attrs)r.attr(n,e.attrs[n]);return"undefined"!==e.class&&r.attr("class",e.class),r}function Qv(t,e,r,n,i,a){(t=t.append("image")).attr("width",e),t.attr("height",r),t.attr("x",n),t.attr("y",i),e=a.startsWith("data:image/png;base64")?a:z(a),t.attr("xlink:href",e)}function Jv(e,r){let n=0,i=0;var a=r.text.split(H4.lineBreakRegex);let o=[],s=0,c=()=>r.y;if(typeof r.valign<"u"&&typeof r.textMargin<"u"&&0<r.textMargin)switch(r.valign){case"top":case"start":c=()=>Math.round(r.y+r.textMargin);break;case"middle":case"center":c=()=>Math.round(r.y+(n+i+r.textMargin)/2);break;case"bottom":case"end":c=()=>Math.round(r.y+(n+i+2*r.textMargin)-r.textMargin)}if(typeof r.anchor<"u"&&typeof r.textMargin<"u"&&typeof r.width<"u")switch(r.anchor){case"left":case"start":r.x=Math.round(r.x+r.textMargin),r.anchor="start",r.dominantBaseline="text-after-edge",r.alignmentBaseline="middle";break;case"middle":case"center":r.x=Math.round(r.x+r.width/2),r.anchor="middle",r.dominantBaseline="middle",r.alignmentBaseline="middle";break;case"right":case"end":r.x=Math.round(r.x+r.width-r.textMargin),r.anchor="end",r.dominantBaseline="text-before-edge",r.alignmentBaseline="middle"}for(let t=0;t<a.length;t++){var l,u=a[t],h=(typeof r.textMargin<"u"&&0===r.textMargin&&typeof r.fontSize<"u"&&(s=t*r.fontSize),e.append("text"));h.attr("x",r.x),h.attr("y",c()),typeof r.anchor<"u"&&h.attr("text-anchor",r.anchor).attr("dominant-baseline",r.dominantBaseline).attr("alignment-baseline",r.alignmentBaseline),typeof r.fontFamily<"u"&&h.style("font-family",r.fontFamily),typeof r.fontSize<"u"&&h.style("font-size",r.fontSize),typeof r.fontWeight<"u"&&h.style("font-weight",r.fontWeight),typeof r.fill<"u"&&h.attr("fill",r.fill),typeof r.class<"u"&&h.attr("class",r.class),typeof r.dy<"u"?h.attr("dy",r.dy):0!==s&&h.attr("dy",s),(r.tspan?((l=h.append("tspan")).attr("x",r.x),typeof r.fill<"u"&&l.attr("fill",r.fill),l):h).text(u),typeof r.valign<"u"&&typeof r.textMargin<"u"&&0<r.textMargin&&(i+=(h._groups||h)[0][0].getBBox().height,n=i),o.push(h)}return o}function tx(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}}const ex={addPersonOrSystem:function(e,r,n,i,a,o,s){if(null!==r&&null!==n){let t={};var c=$v.find(t=>t.alias===r);c&&r===c.alias?t=c:(t.alias=r,$v.push(t)),t.label=null==n?{text:""}:{text:n},null==i?t.descr={text:""}:"object"==typeof i?([c,n]=Object.entries(i)[0],t[c]={text:n}):t.descr={text:i},"object"==typeof a?([c,n]=Object.entries(a)[0],t[c]=n):t.sprite=a,"object"==typeof o?([i,c]=Object.entries(o)[0],t[i]=c):t.tags=o,"object"==typeof s?([n,a]=Object.entries(s)[0],t[n]=a):t.link=s,t.typeC4Shape={text:e},t.parentBoundary=Yv,t.wrap=Hv}},addPersonOrSystemBoundary:function(e,r,n,i,a){if(null!==e&&null!==r){let t={};var o=Uv.find(t=>t.alias===e);o&&e===o.alias?t=o:(t.alias=e,Uv.push(t)),t.label=null==r?{text:""}:{text:r},null==n?t.type={text:"system"}:"object"==typeof n?([o,r]=Object.entries(n)[0],t[o]={text:r}):t.type={text:n},"object"==typeof i?([o,r]=Object.entries(i)[0],t[o]=r):t.tags=i,"object"==typeof a?([n,o]=Object.entries(a)[0],t[n]=o):t.link=a,t.parentBoundary=Yv,t.wrap=Hv,zv=Yv,Yv=e,jv.push(zv)}},addContainer:function(e,r,n,i,a,o,s,c){if(null!==r&&null!==n){let t={};var l=$v.find(t=>t.alias===r);l&&r===l.alias?t=l:(t.alias=r,$v.push(t)),t.label=null==n?{text:""}:{text:n},null==i?t.techn={text:""}:"object"==typeof i?([l,n]=Object.entries(i)[0],t[l]={text:n}):t.techn={text:i},null==a?t.descr={text:""}:"object"==typeof a?([l,n]=Object.entries(a)[0],t[l]={text:n}):t.descr={text:a},"object"==typeof o?([i,l]=Object.entries(o)[0],t[i]=l):t.sprite=o,"object"==typeof s?([n,a]=Object.entries(s)[0],t[n]=a):t.tags=s,"object"==typeof c?([i,l]=Object.entries(c)[0],t[i]=l):t.link=c,t.wrap=Hv,t.typeC4Shape={text:e},t.parentBoundary=Yv}},addContainerBoundary:function(e,r,n,i,a){if(null!==e&&null!==r){let t={};var o=Uv.find(t=>t.alias===e);o&&e===o.alias?t=o:(t.alias=e,Uv.push(t)),t.label=null==r?{text:""}:{text:r},null==n?t.type={text:"container"}:"object"==typeof n?([o,r]=Object.entries(n)[0],t[o]={text:r}):t.type={text:n},"object"==typeof i?([o,r]=Object.entries(i)[0],t[o]=r):t.tags=i,"object"==typeof a?([n,o]=Object.entries(a)[0],t[n]=o):t.link=a,t.parentBoundary=Yv,t.wrap=Hv,zv=Yv,Yv=e,jv.push(zv)}},addComponent:function(e,r,n,i,a,o,s,c){if(null!==r&&null!==n){let t={};var l=$v.find(t=>t.alias===r);l&&r===l.alias?t=l:(t.alias=r,$v.push(t)),t.label=null==n?{text:""}:{text:n},null==i?t.techn={text:""}:"object"==typeof i?([l,n]=Object.entries(i)[0],t[l]={text:n}):t.techn={text:i},null==a?t.descr={text:""}:"object"==typeof a?([l,n]=Object.entries(a)[0],t[l]={text:n}):t.descr={text:a},"object"==typeof o?([i,l]=Object.entries(o)[0],t[i]=l):t.sprite=o,"object"==typeof s?([n,a]=Object.entries(s)[0],t[n]=a):t.tags=s,"object"==typeof c?([i,l]=Object.entries(c)[0],t[i]=l):t.link=c,t.wrap=Hv,t.typeC4Shape={text:e},t.parentBoundary=Yv}},addDeploymentNode:function(e,r,n,i,a,t,o,s){if(null!==r&&null!==n){let t={};var c=Uv.find(t=>t.alias===r);c&&r===c.alias?t=c:(t.alias=r,Uv.push(t)),t.label=null==n?{text:""}:{text:n},null==i?t.type={text:"node"}:"object"==typeof i?([c,n]=Object.entries(i)[0],t[c]={text:n}):t.type={text:i},null==a?t.descr={text:""}:"object"==typeof a?([c,n]=Object.entries(a)[0],t[c]={text:n}):t.descr={text:a},"object"==typeof o?([i,c]=Object.entries(o)[0],t[i]=c):t.tags=o,"object"==typeof s?([n,a]=Object.entries(s)[0],t[n]=a):t.link=s,t.nodeType=e,t.parentBoundary=Yv,t.wrap=Hv,zv=Yv,Yv=r,jv.push(zv)}},popBoundaryParseStack:function(){Yv=zv,jv.pop(),zv=jv.pop(),jv.push(zv)},addRel:function(e,r,n,i,a,o,s,c,l){if(null!=e&&null!=r&&null!=n&&null!=i){let t={};var u=Wv.find(t=>t.from===r&&t.to===n);u?t=u:Wv.push(t),t.type=e,t.from=r,t.to=n,t.label={text:i},null==a?t.techn={text:""}:"object"==typeof a?([u,e]=Object.entries(a)[0],t[u]={text:e}):t.techn={text:a},null==o?t.descr={text:""}:"object"==typeof o?([i,u]=Object.entries(o)[0],t[i]={text:u}):t.descr={text:o},"object"==typeof s?([e,a]=Object.entries(s)[0],t[e]=a):t.sprite=s,"object"==typeof c?([i,u]=Object.entries(c)[0],t[i]=u):t.tags=c,"object"==typeof l?([o,e]=Object.entries(l)[0],t[o]=e):t.link=l,t.wrap=Hv}},updateElStyle:function(t,e,r,n,i,a,o,s,c,l,u){let h=$v.find(t=>t.alias===e);var d,f;void 0===h&&void 0===(h=Uv.find(t=>t.alias===e))||(null!=r&&("object"==typeof r?([f,d]=Object.entries(r)[0],h[f]=d):h.bgColor=r),null!=n&&("object"==typeof n?([f,d]=Object.entries(n)[0],h[f]=d):h.fontColor=n),null!=i&&("object"==typeof i?([r,f]=Object.entries(i)[0],h[r]=f):h.borderColor=i),null!=a&&("object"==typeof a?([d,n]=Object.entries(a)[0],h[d]=n):h.shadowing=a),null!=o&&("object"==typeof o?([r,f]=Object.entries(o)[0],h[r]=f):h.shape=o),null!=s&&("object"==typeof s?([i,d]=Object.entries(s)[0],h[i]=d):h.sprite=s),null!=c&&("object"==typeof c?([n,a]=Object.entries(c)[0],h[n]=a):h.techn=c),null!=l&&("object"==typeof l?([r,f]=Object.entries(l)[0],h[r]=f):h.legendText=l),null!=u&&("object"==typeof u?([o,i]=Object.entries(u)[0],h[o]=i):h.legendSprite=u))},updateRelStyle:function(t,e,r,n,i,a,o){var s,c,l=Wv.find(t=>t.from===e&&t.to===r);void 0!==l&&(null!=n&&("object"==typeof n?([s,c]=Object.entries(n)[0],l[s]=c):l.textColor=n),null!=i&&("object"==typeof i?([s,c]=Object.entries(i)[0],l[s]=c):l.lineColor=i),null!=a&&("object"==typeof a?([n,s]=Object.entries(a)[0],l[n]=parseInt(s)):l.offsetX=parseInt(a)),null!=o)&&("object"==typeof o?([c,i]=Object.entries(o)[0],l[c]=parseInt(i)):l.offsetY=parseInt(o))},updateLayoutConfig:function(t,e,r){let n=Vv,i=Gv;var a;n="object"==typeof e?(a=Object.values(e)[0],parseInt(a)):parseInt(e),i="object"==typeof r?(a=Object.values(r)[0],parseInt(a)):parseInt(r),1<=n&&(Vv=n),1<=i&&(Gv=i)},autoWrap:Zv,setWrap:function(t){Hv=t},getC4ShapeArray:Xv,getC4Shape:function(e){return $v.find(t=>t.alias===e)},getC4ShapeKeys:function(t){return Object.keys(Xv(t))},getBoundarys:function(e){return null==e?Uv:Uv.filter(t=>t.parentBoundary===e)},getCurrentBoundaryParse:function(){return Yv},getParentBoundaryParse:function(){return zv},getRels:function(){return Wv},getTitle:function(){return qv},getC4Type:function(){return Iv},getC4ShapeInRow:function(){return Vv},getC4BoundaryInRow:function(){return Gv},setAccTitle:Z6,getAccTitle:K6,getAccDescription:J6,setAccDescription:Q6,parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().c4,clear:function(){$v=[],Uv=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],zv="",Yv="global",jv=[""],Wv=[],jv=[""],qv="",Hv=!1,Vv=4,Gv=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(t){qv=j4(t,V())},setC4Type:function(t){Iv=j4(t,V())}},rx=function(t){return"fo"===t.textPlacement?ox:"old"===t.textPlacement?ix:ax},nx={drawRect:Kv,drawText:Jv,drawLabel:function(t,e){var r,n,i,a,o,s=t.append("polygon");return s.attr("points",(r=e.x,n=e.y,i=e.width,a=e.height,r+","+n+" "+(r+i)+","+n+" "+(r+i)+","+(n+a-(o=7))+" "+(r+i-1.2*o)+","+(n+a)+" "+r+","+(n+a))),s.attr("class","labelBox"),e.y=e.y+e.height/2,Jv(t,e),s},drawBoundary:function(t,e,r){t=t.append("g");let n=e.bgColor||"none",i=e.borderColor||"#444444",a=e.fontColor||"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});var s={x:e.x,y:e.y,fill:n,stroke:i,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};Kv(t,s);let c=r.boundaryFont();c.fontWeight="bold",c.fontSize=c.fontSize+2,c.fontColor=a,rx(r)(e.label.text,t,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},c),e.type&&""!==e.type.text&&((c=r.boundaryFont()).fontColor=a,rx(r)(e.type.text,t,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},c)),e.descr&&""!==e.descr.text&&((c=r.boundaryFont()).fontSize=c.fontSize-2,c.fontColor=a,rx(r)(e.descr.text,t,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},c))},drawC4Shape:function(t,e,r){let n=e.bgColor||r[e.typeC4Shape.text+"_bg_color"],i=e.borderColor||r[e.typeC4Shape.text+"_border_color"],a=e.fontColor||"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}var s=t.append("g"),c=(s.attr("class","person-man"),tx());switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":c.x=e.x,c.y=e.y,c.fill=n,c.width=e.width,c.height=e.height,c.style="stroke:"+i+";stroke-width:0.5;",c.rx=2.5,c.ry=2.5,Kv(s,c);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":s.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":s.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),s.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2))}t=e.typeC4Shape.text;t={fontFamily:r[t+"FontFamily"],fontSize:r[t+"FontSize"],fontWeight:r[t+"FontWeight"]};switch(s.append("text").attr("fill",a).attr("font-family",t.fontFamily).attr("font-size",t.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":Qv(s,48,48,e.x+e.width/2-24,e.y+e.image.Y,o)}let l=r[e.typeC4Shape.text+"Font"]();return l.fontWeight="bold",l.fontSize=l.fontSize+2,l.fontColor=a,rx(r)(e.label.text,s,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},l),(l=r[e.typeC4Shape.text+"Font"]()).fontColor=a,e.thchn&&""!==e.thchn.text?rx(r)(e.thchn.text,s,e.x,e.y+e.thchn.Y,e.width,e.height,{fill:a,"font-style":"italic"},l):e.type&&""!==e.type.text&&rx(r)(e.type.text,s,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},l),e.descr&&""!==e.descr.text&&((l=r.personFont()).fontColor=a,rx(r)(e.descr.text,s,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},l)),e.height},drawRels:(t,e,r)=>{var n,i=t.append("g");let a=0;for(n of e){var o,s=n.textColor||"#444444",c=n.lineColor||"#444444",l=n.offsetX?parseInt(n.offsetX):0,u=n.offsetY?parseInt(n.offsetY):0,c=(0===a?((o=i.append("line")).attr("x1",n.startPoint.x),o.attr("y1",n.startPoint.y),o.attr("x2",n.endPoint.x),o.attr("y2",n.endPoint.y),o.attr("stroke-width","1"),o.attr("stroke",c),o.style("fill","none"),"rel_b"!==n.type&&o.attr("marker-end","url(#arrowhead)"),"birel"!==n.type&&"rel_b"!==n.type||o.attr("marker-start","url(#arrowend)"),a=-1):((o=i.append("path")).attr("fill","none").attr("stroke-width","1").attr("stroke",c).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",n.startPoint.x).replaceAll("starty",n.startPoint.y).replaceAll("controlx",n.startPoint.x+(n.endPoint.x-n.startPoint.x)/2-(n.endPoint.x-n.startPoint.x)/4).replaceAll("controly",n.startPoint.y+(n.endPoint.y-n.startPoint.y)/2).replaceAll("stopx",n.endPoint.x).replaceAll("stopy",n.endPoint.y)),"rel_b"!==n.type&&o.attr("marker-end","url(#arrowhead)"),"birel"!==n.type&&"rel_b"!==n.type||o.attr("marker-start","url(#arrowend)")),r.messageFont());rx(r)(n.label.text,i,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+u,n.label.width,n.label.height,{fill:s},c),n.techn&&""!==n.techn.text&&(c=r.messageFont(),rx(r)("["+n.techn.text+"]",i,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+l,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+r.messageFontSize+5+u,Math.max(n.label.width,n.techn.width),n.techn.height,{fill:s,"font-style":"italic"},c))}},drawImage:Qv,drawEmbeddedImage:function(t,e,r,n){t=t.append("use"),t.attr("x",e),t.attr("y",r),e=z(n);t.attr("xlink:href","#"+e)},insertArrowHead:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowEnd:function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},insertArrowFilledHead:function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertDynamicNumber:function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead:function(t){t=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);t.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),t.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},insertDatabaseIcon:function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon:function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon:function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},getTextObj:function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},getNoteRect:tx,sanitizeUrl:z};function ix(t,e,r,n,i,a,o){sx(e.append("text").attr("x",r+i/2).attr("y",n+a/2+5).style("text-anchor","middle").text(t),o)}function ax(t,e,r,n,i,a,o,s){var{fontSize:c,fontFamily:l,fontWeight:u}=s,h=t.split(H4.lineBreakRegex);for(let t=0;t<h.length;t++){var d=t*c-c*(h.length-1)/2,f=e.append("text").attr("x",r+i/2).attr("y",n).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",c).style("font-weight",u).style("font-family",l);f.append("tspan").attr("dy",d).text(h[t]).attr("alignment-baseline","mathematical"),sx(f,o)}}function ox(t,e,r,n,i,a,o,s){e=e.append("switch"),a=e.append("foreignObject").attr("x",r).attr("y",n).attr("width",i).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");a.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),ax(t,e,r,n,i,0,o,s),sx(a,o)}function sx(t,e){for(const r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}let cx=0,lx=0,ux=4,hx=2,N=(Rv.yy=ex,{});class dx{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,fx(t.db.getConfig())}setData(t,e,r,n){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=e,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=n}updateVal(t,e,r,n){"u"<typeof t[e]?t[e]=r:t[e]=n(r,t[e])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let e=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+2*t.margin,r=e+t.width,n=this.nextData.starty+2*t.margin,i=n+t.height;(e>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>ux)&&(e=this.nextData.startx+t.margin+N.nextLinePaddingX,n=this.nextData.stopy+2*t.margin,this.nextData.stopx=r=e+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=i=n+t.height,this.nextData.cnt=1),t.x=e,t.y=n,this.updateVal(this.data,"startx",e,Math.min),this.updateVal(this.data,"starty",n,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",i,Math.max),this.updateVal(this.nextData,"startx",e,Math.min),this.updateVal(this.nextData,"starty",n,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",i,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},fx(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}}const fx=function(t){Lb(N,t),t.fontFamily&&(N.personFontFamily=N.systemFontFamily=N.messageFontFamily=t.fontFamily),t.fontSize&&(N.personFontSize=N.systemFontSize=N.messageFontSize=t.fontSize),t.fontWeight&&(N.personFontWeight=N.systemFontWeight=N.messageFontWeight=t.fontWeight)},px=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),gx=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight});function yx(e,r,t,n,i){if(!r[e].width)if(t)r[e].text=o_(r[e].text,i,n),r[e].textLines=r[e].text.split(H4.lineBreakRegex).length,r[e].width=i,r[e].height=c_(r[e].text,n);else{var a,o=r[e].text.split(H4.lineBreakRegex);r[e].textLines=o.length;r[e].height=0;for(let t=r[e].width=0;t<o.length;t++)r[e].width=Math.max(l_(o[t],n),r[e].width),a=c_(o[t],n),r[e].height=r[e].height+a}}function mx(t,e,r){e.x=r.data.startx,e.y=r.data.starty,e.width=r.data.stopx-r.data.startx,e.height=r.data.stopy-r.data.starty,e.label.y=N.c4ShapeMargin-35;var r=e.wrap&&N.wrap,n=gx(N),i=(n.fontSize=n.fontSize+2,n.fontWeight="bold",l_(e.label.text,n));yx("label",e,r,n,i),nx.drawBoundary(t,e,N)}function bx(n,i,a,o){let s=0;for(let r=0;r<o.length;r++){s=0;var c=a[o[r]],l=px(N,c.typeC4Shape.text);switch(l.fontSize=l.fontSize-2,c.typeC4Shape.width=l_("<<"+c.typeC4Shape.text+">>",l),c.typeC4Shape.height=l.fontSize+2,c.typeC4Shape.Y=N.c4ShapePadding,s=c.typeC4Shape.Y+c.typeC4Shape.height-4,c.image={width:0,height:0,Y:0},c.typeC4Shape.text){case"person":case"external_person":c.image.width=48,c.image.height=48,c.image.Y=s,s=c.image.Y+c.image.height}c.sprite&&(c.image.width=48,c.image.height=48,c.image.Y=s,s=c.image.Y+c.image.height);var l=c.wrap&&N.wrap,u=N.width-2*N.c4ShapePadding,h=px(N,c.typeC4Shape.text);h.fontSize=h.fontSize+2,h.fontWeight="bold",yx("label",c,l,h,u),c.label.Y=s+8,s=c.label.Y+c.label.height,c.type&&""!==c.type.text?(c.type.text="["+c.type.text+"]",yx("type",c,l,px(N,c.typeC4Shape.text),u),c.type.Y=s+5,s=c.type.Y+c.type.height):c.techn&&""!==c.techn.text&&(c.techn.text="["+c.techn.text+"]",yx("techn",c,l,px(N,c.techn.text),u),c.techn.Y=s+5,s=c.techn.Y+c.techn.height);let t=s,e=c.label.width;c.descr&&""!==c.descr.text&&(yx("descr",c,l,px(N,c.typeC4Shape.text),u),c.descr.Y=s+20,s=c.descr.Y+c.descr.height,e=Math.max(c.label.width,c.descr.width),t=s-5*c.descr.textLines),e+=N.c4ShapePadding,c.width=Math.max(c.width||N.width,e,N.width),c.height=Math.max(c.height||N.height,t,N.height),c.margin=c.margin||N.c4ShapeMargin,n.insert(c),nx.drawC4Shape(i,c,N)}n.bumpLastMargin(N.c4ShapeMargin)}class _x{constructor(t,e){this.x=t,this.y=e}}let vx=function(t,e){let r=t.x,n=t.y,i=e.x,a=e.y,o=r+t.width/2,s=n+t.height/2,c=Math.abs(r-i),l=Math.abs(n-a),u=l/c,h=t.height/t.width,d=null;return n==a&&r<i?d=new _x(r+t.width,s):n==a&&i<r?d=new _x(r,s):r==i&&n<a?d=new _x(o,n+t.height):r==i&&a<n&&(d=new _x(o,n)),i<r&&n<a?d=u<=h?new _x(r,s+u*t.width/2):new _x(o-c/l*t.height/2,n+t.height):r<i&&n<a?d=u<=h?new _x(r+t.width,s+u*t.width/2):new _x(o+c/l*t.height/2,n+t.height):r<i&&a<n?d=u<=h?new _x(r+t.width,s-u*t.width/2):new _x(o+t.height/2*c/l,n):i<r&&a<n&&(d=u<=h?new _x(r,s-t.width/2*u):new _x(o-t.height/2*c/l,n)),d};function xx(t,e,r,n){let i=0;for(var a of e){i+=1;var o=a.wrap&&N.wrap,s={fontFamily:(s=N).messageFontFamily,fontSize:s.messageFontSize,fontWeight:s.messageFontWeight};"C4Dynamic"===n.db.getC4Type()&&(a.label.text=i+": "+a.label.text);let t=l_(a.label.text,s);yx("label",a,o,s,t),a.techn&&""!==a.techn.text&&(t=l_(a.techn.text,s),yx("techn",a,o,s,t)),a.descr&&""!==a.descr.text&&(t=l_(a.descr.text,s),yx("descr",a,o,s,t));o=r(a.from),s=r(a.to),s=(o=o,l=c=void 0,(c={x:0,y:0}).x=(s=s).x+s.width/2,c.y=s.y+s.height/2,l=vx(o,c),c.x=o.x+o.width/2,c.y=o.y+o.height/2,o=vx(s,c),{startPoint:l,endPoint:o});a.startPoint=s.startPoint,a.endPoint=s.endPoint}var c,l;nx.drawRels(t,e,N)}const kx={drawPersonOrSystemArray:bx,drawBoundary:mx,setConf:fx,draw:function(t,e,r,n){N=V().c4;var i=V().securityLevel;let a;"sandbox"===i&&(a=H("#i"+e));var o=H("sandbox"===i?a.nodes()[0].contentDocument.body:"body"),s=n.db,s=(n.db.setWrap(N.wrap),ux=s.getC4ShapeInRow(),hx=s.getC4BoundaryInRow(),C.debug("C:"+JSON.stringify(N,null,2)),"sandbox"===i?o.select(`[id="${e}"]`):H(`[id="${e}"]`)),i=(nx.insertComputerIcon(s),nx.insertDatabaseIcon(s),nx.insertClockIcon(s),new dx(n)),o=(i.setData(N.diagramMarginX,N.diagramMarginX,N.diagramMarginY,N.diagramMarginY),i.data.widthLimit=screen.availWidth,cx=N.diagramMarginX,lx=N.diagramMarginY,n.db.getTitle()),n=(function n(i,a,o,s,c){var l=new dx(c);l.data.widthLimit=o.data.widthLimit/Math.min(hx,s.length);for(let r=0;r<s.length;r++){let t=s[r],e=0;t.image={width:0,height:0,Y:0},t.sprite&&(t.image.width=48,t.image.height=48,t.image.Y=e,e=t.image.Y+t.image.height);var u=t.wrap&&N.wrap,h=gx(N),u=(h.fontSize=h.fontSize+2,h.fontWeight="bold",yx("label",t,u,h,l.data.widthLimit),t.label.Y=e+8,e=t.label.Y+t.label.height,t.type&&""!==t.type.text&&(t.type.text="["+t.type.text+"]",h=gx(N),yx("type",t,u,h,l.data.widthLimit),t.type.Y=e+5,e=t.type.Y+t.type.height),t.descr&&""!==t.descr.text&&((h=gx(N)).fontSize=h.fontSize-2,yx("descr",t,u,h,l.data.widthLimit),t.descr.Y=e+20,e=t.descr.Y+t.descr.height),h=0==r||r%hx==0?(u=o.data.startx+N.diagramMarginX,o.data.stopy+N.diagramMarginY+e):(u=l.data.stopx!==l.data.startx?l.data.stopx+N.diagramMarginX:l.data.startx,l.data.starty),l.setData(u,u,h,h),l.name=t.alias,c.db.getC4ShapeArray(t.alias));0<(h=c.db.getC4ShapeKeys(t.alias)).length&&bx(l,i,u,h),a=t.alias,0<(u=c.db.getBoundarys(a)).length&&n(i,0,l,u,c),"global"!==t.alias&&mx(i,t,l),o.data.stopy=Math.max(l.data.stopy+N.c4ShapeMargin,o.data.stopy),o.data.stopx=Math.max(l.data.stopx+N.c4ShapeMargin,o.data.stopx),cx=Math.max(cx,o.data.stopx),lx=Math.max(lx,o.data.stopy)}}(s,0,i,n.db.getBoundarys(""),n),nx.insertArrowHead(s),nx.insertArrowEnd(s),nx.insertArrowCrossHead(s),nx.insertArrowFilledHead(s),xx(s,n.db.getRels(),n.db.getC4Shape,n),i.data.stopx=cx,i.data.stopy=lx,i.data),i=n.stopy-n.starty+2*N.diagramMarginY,c=n.stopx-n.startx+2*N.diagramMarginX,o=(o&&s.append("text").text(o).attr("x",(n.stopx-n.startx)/2-4*N.diagramMarginX).attr("y",n.starty+N.diagramMarginY),f6(s,i,c,N.useMaxWidth),o?60:0);s.attr("viewBox",n.startx-N.diagramMarginX+" -"+(N.diagramMarginY+o)+" "+c+" "+(i+o)),vv(Rv.yy,s,e),C.debug("models:",n)}};ny=[1,20],iy=[1,31],ay=[1,32],hy=[1,33],dy=[1,35],fy=[1,38],py=[1,36],Um=[1,37],Gm=[1,39],Zm=[1,40],Hm=[1,41],e3=[1,42],n3=[1,45],Jm=[1,46],_f=[1,47],Cf=[1,48],Af=[16,25],Nf=[1,62],Lf=[1,63],zf=[1,64],Uf=[1,65],Ff=[1,66],Wf=[1,67],Pf=[1,68],qf=[16,25,32,44,45,53,56,57,58,59,60,61,62,67,69],Hf=[16,25,30,32,44,45,49,53,56,57,58,59,60,61,62,67,69,84,85,86,87],jf=[5,8,9,10,11,16,19,23,25],Vf=[53,84,85,86,87],Yf=[53,61,62,84,85,86,87],Gf=[53,56,57,58,59,60,84,85,86,87],Xf=[16,25,32],Kf=[1,100],(Jf={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,acc_title:38,acc_title_value:39,acc_descr:40,acc_descr_value:41,acc_descr_multiline_value:42,CLASS:43,STYLE_SEPARATOR:44,STRUCT_START:45,members:46,STRUCT_STOP:47,ANNOTATION_START:48,ANNOTATION_END:49,MEMBER:50,SEPARATOR:51,relation:52,STR:53,relationType:54,lineType:55,AGGREGATION:56,EXTENSION:57,COMPOSITION:58,DEPENDENCY:59,LOLLIPOP:60,LINE:61,DOTTED_LINE:62,CALLBACK:63,LINK:64,LINK_TARGET:65,CLICK:66,CALLBACK_NAME:67,CALLBACK_ARGS:68,HREF:69,CSSCLASS:70,commentToken:71,textToken:72,graphCodeTokens:73,textNoTagsToken:74,TAGSTART:75,TAGEND:76,"==":77,"--":78,PCT:79,DEFAULT:80,SPACE:81,MINUS:82,keywords:83,UNICODE_TEXT:84,NUM:85,ALPHA:86,BQUOTE_STR:87,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",38:"acc_title",39:"acc_title_value",40:"acc_descr",41:"acc_descr_value",42:"acc_descr_multiline_value",43:"CLASS",44:"STYLE_SEPARATOR",45:"STRUCT_START",47:"STRUCT_STOP",48:"ANNOTATION_START",49:"ANNOTATION_END",50:"MEMBER",51:"SEPARATOR",53:"STR",56:"AGGREGATION",57:"EXTENSION",58:"COMPOSITION",59:"DEPENDENCY",60:"LOLLIPOP",61:"LINE",62:"DOTTED_LINE",63:"CALLBACK",64:"LINK",65:"LINK_TARGET",66:"CLICK",67:"CALLBACK_NAME",68:"CALLBACK_ARGS",69:"HREF",70:"CSSCLASS",73:"graphCodeTokens",75:"TAGSTART",76:"TAGEND",77:"==",78:"--",79:"PCT",80:"DEFAULT",81:"SPACE",82:"MINUS",83:"keywords",84:"UNICODE_TEXT",85:"NUM",86:"ALPHA",87:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[46,1],[46,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[52,3],[52,2],[52,2],[52,1],[54,1],[54,1],[54,1],[54,1],[54,1],[55,1],[55,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[71,1],[71,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[74,1],[74,1],[74,1],[74,1],[28,1],[28,1],[28,1],[29,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 5:n.setDirection("TB");break;case 6:n.setDirection("BT");break;case 7:n.setDirection("RL");break;case 8:n.setDirection("LR");break;case 12:n.parseDirective("%%{","open_directive");break;case 13:n.parseDirective(a[s],"type_directive");break;case 14:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 15:n.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=a[s];break;case 22:this.$=a[s-1]+a[s];break;case 23:case 24:this.$=a[s-1]+"~"+a[s];break;case 25:n.addRelation(a[s]);break;case 26:a[s-1].title=n.cleanupLabel(a[s]),n.addRelation(a[s-1]);break;case 34:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 35:case 36:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 37:n.addClass(a[s]);break;case 38:n.addClass(a[s-2]),n.setCssClass(a[s-2],a[s]);break;case 39:n.addClass(a[s-3]),n.addMembers(a[s-3],a[s-1]);break;case 40:n.addClass(a[s-5]),n.setCssClass(a[s-5],a[s-3]),n.addMembers(a[s-5],a[s-1]);break;case 41:n.addAnnotation(a[s],a[s-2]);break;case 42:this.$=[a[s]];break;case 43:a[s].push(a[s-1]),this.$=a[s];break;case 44:break;case 45:n.addMember(a[s-1],n.cleanupLabel(a[s]));break;case 46:case 47:break;case 48:this.$={id1:a[s-2],id2:a[s],relation:a[s-1],relationTitle1:"none",relationTitle2:"none"};break;case 49:this.$={id1:a[s-3],id2:a[s],relation:a[s-1],relationTitle1:a[s-2],relationTitle2:"none"};break;case 50:this.$={id1:a[s-3],id2:a[s],relation:a[s-2],relationTitle1:"none",relationTitle2:a[s-1]};break;case 51:this.$={id1:a[s-4],id2:a[s],relation:a[s-2],relationTitle1:a[s-3],relationTitle2:a[s-1]};break;case 52:this.$={type1:a[s-2],type2:a[s],lineType:a[s-1]};break;case 53:this.$={type1:"none",type2:a[s],lineType:a[s-1]};break;case 54:this.$={type1:a[s-1],type2:"none",lineType:a[s]};break;case 55:this.$={type1:"none",type2:"none",lineType:a[s]};break;case 56:this.$=n.relationType.AGGREGATION;break;case 57:this.$=n.relationType.EXTENSION;break;case 58:this.$=n.relationType.COMPOSITION;break;case 59:this.$=n.relationType.DEPENDENCY;break;case 60:this.$=n.relationType.LOLLIPOP;break;case 61:this.$=n.lineType.LINE;break;case 62:this.$=n.lineType.DOTTED_LINE;break;case 63:case 69:this.$=a[s-2],n.setClickEvent(a[s-1],a[s]);break;case 64:case 70:this.$=a[s-3],n.setClickEvent(a[s-2],a[s-1]),n.setTooltip(a[s-2],a[s]);break;case 65:case 73:this.$=a[s-2],n.setLink(a[s-1],a[s]);break;case 66:this.$=a[s-3],n.setLink(a[s-2],a[s-1],a[s]);break;case 67:case 75:this.$=a[s-3],n.setLink(a[s-2],a[s-1]),n.setTooltip(a[s-2],a[s]);break;case 68:case 76:this.$=a[s-4],n.setLink(a[s-3],a[s-2],a[s]),n.setTooltip(a[s-3],a[s-1]);break;case 71:this.$=a[s-3],n.setClickEvent(a[s-2],a[s-1],a[s]);break;case 72:this.$=a[s-4],n.setClickEvent(a[s-3],a[s-2],a[s-1]),n.setTooltip(a[s-3],a[s]);break;case 74:this.$=a[s-3],n.setLink(a[s-2],a[s-1],a[s]);break;case 77:n.setCssClass(a[s-1],a[s])}},table:[{3:1,4:2,5:Jf=[1,3],6:4,7:5,8:e2=[1,7],9:n2=[1,8],10:f2=[1,9],11:p2=[1,10],12:6,13:11,19:c2=[1,13],23:g2=[1,12]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:Jf,6:4,7:5,8:e2,9:n2,10:f2,11:p2,12:6,13:11,19:c2,23:g2},{1:[2,9]},D(l2=[1,16,25],[2,5]),D(l2,[2,6]),D(l2,[2,7]),D(l2,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:ny},D([17,22],[2,13]),{6:30,7:29,8:e2,9:n2,10:f2,11:p2,13:11,19:c2,24:21,26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:iy,40:ay,42:hy,43:dy,48:fy,50:py,51:Um,63:Gm,64:Zm,66:Hm,70:e3,84:n3,85:Jm,86:_f,87:Cf},{16:[1,49]},{18:50,21:[1,51]},{16:[2,15]},{25:[1,52]},{16:[1,53],25:[2,17]},D(Af,[2,25],{32:[1,54]}),D(Af,[2,27]),D(Af,[2,28]),D(Af,[2,29]),D(Af,[2,30]),D(Af,[2,31]),D(Af,[2,32]),D(Af,[2,33]),{39:[1,55]},{41:[1,56]},D(Af,[2,36]),D(Af,[2,44],{52:57,54:60,55:61,32:[1,59],53:[1,58],56:Nf,57:Lf,58:zf,59:Uf,60:Ff,61:Wf,62:Pf}),{27:69,28:43,29:44,84:n3,85:Jm,86:_f,87:Cf},D(Af,[2,46]),D(Af,[2,47]),{28:70,84:n3,85:Jm,86:_f},{27:71,28:43,29:44,84:n3,85:Jm,86:_f,87:Cf},{27:72,28:43,29:44,84:n3,85:Jm,86:_f,87:Cf},{27:73,28:43,29:44,84:n3,85:Jm,86:_f,87:Cf},{53:[1,74]},D(qf,[2,20],{28:43,29:44,27:75,30:[1,76],84:n3,85:Jm,86:_f,87:Cf}),D(qf,[2,21],{30:[1,77]}),D(Hf,[2,91]),D(Hf,[2,92]),D(Hf,[2,93]),D([16,25,30,32,44,45,53,56,57,58,59,60,61,62,67,69],[2,94]),D(jf,[2,10]),{15:78,22:ny},{22:[2,14]},{1:[2,16]},{6:30,7:29,8:e2,9:n2,10:f2,11:p2,13:11,19:c2,24:79,25:[2,18],26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:iy,40:ay,42:hy,43:dy,48:fy,50:py,51:Um,63:Gm,64:Zm,66:Hm,70:e3,84:n3,85:Jm,86:_f,87:Cf},D(Af,[2,26]),D(Af,[2,34]),D(Af,[2,35]),{27:80,28:43,29:44,53:[1,81],84:n3,85:Jm,86:_f,87:Cf},{52:82,54:60,55:61,56:Nf,57:Lf,58:zf,59:Uf,60:Ff,61:Wf,62:Pf},D(Af,[2,45]),{55:83,61:Wf,62:Pf},D(Vf,[2,55],{54:84,56:Nf,57:Lf,58:zf,59:Uf,60:Ff}),D(Yf,[2,56]),D(Yf,[2,57]),D(Yf,[2,58]),D(Yf,[2,59]),D(Yf,[2,60]),D(Gf,[2,61]),D(Gf,[2,62]),D(Af,[2,37],{44:[1,85],45:[1,86]}),{49:[1,87]},{53:[1,88]},{53:[1,89]},{67:[1,90],69:[1,91]},{28:92,84:n3,85:Jm,86:_f},D(qf,[2,22]),D(qf,[2,23]),D(qf,[2,24]),{16:[1,93]},{25:[2,19]},D(Xf,[2,48]),{27:94,28:43,29:44,84:n3,85:Jm,86:_f,87:Cf},{27:95,28:43,29:44,53:[1,96],84:n3,85:Jm,86:_f,87:Cf},D(Vf,[2,54],{54:97,56:Nf,57:Lf,58:zf,59:Uf,60:Ff}),D(Vf,[2,53]),{28:98,84:n3,85:Jm,86:_f},{46:99,50:Kf},{27:101,28:43,29:44,84:n3,85:Jm,86:_f,87:Cf},D(Af,[2,63],{53:[1,102]}),D(Af,[2,65],{53:[1,104],65:[1,103]}),D(Af,[2,69],{53:[1,105],68:[1,106]}),D(Af,[2,73],{53:[1,108],65:[1,107]}),D(Af,[2,77]),D(jf,[2,11]),D(Xf,[2,50]),D(Xf,[2,49]),{27:109,28:43,29:44,84:n3,85:Jm,86:_f,87:Cf},D(Vf,[2,52]),D(Af,[2,38],{45:[1,110]}),{47:[1,111]},{46:112,47:[2,42],50:Kf},D(Af,[2,41]),D(Af,[2,64]),D(Af,[2,66]),D(Af,[2,67],{65:[1,113]}),D(Af,[2,70]),D(Af,[2,71],{53:[1,114]}),D(Af,[2,74]),D(Af,[2,75],{65:[1,115]}),D(Xf,[2,51]),{46:116,50:Kf},D(Af,[2,39]),{47:[2,43]},D(Af,[2,68]),D(Af,[2,72]),D(Af,[2,76]),{47:[1,117]},D(Af,[2,40])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],51:[2,14],52:[2,16],79:[2,19],112:[2,43]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:case 10:break;case 11:return this.begin("acc_title"),38;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),40;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:case 21:return 23;case 22:return this.begin("struct"),45;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),47;case 27:break;case 28:return"MEMBER";case 29:return 43;case 30:return 70;case 31:return 63;case 32:return 64;case 33:return 66;case 34:return 48;case 35:return 49;case 36:this.begin("generic");break;case 37:this.popState();break;case 38:return"GENERICTYPE";case 39:this.begin("string");break;case 40:this.popState();break;case 41:return"STR";case 42:this.begin("bqstring");break;case 43:this.popState();break;case 44:return"BQUOTE_STR";case 45:this.begin("href");break;case 46:this.popState();break;case 47:return 69;case 48:this.begin("callback_name");break;case 49:this.popState();break;case 50:this.popState(),this.begin("callback_args");break;case 51:return 67;case 52:this.popState();break;case 53:return 68;case 54:case 55:case 56:case 57:return 65;case 58:case 59:return 57;case 60:case 61:return 59;case 62:return 58;case 63:return 56;case 64:return 60;case 65:return 61;case 66:return 62;case 67:return 32;case 68:return 44;case 69:return 82;case 70:return"DOT";case 71:return"PLUS";case 72:return 79;case 73:case 74:return"EQUALS";case 75:return 86;case 76:return"PUNCTUATION";case 77:return 85;case 78:return 84;case 79:return 81;case 80:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[52,53],inclusive:!1},callback_name:{rules:[49,50,51],inclusive:!1},href:{rules:[46,47],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[37,38],inclusive:!1},bqstring:{rules:[43,44],inclusive:!1},string:{rules:[40,41],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,39,42,45,48,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],inclusive:!0}}};var wx,Ex,Tx,Cx,Sx,Ax,Mx,Nx,Dx,Lx,Bx,Ox,Ix,Rx,Fx,Px,$x,jx,Yx,zx,Ux,Wx,qx,Hx,Vx,Gx,Xx,Zx,Kx,Qx,Jx,t8,e8=new((r8.prototype=Jf).Parser=r8);function D(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function r8(){this.yy={}}e8.parser=e8;const n8=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.class)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*classDiagram/)},i8=(t,e)=>{return null!==t.match(/^\s*classDiagram/)&&"dagre-wrapper"===(null==(e=null==e?void 0:e.class)?void 0:e.defaultRenderer)||null!==t.match(/^\s*classDiagram-v2/)},a8="classid-";let o8=[],s8={},c8=0,l8=[];function u8(t){let e="",r=t;return 0<t.indexOf("~")&&(t=t.split("~"),r=t[0],e=H4.sanitizeText(t[1],V())),{className:r,type:e}}function h8(t){t=u8(t),typeof s8[t.className]<"u"||(s8[t.className]={id:t.className,type:t.type,cssClasses:[],methods:[],members:[],annotations:[],domId:a8+t.className+"-"+c8},c8++)}function d8(t,e){t=u8(t).className,t=s8[t],"string"==typeof e&&((e=e.trim()).startsWith("<<")&&e.endsWith(">>")?t.annotations.push(g8(e.substring(2,e.length-2))):0<e.indexOf(")")?t.methods.push(g8(e)):e&&t.members.push(g8(e)))}function f8(t,r){t.split(",").forEach(function(t){let e=t;t[0].match(/\d/)&&(e=a8+e),typeof s8[e]<"u"&&s8[e].cssClasses.push(r)})}function p8(t){let r=H(".mermaidTooltip");null===(r._groups||r)[0][0]&&(r=H("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),H(t).select("svg").selectAll("g.node").on("mouseover",function(){var t,e=H(this);null!==e.attr("title")&&(t=this.getBoundingClientRect(),r.transition().duration(200).style("opacity",".9"),r.text(e.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),e.classed("hover",!0))}).on("mouseout",function(){r.transition().duration(500).style("opacity",0),H(this).classed("hover",!1)})}const g8=t=>H4.sanitizeText(t,V()),y8=function(e){var r=Object.keys(s8);for(let t=0;t<r.length;t++)if(s8[r[t]].id===e)return s8[r[t]].domId};l8.push(p8);let m8="TB";const b8={parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},setAccTitle:Z6,getAccTitle:K6,getAccDescription:J6,setAccDescription:Q6,getConfig:()=>V().class,addClass:h8,bindFunctions:function(e){l8.forEach(function(t){t(e)})},clear:function(){o8=[],s8={},(l8=[]).push(p8),X6()},getClass:function(t){return s8[t]},getClasses:function(){return s8},addAnnotation:function(t,e){t=u8(t).className;s8[t].annotations.push(e)},getRelations:function(){return o8},addRelation:function(t){C.debug("Adding relation: "+JSON.stringify(t)),h8(t.id1),h8(t.id2),t.id1=u8(t.id1).className,t.id2=u8(t.id2).className,t.relationTitle1=H4.sanitizeText(t.relationTitle1.trim(),V()),t.relationTitle2=H4.sanitizeText(t.relationTitle2.trim(),V()),o8.push(t)},getDirection:()=>m8,setDirection:t=>{m8=t},addMember:d8,addMembers:function(e,t){Array.isArray(t)&&(t.reverse(),t.forEach(t=>d8(e,t)))},cleanupLabel:function(t){return":"===t.substring(0,1)?H4.sanitizeText(t.substr(1).trim(),V()):g8(t.trim())},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setClickEvent:function(t,s,c){t.split(",").forEach(function(r){{var n=r,i=s,a=c,o=V();let t=n,e=y8(t);if("loose"===o.securityLevel&&!("u"<typeof i)&&typeof s8[t]<"u"){let r=[];if("string"==typeof a){r=a.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<r.length;e++){let t=r[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),r[e]=t}}0===r.length&&r.push(e),l8.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){g_.runFunc(i,...r)},!1)})}}s8[r].haveCallback=!0}),f8(t,"clickable")},setCssClass:f8,setLink:function(t,r,n){const i=V();t.split(",").forEach(function(t){let e=t;t[0].match(/\d/)&&(e=a8+e),typeof s8[e]<"u"&&(s8[e].link=g_.formatUrl(r,i),"sandbox"===i.securityLevel?s8[e].linkTarget="_top":s8[e].linkTarget="string"==typeof n?g8(n):"_blank")}),f8(t,"clickable")},getTooltip:function(t){return s8[t].tooltip},setTooltip:function(t,e){const r=V();t.split(",").forEach(function(t){typeof e<"u"&&(s8[t].tooltip=H4.sanitizeText(e,r))})},lookUpDomId:y8};function _8(){return Cx||(Cx=1,Tx=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t}),Tx}function v8(){return Ax||(Ax=1,Sx=function(t){return this.__data__.get(t)}),Sx}function x8(){return Nx||(Nx=1,Mx=function(t){return this.__data__.has(t)}),Mx}function k8(){var i,a,o;return Lx||(Lx=1,i=N5,a=D5,o=H5,Dx=function(t,e){var r=this.__data__;if(r instanceof i){var n=r.__data__;if(!a||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new o(n)}return r.set(t,e),this.size=r.size,this}),Dx}function w8(){var e,t,r,n,i,a,o;return Ox||(Ox=1,e=N5,Ex||(Ex=1,o=N5,wx=function(){this.__data__=new o,this.size=0}),t=wx,r=_8(),n=v8(),i=x8(),a=k8(),s.prototype.clear=t,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,Bx=s),Bx;function s(t){t=this.__data__=new e(t);this.size=t.size}}function E8(){return Rx||(Rx=1,Ix=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}),Ix}function T8(){var e,t;return Px||(Px=1,e=a5,t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Fx=t),Fx}function C8(){var n;return jx||(jx=1,n=T8(),$x=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}),$x}function S8(){var i,a,o;return zx||(zx=1,i=C8(),a=m5,o=Object.prototype.hasOwnProperty,Yx=function(t,e,r){var n=t[e];o.call(t,e)&&a(n,r)&&(void 0!==r||e in t)||i(t,e,r)}),Yx}function A8(){var l,u;return Wx||(Wx=1,l=S8(),u=C8(),Ux=function(t,e,r,n){var i=!r;r=r||{};for(var a=-1,o=e.length;++a<o;){var s=e[a],c=n?n(r[s],t[s],s,r,t):void 0;void 0===c&&(c=t[s]),(i?u:l)(r,s,c)}return r}),Ux}function M8(){return Hx||(Hx=1,qx=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}),qx}function N8(){return Gx||(Gx=1,Vx=function(t){return null!=t&&"object"==typeof t}),Vx}function D8(){var e,r;return Zx||(Zx=1,e=Ub,r=N8(),Xx=function(t){return r(t)&&"[object Arguments]"==e(t)}),Xx}function L8(){var t,e,r,n,i;return Qx||(Qx=1,t=D8(),e=N8(),i=Object.prototype,r=i.hasOwnProperty,n=i.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(t){return e(t)&&r.call(t,"callee")&&!n.call(t,"callee")},Kx=i),Kx}function B8(){var t;return t8||(t8=1,t=Array.isArray,Jx=t),Jx}var O8,I8,R8,F8,P8,$8,j8,Y8,z8,U8,W8,q8={exports:{}};function H8(){return R8||(R8=1,e=(t=q8).exports,r=Ob,I8||(I8=1,O8=function(){return!1}),n=O8,e=e&&!e.nodeType&&e,i=(i=e&&t&&!t.nodeType&&t)&&i.exports===e?r.Buffer:void 0,e=i?i.isBuffer:void 0,t.exports=e||n),q8.exports;var t,e,r,n,i}function V8(){var n;return P8||(P8=1,n=/^(?:0|[1-9]\d*)$/,F8=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&-1<t&&t%1==0&&t<e}),F8}function G8(){return j8||(j8=1,$8=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}),$8}function X8(){var e,r,n,i;return z8||(z8=1,e=Ub,r=G8(),n=N8(),(i={})["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,Y8=function(t){return n(t)&&r(t.length)&&!!i[e(t)]}),Y8}function Z8(){return W8||(W8=1,U8=function(e){return function(t){return e(t)}}),U8}var K8,Q8,J8,t7,e7,r7,n7,i7,a7,o7,s7,c7,l7,u7,h7,d7,f7,p7,g7,y7,m7,b7,_7,v7,x7,k7,w7,E7={exports:{}};function T7(){return K8||(K8=1,e=(t=E7).exports,r=Bb,e=e&&!e.nodeType&&e,n=e&&t&&!t.nodeType&&t,i=n&&n.exports===e&&r.process,e=function(){try{return n&&n.require&&n.require("util").types||i&&i.binding&&i.binding("util")}catch{}}(),t.exports=e),E7.exports;var t,e,r,n,i}function C7(){var t,e,r;return J8||(J8=1,t=X8(),r=Z8(),r=(e=(e=T7())&&e.isTypedArray)?r(e):t,Q8=r),Q8}function S7(){var u,h,d,f,p,g,y;return e7||(e7=1,u=M8(),h=L8(),d=B8(),f=H8(),p=V8(),g=C7(),y=Object.prototype.hasOwnProperty,t7=function(t,e){var r,n=d(t),i=!n&&h(t),a=!n&&!i&&f(t),o=!n&&!i&&!a&&g(t),s=n||i||a||o,c=s?u(t.length,String):[],l=c.length;for(r in t)!e&&!y.call(t,r)||s&&("length"==r||a&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||p(r,l))||c.push(r);return c}),t7}function A7(){var r;return n7||(n7=1,r=Object.prototype,r7=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}),r7}function M7(){return a7||(a7=1,i7=function(e,r){return function(t){return e(r(t))}}),i7}function N7(){var n,i,a,t;return l7||(l7=1,n=A7(),s7||(s7=1,t=M7()(Object.keys,Object),o7=t),i=o7,a=Object.prototype.hasOwnProperty,c7=function(t){if(!n(t))return i(t);var e,r=[];for(e in Object(t))a.call(t,e)&&"constructor"!=e&&r.push(e);return r}),c7}function D7(){var e,r;return h7||(h7=1,e=Vb,r=G8(),u7=function(t){return null!=t&&r(t.length)&&!e(t)}),u7}function L7(){var e,r,n;return f7||(f7=1,e=S7(),r=N7(),n=D7(),d7=function(t){return(n(t)?e:r)(t)}),d7}function B7(){var r,n;return g7||(g7=1,r=A8(),n=L7(),p7=function(t,e){return t&&r(e,n(e),t)}),p7}function O7(){return m7||(m7=1,y7=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}),y7}function I7(){var i,a,o,s;return _7||(_7=1,i=Wb,a=A7(),o=O7(),s=Object.prototype.hasOwnProperty,b7=function(t){if(!i(t))return o(t);var e,r=a(t),n=[];for(e in t)("constructor"!=e||!r&&s.call(t,e))&&n.push(e);return n}),b7}function R7(){var e,r,n;return x7||(x7=1,e=S7(),r=I7(),n=D7(),v7=function(t){return n(t)?e(t,!0):r(t)}),v7}function F7(){var r,n;return w7||(w7=1,r=A8(),n=R7(),k7=function(t,e){return t&&r(e,n(e),t)}),k7}var P7,$7,j7,Y7,z7,U7,W7,q7,H7,V7,G7,X7,Z7,K7,Q7,J7,tk,ek,rk,nk,ik,ak,ok,sk,ck,lk,uk,hk,dk,fk,pk,gk,yk,mk,bk,_k,vk,xk,kk,wk,Ek,Tk,Ck,Sk,Ak,Mk,Nk,Dk,Lk,Bk,Ok,Ik,Rk,Fk,Pk,$k,jk,Yk,zk,Uk,Wk,qk,Hk,Vk,Gk,Xk,Zk,Kk,Qk,Jk={exports:{}};function t9(){return P7||(P7=1,e=(t=Jk).exports,r=Ob,e=e&&!e.nodeType&&e,n=(n=e&&t&&!t.nodeType&&t)&&n.exports===e?r.Buffer:void 0,i=n?n.allocUnsafe:void 0,t.exports=function(t,e){return e?t.slice():(e=t.length,e=i?i(e):new t.constructor(e),t.copy(e),e)}),Jk.exports;var t,e,r,n,i}function e9(){return j7||(j7=1,$7=function(t,e){var r=-1,n=t.length;for(e=e||Array(n);++r<n;)e[r]=t[r];return e}),$7}function r9(){return z7||(z7=1,Y7=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}),Y7}function n9(){return W7||(W7=1,U7=function(){return[]}),U7}function i9(){var t,e,r,n;return H7||(H7=1,t=r9(),e=n9(),r=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols,q7=n?function(e){return null==e?[]:(e=Object(e),t(n(e),function(t){return r.call(e,t)}))}:e),q7}function a9(){var r,n;return G7||(G7=1,r=A8(),n=i9(),V7=function(t,e){return r(t,n(t),e)}),V7}function o9(){return Z7||(Z7=1,X7=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}),X7}function s9(){var t;return Q7||(Q7=1,t=M7()(Object.getPrototypeOf,Object),K7=t),K7}function c9(){var r,n,i,t,e;return tk||(tk=1,r=o9(),n=s9(),i=i9(),t=n9(),e=Object.getOwnPropertySymbols,J7=e?function(t){for(var e=[];t;)r(e,i(t)),t=n(t);return e}:t),J7}function l9(){var r,n;return rk||(rk=1,r=A8(),n=c9(),ek=function(t,e){return r(t,n(t),e)}),ek}function u9(){var n,i;return ik||(ik=1,n=o9(),i=B8(),nk=function(t,e,r){return e=e(t),i(t)?e:n(e,r(t))}),nk}function h9(){var e,r,n;return ok||(ok=1,e=u9(),r=i9(),n=L7(),ak=function(t){return e(t,n,r)}),ak}function d9(){var e,r,n;return ck||(ck=1,e=u9(),r=c9(),n=R7(),sk=function(t){return e(t,n,r)}),sk}function f9(){var t;return pk||(pk=1,t=a5(Ob,"Set"),fk=t),fk}function p9(){var t,e,r,n,i,a,o,s,c,l,u,h,d,f,p,g,y,m;return bk||(bk=1,uk||(uk=1,m=a5(Ob,"DataView"),lk=m),m=lk,t=D5,dk||(dk=1,y=a5(Ob,"Promise"),hk=y),y=hk,e=f9(),yk||(yk=1,g=a5(Ob,"WeakMap"),gk=g),g=gk,r=Ub,i="[object Map]",a="[object Promise]",o="[object Set]",s="[object WeakMap]",c="[object DataView]",l=(n=Zb)(m),u=n(t),h=n(y),d=n(e),f=n(g),p=r,(m&&p(new m(new ArrayBuffer(1)))!=c||t&&p(new t)!=i||y&&p(y.resolve())!=a||e&&p(new e)!=o||g&&p(new g)!=s)&&(p=function(t){var e=r(t),t="[object Object]"==e?t.constructor:void 0,t=t?n(t):"";if(t)switch(t){case l:return c;case u:return i;case h:return a;case d:return o;case f:return s}return e}),mk=p),mk}function g9(){var n;return vk||(vk=1,n=Object.prototype.hasOwnProperty,_k=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}),_k}function y9(){var t;return kk||(kk=1,t=Ob.Uint8Array,xk=t),xk}function m9(){var r;return Ek||(Ek=1,r=y9(),wk=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}),wk}function b9(){var r;return Ck||(Ck=1,r=m9(),Tk=function(t,e){return e=e?r(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.byteLength)}),Tk}function _9(){var r;return Ak||(Ak=1,r=/\w*$/,Sk=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}),Sk}function v9(){var t,e;return Nk||(Nk=1,t=Ib?Ib.prototype:void 0,e=t?t.valueOf:void 0,Mk=function(t){return e?Object(e.call(t)):{}}),Mk}function x9(){var r;return Lk||(Lk=1,r=m9(),Dk=function(t,e){return e=e?r(t.buffer):t.buffer,new t.constructor(e,t.byteOffset,t.length)}),Dk}function k9(){var i,a,o,s,c;return Ok||(Ok=1,i=m9(),a=b9(),o=_9(),s=v9(),c=x9(),Bk=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return i(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return a(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return o(t);case"[object Set]":return new n;case"[object Symbol]":return s(t)}}),Bk}function w9(){var e,r;return Rk||(Rk=1,e=Wb,r=Object.create,Ik=function(t){if(!e(t))return{};if(r)return r(t);n.prototype=t;t=new n;return n.prototype=void 0,t}),Ik;function n(){}}function E9(){var e,r,n;return Pk||(Pk=1,e=w9(),r=s9(),n=A7(),Fk=function(t){return"function"!=typeof t.constructor||n(t)?{}:e(r(t))}),Fk}function T9(){var e,r;return jk||(jk=1,e=p9(),r=N8(),$k=function(t){return r(t)&&"[object Map]"==e(t)}),$k}function C9(){var e,r;return Wk||(Wk=1,e=p9(),r=N8(),Uk=function(t){return r(t)&&"[object Set]"==e(t)}),Uk}function S9(){var p,g,y,m,b,_,v,x,k,w,E,T,C,S,A,M,N,D,L,B,O,I,R,F,P,$,t,e,r;return Gk||(Gk=1,p=w8(),g=E8(),y=S8(),m=B7(),b=F7(),_=t9(),v=e9(),x=a9(),k=l9(),w=h9(),E=d9(),T=p9(),C=g9(),S=k9(),A=E9(),M=B8(),N=H8(),zk||(zk=1,t=T9(),r=Z8(),r=(e=(e=T7())&&e.isMap)?r(e):t,Yk=r),D=Yk,L=Wb,Hk||(Hk=1,e=C9(),t=Z8(),t=(r=(r=T7())&&r.isSet)?t(r):e,qk=t),B=qk,O=L7(),I=R7(),F="[object Function]",($={})[R="[object Arguments]"]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object DataView]"]=$["[object Boolean]"]=$["[object Date]"]=$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Map]"]=$["[object Number]"]=$[P="[object Object]"]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object Symbol]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Error]"]=$[F]=$["[object WeakMap]"]=!1,Vk=function r(n,i,a,t,e,o){var s,c=1&i,l=2&i,u=4&i;if(void 0===(s=a?e?a(n,t,e,o):a(n):s)){if(!L(n))return n;if(t=M(n)){if(s=C(n),!c)return v(n,s)}else{var h=T(n),d=h==F||"[object GeneratorFunction]"==h;if(N(n))return _(n,c);if(h==P||h==R||d&&!e){if(s=l||d?{}:A(n),!c)return l?k(n,b(s,n)):x(n,m(s,n))}else{if(!$[h])return e?n:{};s=S(n,h,c)}}if(d=(o=o||new p).get(n))return d;o.set(n,s),B(n)?n.forEach(function(t){s.add(r(t,i,a,t,n,o))}):D(n)&&n.forEach(function(t,e){s.set(e,r(t,i,a,e,n,o))});var f=t?void 0:(u?l?E:w:l?I:O)(n);g(f||n,function(t,e){f&&(t=n[e=t]),y(s,e,r(t,i,a,e,n,o))})}return s}),Vk}function A9(){var e;return Zk||(Zk=1,e=S9(),Xk=function(t){return e(t,4)}),Xk}function M9(){return Qk||(Qk=1,Kk=function(t){return function(){return t}}),Kk}var N9,D9,L9,B9,O9,I9,R9,F9,P9,$9,j9,Y9,z9,U9,W9,q9,H9,V9,G9,X9,Z9,K9,Q9,J9,tw,ew,rw,nw,iw,aw,ow,sw,cw,lw,uw,hw,dw,fw,pw,gw,yw,mw,bw,_w,vw,xw,kw,ww,Ew,Tw,Cw,Sw,Aw,Mw,Nw,Dw,Lw,Bw,Ow,Iw,Rw,Fw,Pw,$w,jw,Yw,zw,Uw,Ww,qw,Hw,Vw,Gw,Xw,Zw,Kw,Qw,Jw,tE,eE,rE,nE,iE,aE,oE,sE,cE,lE,uE,hE,dE,fE,pE,gE,yE,mE,bE,_E,vE,xE,kE,wE,EE,TE,CE,SE,AE,ME,NE,DE,LE,BE,OE,IE,RE,FE,PE,$E,jE,YE,zE,UE,WE,qE,HE,VE,GE,XE,ZE,KE,QE,JE,tT,eT,rT,nT,iT,aT,oT,sT,cT,lT,uT,hT,dT,fT,pT,gT,yT,mT,bT,_T,vT,xT,kT,wT,ET,TT,CT,ST,AT,MT,NT,DT,LT,BT,OT,IT,RT,FT={exports:{}};function PT(){return D9||(D9=1,N9=function(c){return function(t,e,r){for(var n=-1,i=Object(t),a=r(t),o=a.length;o--;){var s=a[c?o:++n];if(!1===e(i[s],s,i))break}return t}}),N9}function $T(){var t;return B9||(B9=1,t=PT()(),L9=t),L9}function jT(){var r,n;return I9||(I9=1,r=$T(),n=L7(),O9=function(t,e){return t&&r(t,e,n)}),O9}function YT(){var s;return F9||(F9=1,s=D7(),R9=function(a,o){return function(t,e){if(null!=t){if(!s(t))return a(t,e);for(var r=t.length,n=o?r:-1,i=Object(t);(o?n--:++n<r)&&!1!==e(i[n],n,i););}return t}}),R9}function zT(){var t;return $9||($9=1,t=jT(),t=YT()(t),P9=t),P9}function UT(){return Y9||(Y9=1,j9=function(t){return t}),j9}function WT(){var e;return U9||(U9=1,e=UT(),z9=function(t){return"function"==typeof t?t:e}),z9}function qT(){var r,n,i,a;return q9||(q9=1,r=E8(),n=zT(),i=WT(),a=B8(),W9=function(t,e){return(a(t)?r:n)(t,i(e))}),W9}function HT(){return H9||(H9=1,FT.exports=qT()),FT.exports}function VT(){var e;return G9||(G9=1,e=zT(),V9=function(t,n){var i=[];return e(t,function(t,e,r){n(t,e,r)&&i.push(t)}),i}),V9}function GT(){return Z9||(Z9=1,X9=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}),X9}function XT(){return Q9||(Q9=1,K9=function(t){return this.__data__.has(t)}),K9}function ZT(){var n,t,e;return tw||(tw=1,n=H5,t=GT(),e=XT(),r.prototype.add=r.prototype.push=t,r.prototype.has=e,J9=r),J9;function r(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}}function KT(){return rw||(rw=1,ew=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}),ew}function QT(){return iw||(iw=1,nw=function(t,e){return t.has(e)}),nw}function JT(){var y,m,b;return ow||(ow=1,y=ZT(),m=KT(),b=QT(),aw=function(t,e,r,n,i,a){var o=1&r,s=t.length,c=e.length;if(s!=c&&!(o&&s<c))return!1;var c=a.get(t),l=a.get(e);if(c&&l)return c==e&&l==t;var u=-1,h=!0,d=2&r?new y:void 0;for(a.set(t,e),a.set(e,t);++u<s;){var f,p=t[u],g=e[u];if(void 0!==(f=n?o?n(g,p,u,e,t,a):n(p,g,u,t,e,a):f)){if(f)continue;h=!1;break}if(d){if(!m(e,function(t,e){if(!b(d,e)&&(p===t||i(p,t,r,n,a)))return d.push(e)})){h=!1;break}}else if(p!==g&&!i(p,g,r,n,a)){h=!1;break}}return a.delete(t),a.delete(e),h}),aw}function tC(){return cw||(cw=1,sw=function(t){var r=-1,n=Array(t.size);return t.forEach(function(t,e){n[++r]=[e,t]}),n}),sw}function eC(){return uw||(uw=1,lw=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}),lw}function rC(){var l,u,h,d,f,t,p;return dw||(dw=1,t=Ib,l=y9(),u=m5,h=JT(),d=tC(),f=eC(),t=t?t.prototype:void 0,p=t?t.valueOf:void 0,hw=function(t,e,r,n,i,a,o){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new l(t),new l(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return u(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=d;case"[object Set]":s=s||f;if(t.size!=e.size&&!(1&n))return!1;var c=o.get(t);if(c)return c==e;n|=2,o.set(t,e);c=h(s(t),s(e),n,i,a,o);return o.delete(t),c;case"[object Symbol]":if(p)return p.call(t)==p.call(e)}return!1}),hw}function nC(){var b,_;return pw||(pw=1,b=h9(),_=Object.prototype.hasOwnProperty,fw=function(t,e,r,n,i,a){var o=1&r,s=b(t),c=s.length;if(c!=b(e).length&&!o)return!1;for(var l=c;l--;){var u=s[l];if(!(o?u in e:_.call(e,u)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var f=!0;a.set(t,e),a.set(e,t);for(var p=o;++l<c;){var g,y=t[u=s[l]],m=e[u];if(!(void 0===(g=n?o?n(m,y,u,e,t,a):n(y,m,u,t,e,a):g)?y===m||i(y,m,r,n,a):g)){f=!1;break}p=p||"constructor"==u}return f&&!p&&(h=t.constructor)!=(d=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof h&&h instanceof h&&"function"==typeof d&&d instanceof d)&&(f=!1),a.delete(t),a.delete(e),f}),fw}function iC(){var h,d,f,p,g,y,m,b,_,v,x,k;return yw||(yw=1,h=w8(),d=JT(),f=rC(),p=nC(),g=p9(),y=B8(),m=H8(),b=C7(),_="[object Arguments]",v="[object Array]",x="[object Object]",k=Object.prototype.hasOwnProperty,gw=function(t,e,r,n,i,a){var o=y(t),s=y(e),c=o?v:g(t),s=s?v:g(e),l=(c=c==_?x:c)==x,u=(s=s==_?x:s)==x;if((s=c==s)&&m(t)){if(!m(e))return!1;l=!(o=!0)}if(s&&!l)return a=a||new h,o||b(t)?d(t,e,r,n,i,a):f(t,e,c,r,n,i,a);if(!(1&r)){o=l&&k.call(t,"__wrapped__"),c=u&&k.call(e,"__wrapped__");if(o||c)return i(o?t.value():t,c?e.value():e,r,n,a=a||new h)}return s&&(a=a||new h,p(t,e,r,n,i,a))}),gw}function aC(){var o,s;return bw||(bw=1,o=iC(),s=N8(),mw=function t(e,r,n,i,a){return e===r||(null==e||null==r||!s(e)&&!s(r)?e!=e&&r!=r:o(e,r,n,i,t,a))}),mw}function oC(){var f,p;return vw||(vw=1,f=w8(),p=aC(),_w=function(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var c=(s=r[i])[0],l=t[c],u=s[1];if(o&&s[2]){if(void 0===l&&!(c in t))return!1}else{var h,d=new f;if(!(void 0===(h=n?n(l,u,c,t,e,d):h)?p(u,l,3,n,d):h))return!1}}return!0}),_w}function sC(){var e;return kw||(kw=1,e=Wb,xw=function(t){return t==t&&!e(t)}),xw}function cC(){var a,o;return Ew||(Ew=1,a=sC(),o=L7(),ww=function(t){for(var e=o(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,a(i)]}return e}),ww}function lC(){return Cw||(Cw=1,Tw=function(e,r){return function(t){return null!=t&&t[e]===r&&(void 0!==r||e in Object(t))}}),Tw}function uC(){var n,t,i;return Aw||(Aw=1,n=oC(),t=cC(),i=lC(),Sw=function(e){var r=t(e);return 1==r.length&&r[0][2]?i(r[0][0],r[0][1]):function(t){return t===e||n(t,e,r)}}),Sw}function hC(){var e,r;return Nw||(Nw=1,e=Ub,r=N8(),Mw=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==e(t)}),Mw}function dC(){var n,i,a,o;return Lw||(Lw=1,n=B8(),i=hC(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,Dw=function(t,e){var r;return!n(t)&&(!("number"!=(r=typeof t)&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||o.test(t)||!a.test(t)||null!=e&&t in Object(e))}),Dw}function fC(){var r;return Ow||(Ow=1,r=X5,Bw=function(t){var e=(t=r(t,function(t){return 500===e.size&&e.clear(),t})).cache;return t}),Bw}function pC(){return Pw||(Pw=1,Fw=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}),Fw}function gC(){var n,i,a,t,o;return jw||(jw=1,t=Ib,n=pC(),i=B8(),a=hC(),t=t?t.prototype:void 0,o=t?t.toString:void 0,$w=function t(e){var r;return"string"==typeof e?e:i(e)?n(e,t)+"":a(e)?o?o.call(e):"":"0"==(r=e+"")&&1/e==-1/0?"-0":r}),$w}function yC(){var e;return zw||(zw=1,e=gC(),Yw=function(t){return null==t?"":e(t)}),Yw}function mC(){var r,n,i,a,e,o,t;return Ww||(Ww=1,r=B8(),n=dC(),Rw||(Rw=1,t=fC(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,t=t(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(e,function(t,e,r,n){i.push(r?n.replace(o,"$1"):e||t)}),i}),Iw=t),i=Iw,a=yC(),Uw=function(t,e){return r(t)?t:n(t,e)?[t]:i(a(t))}),Uw}function bC(){var r;return Hw||(r=hC(),Hw=1,qw=function(t){var e;return"string"==typeof t||r(t)?t:"0"==(e=t+"")&&1/t==-1/0?"-0":e}),qw}function _C(){var i,a;return Gw||(Gw=1,i=mC(),a=bC(),Vw=function(t,e){for(var r=0,n=(e=i(e,t)).length;null!=t&&r<n;)t=t[a(e[r++])];return r&&r==n?t:void 0}),Vw}function vC(){var n;return Zw||(Zw=1,n=_C(),Xw=function(t,e,r){return void 0===(t=null==t?void 0:n(t,e))?r:t}),Xw}function xC(){return Qw||(Qw=1,Kw=function(t,e){return null!=t&&e in Object(t)}),Kw}function kC(){var s,c,l,u,h,d;return tE||(tE=1,s=mC(),c=L8(),l=B8(),u=V8(),h=G8(),d=bC(),Jw=function(t,e,r){for(var n=-1,i=(e=s(e,t)).length,a=!1;++n<i;){var o=d(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&h(i)&&u(o,i)&&(l(t)||c(t))}),Jw}function wC(){var r,n;return rE||(rE=1,r=xC(),n=kC(),eE=function(t,e){return null!=t&&n(t,e,r)}),eE}function EC(){var i,a,o,t,e,s,c;return iE||(iE=1,i=aC(),a=vC(),o=wC(),t=dC(),e=sC(),s=lC(),c=bC(),nE=function(r,n){return t(r)&&e(n)?s(c(r),n):function(t){var e=a(t,r);return void 0===e&&e===n?o(t,r):i(n,e,3)}}),nE}function TC(){return oE||(oE=1,aE=function(e){return function(t){return null==t?void 0:t[e]}}),aE}function CC(){var r;return cE||(cE=1,r=_C(),sE=function(e){return function(t){return r(t,e)}}),sE}function SC(){var e,r,n,i;return uE||(uE=1,e=TC(),r=CC(),n=dC(),i=bC(),lE=function(t){return n(t)?e(i(t)):r(t)}),lE}function AC(){var e,r,n,i,a;return dE||(dE=1,e=uC(),r=EC(),n=UT(),i=B8(),a=SC(),hE=function(t){return"function"==typeof t?t:null==t?n:"object"==typeof t?i(t)?r(t[0],t[1]):e(t):a(t)}),hE}function MC(){var r,n,i,a;return pE||(pE=1,r=r9(),n=VT(),i=AC(),a=B8(),fE=function(t,e){return(a(t)?r:n)(t,i(e,3))}),fE}function NC(){var r;return yE||(yE=1,r=Object.prototype.hasOwnProperty,gE=function(t,e){return null!=t&&r.call(t,e)}),gE}function DC(){var r,n;return bE||(bE=1,r=NC(),n=kC(),mE=function(t,e){return null!=t&&n(t,e,r)}),mE}function LC(){var n,i,a,o,s,c,l,u,h;return vE||(vE=1,n=N7(),i=p9(),a=L8(),o=B8(),s=D7(),c=H8(),l=A7(),u=C7(),h=Object.prototype.hasOwnProperty,_E=function(t){if(null!=t){if(s(t)&&(o(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||u(t)||a(t)))return!t.length;var e,r=i(t);if("[object Map]"==r||"[object Set]"==r)return!t.size;if(l(t))return!n(t).length;for(e in t)if(h.call(t,e))return!1}return!0}),_E}function BC(){return kE||(kE=1,xE=function(t){return void 0===t}),xE}function OC(){var e,r;return EE||(EE=1,e=zT(),r=D7(),wE=function(t,n){var i=-1,a=r(t)?Array(t.length):[];return e(t,function(t,e,r){a[++i]=n(t,e,r)}),a}),wE}function IC(){var r,n,i,a;return CE||(CE=1,r=pC(),n=AC(),i=OC(),a=B8(),TE=function(t,e){return(a(t)?r:i)(t,n(e,3))}),TE}function RC(){return AE||(AE=1,SE=function(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}),SE}function FC(){return NE||(NE=1,ME=function(t,n,i,a,e){return e(t,function(t,e,r){i=a?(a=!1,t):n(i,t,e,r)}),i}),ME}function PC(){var a,o,s,c,l;return LE||(LE=1,a=RC(),o=zT(),s=AC(),c=FC(),l=B8(),DE=function(t,e,r){var n=l(t)?a:c,i=arguments.length<3;return n(t,s(e,4),r,i,o)}),DE}function $C(){var e,r,n;return OE||(OE=1,e=Ub,r=B8(),n=N8(),BE=function(t){return"string"==typeof t||!r(t)&&n(t)&&"[object String]"==e(t)}),BE}function jC(){var e;return PE||(PE=1,e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),FE=function(t){return e.test(t)}),FE}function YC(){var t,e,r,n,i,a,o,s,c;return jE||(jE=1,t="["+(n="\\ud800-\\udfff")+"]",e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",o=(o="[\\ufe0e\\ufe0f]?")+(s="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?")+("(?:\\u200d(?:"+[n="[^"+n+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+o+s+")*"),s="(?:"+[n+e+"?",e,i,a,t].join("|")+")",c=RegExp(r+"(?="+r+")|"+s+o,"g"),$E=function(t){for(var e=c.lastIndex=0;c.test(t);)++e;return e}),$E}function zC(){var e,r,n,t;return zE||(zE=1,RE||(RE=1,t=TC()("length"),IE=t),e=IE,r=jC(),n=YC(),YE=function(t){return(r(t)?n:e)(t)}),YE}function UC(){var r,n,i,a,o;return WE||(WE=1,r=N7(),n=p9(),i=D7(),a=$C(),o=zC(),UE=function(t){var e;return null==t?0:i(t)?a(t)?o(t):t.length:"[object Map]"==(e=n(t))||"[object Set]"==e?t.size:r(t).length}),UE}function WC(){var o,s,c,l,u,h,d,f,p,g;return HE||(HE=1,o=E8(),s=w9(),c=jT(),l=AC(),u=s9(),h=B8(),d=H8(),f=Vb,p=Wb,g=C7(),qE=function(t,n,i){var e,r=h(t),a=r||d(t)||g(t);return n=l(n,4),null==i&&(e=t&&t.constructor,i=a?r?new e:[]:p(t)&&f(e)?s(u(t)):{}),(a?o:c)(t,function(t,e,r){return n(i,t,e,r)}),i}),qE}function qC(){var t,e,r,n;return GE||(GE=1,t=Ib,e=L8(),r=B8(),n=t?t.isConcatSpreadable:void 0,VE=function(t){return r(t)||e(t)||!!(n&&t&&t[n])}),VE}function HC(){var l,u;return ZE||(ZE=1,l=o9(),u=qC(),XE=function t(e,r,n,i,a){var o=-1,s=e.length;for(n=n||u,a=a||[];++o<s;){var c=e[o];0<r&&n(c)?1<r?t(c,r-1,n,i,a):l(a,c):i||(a[a.length]=c)}return a}),XE}function VC(){return QE||(QE=1,KE=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}),KE}function GC(){var c,l;return tT||(tT=1,c=VC(),l=Math.max,JE=function(a,o,s){return o=l(void 0===o?a.length-1:o,0),function(){for(var t=arguments,e=-1,r=l(t.length-o,0),n=Array(r);++e<r;)n[e]=t[o+e];for(var e=-1,i=Array(o+1);++e<o;)i[e]=t[e];return i[o]=s(n),c(a,this,i)}}),JE}function XC(){var a;return iT||(iT=1,a=Date.now,nT=function(r){var n=0,i=0;return function(){var t=a(),e=16-(t-i);if(i=t,0<e){if(800<=++n)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}),nT}function ZC(){var t,r,n,e;return oT||(oT=1,rT||(rT=1,r=M9(),n=T8(),e=UT(),eT=n?function(t,e){return n(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:e),e=eT,t=XC()(e),aT=t),aT}function KC(){var r,n,i;return cT||(cT=1,r=UT(),n=GC(),i=ZC(),sT=function(t,e){return i(n(t,e,r),t+"")}),sT}function QC(){return uT||(uT=1,lT=function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}),lT}function JC(){return dT||(dT=1,hT=function(t){return t!=t}),hT}function tS(){return pT||(pT=1,fT=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}),fT}function eS(){var n,i,a;return yT||(yT=1,n=QC(),i=JC(),a=tS(),gT=function(t,e,r){return e==e?a(t,e,r):n(t,i,r)}),gT}function rS(){var r;return bT||(bT=1,r=eS(),mT=function(t,e){return!!(null==t?0:t.length)&&-1<r(t,e,0)}),mT}function nS(){return vT||(vT=1,_T=function(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}),_T}function iS(){var e,t,r;return ET||(ET=1,e=f9(),kT||(kT=1,xT=function(){}),t=xT,r=eC(),r=e&&1/r(new e([,-0]))[1]==1/0?function(t){return new e(t)}:t,wT=r),wT}function aS(){var f,p,g,y,m,b;return CT||(CT=1,f=ZT(),p=rS(),g=nS(),y=QT(),m=iS(),b=eC(),TT=function(t,e,r){var n=-1,i=p,a=t.length,o=!0,s=[],c=s;if(r)o=!1,i=g;else if(200<=a){var l=e?null:m(t);if(l)return b(l);o=!1,i=y,c=new f}else c=e?[]:s;t:for(;++n<a;){var u=t[n],h=e?e(u):u,u=r||0!==u?u:0;if(o&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),s.push(u)}else i(c,h,r)||(c!==s&&c.push(h),s.push(u))}return s}),TT}function oS(){var e,r;return AT||(AT=1,e=D7(),r=N8(),ST=function(t){return r(t)&&e(t)}),ST}function sS(){var r;return DT||(DT=1,r=pC(),NT=function(e,t){return r(t,function(t){return e[t]})}),NT}function cS(){var e,r;return BT||(BT=1,e=sS(),r=L7(),LT=function(t){return null==t?[]:e(t,r(t))}),LT}try{wI={clone:A9(),constant:M9(),each:HT(),filter:MC(),has:DC(),isArray:B8(),isEmpty:LC(),isFunction:Vb,isUndefined:BC(),keys:L7(),map:IC(),reduce:PC(),size:UC(),transform:WC(),union:(xI||(xI=1,OT=HC(),kI=KC(),IT=aS(),RT=oS(),kI=kI(function(t){return IT(OT(t,1,RT,!0))}),MT=kI),MT),values:cS()}}catch{}var y2=wI=wI||window._,lS=y2,m2=hS,uS="\0";function hS(t){this._isDirected=!lS.has(t,"directed")||t.directed,this._isMultigraph=!!lS.has(t,"multigraph")&&t.multigraph,this._isCompound=!!lS.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=lS.constant(void 0),this._defaultEdgeLabelFn=lS.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[uS]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function dS(t,e){t[e]?t[e]++:t[e]=1}function fS(t,e){--t[e]||delete t[e]}function pS(t,e,r,n){e=""+e,r=""+r;return!t&&r<e&&(t=e,e=r,r=t),e+""+r+""+(lS.isUndefined(n)?"\0":n)}function gS(t,e){return pS(t,e.v,e.w,e.name)}hS.prototype._nodeCount=0,hS.prototype._edgeCount=0,hS.prototype.isDirected=function(){return this._isDirected},hS.prototype.isMultigraph=function(){return this._isMultigraph},hS.prototype.isCompound=function(){return this._isCompound},hS.prototype.setGraph=function(t){return this._label=t,this},hS.prototype.graph=function(){return this._label},hS.prototype.setDefaultNodeLabel=function(t){return lS.isFunction(t)||(t=lS.constant(t)),this._defaultNodeLabelFn=t,this},hS.prototype.nodeCount=function(){return this._nodeCount},hS.prototype.nodes=function(){return lS.keys(this._nodes)},hS.prototype.sources=function(){var e=this;return lS.filter(this.nodes(),function(t){return lS.isEmpty(e._in[t])})},hS.prototype.sinks=function(){var e=this;return lS.filter(this.nodes(),function(t){return lS.isEmpty(e._out[t])})},hS.prototype.setNodes=function(t,e){var r=arguments,n=this;return lS.each(t,function(t){1<r.length?n.setNode(t,e):n.setNode(t)}),this},hS.prototype.setNode=function(t,e){return lS.has(this._nodes,t)?1<arguments.length&&(this._nodes[t]=e):(this._nodes[t]=1<arguments.length?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=uS,this._children[t]={},this._children[uS][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this},hS.prototype.node=function(t){return this._nodes[t]},hS.prototype.hasNode=function(t){return lS.has(this._nodes,t)},hS.prototype.removeNode=function(t){var e,r=this;return lS.has(this._nodes,t)&&(e=function(t){r.removeEdge(r._edgeObjs[t])},delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],lS.each(this.children(t),function(t){r.setParent(t)}),delete this._children[t]),lS.each(lS.keys(this._in[t]),e),delete this._in[t],delete this._preds[t],lS.each(lS.keys(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount),this},hS.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(lS.isUndefined(e))e=uS;else{for(var r=e+="";!lS.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},hS.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},hS.prototype.parent=function(t){if(this._isCompound){t=this._parent[t];if(t!==uS)return t}},hS.prototype.children=function(t){var e;return lS.isUndefined(t)&&(t=uS),this._isCompound?(e=this._children[t])?lS.keys(e):void 0:t===uS?this.nodes():this.hasNode(t)?[]:void 0},hS.prototype.predecessors=function(t){t=this._preds[t];if(t)return lS.keys(t)},hS.prototype.successors=function(t){t=this._sucs[t];if(t)return lS.keys(t)},hS.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return lS.union(e,this.successors(t))},hS.prototype.isLeaf=function(t){t=this.isDirected()?this.successors(t):this.neighbors(t);return 0===t.length},hS.prototype.filterNodes=function(r){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound}),i=(n.setGraph(this.graph()),this),a=(lS.each(this._nodes,function(t,e){r(e)&&n.setNode(e,t)}),lS.each(this._edgeObjs,function(t){n.hasNode(t.v)&&n.hasNode(t.w)&&n.setEdge(t,i.edge(t))}),{});return this._isCompound&&lS.each(n.nodes(),function(t){n.setParent(t,function t(e){var r=i.parent(e);return void 0===r||n.hasNode(r)?a[e]=r:r in a?a[r]:t(r)}(t))}),n},hS.prototype.setDefaultEdgeLabel=function(t){return lS.isFunction(t)||(t=lS.constant(t)),this._defaultEdgeLabelFn=t,this},hS.prototype.edgeCount=function(){return this._edgeCount},hS.prototype.edges=function(){return lS.values(this._edgeObjs)},hS.prototype.setPath=function(t,r){var n=this,i=arguments;return lS.reduce(t,function(t,e){return 1<i.length?n.setEdge(t,e,r):n.setEdge(t,e),e}),this},hS.prototype.setEdge=function(){var t,e,r=!1,n=arguments[0],n=("object"==typeof n&&null!==n&&"v"in n?(i=n.v,a=n.w,t=n.name,2===arguments.length&&(e=arguments[1],r=!0)):(i=n,a=arguments[1],t=arguments[3],2<arguments.length&&(e=arguments[2],r=!0)),i=""+i,a=""+a,lS.isUndefined(t)||(t=""+t),pS(this._isDirected,i,a,t));if(lS.has(this._edgeLabels,n))r&&(this._edgeLabels[n]=e);else{if(!lS.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(i),this.setNode(a),this._edgeLabels[n]=r?e:this._defaultEdgeLabelFn(i,a,t);var r=function(t,e,r,n){e=""+e,r=""+r;!t&&r<e&&(t=e,e=r,r=t);t={v:e,w:r};return n&&(t.name=n),t}(this._isDirected,i,a,t),i=r.v,a=r.w;Object.freeze(r),this._edgeObjs[n]=r,dS(this._preds[a],i),dS(this._sucs[i],a),this._in[a][n]=r,this._out[i][n]=r,this._edgeCount++}return this},hS.prototype.edge=function(t,e,r){t=1===arguments.length?gS(this._isDirected,t):pS(this._isDirected,t,e,r);return this._edgeLabels[t]},hS.prototype.hasEdge=function(t,e,r){t=1===arguments.length?gS(this._isDirected,t):pS(this._isDirected,t,e,r);return lS.has(this._edgeLabels,t)},hS.prototype.removeEdge=function(t,e,r){var r=1===arguments.length?gS(this._isDirected,arguments[0]):pS(this._isDirected,t,e,r),n=this._edgeObjs[r];return n&&(t=n.v,e=n.w,delete this._edgeLabels[r],delete this._edgeObjs[r],fS(this._preds[e],t),fS(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},hS.prototype.inEdges=function(t,e){var t=this._in[t];if(t)return t=lS.values(t),e?lS.filter(t,function(t){return t.v===e}):t},hS.prototype.outEdges=function(t,e){var t=this._out[t];if(t)return t=lS.values(t),e?lS.filter(t,function(t){return t.w===e}):t},hS.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))};var h2={Graph:m2,version:"2.1.8"},yS=y2,mS=m2,b2={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(n){return yS.map(n.nodes(),function(t){var e=n.node(t),r=n.parent(t),t={v:t};return yS.isUndefined(e)||(t.value=e),yS.isUndefined(r)||(t.parent=r),t})}(t),edges:function(n){return yS.map(n.edges(),function(t){var e=n.edge(t),r={v:t.v,w:t.w};return yS.isUndefined(t.name)||(r.name=t.name),yS.isUndefined(e)||(r.value=e),r})}(t)};return yS.isUndefined(t.graph())||(e.value=yS.clone(t.graph())),e},read:function(t){var e=new mS(t.options).setGraph(t.value);return yS.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),yS.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};function bS(e){var r,n={},i=[];function a(t){_S.has(n,t)||(n[t]=!0,r.push(t),_S.each(e.successors(t),a),_S.each(e.predecessors(t),a))}return _S.each(e.nodes(),function(t){r=[],a(t),r.length&&i.push(r)}),i}var _S=y2;var vS=y2,d2=xS;function xS(){this._arr=[],this._keyIndices={}}xS.prototype.size=function(){return this._arr.length},xS.prototype.keys=function(){return this._arr.map(function(t){return t.key})},xS.prototype.has=function(t){return vS.has(this._keyIndices,t)},xS.prototype.priority=function(t){t=this._keyIndices[t];if(void 0!==t)return this._arr[t].priority},xS.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},xS.prototype.add=function(t,e){var r,n,i=this._keyIndices;return t=String(t),!vS.has(i,t)&&(n=(r=this._arr).length,i[t]=n,r.push({key:t,priority:e}),this._decrease(n),!0)},xS.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},xS.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},xS.prototype._heapify=function(t){var e=this._arr,r=2*t,n=1+r,i=t;r<e.length&&(i=e[r].priority<e[i].priority?r:i,(i=n<e.length?e[n].priority<e[i].priority?n:i:i)!==t)&&(this._swap(t,i),this._heapify(i))},xS.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;0!==t&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},xS.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,i=r[t],a=r[e];r[t]=a,r[e]=i,n[a.key]=t,n[i.key]=e};function kS(e,t,r,n){var i=e,a=String(t),o=r||ES,s=n||function(t){return e.outEdges(t)};function c(t){var e=t.v!==l?t.v:t.w,r=h[e],n=o(t),i=u.distance+n;if(n<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+n);i<r.distance&&(r.distance=i,r.predecessor=l,d.decrease(e,i))}var l,u,h={},d=new wS;for(i.nodes().forEach(function(t){var e=t===a?0:Number.POSITIVE_INFINITY;h[t]={distance:e},d.add(t,e)});0<d.size()&&(l=d.removeMin(),(u=h[l]).distance!==Number.POSITIVE_INFINITY);)s(l).forEach(c);return h}var wS=d2,ES=y2.constant(1);function TS(r,n,i){return SS.transform(r.nodes(),function(t,e){t[e]=CS(r,e,n,i)},{})}var CS=kS,SS=y2;function AS(a){var o=0,s=[],c={},l=[];return a.nodes().forEach(function(t){MS.has(c,t)||function e(t){var r=c[t]={onStack:!0,lowlink:o,index:o++};if(s.push(t),a.successors(t).forEach(function(t){MS.has(c,t)?c[t].onStack&&(r.lowlink=Math.min(r.lowlink,c[t].index)):(e(t),r.lowlink=Math.min(r.lowlink,c[t].lowlink))}),r.lowlink===r.index){for(var n,i=[];n=s.pop(),c[n].onStack=!1,i.push(n),t!==n;);l.push(i)}}(t)}),l}var MS=y2;function NS(e){return DS.filter(LS(e),function(t){return 1<t.length||1===t.length&&e.hasEdge(t[0],t[0])})}var DS=y2,LS=AS;function BS(e,t,r){var n=t||OS,i=r||function(t){return e.outEdges(t)},o={},s=e.nodes();return s.forEach(function(r){o[r]={},o[r][r]={distance:0},s.forEach(function(t){r!==t&&(o[r][t]={distance:Number.POSITIVE_INFINITY})}),i(r).forEach(function(t){var e=t.v===r?t.w:t.v,t=n(t);o[r][e]={distance:t,predecessor:r}})}),s.forEach(function(i){var a=o[i];s.forEach(function(t){var n=o[t];s.forEach(function(t){var e=n[i],r=a[t],t=n[t],e=e.distance+r.distance;e<t.distance&&(t.distance=e,t.predecessor=r.predecessor)})})}),o}var OS=y2.constant(1);var IS=y2,_2=RS;function RS(r){var n={},i={},a=[];if(IS.each(r.sinks(),function t(e){if(IS.has(i,e))throw new FS;IS.has(n,e)||(i[e]=!0,n[e]=!0,IS.each(r.predecessors(e),t),delete i[e],a.push(e))}),IS.size(n)!==r.nodeCount())throw new FS;return a}function FS(){}(RS.CycleException=FS).prototype=new Error;var PS=_2;function $S(e,t,r){jS.isArray(t)||(t=[t]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],a={};return jS.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(r,t,n,i,a,o){jS.has(i,t)||(i[t]=!0,n||o.push(t),jS.each(a(t),function(t){e(r,t,n,i,a,o)}),n&&o.push(t))}(e,t,"post"===r,a,n,i)}),i}var jS=y2;var YS=$S;var zS=$S;var US=y2,WS=m2,qS=d2;var HS,VS,GS,XS,ZS,KS,QS,JS,tA,eA,rA,nA,iA,aA,oA,sA,cA,lA,uA,hA,dA,fA,pA,gA,yA,mA,bA,_A,vA,xA,kA,wA,EA,TA,CA,SA,AA,MA,NA,DA,LA,BA,OA,IA,RA,FA,PA,$A,jA,YA,zA,UA,WA,qA,HA,VA,GA,XA,ZA,KA,QA,JA,tM,eM,rM,nM,iM,aM,oM,sM,cM,lM,uM,hM,dM,fM,pM,gM,yM,mM,bM,_M,vM,xM,kM,wM,EM,TM,CM,SM,AM,MM,NM,DM,LM,BM,OM,IM,RM,FM,PM,$M,jM,YM,zM,UM,WM,qM,HM,VM,GM,XM,ZM,KM,QM,JM,tN,eN,rN,nN,iN,aN,oN,sN,cN,lN,uN,hN,dN,fN,pN,gN,yN,mN,bN,_N,vN,xN,kN,wN,EN,TN,CN,SN,AN,MN,NN,DN,LN,BN,ON,IN,RN={Graph:h2.Graph,json:b2,alg:{components:bS,dijkstra:kS,dijkstraAll:TS,findCycles:NS,floydWarshall:BS,isAcyclic:function(t){try{PS(t)}catch(t){if(t instanceof PS.CycleException)return!1;throw t}return!0},postorder:function(t,e){return YS(t,e,"post")},preorder:function(t,e){return zS(t,e,"pre")},prim:function(t,n){var i,e=new WS,a={},o=new qS;function r(t){var e=t.v===i?t.w:t.v,r=o.priority(e);void 0!==r&&(t=n(t))<r&&(a[e]=i,o.decrease(e,t))}if(0!==t.nodeCount()){US.each(t.nodes(),function(t){o.add(t,Number.POSITIVE_INFINITY),e.setNode(t)}),o.decrease(t.nodes()[0],0);for(var s=!1;0<o.size();){if(i=o.removeMin(),US.has(a,i))e.setEdge(i,a[i]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(i).forEach(r)}}return e},tarjan:AS,topsort:_2},version:h2.version};function FN(){if(!VS){var t;VS=1;try{t=RN}catch{}t=t||window.graphlib,HS=t}return HS}function PN(){var e;return XS||(XS=1,e=S9(),GS=function(t){return e(t,5)}),GS}function $N(){var i,a,o,s;return KS||(KS=1,i=m5,a=D7(),o=V8(),s=Wb,ZS=function(t,e,r){var n;return!!s(r)&&!!("number"==(n=typeof e)?a(r)&&o(e,r.length):"string"==n&&e in r)&&i(r[e],t)}),ZS}function jN(){var h,d,f,p,g,t;return JS||(JS=1,t=KC(),h=m5,d=$N(),f=R7(),p=Object.prototype,g=p.hasOwnProperty,t=t(function(t,e){t=Object(t);var r=-1,n=e.length,i=2<n?e[2]:void 0;for(i&&d(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],o=f(a),s=-1,c=o.length;++s<c;){var l=o[s],u=t[l];(void 0===u||h(u,p[l])&&!g.call(t,l))&&(t[l]=a[l])}return t}),QS=t),QS}function YN(){var o,s,c;return eA||(eA=1,o=AC(),s=D7(),c=L7(),tA=function(a){return function(t,e,r){var n,i=Object(t),e=(s(t)||(n=o(e,3),t=c(t),e=function(t){return n(i[t],t,i)}),a(t,e,r));return-1<e?i[n?t[e]:e]:void 0}}),tA}function zN(){var r;return nA||(nA=1,r=/\s/,rA=function(t){for(var e=t.length;e--&&r.test(t.charAt(e)););return e}),rA}function UN(){var e,r;return aA||(aA=1,e=zN(),r=/^\s+/,iA=function(t){return t&&t.slice(0,e(t)+1).replace(r,"")}),iA}function WN(){var r,n,i,a,o,s,c;return sA||(sA=1,r=UN(),n=Wb,i=hC(),a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,oA=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(n(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=n(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=r(t);var e=o.test(t);return e||s.test(t)?c(t.slice(2),e?2:8):a.test(t)?NaN:+t}),oA}function qN(){var e;return lA||(lA=1,e=WN(),cA=function(t){return t?(t=e(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}),cA}function HN(){var r;return hA||(hA=1,r=qN(),uA=function(t){var e=(t=r(t))%1;return t==t?e?t-e:t:0}),uA}function VN(){var i,a,o,s;return fA||(fA=1,i=QC(),a=AC(),o=HN(),s=Math.max,dA=function(t,e,r){var n=null==t?0:t.length;return n?((r=null==r?0:o(r))<0&&(r=s(n+r,0)),i(t,a(e,3),r)):-1}),dA}function GN(){var e;return mA||(mA=1,e=HC(),yA=function(t){return(null==t?0:t.length)?e(t,1):[]}),yA}function XN(){var r,n,i;return _A||(_A=1,r=$T(),n=WT(),i=R7(),bA=function(t,e){return null==t?t:r(t,n(e),i)}),bA}function ZN(){return xA||(xA=1,vA=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}),vA}function KN(){var a,e,r;return wA||(wA=1,a=C8(),e=jT(),r=AC(),kA=function(t,n){var i={};return n=r(n,3),e(t,function(t,e,r){a(i,e,n(t,e,r))}),i}),kA}function QN(){var l;return TA||(TA=1,l=hC(),EA=function(t,e,r){for(var n=-1,i=t.length;++n<i;){var a,o,s=t[n],c=e(s);null!=c&&(void 0===a?c==c&&!l(c):r(c,a))&&(a=c,o=s)}return o}),EA}function JN(){return SA||(SA=1,CA=function(t,e){return e<t}),CA}function tD(){var e,r,n;return MA||(MA=1,e=QN(),r=JN(),n=UT(),AA=function(t){return t&&t.length?e(t,n,r):void 0}),AA}function eD(){var n,i;return DA||(DA=1,n=C8(),i=m5,NA=function(t,e,r){(void 0===r||i(t[e],r))&&(void 0!==r||e in t)||n(t,e,r)}),NA}function rD(){var e,r,n,t,i,a,o,s;return BA||(BA=1,e=Ub,r=s9(),n=N8(),t=Function.prototype,i=Object.prototype,a=t.toString,o=i.hasOwnProperty,s=a.call(Object),LA=function(t){return!(!n(t)||"[object Object]"!=e(t))&&(null===(t=r(t))||"function"==typeof(t=o.call(t,"constructor")&&t.constructor)&&t instanceof t&&a.call(t)==s)}),LA}function nD(){return IA||(IA=1,OA=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}),OA}function iD(){var e,r;return FA||(FA=1,e=A8(),r=R7(),RA=function(t){return e(t,r(t))}),RA}function aD(){var f,p,g,y,m,b,_,v,x,k,w,E,T,C,S;return $A||($A=1,f=eD(),p=t9(),g=x9(),y=e9(),m=E9(),b=L8(),_=B8(),v=oS(),x=H8(),k=Vb,w=Wb,E=rD(),T=C7(),C=nD(),S=iD(),PA=function(t,e,r,n,i,a,o){var s,c,l,u=C(t,r),h=C(e,r),d=o.get(h);d||((e=void 0===(d=a?a(u,h,r+"",t,e,o):void 0))&&(c=!(s=_(h))&&x(h),l=!s&&!c&&T(h),d=h,s||c||l?d=_(u)?u:v(u)?y(u):c?p(h,!(e=!1)):l?g(h,!(e=!1)):[]:E(h)||b(h)?b(d=u)?d=S(u):w(u)&&!k(u)||(d=m(h)):e=!1),e&&(o.set(h,d),i(d,h,n,a,o),o.delete(h))),f(t,r,d)}),PA}function oD(){var l,u,t,h,d,e,f;return YA||(YA=1,l=w8(),u=eD(),t=$T(),h=aD(),d=Wb,e=R7(),f=nD(),jA=function n(i,a,o,s,c){i!==a&&t(a,function(t,e){var r;c=c||new l,d(t)?h(i,a,e,o,n,s,c):(r=s?s(f(i,e),t,e+"",i,a,c):void 0,u(i,e,r=void 0===r?t:r))},e)}),jA}function sD(){var t,c;return UA||(UA=1,t=KC(),c=$N(),zA=function(s){return t(function(t,e){var r=-1,n=e.length,i=1<n?e[n-1]:void 0,a=2<n?e[2]:void 0,i=3<s.length&&"function"==typeof i?(n--,i):void 0;for(a&&c(e[0],e[1],a)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var o=e[r];o&&s(t,o,r,i)}return t})}),zA}function cD(){return VA||(VA=1,HA=function(t,e){return t<e}),HA}function lD(){var e,r,n;return XA||(XA=1,e=QN(),r=cD(),n=UT(),GA=function(t){return t&&t.length?e(t,n,r):void 0}),GA}function uD(){var r,n,i;return KA||(KA=1,r=QN(),n=AC(),i=cD(),ZA=function(t,e){return t&&t.length?r(t,n(e,2),i):void 0}),ZA}function hD(){var h,d,f,p,g;return eM||(eM=1,h=S8(),d=mC(),f=V8(),p=Wb,g=bC(),tM=function(t,e,r,n){if(p(t))for(var i=-1,a=(e=d(e,t)).length,o=a-1,s=t;null!=s&&++i<a;){var c,l=g(e[i]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;i!=o&&(c=s[l],void 0===(u=n?n(c,l,s):void 0))&&(u=p(c)?c:f(e[i+1])?[]:{}),h(s,l,u),s=s[l]}return t}),tM}function dD(){var c,l,u;return nM||(nM=1,c=_C(),l=hD(),u=mC(),rM=function(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=c(t,o);r(s,o)&&l(a,u(o,t),s)}return a}),rM}function fD(){var e,n;return aM||(aM=1,e=dD(),n=wC(),iM=function(r,t){return e(r,t,function(t,e){return n(r,e)})}),iM}function pD(){var e,r,n;return sM||(sM=1,e=GN(),r=GC(),n=ZC(),oM=function(t){return n(r(t,void 0,e),t+"")}),oM}function gD(){var r,t;return lM||(lM=1,r=fD(),t=pD()(function(t,e){return null==t?{}:r(t,e)}),cM=t),cM}function yD(){var s,c;return hM||(hM=1,s=Math.ceil,c=Math.max,uM=function(t,e,r,n){for(var i=-1,a=c(s((e-t)/(r||1)),0),o=Array(a);a--;)o[n?a:++i]=t,t+=r;return o}),uM}function mD(){var i,a,o;return fM||(fM=1,i=yD(),a=$N(),o=qN(),dM=function(n){return function(t,e,r){return r&&"number"!=typeof r&&a(t,e,r)&&(e=r=void 0),t=o(t),void 0===e?(e=t,t=0):e=o(e),r=void 0===r?t<e?1:-1:o(r),i(t,e,r,n)}}),dM}function bD(){var t;return gM||(gM=1,t=mD()(),pM=t),pM}function _D(){return mM||(mM=1,yM=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}),yM}function vD(){var u;return _M||(_M=1,u=hC(),bM=function(t,e){if(t!==e){var r=void 0!==t,n=null===t,i=t==t,a=u(t),o=void 0!==e,s=null===e,c=e==e,l=u(e);if(!s&&!l&&!a&&e<t||a&&o&&c&&!s&&!l||n&&o&&c||!r&&c||!i)return 1;if(!n&&!a&&!l&&t<e||l&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!c)return-1}return 0}),bM}function xD(){var l;return xM||(xM=1,l=vD(),vM=function(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var c=l(i[n],a[n]);if(c)return s<=n?c:c*("desc"==r[n]?-1:1)}return t.index-e.index}),vM}function kD(){var a,o,e,s,c,l,u,h,d;return wM||(wM=1,a=pC(),o=_C(),e=AC(),s=OC(),c=_D(),l=Z8(),u=xD(),h=UT(),d=B8(),kM=function(t,n,r){n=n.length?a(n,function(e){return d(e)?function(t){return o(t,1===e.length?e[0]:e)}:e}):[h];var i=-1,t=(n=a(n,l(e)),s(t,function(e,t,r){return{criteria:a(n,function(t){return t(e)}),index:++i,value:e}}));return c(t,function(t,e){return u(t,e,r)})}),kM}function wD(){var r,n;return SM||(SM=1,r=yC(),n=0,CM=function(t){var e=++n;return r(t)+e}),CM}function ED(){return MM||(MM=1,AM=function(t,e,r){for(var n=-1,i=t.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:void 0;r(o,t[n],s)}return o}),AM}function TD(){var r,n;return DM||(DM=1,r=S8(),n=ED(),NM=function(t,e){return n(t||[],e||[],r)}),NM}function CD(){if(!BM){var t,n,i,a,e,r,o,s,c;BM=1;try{t={cloneDeep:PN(),constant:M9(),defaults:jN(),each:HT(),filter:MC(),find:(gA||(gA=1,c=YN()(VN()),pA=c),pA),flatten:GN(),forEach:qT(),forIn:XN(),has:DC(),isUndefined:BC(),last:ZN(),map:IC(),mapValues:KN(),max:tD(),merge:(qA||(qA=1,o=oD(),s=sD()(function(t,e,r){o(t,e,r)}),WA=s),WA),min:lD(),minBy:uD(),now:(JA||(JA=1,r=Ob,QA=function(){return r.Date.now()}),QA),pick:gD(),range:bD(),reduce:PC(),sortBy:(TM||(TM=1,n=HC(),i=kD(),e=KC(),a=$N(),e=e(function(t,e){var r;return null==t?[]:(1<(r=e.length)&&a(t,e[0],e[1])?e=[]:2<r&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,n(e,1),[]))}),EM=e),EM),uniqueId:wD(),values:cS(),zipObject:TD()}}catch{}t=t||window._,LM=t}return LM}function SD(){var c,s,l,r;return FM||(FM=1,c=CD(),s=FN().Graph,IM||(IM=1,(OM=t).prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},t.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,(e._next=t)._prev=e},t.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,i)),r=r._prev;return"["+t.join(", ")+"]"}),l=OM,RM=function(e,t){return e.nodeCount()<=1?[]:(t=function(t,n){var i=new s,a=0,o=0,e=(c.forEach(t.nodes(),function(t){i.setNode(t,{v:t,in:0,out:0})}),c.forEach(t.edges(),function(t){var e=i.edge(t.v,t.w)||0,r=n(t);i.setEdge(t.v,t.w,e+r),o=Math.max(o,i.node(t.v).out+=r),a=Math.max(a,i.node(t.w).in+=r)}),c.range(o+a+3).map(function(){return new l})),r=a+1;return c.forEach(i.nodes(),function(t){h(e,r,i.node(t))}),{graph:i,buckets:e,zeroIdx:r}}(e,t||r),t=function(t,e,r){for(var n,i=[],a=e[e.length-1],o=e[0];t.nodeCount();){for(;n=o.dequeue();)u(t,e,r,n);for(;n=a.dequeue();)u(t,e,r,n);if(t.nodeCount())for(var s=e.length-2;0<s;--s)if(n=e[s].dequeue()){i=i.concat(u(t,e,r,n,!0));break}}return i}(t.graph,t.buckets,t.zeroIdx),c.flatten(c.map(t,function(t){return e.outEdges(t.v,t.w)}),!0))},r=c.constant(1)),RM;function t(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}function u(n,i,a,t,o){var s=o?[]:void 0;return c.forEach(n.inEdges(t.v),function(t){var e=n.edge(t),r=n.node(t.v);o&&s.push({v:t.v,w:t.w}),r.out-=e,h(i,a,r)}),c.forEach(n.outEdges(t.v),function(t){var e=n.edge(t),t=t.w,t=n.node(t);t.in-=e,h(i,a,t)}),n.removeNode(t.v),s}function h(t,e,r){(r.out?r.in?t[r.out-r.in+e]:t[t.length-1]:t[0]).enqueue(r)}}function AD(){var o,e;return $M||($M=1,o=CD(),e=SD(),PM={run:function(r){var t="greedy"===r.graph().acyclicer?e(r,function(e){return function(t){return e.edge(t).weight}}(r)):function(r){var n=[],i={},a={};return o.forEach(r.nodes(),function e(t){o.has(a,t)||(a[t]=!0,i[t]=!0,o.forEach(r.outEdges(t),function(t){o.has(i,t.w)?n.push(t):e(t.w)}),delete i[t])}),n}(r);o.forEach(t,function(t){var e=r.edge(t);r.removeEdge(t),e.forwardName=t.name,e.reversed=!0,r.setEdge(t.w,t.v,e,o.uniqueId("rev"))})},undo:function(n){o.forEach(n.edges(),function(t){var e,r=n.edge(t);r.reversed&&(n.removeEdge(t),e=r.forwardName,delete r.reversed,delete r.forwardName,n.setEdge(t.w,t.v,r,e))})}}),PM}function MD(){var s,t;return YM||(YM=1,s=CD(),t=FN().Graph,jM={addDummyNode:a,simplify:function(n){var i=(new t).setGraph(n.graph());return s.forEach(n.nodes(),function(t){i.setNode(t,n.node(t))}),s.forEach(n.edges(),function(t){var e=i.edge(t.v,t.w)||{weight:0,minlen:1},r=n.edge(t);i.setEdge(t.v,t.w,{weight:e.weight+r.weight,minlen:Math.max(e.minlen,r.minlen)})}),i},asNonCompoundGraph:function(e){var r=new t({multigraph:e.isMultigraph()}).setGraph(e.graph());return s.forEach(e.nodes(),function(t){e.children(t).length||r.setNode(t,e.node(t))}),s.forEach(e.edges(),function(t){r.setEdge(t,e.edge(t))}),r},successorWeights:function(r){var t=s.map(r.nodes(),function(t){var e={};return s.forEach(r.outEdges(t),function(t){e[t.w]=(e[t.w]||0)+r.edge(t).weight}),e});return s.zipObject(r.nodes(),t)},predecessorWeights:function(r){var t=s.map(r.nodes(),function(t){var e={};return s.forEach(r.inEdges(t),function(t){e[t.v]=(e[t.v]||0)+r.edge(t).weight}),e});return s.zipObject(r.nodes(),t)},intersectRect:function(t,e){var r,n=t.x,i=t.y,a=e.x-n,e=e.y-i,o=t.width/2,t=t.height/2;if(a||e)return t=Math.abs(e)*o>Math.abs(a)*t?(r=(t=e<0?-t:t)*a/e,t):(r=o=a<0?-o:o)*e/a,{x:n+r,y:i+t};throw new Error("Not possible to find intersection inside of the rectangle")},buildLayerMatrix:function(n){var i=s.map(s.range(e(n)+1),function(){return[]});return s.forEach(n.nodes(),function(t){var e=n.node(t),r=e.rank;s.isUndefined(r)||(i[r][e.order]=t)}),i},normalizeRanks:function(e){var r=s.min(s.map(e.nodes(),function(t){return e.node(t).rank}));s.forEach(e.nodes(),function(t){t=e.node(t);s.has(t,"rank")&&(t.rank-=r)})},removeEmptyRanks:function(r){var n=s.min(s.map(r.nodes(),function(t){return r.node(t).rank})),i=[],a=(s.forEach(r.nodes(),function(t){var e=r.node(t).rank-n;i[e]||(i[e]=[]),i[e].push(t)}),0),o=r.graph().nodeRankFactor;s.forEach(i,function(t,e){s.isUndefined(t)&&e%o!=0?--a:a&&s.forEach(t,function(t){r.node(t).rank+=a})})},addBorderNode:function(t,e,r,n){var i={width:0,height:0};return 4<=arguments.length&&(i.rank=r,i.order=n),a(t,"border",i,e)},maxRank:e,partition:function(t,e){var r={lhs:[],rhs:[]};return s.forEach(t,function(t){(e(t)?r.lhs:r.rhs).push(t)}),r},time:function(t,e){var r=s.now();try{return e()}finally{console.log(t+" time: "+(s.now()-r)+"ms")}},notime:function(t,e){return e()}}),jM;function a(t,e,r,n){for(var i;i=s.uniqueId(n),t.hasNode(i););return r.dummy=e,t.setNode(i,r),i}function e(e){return s.max(s.map(e.nodes(),function(t){t=e.node(t).rank;if(!s.isUndefined(t))return t}))}}function ND(){var t,f;return UM||(UM=1,t=CD(),f=MD(),zM={run:function(d){d.graph().dummyChains=[],t.forEach(d.edges(),function(t){var e,r,n,i=d,a=t,o=a.v,s=i.node(o).rank,t=a.w,c=i.node(t).rank,l=a.name,u=i.edge(a),h=u.labelRank;if(c!==s+1){for(i.removeEdge(a),n=0,++s;s<c;++n,++s)u.points=[],r={width:0,height:0,edgeLabel:u,edgeObj:a,rank:s},e=f.addDummyNode(i,"edge",r,"_d"),s===h&&(r.width=u.width,r.height=u.height,r.dummy="edge-label",r.labelpos=u.labelpos),i.setEdge(o,e,{weight:u.weight},l),0===n&&i.graph().dummyChains.push(e),o=e;i.setEdge(o,t,{weight:u.weight},l)}})},undo:function(i){t.forEach(i.graph().dummyChains,function(t){var e,r=i.node(t),n=r.edgeLabel;for(i.setEdge(r.edgeObj,n);r.dummy;)e=i.successors(t)[0],i.removeNode(t),n.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),r=i.node(t=e)})}}),zM}function DD(){var a;return qM||(qM=1,a=CD(),WM={longestPath:function(n){var i={};a.forEach(n.sources(),function e(t){var r=n.node(t);if(a.has(i,t))return r.rank;i[t]=!0;t=a.min(a.map(n.outEdges(t),function(t){return e(t.w)-n.edge(t).minlen}));return t!==Number.POSITIVE_INFINITY&&null!=t||(t=0),r.rank=t})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}),WM}function LD(){var o,a,s;return VM||(VM=1,o=CD(),a=FN().Graph,s=DD().slack,HM=function(t){var e,r=new a({directed:!1}),n=t.nodes()[0],i=t.nodeCount();for(r.setNode(n,{});function(i,a){return o.forEach(i.nodes(),function r(n){o.forEach(a.nodeEdges(n),function(t){var e=t.v,e=n===e?t.w:e;i.hasNode(e)||s(a,t)||(i.setNode(e,{}),i.setEdge(n,e,{}),r(e))})}),i.nodeCount()}(r,t)<i;)e=function(e,r){return o.minBy(r.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return s(r,t)})}(r,t),e=r.hasNode(e.v)?s(t,e):-s(t,e),function(t,e,r){o.forEach(t.nodes(),function(t){e.node(t).rank+=r})}(r,t,e);return r}),HM}function BD(){var l,n,s,i,c,e,a;return XM||(XM=1,l=CD(),n=LD(),s=DD().slack,i=DD().longestPath,c=FN().alg.preorder,e=FN().alg.postorder,a=MD().simplify,(GM=t).initLowLimValues=h,t.initCutValues=u,t.calcCutValue=o,t.leaveEdge=d,t.enterEdge=f,t.exchangeEdges=p),GM;function t(t){t=a(t),i(t);var e,r=n(t);for(h(r),u(r,t);e=d(r);)p(r,t,e,f(r,t,e))}function u(i,a){var t=(t=e(i,i.nodes())).slice(0,t.length-1);l.forEach(t,function(t){var e,r,n;r=a,t=t,n=(e=i).node(t).parent,e.edge(t,n).cutvalue=o(e,r,t)})}function o(n,i,a){var o=n.node(a).parent,s=!0,t=i.edge(a,o),c=0;return t||(s=!1,t=i.edge(o,a)),c=t.weight,l.forEach(i.nodeEdges(a),function(t){var e=t.v===a,r=e?t.w:t.v;r!==o&&(e=e===s,t=i.edge(t).weight,c+=e?t:-t,n.hasEdge(a,r))&&(t=n.edge(a,r).cutvalue,c+=e?-t:t)}),c}function h(t,e){arguments.length<2&&(e=t.nodes()[0]),function e(r,n,i,a,t){var o=i,s=r.node(a);return n[a]=!0,l.forEach(r.neighbors(a),function(t){l.has(n,t)||(i=e(r,n,i,t,a))}),s.low=o,s.lim=i++,t?s.parent=t:delete s.parent,i}(t,{},1,e)}function d(e){return l.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function f(e,r,t){var n=t.v,i=t.w,t=(r.hasEdge(n,i)||(n=t.w,i=t.v),e.node(n)),n=e.node(i),a=t,o=!1,i=(t.lim>n.lim&&(a=n,o=!0),l.filter(r.edges(),function(t){return o===g(0,e.node(t.v),a)&&o!==g(0,e.node(t.w),a)}));return l.minBy(i,function(t){return s(r,t)})}function p(t,e,r,n){var i,a,o=r.v,r=r.w;t.removeEdge(o,r),t.setEdge(n.v,n.w,{}),h(t),u(t,e),i=t,a=e,o=l.find(i.nodes(),function(t){return!a.node(t).parent}),o=(o=c(i,o)).slice(1),l.forEach(o,function(t){var e=i.node(t).parent,r=a.edge(t,e),n=!1;r||(r=a.edge(e,t),n=!0),a.node(t).rank=a.node(e).rank+(n?r.minlen:-r.minlen)})}function g(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}}function OD(){var e,r,n,i;return KM||(KM=1,e=DD().longestPath,r=LD(),n=BD(),ZM=function(t){switch(t.graph().ranker){case"network-simplex":a(t);break;case"tight-tree":!function(t){e(t),r(t)}(t);break;case"longest-path":i(t);break;default:a(t)}},i=e),ZM;function a(t){n(t)}}function ID(){var o;return JM||(JM=1,o=CD(),QM=function(l){var u=function(n){var i={},a=0;return o.forEach(n.children(),function t(e){var r=a;o.forEach(n.children(e),t),i[e]={low:r,lim:a++}}),i}(l);o.forEach(l.graph().dummyChains,function(t){for(var e,r=l.node(t).edgeObj,n=function(t,e,r,n){var i,a,o=[],s=[],c=Math.min(e[r].low,e[n].low),l=Math.max(e[r].lim,e[n].lim);i=r;for(;i=t.parent(i),o.push(i),i&&(e[i].low>c||l>e[i].lim););for(a=i,i=n;(i=t.parent(i))!==a;)s.push(i);return{path:o.concat(s.reverse()),lca:a}}(l,u,r.v,r.w),i=n.path,a=n.lca,o=0,s=i[o],c=!0;t!==r.w;){if(e=l.node(t),c){for(;(s=i[o])!==a&&l.node(s).maxRank<e.rank;)o++;s===a&&(c=!1)}if(!c){for(;o<i.length-1&&l.node(s=i[o+1]).minRank<=e.rank;)o++;s=i[o]}l.setParent(t,s),t=l.successors(t)[0]}})}),QM}function RD(){var p,g;return eN||(eN=1,p=CD(),g=MD(),tN={run:function(e){var r=g.addDummyNode(e,"root",{},"_root"),n=function(i){var a={};return p.forEach(i.children(),function(t){!function e(t,r){var n=i.children(t);n&&n.length&&p.forEach(n,function(t){e(t,r+1)}),a[t]=r}(t,1)}),a}(e),i=p.max(p.values(n))-1,a=2*i+1,o=(e.graph().nestingRoot=r,p.forEach(e.edges(),function(t){e.edge(t).minlen*=a}),function(r){return p.reduce(r.edges(),function(t,e){return t+r.edge(e).weight},0)}(e)+1);p.forEach(e.children(),function(t){!function i(a,o,s,c,l,u,h){var t=a.children(h);if(!t.length)return void(h!==o&&a.setEdge(o,h,{weight:0,minlen:s}));var d=g.addBorderNode(a,"_bt"),f=g.addBorderNode(a,"_bb"),e=a.node(h);a.setParent(d,h),e.borderTop=d,a.setParent(f,h),e.borderBottom=f,p.forEach(t,function(t){i(a,o,s,c,l,u,t);var e=a.node(t),r=e.borderTop||t,t=e.borderBottom||t,e=e.borderTop?c:2*c,n=r!==t?1:l-u[h]+1;a.setEdge(d,r,{weight:e,minlen:n,nestingEdge:!0}),a.setEdge(t,f,{weight:e,minlen:n,nestingEdge:!0})}),a.parent(h)||a.setEdge(o,d,{weight:0,minlen:l+u[h]})}(e,r,a,o,i,n,t)}),e.graph().nodeRankFactor=a},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,p.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}),tN}function FD(){var s,c;return nN||(nN=1,s=CD(),c=MD(),rN=function(o){s.forEach(o.children(),function t(e){var r=o.children(e),n=o.node(e);if(r.length&&s.forEach(r,t),s.has(n,"minRank")){n.borderLeft=[],n.borderRight=[];for(var i=n.minRank,a=n.maxRank+1;i<a;++i)l(o,"borderLeft","_bl",e,n,i),l(o,"borderRight","_br",e,n,i)}})}),rN;function l(t,e,r,n,i,a){var o=i[e][a-1],r=c.addDummyNode(t,"border",{width:0,height:0,rank:a,borderType:e},r);i[e][a]=r,t.setParent(r,n),o&&t.setEdge(o,r,{weight:1})}}function PD(){var r;return aN||(aN=1,r=CD(),iN={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||n(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(e){r.forEach(e.nodes(),function(t){a(e.node(t))}),r.forEach(e.edges(),function(t){t=e.edge(t);r.forEach(t.points,a),r.has(t,"y")&&a(t)})}(t),"lr"!==e&&"rl"!==e||(function(e){r.forEach(e.nodes(),function(t){o(e.node(t))}),r.forEach(e.edges(),function(t){t=e.edge(t);r.forEach(t.points,o),r.has(t,"x")&&o(t)})}(t),n(t))}}),iN;function n(e){r.forEach(e.nodes(),function(t){i(e.node(t))}),r.forEach(e.edges(),function(t){i(e.edge(t))})}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function o(t){var e=t.x;t.x=t.y,t.y=e}}function $D(){var o;return sN||(sN=1,o=CD(),oN=function(n){var i={},t=o.filter(n.nodes(),function(t){return!n.children(t).length}),e=o.max(o.map(t,function(t){return n.node(t).rank})),a=o.map(o.range(e+1),function(){return[]});e=o.sortBy(t,function(t){return n.node(t).rank});return o.forEach(e,function t(e){var r;o.has(i,e)||(i[e]=!0,r=n.node(e),a[r.rank].push(e),o.forEach(n.successors(e),t))}),a}),oN}function jD(){var c;return lN||(lN=1,c=CD(),cN=function(t,e){for(var r=0,n=1;n<e.length;++n)r+=function(e,t,r){for(var n=c.zipObject(r,c.map(r,function(t,e){return e})),t=c.flatten(c.map(t,function(t){return c.sortBy(c.map(e.outEdges(t),function(t){return{pos:n[t.w],weight:e.edge(t).weight}}),"pos")}),!0),i=1;i<r.length;)i<<=1;var a=2*i-1,o=(--i,c.map(new Array(a),function(){return 0})),s=0;return c.forEach(t.forEach(function(t){var e=t.pos+i;o[e]+=t.weight;for(var r=0;0<e;)e%2&&(r+=o[e+1]),o[e=e-1>>1]+=t.weight;s+=t.weight*r})),s}(t,e[n-1],e[n]);return r}),cN}function YD(){var r;return hN||(hN=1,r=CD(),uN=function(n,t){return r.map(t,function(t){var e=n.inEdges(t);return e.length?{v:t,barycenter:(e=r.reduce(e,function(t,e){var r=n.edge(e),e=n.node(e.v);return{sum:t.sum+r.weight*e.order,weight:t.weight+r.weight}},{sum:0,weight:0})).sum/e.weight,weight:e.weight}:{v:t}})}),uN}function zD(){var a;return fN||(fN=1,a=CD(),dN=function(t,e){var n={};return a.forEach(t,function(t,e){e=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};a.isUndefined(t.barycenter)||(e.barycenter=t.barycenter,e.weight=t.weight)}),a.forEach(e.edges(),function(t){var e=n[t.v],r=n[t.w];a.isUndefined(e)||a.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))}),function(r){var t=[];function e(i){return function(t){var e,r,n;t.merged||(a.isUndefined(t.barycenter)||a.isUndefined(i.barycenter)||t.barycenter>=i.barycenter)&&(t=t,n=r=0,(e=i).weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0)}}for(;r.length;){var n=r.pop();t.push(n),a.forEach(n.in.reverse(),e(n)),a.forEach(n.out,function(e){return function(t){t.in.push(e),0==--t.indegree&&r.push(t)}}(n))}return a.map(a.filter(t,function(t){return!t.merged}),function(t){return a.pick(t,["vs","i","barycenter","weight"])})}(a.filter(n,function(t){return!t.indegree}))}),dN}function UD(){var c,l;return gN||(gN=1,c=CD(),l=MD(),pN=function(t,e){var t=l.partition(t,function(t){return c.has(t,"barycenter")}),r=t.lhs,n=c.sortBy(t.rhs,function(t){return-t.i}),i=[],a=0,o=0,s=0,t=(r.sort(function(r){return function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:r?e.i-t.i:t.i-e.i}}(!!e)),s=u(i,n,s),c.forEach(r,function(t){s+=t.vs.length,i.push(t.vs),a+=t.barycenter*t.weight,o+=t.weight,s=u(i,n,s)}),{vs:c.flatten(i,!0)});return o&&(t.barycenter=a/o,t.weight=o),t}),pN;function u(t,e,r){for(var n;e.length&&(n=c.last(e)).i<=r;)e.pop(),t.push(n.vs),r++;return r}}function WD(){var u,h,d,f;return mN||(mN=1,u=CD(),h=YD(),d=zD(),f=UD(),yN=function r(n,t,i,a){var e=n.children(t),t=n.node(t),o=t?t.borderLeft:void 0,s=t?t.borderRight:void 0,c={};o&&(e=u.filter(e,function(t){return t!==o&&t!==s}));t=h(n,e);u.forEach(t,function(t){var e;n.children(t.v).length&&(e=r(n,t.v,i,a),c[t.v]=e,u.has(e,"barycenter"))&&g(t,e)});e=d(t,i);p(e,c);t=f(e,a);{var l;o&&(t.vs=u.flatten([o,t.vs,s],!0),n.predecessors(o).length)&&(e=n.node(n.predecessors(o)[0]),l=n.node(n.predecessors(s)[0]),u.has(t,"barycenter")||(t.barycenter=0,t.weight=0),t.barycenter=(t.barycenter*t.weight+e.order+l.order)/(t.weight+2),t.weight+=2)}return t}),yN;function p(t,e){u.forEach(t,function(t){t.vs=u.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function g(t,e){u.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}}function qD(){var c,t;return _N||(_N=1,c=CD(),t=FN().Graph,bN=function(i,r,a){var o=function(t){for(var e;t.hasNode(e=c.uniqueId("_root")););return e}(i),s=new t({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(t){return i.node(t)});return c.forEach(i.nodes(),function(n){var t=i.node(n),e=i.parent(n);(t.rank===r||t.minRank<=r&&r<=t.maxRank)&&(s.setNode(n),s.setParent(n,e||o),c.forEach(i[a](n),function(t){var e=t.v===n?t.w:t.v,r=s.edge(e,n),r=c.isUndefined(r)?0:r.weight;s.setEdge(e,n,{weight:i.edge(t).weight+r})}),c.has(t,"minRank"))&&s.setNode(n,{borderLeft:t.borderLeft[r],borderRight:t.borderRight[r]})}),s}),bN}function HD(){var e;return xN||(xN=1,e=CD(),vN=function(i,a,t){var o,s={};e.forEach(t,function(t){for(var e,r,n=i.parent(t);n;){if((e=i.parent(n))?(r=s[e],s[e]=n):(r=o,o=n),r&&r!==n)return void a.setEdge(r,n);n=e}})}),vN}function VD(){var u,h,d,f,n,p,g,y;return wN||(wN=1,u=CD(),h=$D(),d=jD(),f=WD(),n=qD(),p=HD(),g=FN().Graph,y=MD(),kN=function(t){var e=y.maxRank(t),r=m(t,u.range(1,e+1),"inEdges"),n=m(t,u.range(e-1,-1,-1),"outEdges"),i=h(t);b(t,i);for(var a,o=Number.POSITIVE_INFINITY,s=0,c=0;c<4;++s,++c){(function(t,e){var n=new g;u.forEach(t,function(r){var t=r.graph().root,t=f(r,t,n,e);u.forEach(t.vs,function(t,e){r.node(t).order=e}),p(r,n,t.vs)})})(s%2?r:n,2<=s%4),i=y.buildLayerMatrix(t);var l=d(t,i);l<o&&(c=0,a=u.cloneDeep(i),o=l)}b(t,a)}),kN;function m(e,t,r){return u.map(t,function(t){return n(e,t,r)})}function b(r,t){u.forEach(t,function(t){u.forEach(t,function(t,e){r.node(t).order=e})})}}function GD(){var g,y,r;return TN||(TN=1,g=CD(),y=FN().Graph,r=MD(),EN={positionX:function(n){var i,t=r.buildLayerMatrix(n),a=g.merge(s(n,t),c(n,t)),o={},e=(g.forEach(["u","d"],function(r){i="u"===r?t:g.values(t).reverse(),g.forEach(["l","r"],function(t){"r"===t&&(i=g.map(i,function(t){return g.values(t).reverse()}));var e=("u"===r?n.predecessors:n.successors).bind(n),e=l(0,i,a,e),e=u(n,i,e.root,e.align,"r"===t);"r"===t&&(e=g.mapValues(e,function(t){return-t})),o[r+t]=e})}),f(n,o));return p(o,e),m(o,n.graph().align)},findType1Conflicts:s,findType2Conflicts:c,addConflict:h,hasConflict:d,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:p,findSmallestWidthAlignment:f,balance:m}),EN;function s(l,t){var u={};return g.reduce(t,function(t,n){var a=0,o=0,s=t.length,c=g.last(n);return g.forEach(n,function(t,e){var r=function(e,t){if(e.node(t).dummy)return g.find(e.predecessors(t),function(t){return e.node(t).dummy})}(l,t),i=r?l.node(r).order:s;!r&&t!==c||(g.forEach(n.slice(o,e+1),function(n){g.forEach(l.predecessors(n),function(t){var e=l.node(t),r=e.order;!(r<a||i<r)||e.dummy&&l.node(n).dummy||h(u,t,n)})}),o=e+1,a=i)}),n}),u}function c(s,t){var o={};function c(e,t,r,n,i){var a;g.forEach(g.range(t,r),function(t){a=e[t],s.node(a).dummy&&g.forEach(s.predecessors(a),function(t){var e=s.node(t);e.dummy&&(e.order<n||e.order>i)&&h(o,t,a)})})}return g.reduce(t,function(r,n){var i,a=-1,o=0;return g.forEach(n,function(t,e){"border"===s.node(t).dummy&&(t=s.predecessors(t)).length&&(i=s.node(t[0]).order,c(n,o,e,a,i),o=e,a=i),c(n,o,n.length,i,r.length)}),n}),o}function h(t,e,r){r<e&&(n=e,e=r,r=n);var n=t[e];n||(t[e]=n={}),n[r]=!0}function d(t,e,r){var n;return r<e&&(n=e,e=r,r=n),g.has(t[e],r)}function l(t,e,s,c){var l={},u={},h={};return g.forEach(e,function(t){g.forEach(t,function(t,e){h[u[l[t]=t]=t]=e})}),g.forEach(e,function(t){var o=-1;g.forEach(t,function(t){var e=c(t);if(e.length)for(var r=((e=g.sortBy(e,function(t){return h[t]})).length-1)/2,n=Math.floor(r),i=Math.ceil(r);n<=i;++n){var a=e[n];u[t]===t&&o<h[a]&&!d(s,t,a)&&(u[a]=t,u[t]=l[t]=l[a],o=h[a])}})}),{root:l,align:u}}function u(n,t,e,r,i){var a,o,s,c,l,u,h={},d=(a=n,t=t,o=e,s=i,c=new y,l=a.graph(),u=function(o,s,c){return function(t,e,r){var n,i=t.node(e),a=t.node(r),e=0;if(e+=i.width/2,g.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":n=-i.width/2;break;case"r":n=i.width/2}if(n&&(e+=c?n:-n),n=0,e=(e=(e+=(i.dummy?s:o)/2)+(a.dummy?s:o)/2)+a.width/2,g.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":n=a.width/2;break;case"r":n=-a.width/2}return n&&(e+=c?n:-n),n=0,e}}(l.nodesep,l.edgesep,s),g.forEach(t,function(t){var i;g.forEach(t,function(t){var e,r,n=o[t];c.setNode(n),i&&(e=o[i],r=c.edge(e,n),c.setEdge(e,n,Math.max(u(a,t,i),r||0))),i=t})}),c),f=i?"borderLeft":"borderRight";function p(t,e){for(var r=d.nodes(),n=r.pop(),i={};n;)i[n]?t(n):(i[n]=!0,r.push(n),r=r.concat(e(n))),n=r.pop()}return p(function(t){h[t]=d.inEdges(t).reduce(function(t,e){return Math.max(t,h[e.v]+d.edge(e))},0)},d.predecessors.bind(d)),p(function(t){var e=d.outEdges(t).reduce(function(t,e){return Math.min(t,h[e.w]-d.edge(e))},Number.POSITIVE_INFINITY),r=n.node(t);e!==Number.POSITIVE_INFINITY&&r.borderType!==f&&(h[t]=Math.max(h[t],e))},d.successors.bind(d)),g.forEach(r,function(t){h[t]=h[e[t]]}),h}function f(i,t){return g.minBy(g.values(t),function(t){var r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return g.forIn(t,function(t,e){e=i.node(e).width/2;r=Math.max(t+e,r),n=Math.min(t-e,n)}),r-n})}function p(o,s){var t=g.values(s),c=g.min(t),l=g.max(t);g.forEach(["u","d"],function(a){g.forEach(["l","r"],function(t){var e,r,n=a+t,i=o[n];i!==s&&(e=g.values(i),r="l"===t?c-g.min(e):l-g.max(e))&&(o[n]=g.mapValues(i,function(t){return t+r}))})})}function m(r,n){return g.mapValues(r.ul,function(t,e){return n?r[n.toLowerCase()][e]:((e=g.sortBy(g.map(r,e)))[1]+e[2])/2})}}function XD(){var a,e,t;return SN||(SN=1,a=CD(),e=MD(),t=GD().positionX,CN=function(r){(function(r){var t=e.buildLayerMatrix(r),n=r.graph().ranksep,i=0;a.forEach(t,function(t){var e=a.max(a.map(t,function(t){return r.node(t).height}));a.forEach(t,function(t){r.node(t).y=i+e/2}),i+=e+n})})(r=e.asNonCompoundGraph(r)),a.forEach(t(r),function(t,e){r.node(e).x=t})}),CN}function ZD(){var u,n,i,o,s,c,h,d,f,p,g,y,m,l,b,_,v,x,k,w,E,T;return MN||(MN=1,u=CD(),n=AD(),i=ND(),o=OD(),s=MD().normalizeRanks,c=ID(),h=MD().removeEmptyRanks,d=RD(),f=FD(),p=PD(),g=VD(),y=XD(),m=MD(),l=FN().Graph,AN=function(a,t){var r=t&&t.debugTiming?m.time:m.notime;r("layout",function(){var e=r("  buildLayoutGraph",function(){return r=a,n=new l({multigraph:!0,compound:!0}),t=S(r.graph()),n.setGraph(u.merge({},_,C(t,b),u.pick(t,v))),u.forEach(r.nodes(),function(t){var e=S(r.node(t));n.setNode(t,u.defaults(C(e,x),k)),n.setParent(t,r.parent(t))}),u.forEach(r.edges(),function(t){var e=S(r.edge(t));n.setEdge(t,u.merge({},E,C(e,w),u.pick(e,T)))}),n;var r,n,t});r("  runLayout",function(){var l,t;l=e,(t=r)("    makeSpaceForEdgeLabels",function(){var e,r;(r=(e=l).graph()).ranksep/=2,u.forEach(e.edges(),function(t){t=e.edge(t);t.minlen*=2,"c"!==t.labelpos.toLowerCase()&&("TB"===r.rankdir||"BT"===r.rankdir?t.width+=t.labeloffset:t.height+=t.labeloffset)})}),t("    removeSelfEdges",function(){var r;r=l,u.forEach(r.edges(),function(t){var e;t.v===t.w&&((e=r.node(t.v)).selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:r.edge(t)}),r.removeEdge(t))})}),t("    acyclic",function(){n.run(l)}),t("    nestingGraph.run",function(){d.run(l)}),t("    rank",function(){o(m.asNonCompoundGraph(l))}),t("    injectEdgeLabelProxies",function(){var r;r=l,u.forEach(r.edges(),function(t){var e=r.edge(t);e.width&&e.height&&(e=r.node(t.v),e={rank:(r.node(t.w).rank-e.rank)/2+e.rank,e:t},m.addDummyNode(r,"edge-proxy",e,"_ep"))})}),t("    removeEmptyRanks",function(){h(l)}),t("    nestingGraph.cleanup",function(){d.cleanup(l)}),t("    normalizeRanks",function(){s(l)}),t("    assignRankMinMax",function(){var e,r;e=l,r=0,u.forEach(e.nodes(),function(t){t=e.node(t);t.borderTop&&(t.minRank=e.node(t.borderTop).rank,t.maxRank=e.node(t.borderBottom).rank,r=u.max(r,t.maxRank))}),e.graph().maxRank=r}),t("    removeEdgeLabelProxies",function(){var r;r=l,u.forEach(r.nodes(),function(t){var e=r.node(t);"edge-proxy"===e.dummy&&(r.edge(e.e).labelRank=e.rank,r.removeNode(t))})}),t("    normalize.run",function(){i.run(l)}),t("    parentDummyChains",function(){c(l)}),t("    addBorderSegments",function(){f(l)}),t("    order",function(){g(l)}),t("    insertSelfEdges",function(){var i,t;i=l,t=m.buildLayerMatrix(i),u.forEach(t,function(t){var n=0;u.forEach(t,function(t,e){var r=i.node(t);r.order=e+n,u.forEach(r.selfEdges,function(t){m.addDummyNode(i,"selfedge",{width:t.label.width,height:t.label.height,rank:r.rank,order:e+ ++n,e:t.e,label:t.label},"_se")}),delete r.selfEdges})})}),t("    adjustCoordinateSystem",function(){p.adjust(l)}),t("    position",function(){y(l)}),t("    positionSelfEdges",function(){var o;o=l,u.forEach(o.nodes(),function(t){var e,r,n,i,a=o.node(t);"selfedge"===a.dummy&&(e=(i=o.node(a.e.v)).x+i.width/2,r=i.y,n=a.x-e,i=i.height/2,o.setEdge(a.e,a.label),o.removeNode(t),a.label.points=[{x:e+2*n/3,y:r-i},{x:e+5*n/6,y:r-i},{x:e+n,y:r},{x:e+5*n/6,y:r+i},{x:e+2*n/3,y:r+i}],a.label.x=a.x,a.label.y=a.y)})}),t("    removeBorderNodes",function(){var a;a=l,u.forEach(a.nodes(),function(t){var e,r,n,i;a.children(t).length&&(t=a.node(t),e=a.node(t.borderTop),r=a.node(t.borderBottom),n=a.node(u.last(t.borderLeft)),i=a.node(u.last(t.borderRight)),t.width=Math.abs(i.x-n.x),t.height=Math.abs(r.y-e.y),t.x=n.x+t.width/2,t.y=e.y+t.height/2)}),u.forEach(a.nodes(),function(t){"border"===a.node(t).dummy&&a.removeNode(t)})}),t("    normalize.undo",function(){i.undo(l)}),t("    fixupEdgeLabelCoords",function(){var r;r=l,u.forEach(r.edges(),function(t){var e=r.edge(t);if(u.has(e,"x"))switch("l"!==e.labelpos&&"r"!==e.labelpos||(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset}})}),t("    undoCoordinateSystem",function(){p.undo(l)}),t("    translateGraph",function(){function e(t){var e=t.x,r=t.y,n=t.width,t=t.height;i=Math.min(i,e-n/2),a=Math.max(a,e+n/2),o=Math.min(o,r-t/2),s=Math.max(s,r+t/2)}var r,i,a,o,s,t,n,c;r=l,i=Number.POSITIVE_INFINITY,a=0,o=Number.POSITIVE_INFINITY,s=0,t=r.graph(),n=t.marginx||0,c=t.marginy||0,u.forEach(r.nodes(),function(t){e(r.node(t))}),u.forEach(r.edges(),function(t){t=r.edge(t);u.has(t,"x")&&e(t)}),i-=n,o-=c,u.forEach(r.nodes(),function(t){t=r.node(t);t.x-=i,t.y-=o}),u.forEach(r.edges(),function(t){t=r.edge(t);u.forEach(t.points,function(t){t.x-=i,t.y-=o}),u.has(t,"x")&&(t.x-=i),u.has(t,"y")&&(t.y-=o)}),t.width=a-i+n,t.height=s-o+c}),t("    assignNodeIntersects",function(){var a;a=l,u.forEach(a.edges(),function(t){var e,r=a.edge(t),n=a.node(t.v),t=a.node(t.w),i=r.points?(e=r.points[0],r.points[r.points.length-1]):(r.points=[],e=t,n);r.points.unshift(m.intersectRect(n,e)),r.points.push(m.intersectRect(t,i))})}),t("    reversePoints",function(){var e;e=l,u.forEach(e.edges(),function(t){t=e.edge(t);t.reversed&&t.points.reverse()})}),t("    acyclic.undo",function(){n.undo(l)})}),r("  updateInputGraph",function(){var n,i;n=a,i=e,u.forEach(n.nodes(),function(t){var e=n.node(t),r=i.node(t);e&&(e.x=r.x,e.y=r.y,i.children(t).length)&&(e.width=r.width,e.height=r.height)}),u.forEach(n.edges(),function(t){var e=n.edge(t),t=i.edge(t);e.points=t.points,u.has(t,"x")&&(e.x=t.x,e.y=t.y)}),n.graph().width=i.graph().width,n.graph().height=i.graph().height})})},b=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},v=["acyclicer","ranker","rankdir","align"],x=["width","height"],k={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},T=["labelpos"]),AN;function C(t,e){return u.mapValues(u.pick(t,e),Number)}function S(t){var r={};return u.forEach(t,function(t,e){r[e.toLowerCase()]=t}),r}}function KD(){var n,i,a;return DN||(DN=1,n=CD(),i=MD(),a=FN().Graph,NN={debugOrdering:function(e){var t=i.buildLayerMatrix(e),r=new a({compound:!0,multigraph:!0}).setGraph({});return n.forEach(e.nodes(),function(t){r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)}),n.forEach(e.edges(),function(t){r.setEdge(t.v,t.w,{},t.name)}),n.forEach(t,function(t,e){r.setNode("layer"+e,{rank:"same"}),n.reduce(t,function(t,e){return r.setEdge(t,e,{style:"invis"}),e})}),r}}),NN}function QD(){return IN||(IN=1,ON={graphlib:FN(),layout:ZD(),debug:KD(),util:{time:MD().time,notime:MD().notime},version:(BN||(BN=1,LN="0.8.5"),LN)}),ON}var JD=QD();let tL=0;function eL(t,e,r,n){e=rL(e),t=t.append("tspan").attr("x",n.padding).text(e.displayText),""!==e.cssStyle&&t.attr("style",e.cssStyle),r||t.attr("dy",n.textHeight)}const rL=function(t){var c=t.match(/^(\+|-|~|#)?(\w+)(~\w+~|\[\])?\s+(\w+) *(\*|\$)?$/),l=t.match(/^([+|\-|~|#])?(\w+) *\( *(.*)\) *(\*|\$)? *(\w*[~|[\]]*\s*\w*~?)$/);if(c&&!l){let t="",e="";try{var r=c[1]?c[1].trim():"",n=c[2]?c[2].trim():"",i=c[3]?q4(c[3].trim()):"",a=c[4]?c[4].trim():"",o=c[5]?c[5].trim():"";e=r+n+i+" "+a,t=nL(o)}catch{e=c}return{displayText:e,cssStyle:t}}if(l){c=l;let t="",e="";try{var s=c[1]?c[1].trim():"",u=c[2]?c[2].trim():"",h=c[3]?q4(c[3].trim()):"",d=c[4]?c[4].trim():"",f=c[5]?" : "+q4(c[5]).trim():"";e=s+u+"("+h+")"+f,t=nL(d)}catch{e=c}return{displayText:e,cssStyle:t}}{l=t;let n="",i="",a="",o=l.indexOf("("),s=l.indexOf(")");if(1<o&&o<s&&s<=l.length){let t="",e="",r=l.substring(0,1);e=(r.match(/\w/)?l.substring(0,o):(r.match(/\+|-|~|#/)&&(t=r),l.substring(1,o))).trim();c=l.substring(o+1,s);l.substring(s+1,1),i=nL(l.substring(s+1,s+2)),n=t+e+"("+q4(c.trim())+")",s<l.length&&""!==(a=l.substring(s+2).trim())&&(a=" : "+q4(a),n+=a)}else n=q4(l);return{displayText:n,cssStyle:i}}},nL=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},iL={drawClass:function(t,e,r,n){C.debug("Rendering class ",e,r);var i=e.id,a={id:i,label:e.id,width:0,height:0},t=t.append("g").attr("id",n.db.lookUpDomId(i)).attr("class","classGroup");let o,s=(o=(e.link?t.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget):t).append("text").attr("y",r.textHeight+r.padding).attr("x",0),!0),c=(e.annotations.forEach(function(t){t=o.append("tspan").text(""+t+"");s||t.attr("dy",r.textHeight),s=!1}),e.id);void 0!==e.type&&""!==e.type&&(c+="<"+e.type+">");n=o.append("tspan").text(c).attr("class","title");s||n.attr("dy",r.textHeight);const l=o.node().getBBox().height,u=t.append("line").attr("x1",0).attr("y1",r.padding+l+r.dividerMargin/2).attr("y2",r.padding+l+r.dividerMargin/2),h=t.append("text").attr("x",r.padding).attr("y",l+r.dividerMargin+r.textHeight).attr("fill","white").attr("class","classText"),d=(s=!0,e.members.forEach(function(t){eL(h,t,s,r),s=!1}),h.node().getBBox()),f=t.append("line").attr("x1",0).attr("y1",r.padding+l+r.dividerMargin+d.height).attr("y2",r.padding+l+r.dividerMargin+d.height),p=t.append("text").attr("x",r.padding).attr("y",l+2*r.dividerMargin+d.height+r.textHeight).attr("fill","white").attr("class","classText");s=!0,e.methods.forEach(function(t){eL(p,t,s,r),s=!1});i=t.node().getBBox(),n=" ";0<e.cssClasses.length&&(n+=e.cssClasses.join(" "));const g=t.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",i.width+2*r.padding).attr("height",i.height+r.padding+.5*r.dividerMargin).attr("class",n).node().getBBox().width;return o.node().childNodes.forEach(function(t){t.setAttribute("x",(g-t.getBBox().width)/2)}),e.tooltip&&o.insert("title").text(e.tooltip),u.attr("x2",g),f.attr("x2",g),a.width=g,a.height=i.height+r.padding+.5*r.dividerMargin,a},drawEdge:function(t,e,r,n,i){function a(t){switch(t){case i.db.relationType.AGGREGATION:return"aggregation";case i.db.EXTENSION:return"extension";case i.db.COMPOSITION:return"composition";case i.db.DEPENDENCY:return"dependency";case i.db.LOLLIPOP:return"lollipop"}}e.points=e.points.filter(t=>!Number.isNaN(t.y));var o=e.points,s=Yy().x(function(t){return t.x}).y(function(t){return t.y}).curve(Fm),s=t.append("path").attr("d",s(o)).attr("id","edge"+tL).attr("class","relation");let c="";n.arrowMarkerAbsolute&&(c=(c=(c=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),1==r.relation.lineType&&s.attr("class","relation dashed-line"),"none"!==r.relation.type1&&s.attr("marker-start","url("+c+"#"+a(r.relation.type1)+"Start)"),"none"!==r.relation.type2&&s.attr("marker-end","url("+c+"#"+a(r.relation.type2)+"End)");var l,o=e.points.length,s=g_.calcLabelPosition(e.points),u=s.x,s=s.y;let h,d,f,p;o%2!=0&&1<o&&(l=g_.calcCardinalityPosition("none"!==r.relation.type1,e.points,e.points[0]),e=g_.calcCardinalityPosition("none"!==r.relation.type2,e.points,e.points[o-1]),C.debug("cardinality_1_point "+JSON.stringify(l)),C.debug("cardinality_2_point "+JSON.stringify(e)),h=l.x,d=l.y,f=e.x,p=e.y),typeof r.title<"u"&&(l=(o=t.append("g").attr("class","classLabel")).append("text").attr("class","label").attr("x",u).attr("y",s).attr("fill","red").attr("text-anchor","middle").text(r.title),e=(window.label=l).node().getBBox(),o.insert("rect",":first-child").attr("class","box").attr("x",e.x-n.padding/2).attr("y",e.y-n.padding/2).attr("width",e.width+n.padding).attr("height",e.height+n.padding)),C.info("Rendering relation "+JSON.stringify(r)),typeof r.relationTitle1<"u"&&"none"!==r.relationTitle1&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",h).attr("y",d).attr("fill","black").attr("font-size","6").text(r.relationTitle1),typeof r.relationTitle2<"u"&&"none"!==r.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",f).attr("y",p).attr("fill","black").attr("font-size","6").text(r.relationTitle2),tL++},parseMember:rL};let aL={};function oL(e){var t=Object.entries(aL).find(t=>t[1].label===e);if(t)return t[0]}const sL={draw:function(t,e,r,n){const i=V().class;aL={},C.info("Rendering diagram "+t);var t=V().securityLevel;let a;"sandbox"===t&&(a=H("#i"+e));const o=H("sandbox"===t?a.nodes()[0].contentDocument.body:"body"),s=o.select(`[id='${e}']`),c=((t=s).append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z"),new RN.Graph({multigraph:!0}));c.setGraph({isMultiGraph:!0}),c.setDefaultEdgeLabel(function(){return{}});var l=n.db.getClasses(),u=Object.keys(l);for(let t=0;t<u.length;t++){var h=l[u[t]],h=iL.drawClass(s,h,i,n);aL[h.id]=h,c.setNode(h.id,h),C.info("Org height: "+h.height)}n.db.getRelations().forEach(function(t){C.info("tjoho"+oL(t.id1)+oL(t.id2)+JSON.stringify(t)),c.setEdge(oL(t.id1),oL(t.id2),{relation:t},t.title||"DEFAULT")}),JD.layout(c),c.nodes().forEach(function(t){typeof t<"u"&&typeof c.node(t)<"u"&&(C.debug("Node "+t+": "+JSON.stringify(c.node(t))),o.select("#"+n.db.lookUpDomId(t)).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y-c.node(t).height/2)+" )"))}),c.edges().forEach(function(t){typeof t<"u"&&typeof c.edge(t)<"u"&&(C.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(c.edge(t))),iL.drawEdge(s,c.edge(t),c.edge(t).relation,i,n))});var t=s.node().getBBox(),d=t.width+40,f=t.height+40,t=(f6(s,f,d,i.useMaxWidth),`${t.x-20} ${t.y-20} ${d} `+f);C.debug("viewBox "+t),s.attr("viewBox",t),vv(n.db,s,e)}},cL=(e,t,r,n)=>{t.forEach(t=>{lL[t](e,r,n)})},lL={extension:(t,e,r)=>{C.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}};const uL=(t,r,n,e)=>{let i=t||"";var a,o,s;if("object"==typeof i&&(i=i[0]),W4(V().flowchart.htmlLabels))return i=i.replace(/\\n|\n/g,"<br />"),C.info("vertexText"+i),t={isNode:e,label:_$(i).replace(/fa[lrsb]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:r.replace("fill:","color:")},e=t,t=H(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=t.append("xhtml:div"),o=e.label,s=e.isNode?"nodeLabel":"edgeLabel",a.html('<span class="'+s+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+o+"</span>"),s=a,(o=e.labelStyle)&&s.attr("style",o),a.style("display","inline-block"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node();{var c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("style",r.replace("color:","fill:"));let e=[];e="string"==typeof i?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[];for(let t=0;t<e.length;t++){var l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),n?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=e[t].trim(),c.appendChild(l)}return c}},hL=(t,e,r,n)=>{let i;i=r||"node default";r=t.insert("g").attr("class",i).attr("id",e.domId||e.id),t=r.insert("g").attr("class","label").attr("style",e.labelStyle);let a;a="u"<typeof e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0];var n=t.node().appendChild(uL(j4(_$(a),V()),e.labelStyle,!1,n));let o=n.getBBox();W4(V().flowchart.htmlLabels)&&(s=n.children[0],n=H(n),o=s.getBoundingClientRect(),n.attr("width",o.width),n.attr("height",o.height));var s=e.padding/2;return t.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),{shapeSvg:r,bbox:o,halfPadding:s,label:t}},dL=(t,e)=>{e=e.node().getBBox();t.width=e.width,t.height=e.height};function fL(t,e,r,n){return t.insert("polygon",":first-child").attr("points",n.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}let pL={},gL={},yL={};const mL=()=>{gL={},yL={},pL={}},bL=(t,e)=>(C.trace("In isDecendant",e," ",t," = ",0<=gL[e].indexOf(t)),0<=gL[e].indexOf(t)),_L=(i,a,o,s)=>{C.warn("Copying children of ",i,"root",s,"data",a.node(i),s);var t=a.children(i)||[];i!==s&&t.push(i),C.warn("Copying (nodes) clusterId",i,"nodes",t),t.forEach(t=>{var e;0<a.children(t).length?_L(t,a,o,s):(e=a.node(t),C.info("cp ",t," to ",s," with parent ",i),o.setNode(t,e),s!==a.parent(t)&&(C.warn("Setting parent",t,a.parent(t)),o.setParent(t,a.parent(t))),i!==s&&t!==i?(C.debug("Setting parent",t,i),o.setParent(t,i)):(C.info("In copy ",i,"root",s,"data",a.node(i),s),C.debug("Not Setting parent for node=",t,"cluster!==rootId",i!==s,"node!==clusterId",t!==i)),e=a.edges(t),C.debug("Copying Edges",e),e.forEach(t=>{C.info("Edge",t);var e,r,n=a.edge(t.v,t.w,t.name);C.info("Edge data",n,s);try{e=t,r=s,C.info("Decendants of ",r," is ",gL[r]),C.info("Edge is ",e),e.v===r||e.w===r||(gL[r]?!(0<=gL[r].indexOf(e.v)||bL(e.v,r)||bL(e.w,r)||0<=gL[r].indexOf(e.w)):(C.debug("Tilt, ",r,",not in decendants"),1))?C.info("Skipping copy of edge ",t.v,"--\x3e",t.w," rootId: ",s," clusterId:",i):(C.info("Copying as ",t.v,t.w,n,t.name),o.setEdge(t.v,t.w,n,t.name),C.info("newGraph edges ",o.edges(),o.edge(o.edges()[0])))}catch(t){C.error(t)}})),C.debug("Removing node",t),a.removeNode(t)})},vL=(e,r)=>{var n=r.children(e);let i=[].concat(n);for(let t=0;t<n.length;t++)yL[n[t]]=e,i=i.concat(vL(n[t],r));return i},xL=(e,r)=>{C.trace("Searching",e);var n=r.children(e);if(C.trace("Searching children of id ",e,n),n.length<1)return C.trace("This is a valid node",e),e;for(let t=0;t<n.length;t++){var i=xL(n[t],r);if(i)return C.trace("Found replacement for",e," => ",i),i}},kL=t=>pL[t]&&pL[t].externalConnections&&pL[t]?pL[t].id:t,wL=(s,t)=>{!s||10<t?C.debug("Opting out, no graph "):(C.debug("Opting in, graph "),s.nodes().forEach(function(t){0<s.children(t).length&&(C.warn("Cluster identified",t," Replacement id in edges: ",xL(t,s)),gL[t]=vL(t,s),pL[t]={id:xL(t,s),clusterData:s.node(t)})}),s.nodes().forEach(function(e){var t=s.children(e),r=s.edges();0<t.length?(C.debug("Cluster identified",e,gL),r.forEach(t=>{t.v!==e&&t.w!==e&&bL(t.v,e)^bL(t.w,e)&&(C.warn("Edge: ",t," leaves cluster ",e),C.warn("Decendants of XXX ",e,": ",gL[e]),pL[e].externalConnections=!0)})):C.debug("Not a cluster ",e,gL)}),s.edges().forEach(function(t){var e,r,n,i=s.edge(t);C.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),C.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(s.edge(t)));let a=t.v,o=t.w;C.warn("Fix XXX",pL,"ids:",t.v,t.w,"Translateing: ",pL[t.v]," --- ",pL[t.w]),pL[t.v]&&pL[t.w]&&pL[t.v]===pL[t.w]?(C.warn("Fixing and trixing link to self - removing XXX",t.v,t.w,t.name),C.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),a=kL(t.v),o=kL(t.w),s.removeEdge(t.v,t.w,t.name),e=t.w+"---"+t.v,s.setNode(e,{domId:e,id:e,labelStyle:"",labelText:i.label,padding:0,shape:"labelRect",style:""}),r=JSON.parse(JSON.stringify(i)),n=JSON.parse(JSON.stringify(i)),r.label="",r.arrowTypeEnd="none",n.label="",r.fromCluster=t.v,n.toCluster=t.v,s.setEdge(a,e,r,t.name+"-cyclic-special"),s.setEdge(e,o,n,t.name+"-cyclic-special")):(pL[t.v]||pL[t.w])&&(C.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),a=kL(t.v),o=kL(t.w),s.removeEdge(t.v,t.w,t.name),a!==t.v&&(i.fromCluster=t.v),o!==t.w&&(i.toCluster=t.w),C.warn("Fix Replacing with XXX",a,o,t.name),s.setEdge(a,o,i,t.name))}),C.warn("Adjusted Graph",RN.json.write(s)),EL(s,0),C.trace(pL))},EL=(n,i)=>{if(C.warn("extractor - ",i,RN.json.write(n),n.children("D")),10<i)C.error("Bailing out");else{let e=n.nodes(),r=!1;for(let t=0;t<e.length;t++){var a=e[t],a=n.children(a);r=r||0<a.length}if(r){C.debug("Nodes = ",e,i);for(let t=0;t<e.length;t++){var o=e[t];if(C.debug("Extracting node",o,pL,pL[o]&&!pL[o].externalConnections,!n.parent(o),n.node(o),n.children("D")," Depth ",i),pL[o])if(!pL[o].externalConnections&&n.children(o)&&0<n.children(o).length){C.warn("Cluster without external connections, without a parent and with children",o,i);let t="TB"===n.graph().rankdir?"LR":"TB";pL[o]&&pL[o].clusterData&&pL[o].clusterData.dir&&(t=pL[o].clusterData.dir,C.warn("Fixing dir",pL[o].clusterData.dir,t));var s=new RN.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:t,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});C.warn("Old graph before copy",RN.json.write(n)),_L(o,n,s,o),n.setNode(o,{clusterNode:!0,id:o,clusterData:pL[o].clusterData,labelText:pL[o].labelText,graph:s}),C.warn("New graph after copy node: (",o,")",RN.json.write(s)),C.debug("Old graph after copy",RN.json.write(n))}else C.warn("Cluster ** ",o," **not meeting the criteria !externalConnections:",!pL[o].externalConnections," no parent: ",!n.parent(o)," children ",n.children(o)&&0<n.children(o).length,n.children("D"),i),C.debug(pL);else C.debug("Not a cluster",o,i)}e=n.nodes(),C.warn("New list of nodes",e);for(let t=0;t<e.length;t++){var c=e[t],l=n.node(c);C.warn(" Now next level",c,l),l.clusterNode&&EL(l.graph,i+1)}}else C.debug("Done, no node has children",n.nodes())}},TL=(e,t)=>{if(0===t.length)return[];let r=Object.assign(t);return t.forEach(t=>{t=e.children(t),t=TL(e,t);r=r.concat(t)}),r};function CL(t,e,r,n){var i=t.x,t=t.y,a=i-n.x,o=t-n.y,s=Math.sqrt(e*e*o*o+r*r*a*a),a=Math.abs(e*r*a/s),e=(n.x<i&&(a=-a),Math.abs(e*r*o/s));return{x:i+a,y:t+(e=n.y<t?-e:e)}}const SL=(t,e)=>{var r,n=t.x,i=t.y,a=e.x-n,e=e.y-i,o=t.width/2,t=t.height/2,t=Math.abs(e)*o>Math.abs(a)*t?(e<0&&(t=-t),r=0==e?0:t*a/e,t):(r=o=a<0?-o:o,0==a?0:o*e/a);return{x:n+r,y:i+t}},AL={node:function(t,e){return t.intersect(e)},circle:function(t,e,r){return CL(t,e,e,r)},ellipse:CL,polygon:function(t,e,n){var r=t.x,i=t.y,a=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach(function(t){o=Math.min(o,t.x),s=Math.min(s,t.y)}):(o=Math.min(o,e.x),s=Math.min(s,e.y));for(var c=r-t.width/2-o,l=i-t.height/2-s,u=0;u<e.length;u++){var h=e[u],d=e[u<e.length-1?u+1:0],h=function(t,e,r,n){var i,a,o,s,c=e.y-t.y,l=t.x-e.x,u=e.x*t.y-t.x*e.y,h=c*r.x+l*r.y+u,d=c*n.x+l*n.y+u;if(!(0!=h&&0!=d&&0<h*d||(i=n.y-r.y,a=r.x-n.x,o=n.x*r.y-r.x*n.y,h=i*t.x+a*t.y+o,d=i*e.x+a*e.y+o,0!==h&&0!==d&&0<h*d)||0===(s=c*a-i*l)))return r=Math.abs(s/2),{x:(n=l*o-a*u)<0?(n-r)/s:(n+r)/s,y:(n=i*u-c*o)<0?(n-r)/s:(n+r)/s}}(t,n,{x:c+h.x,y:l+h.y},{x:c+d.x,y:l+d.y});h&&a.push(h)}return a.length?(1<a.length&&a.sort(function(t,e){var r=t.x-n.x,t=t.y-n.y,r=Math.sqrt(r*r+t*t),t=e.x-n.x,e=e.y-n.y,t=Math.sqrt(t*t+e*e);return r<t?-1:r===t?0:1}),a[0]):t},rect:SL};function ML(t,e,r,n){const i=[],a=t=>{i.push(t),i.push(0)},o=t=>{i.push(0),i.push(t)};(e.includes("t")?(C.debug("add top border"),a):o)(r),(e.includes("r")?(C.debug("add right border"),a):o)(n),(e.includes("b")?(C.debug("add bottom border"),a):o)(r),(e.includes("l")?(C.debug("add left border"),a):o)(n),t.attr("stroke-dasharray",i.join(" "))}const NL=(t,e,r)=>{t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let n=70,i=10;"LR"===r&&(n=10,i=70);r=t.append("rect").attr("x",-1*n/2).attr("y",-1*i/2).attr("width",n).attr("height",i).attr("class","fork-join");return dL(e,r),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return AL.rect(e,t)},t},DL={question:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=i+a,s=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}];C.info("Question main (Circle)");t=fL(r,o,o,s);return t.attr("style",e.style),dL(e,t),e.intersect=function(t){return C.warn("Intersect called"),AL.polygon(e,s,t)},r},rect:(t,e)=>{var{shapeSvg:t,bbox:r,halfPadding:n}=hL(t,e,"node "+e.classes,!0),i=(C.trace("Classes = ",e.classes),t.insert("rect",":first-child")),a=r.width+e.padding,o=r.height+e.padding;return i.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-n).attr("y",-r.height/2-n).attr("width",a).attr("height",o),e.props&&(r=new Set(Object.keys(e.props)),e.props.borders&&(ML(i,e.props.borders,a,o),r.delete("borders")),r.forEach(t=>{C.warn("Unknown node property "+t)})),dL(e,i),e.intersect=function(t){return AL.rect(e,t)},t},labelRect:(t,e)=>{var r,t=hL(t,e,"label",!0)["shapeSvg"],n=(C.trace("Classes = ",e.classes),t.insert("rect",":first-child"));return n.attr("width",0).attr("height",0),t.attr("class","label edgeLabel"),e.props&&(r=new Set(Object.keys(e.props)),e.props.borders&&(ML(n,e.props.borders,0,0),r.delete("borders")),r.forEach(t=>{C.warn("Unknown node property "+t)})),dL(e,n),e.intersect=function(t){return AL.rect(e,t)},t},rectWithTitle:(t,e)=>{let r;r=e.classes?"node "+e.classes:"node default";var t=t.insert("g").attr("class",r).attr("id",e.domId||e.id),n=t.insert("rect",":first-child"),i=t.insert("line"),a=t.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let s="";s="object"==typeof o?o[0]:o,C.info("Label text abc79",s,o,"object"==typeof o);var c=a.node().appendChild(uL(s,e.labelStyle,!0,!0));let l={width:0,height:0};W4(V().flowchart.htmlLabels)&&(h=c.children[0],d=H(c),l=h.getBoundingClientRect(),d.attr("width",l.width),d.attr("height",l.height)),C.info("Text 2",o);var u,h=o.slice(1,o.length),d=c.getBBox(),o=a.node().appendChild(uL(h.join?h.join("<br/>"):h,e.labelStyle,!0,!0)),h=(W4(V().flowchart.htmlLabels)&&(h=o.children[0],u=H(o),l=h.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)),e.padding/2);return H(o).attr("transform","translate( "+(l.width>d.width?0:(d.width-l.width)/2)+", "+(d.height+h+5)+")"),H(c).attr("transform","translate( "+(l.width<d.width?0:-(d.width-l.width)/2)+", 0)"),l=a.node().getBBox(),a.attr("transform","translate("+-l.width/2+", "+(-l.height/2-h+3)+")"),n.attr("class","outer title-state").attr("x",-l.width/2-h).attr("y",-l.height/2-h).attr("width",l.width+e.padding).attr("height",l.height+e.padding),i.attr("class","divider").attr("x1",-l.width/2-h).attr("x2",l.width/2+h).attr("y1",-l.height/2-h+d.height+h).attr("y2",-l.height/2-h+d.height+h),dL(e,n),e.intersect=function(t){return AL.rect(e,t)},t},choice:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return t.insert("polygon",":first-child").attr("points",r.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return AL.circle(e,14,t)},t},circle:(t,e)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=hL(t,e,void 0,!0),a=r.insert("circle",":first-child");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",n.width/2+i).attr("width",n.width+e.padding).attr("height",n.height+e.padding),C.info("Circle main"),dL(e,a),e.intersect=function(t){return C.info("Circle intersect",e,n.width/2+i,t),AL.circle(e,n.width/2+i,t)},r},doublecircle:(t,e)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=hL(t,e,void 0,!0),a=r.insert("g",":first-child"),o=a.insert("circle"),s=a.insert("circle");return o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",n.width/2+i+5).attr("width",n.width+e.padding+10).attr("height",n.height+e.padding+10),s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",n.width/2+i).attr("width",n.width+e.padding).attr("height",n.height+e.padding),C.info("DoubleCircle main"),dL(e,o),e.intersect=function(t){return C.info("DoubleCircle intersect",e,n.width/2+i+5,t),AL.circle(e,n.width/2+i+5,t)},r},stadium:(t,e)=>{var{shapeSvg:t,bbox:r}=hL(t,e,void 0,!0),n=r.height+e.padding,r=r.width+n/4+e.padding,r=t.insert("rect",":first-child").attr("style",e.style).attr("rx",n/2).attr("ry",n/2).attr("x",-r/2).attr("y",-n/2).attr("width",r).attr("height",n);return dL(e,r),e.intersect=function(t){return AL.rect(e,t)},t},hexagon:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.height+e.padding,a=i/4,o=n.width+2*a+e.padding,s=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-i/2},{x:o-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}],c=fL(r,o,i,s);return c.attr("style",e.style),dL(e,c),e.intersect=function(t){return AL.polygon(e,s,t)},r},rect_left_inv_arrow:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return fL(r,i,a,o).attr("style",e.style),e.width=i+a,e.height=a,e.intersect=function(t){return AL.polygon(e,o,t)},r},lean_right:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],s=fL(r,i,a,o);return s.attr("style",e.style),dL(e,s),e.intersect=function(t){return AL.polygon(e,o,t)},r},lean_left:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],s=fL(r,i,a,o);return s.attr("style",e.style),dL(e,s),e.intersect=function(t){return AL.polygon(e,o,t)},r},trapezoid:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],s=fL(r,i,a,o);return s.attr("style",e.style),dL(e,s),e.intersect=function(t){return AL.polygon(e,o,t)},r},inv_trapezoid:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],s=fL(r,i,a,o);return s.attr("style",e.style),dL(e,s),e.intersect=function(t){return AL.polygon(e,o,t)},r},rect_right_inv_arrow:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],s=fL(r,i,a,o);return s.attr("style",e.style),dL(e,s),e.intersect=function(t){return AL.polygon(e,o,t)},r},cylinder:(t,i)=>{const{shapeSvg:e,bbox:r}=hL(t,i,void 0,!0),n=r.width+i.padding,a=n/2,o=a/(2.5+n/50),s=r.height+o+i.padding,c="M 0,"+o+" a "+a+","+o+" 0,0,0 "+n+" 0 a "+a+","+o+" 0,0,0 "+-n+" 0 l 0,"+s+" a "+a+","+o+" 0,0,0 "+n+" 0 l 0,"+-s,l=e.attr("label-offset-y",o).insert("path",":first-child").attr("style",i.style).attr("d",c).attr("transform","translate("+-n/2+","+-(s/2+o)+")");return dL(i,l),i.intersect=function(e){var r=AL.rect(i,e),n=r.x-i.x;if(0!=a&&(Math.abs(n)<i.width/2||Math.abs(n)==i.width/2&&Math.abs(r.y-i.y)>i.height/2-o)){let t=o*o*(1-n*n/(a*a));0!=t&&(t=Math.sqrt(t)),t=o-t,0<e.y-i.y&&(t=-t),r.y+=t}return r},e},start:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=t.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),dL(e,r),e.intersect=function(t){return AL.circle(e,7,t)},t},end:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=t.insert("circle",":first-child"),n=t.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),dL(e,n),e.intersect=function(t){return AL.circle(e,7,t)},t},note:(t,e)=>{var{shapeSvg:t,bbox:r,halfPadding:n}=hL(t,e,"node "+e.classes,!0),i=(C.info("Classes = ",e.classes),t.insert("rect",":first-child"));return i.attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-n).attr("y",-r.height/2-n).attr("width",r.width+e.padding).attr("height",r.height+e.padding),dL(e,i),e.intersect=function(t){return AL.rect(e,t)},t},subroutine:(t,e)=>{const{shapeSvg:r,bbox:n}=hL(t,e,void 0,!0),i=n.width+e.padding,a=n.height+e.padding,o=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],s=fL(r,i,a,o);return s.attr("style",e.style),dL(e,s),e.intersect=function(t){return AL.polygon(e,o,t)},r},fork:NL,join:NL,class_box:(t,a)=>{const e=a.padding/2;let r;r=a.classes?"node "+a.classes:"node default";var t=t.insert("g").attr("class",r).attr("id",a.domId||a.id),n=t.insert("rect",":first-child"),i=t.insert("line"),o=t.insert("line");let s=0,c=4;const l=t.insert("g").attr("class","label");let u=0;var h=a.classData.annotations&&a.classData.annotations[0],d=a.classData.annotations[0]?""+a.classData.annotations[0]+"":"",d=l.node().appendChild(uL(d,a.labelStyle,!0,!0));let f=d.getBBox(),p=(W4(V().flowchart.htmlLabels)&&(y=d.children[0],g=H(d),f=y.getBoundingClientRect(),g.attr("width",f.width),g.attr("height",f.height)),a.classData.annotations[0]&&(c+=f.height+4,s+=f.width),a.classData.id);void 0!==a.classData.type&&""!==a.classData.type&&(V().flowchart.htmlLabels?p+="&lt;"+a.classData.type+"&gt;":p+="<"+a.classData.type+">");var g,y=l.node().appendChild(uL(p,a.labelStyle,!0,!0));H(y).attr("class","classTitle");let m=y.getBBox();W4(V().flowchart.htmlLabels)&&(g=y.children[0],v=H(y),m=g.getBoundingClientRect(),v.attr("width",m.width),v.attr("height",m.height)),c+=m.height+4,m.width>s&&(s=m.width);const b=[],_=(a.classData.members.forEach(t=>{t=rL(t);let e=t.displayText;V().flowchart.htmlLabels&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var r,n,t=l.node().appendChild(uL(e,t.cssStyle||a.labelStyle,!0,!0));let i=t.getBBox();W4(V().flowchart.htmlLabels)&&(r=t.children[0],n=H(t),i=r.getBoundingClientRect(),n.attr("width",i.width),n.attr("height",i.height)),i.width>s&&(s=i.width),c+=i.height+4,b.push(t)}),c+=8,[]);a.classData.methods.forEach(t=>{t=rL(t);let e=t.displayText;V().flowchart.htmlLabels&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var r,n,t=l.node().appendChild(uL(e,t.cssStyle||a.labelStyle,!0,!0));let i=t.getBBox();W4(V().flowchart.htmlLabels)&&(r=t.children[0],n=H(t),i=r.getBoundingClientRect(),n.attr("width",i.width),n.attr("height",i.height)),i.width>s&&(s=i.width),c+=i.height+4,_.push(t)}),c+=8,h&&(g=(s-f.width)/2,H(d).attr("transform","translate( "+(-1*s/2+g)+", "+-1*c/2+")"),u=f.height+4);var v=(s-m.width)/2;return H(y).attr("transform","translate( "+(-1*s/2+v)+", "+(-1*c/2+u)+")"),u+=m.height+4,i.attr("class","divider").attr("x1",-s/2-e).attr("x2",s/2+e).attr("y1",-c/2-e+8+u).attr("y2",-c/2-e+8+u),u+=8,b.forEach(t=>{H(t).attr("transform","translate( "+-s/2+", "+(-1*c/2+u+4)+")"),u+=m.height+4}),u+=8,o.attr("class","divider").attr("x1",-s/2-e).attr("x2",s/2+e).attr("y1",-c/2-e+8+u).attr("y2",-c/2-e+8+u),u+=8,_.forEach(t=>{H(t).attr("transform","translate( "+-s/2+", "+(-1*c/2+u)+")"),u+=m.height+4}),n.attr("class","outer title-state").attr("x",-s/2-e).attr("y",-c/2-e).attr("width",s+a.padding).attr("height",c+a.padding),dL(a,n),a.intersect=function(t){return AL.rect(a,t)},t}};let LL={};const BL=()=>{LL={}},OL=t=>{var e=LL[t.id],r=(C.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")"),t.diff||0);return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},IL={rect:(t,e)=>{C.trace("Creating subgraph rect for ",e.id,e);var t=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=t.insert("rect",":first-child"),n=t.insert("g").attr("class","cluster-label"),i=n.node().appendChild(uL(e.labelText,e.labelStyle,void 0,!0));let a=i.getBBox();W4(V().flowchart.htmlLabels)&&(o=i.children[0],i=H(i),a=o.getBoundingClientRect(),i.attr("width",a.width),i.attr("height",a.height));var o=0*e.padding,i=o/2,s=e.width<=a.width+o?a.width+o:e.width,i=(e.width<=a.width+o?e.diff=(a.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,C.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-s/2).attr("y",e.y-e.height/2-i).attr("width",s).attr("height",e.height+o),n.attr("transform","translate("+(e.x-a.width/2)+", "+(e.y-e.height/2+e.padding/3)+")"),r.node().getBBox());return e.width=i.width,e.height=i.height,e.intersect=function(t){return SL(e,t)},t},roundedWithTitle:(t,e)=>{var t=t.insert("g").attr("class",e.classes).attr("id",e.id),r=t.insert("rect",":first-child"),n=t.insert("g").attr("class","cluster-label"),i=t.append("rect"),a=n.node().appendChild(uL(e.labelText,e.labelStyle,void 0,!0));let o=a.getBBox();W4(V().flowchart.htmlLabels)&&(s=a.children[0],c=H(a),o=s.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)),o=a.getBBox();var s=0*e.padding,c=s/2,a=e.width<=o.width+e.padding?o.width+e.padding:e.width,i=(e.width<=o.width+e.padding?e.diff=(o.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-a/2-c).attr("y",e.y-e.height/2-c).attr("width",a+s).attr("height",e.height+s),i.attr("class","inner").attr("x",e.x-a/2-c).attr("y",e.y-e.height/2-c+o.height-1).attr("width",a+s).attr("height",e.height+s-o.height-3),n.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2-e.padding/3+(W4(V().flowchart.htmlLabels)?5:3))+")"),r.node().getBBox());return e.height=i.height,e.intersect=function(t){return SL(e,t)},t},noteGroup:(t,e)=>{var t=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=t.insert("rect",":first-child"),n=0*e.padding,i=n/2,i=(r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2-i).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none"),r.node().getBBox());return e.width=i.width,e.height=i.height,e.intersect=function(t){return SL(e,t)},t},divider:(t,e)=>{var t=t.insert("g").attr("class",e.classes).attr("id",e.id),r=t.insert("rect",":first-child"),n=0*e.padding,i=n/2,i=(r.attr("class","divider").attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2).attr("width",e.width+n).attr("height",e.height+n),r.node().getBBox());return e.width=i.width,e.height=i.height,e.diff=-e.padding/2,e.intersect=function(t){return SL(e,t)},t}};let RL={};const FL=()=>{RL={}};let PL={},$L={};const jL=()=>{PL={},$L={}};function YL(t,e){V().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}const zL=(t,o)=>{C.warn("abc88 cutPathAtIntersect",t,o);let s=[],c=t[0],l=!1;return t.forEach(t=>{if(C.info("abc88 checking point",t,o),r=t,n=(e=o).x,i=e.y,n=Math.abs(r.x-n),r=Math.abs(r.y-i),i=e.width/2,e=e.height/2,i<=n||e<=r||l)C.warn("abc88 outside",t,c),c=t,l||s.push(t);else{const a=((n,i,a)=>{C.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(i)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${n.x} y:${n.y} w:${n.width} h:`+n.height);var o=n.x,t=n.y,e=Math.abs(o-a.x),s=n.width/2;let c=a.x<i.x?s-e:s+e;var e=n.height/2,n=Math.abs(i.y-a.y),l=Math.abs(i.x-a.x);if(Math.abs(t-i.y)*s>Math.abs(o-i.x)*e)return t=a.y<i.y?i.y-e-t:t-e-i.y,c=l*t/n,e={x:a.x<i.x?a.x+c:a.x-l+c,y:a.y<i.y?a.y+n-t:a.y-n+t},0===c&&(e.x=i.x,e.y=i.y),0===l&&(e.x=i.x),0===n&&(e.y=i.y),C.warn(`abc89 topp/bott calc, Q ${n}, q ${t}, R ${l}, r `+c,e),e;{let t=n*(c=a.x<i.x?i.x-s-o:o-s-i.x)/l,e=a.x<i.x?a.x+l-c:a.x-l+c,r=a.y<i.y?a.y+t:a.y-t;return C.warn(`sides calc abc89, Q ${n}, q ${t}, R ${l}, r `+c,{_x:e,_y:r}),0===c&&(e=i.x,r=i.y),0===l&&(e=i.x),0===n&&(r=i.y),{x:e,y:r}}})(o,c,t);C.warn("abc88 inside",t,c,a),C.warn("abc88 intersection",a);let e=!1;s.forEach(t=>{e=e||t.x===a.x&&t.y===a.y}),s.find(t=>t.x===a.x&&t.y===a.y)?C.warn("abc88 no intersect",a,s):s.push(a),l=!0}var e,r,n,i}),C.warn("abc88 returning points",s),s},UL=(t,c,l,r)=>{C.info("Graph in recursive render: XXX",RN.json.write(c),r);const o=c.graph().rankdir;C.trace("Dir in recursive render - dir:",o);var e,t=t.insert("g").attr("class","root");c.nodes()?C.info("Recursive render XXX",c.nodes()):C.info("No nodes found for",c),0<c.edges().length&&C.trace("Recursive edges",c.edge(c.edges()[0]));const i=t.insert("g").attr("class","clusters"),u=t.insert("g").attr("class","edgePaths"),h=t.insert("g").attr("class","edgeLabels"),s=t.insert("g").attr("class","nodes");c.nodes().forEach(function(t){var e,n=c.node(t);if(typeof r<"u"&&(e=JSON.parse(JSON.stringify(r.clusterData)),C.info("Setting data for cluster XXX (",t,") ",e,r),c.setNode(r.id,e),c.parent(t)||(C.trace("Setting parent",t,r.id),c.setParent(t,r.id,e))),C.info("(Insert) Node XXX"+t+": "+JSON.stringify(c.node(t))),n&&n.clusterNode)C.info("Cluster identified",t,n.width,c.node(t)),a=(e=UL(s,n.graph,l,c.node(t))).elem,dL(n,a),n.diff=e.diff||0,C.info("Node bounds (abc123)",t,n,n.width,n.x,n.y),e=a,i=n,LL[i.id]=e,C.warn("Recursive render complete ",a,n);else if(0<c.children(t).length)C.info("Cluster - the non recursive path XXX",t,n.id,n,c),C.info(xL(n.id,c)),pL[n.id]={id:xL(n.id,c),node:n};else{C.info("Node - the non recursive path",t,n.id,n);{var i=s,a=c.node(t),n=o;let e,r;if(a.link){let t;"sandbox"===V().securityLevel?t="_top":a.linkTarget&&(t=a.linkTarget||"_blank"),e=i.insert("svg:a").attr("xlink:href",a.link).attr("target",t),r=DL[a.shape](e,a,n)}else r=DL[a.shape](i,a,n),e=r;a.tooltip&&r.attr("title",a.tooltip),a.class&&r.attr("class","node default "+a.class),LL[a.id]=e,a.haveCallback&&LL[a.id].attr("class",LL[a.id].attr("class")+" clickable")}}}),c.edges().forEach(function(r){var n=c.edge(r.v,r.w,r.name);C.info("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),C.info("Edge "+r.v+" -> "+r.w+": ",r," ",JSON.stringify(c.edge(r))),C.info("Fix",pL,"ids:",r.v,r.w,"Translateing: ",pL[r.v],pL[r.w]);{r=h;var i,a=uL(n.label,n.labelStyle),o=r.insert("g").attr("class","edgeLabel"),s=o.insert("g").attr("class","label");s.node().appendChild(a);let t=a.getBBox();W4(V().flowchart.htmlLabels)&&(i=a.children[0],a=H(a),t=i.getBoundingClientRect(),a.attr("width",t.width),a.attr("height",t.height)),s.attr("transform","translate("+-t.width/2+", "+-t.height/2+")"),PL[n.id]=o,n.width=t.width,n.height=t.height;let e;n.startLabelLeft&&(i=uL(n.startLabelLeft,n.labelStyle),s=(a=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=s.node().appendChild(i),o=i.getBBox(),s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),$L[n.id]||($L[n.id]={}),$L[n.id].startLeft=a,YL(e,n.startLabelLeft)),n.startLabelRight&&(i=uL(n.startLabelRight,n.labelStyle),o=(s=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=s.node().appendChild(i),o.node().appendChild(i),a=i.getBBox(),o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),$L[n.id]||($L[n.id]={}),$L[n.id].startRight=s,YL(e,n.startLabelRight)),n.endLabelLeft&&(i=uL(n.endLabelLeft,n.labelStyle),a=(o=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=a.node().appendChild(i),s=i.getBBox(),a.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),o.node().appendChild(i),$L[n.id]||($L[n.id]={}),$L[n.id].endLeft=o,YL(e,n.endLabelLeft)),n.endLabelRight&&(a=uL(n.endLabelRight,n.labelStyle),i=(s=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=i.node().appendChild(a),o=a.getBBox(),i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),s.node().appendChild(a),$L[n.id]||($L[n.id]={}),$L[n.id].endRight=s,YL(e,n.endLabelRight))}}),c.edges().forEach(function(t){C.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))}),C.info("#############################################"),C.info("###                Layout                 ###"),C.info("#############################################"),C.info(c),JD.layout(c),C.info("Graph after layout:",RN.json.write(c));let n=0;return e=c,TL(e,e.children()).forEach(function(t){var e,r,n=c.node(t);C.info("Position "+t+": "+JSON.stringify(c.node(t))),C.info("Position "+t+": ("+n.x,","+n.y,") width: ",n.width," height: ",n.height),(!n||!n.clusterNode)&&0<c.children(t).length?(t=i,e=n,C.trace("Inserting cluster"),r=e.shape||"rect",RL[e.id]=IL[r](t,e),pL[n.id].node=n):OL(n)}),c.edges().forEach(function(r){var n=c.edge(r),r=(C.info("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(n),n),function(t,e,r,n,i,a){let o=r.points,s=!1;var c=a.node(e.v),a=a.node(e.w),e=(C.info("abc88 InsertEdge: ",r),a.intersect&&c.intersect&&((o=o.slice(1,r.points.length-1)).unshift(c.intersect(o[0])),C.info("Last point",o[o.length-1],a,a.intersect(o[o.length-1])),o.push(a.intersect(o[o.length-1]))),r.toCluster&&(C.info("to cluster abc88",n[r.toCluster]),o=zL(r.points,n[r.toCluster].node),s=!0),r.fromCluster&&(C.info("from cluster abc88",n[r.fromCluster]),o=zL(o.reverse(),n[r.fromCluster].node).reverse(),s=!0),o.filter(t=>!Number.isNaN(t.y)));let l;l=("graph"===i||"flowchart"===i)&&r.curve||Fm;c=Yy().x(function(t){return t.x}).y(function(t){return t.y}).curve(l);let u;switch(r.thickness){case"normal":u="edge-thickness-normal";break;case"thick":case"invisible":u="edge-thickness-thick";break;default:u=""}switch(r.pattern){case"solid":u+=" edge-pattern-solid";break;case"dotted":u+=" edge-pattern-dotted";break;case"dashed":u+=" edge-pattern-dashed"}var h=t.append("path").attr("d",c(e)).attr("id",r.id).attr("class"," "+u+(r.classes?" "+r.classes:"")).attr("style",r.style);let d="";switch((V().flowchart.arrowMarkerAbsolute||V().state.arrowMarkerAbsolute)&&(d=(d=(d=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),C.info("arrowTypeStart",r.arrowTypeStart),C.info("arrowTypeEnd",r.arrowTypeEnd),r.arrowTypeStart){case"arrow_cross":h.attr("marker-start","url("+d+"#"+i+"-crossStart)");break;case"arrow_point":h.attr("marker-start","url("+d+"#"+i+"-pointStart)");break;case"arrow_barb":h.attr("marker-start","url("+d+"#"+i+"-barbStart)");break;case"arrow_circle":h.attr("marker-start","url("+d+"#"+i+"-circleStart)");break;case"aggregation":h.attr("marker-start","url("+d+"#"+i+"-aggregationStart)");break;case"extension":h.attr("marker-start","url("+d+"#"+i+"-extensionStart)");break;case"composition":h.attr("marker-start","url("+d+"#"+i+"-compositionStart)");break;case"dependency":h.attr("marker-start","url("+d+"#"+i+"-dependencyStart)");break;case"lollipop":h.attr("marker-start","url("+d+"#"+i+"-lollipopStart)")}switch(r.arrowTypeEnd){case"arrow_cross":h.attr("marker-end","url("+d+"#"+i+"-crossEnd)");break;case"arrow_point":h.attr("marker-end","url("+d+"#"+i+"-pointEnd)");break;case"arrow_barb":h.attr("marker-end","url("+d+"#"+i+"-barbEnd)");break;case"arrow_circle":h.attr("marker-end","url("+d+"#"+i+"-circleEnd)");break;case"aggregation":h.attr("marker-end","url("+d+"#"+i+"-aggregationEnd)");break;case"extension":h.attr("marker-end","url("+d+"#"+i+"-extensionEnd)");break;case"composition":h.attr("marker-end","url("+d+"#"+i+"-compositionEnd)");break;case"dependency":h.attr("marker-end","url("+d+"#"+i+"-dependencyEnd)");break;case"lollipop":h.attr("marker-end","url("+d+"#"+i+"-lollipopEnd)")}a={};return s&&(a.updatedPath=o),a.originalPath=r.points,a}(u,r,n,pL,l,c));if(C.info("Moving label abc78 ",n.id,n.label,PL[n.id]),r=r.updatedPath||r.originalPath,n.label&&(o=PL[n.id],a=n.x,s=n.y,r&&(i=g_.calcLabelPosition(r),C.info("Moving label from (",a,",",s,") to (",i.x,",",i.y,") abc78")),o.attr("transform","translate("+a+", "+s+")")),n.startLabelLeft){var i=$L[n.id].startLeft;let t=n.x,e=n.y;r&&(o=g_.calcTerminalLabelPosition(n.arrowTypeStart?10:0,"start_left",r),t=o.x,e=o.y),i.attr("transform","translate("+t+", "+e+")")}if(n.startLabelRight){var a=$L[n.id].startRight;let t=n.x,e=n.y;r&&(s=g_.calcTerminalLabelPosition(n.arrowTypeStart?10:0,"start_right",r),t=s.x,e=s.y),a.attr("transform","translate("+t+", "+e+")")}if(n.endLabelLeft){var o=$L[n.id].endLeft;let t=n.x,e=n.y;r&&(i=g_.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,"end_left",r),t=i.x,e=i.y),o.attr("transform","translate("+t+", "+e+")")}if(n.endLabelRight){var s=$L[n.id].endRight;let t=n.x,e=n.y;r&&(a=g_.calcTerminalLabelPosition(n.arrowTypeEnd?10:0,"end_right",r),t=a.x,e=a.y),s.attr("transform","translate("+t+", "+e+")")}}),c.nodes().forEach(function(t){var e=c.node(t);C.info(t,e.type,e.diff),"group"===e.type&&(n=e.diff)}),{elem:t,diff:n}},WL=(t,e,r,n,i)=>{cL(t,r,n,i),BL(),jL(),FL(),mL(),C.warn("Graph at first:",RN.json.write(e)),wL(e),C.warn("Graph after:",RN.json.write(e)),UL(t,e,n)},qL=t=>H4.sanitizeText(t,V());function HL(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const VL={setConf:function(e){Object.keys(e).forEach(function(t){e[t]})},draw:function(t,e,r,n){C.info("Drawing class - ",e);var a,o,s,i=V().flowchart,c=V().securityLevel,l=(C.info("config:",i),i.nodeSpacing||50),u=i.rankSpacing||50,l=new RN.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:n.db.getDirection(),nodesep:l,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),u=n.db.getClasses(),h=n.db.getRelations();C.info(h),a=u,o=l,s=n,u=Object.keys(a),C.info("keys:",u),C.info(a),u.forEach(function(t){t=a[t];let e="";0<t.cssClasses.length&&(e=e+" "+t.cssClasses.join(" "));var r={labelStyle:""};let n=void 0!==t.text?t.text:t.id,i="";t.type,i="class_box",o.setNode(t.id,{labelStyle:r.labelStyle,shape:i,labelText:qL(n),classData:t,rx:0,ry:0,class:e,style:r.style,id:t.id,domId:t.domId,tooltip:s.db.getTooltip(t.id)||"",haveCallback:t.haveCallback,link:t.link,width:"group"===t.type?500:void 0,type:t.type,padding:V().flowchart.padding}),C.info("setNode",{labelStyle:r.labelStyle,shape:i,labelText:n,rx:0,ry:0,class:e,style:r.style,id:t.id,width:"group"===t.type?500:void 0,type:t.type,padding:V().flowchart.padding})});{var d=h,f=l;const v=V().flowchart;let a=0;d.forEach(function(t){a++;var e,r={classes:"relation"};r.pattern=1==t.relation.lineType?"dashed":"solid",r.id="id"+a,"arrow_open"===t.type?r.arrowhead="none":r.arrowhead="normal",C.info(r,t),r.startLabelRight="none"===t.relationTitle1?"":t.relationTitle1,r.endLabelLeft="none"===t.relationTitle2?"":t.relationTitle2,r.arrowTypeStart=HL(t.relation.type1),r.arrowTypeEnd=HL(t.relation.type2);let n="",i="";typeof t.style<"u"?(e=r_(t.style),n=e.style,i=e.labelStyle):n="fill:none",r.style=n,r.labelStyle=i,typeof t.interpolate<"u"?r.curve=t_(t.interpolate,Py):typeof d.defaultInterpolate<"u"?r.curve=t_(d.defaultInterpolate,Py):r.curve=t_(v.curve,Py),t.text=t.title,"u"<typeof t.text?typeof t.style<"u"&&(r.arrowheadStyle="fill: #333"):(r.arrowheadStyle="fill: #333",r.labelpos="c",V().flowchart.htmlLabels?(r.labelType="html",r.label='<span class="edgeLabel">'+t.text+"</span>"):(r.labelType="text",r.label=t.text.replace(H4.lineBreakRegex,`
`),"u"<typeof t.style&&(r.style=r.style||"stroke: #333; stroke-width: 1.5px;fill:none"),r.labelStyle=r.labelStyle.replace("color:","fill:"))),f.setEdge(t.id1,t.id2,r,a)})}let p;"sandbox"===c&&(p=H("#i"+e));u=H("sandbox"===c?p.nodes()[0].contentDocument.body:"body"),h=u.select(`[id="${e}"]`),u=u.select("#"+e+" g");if(WL(u,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),p6(l,h,i.diagramPadding,i.useMaxWidth),!i.htmlLabels){var g="sandbox"===c?p.nodes()[0].contentDocument:document,y=g.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let t=0;t<y.length;t++){var m=y[t],b=m.getBBox(),_=g.createElementNS("http://www.w3.org/2000/svg","rect");_.setAttribute("rx",0),_.setAttribute("ry",0),_.setAttribute("width",b.width),_.setAttribute("height",b.height),m.insertBefore(_,m.firstChild)}}vv(n.db,h,e)}};v2=[1,17],k2=[1,18],ng=[1,19],rg=[1,20],Ps=[1,21],Fs=[1,22],F=[1,25],$s=[1,30],js=[1,31],zs=[1,32],Ys=[1,33],Co=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],Ws=[1,45],qs=[30,31,46,47],Hs=[4,6,9,11,23,25,27,29,30,31,49],Vs=[42,43,44,45],Gs=[22,37],Xs=[1,64],(Us={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 1:break;case 3:this.$=[];break;case 4:a[s-1].push(a[s]),this.$=a[s-1];break;case 5:case 6:this.$=a[s];break;case 7:case 8:this.$=[];break;case 12:n.addEntity(a[s-4]),n.addEntity(a[s-2]),n.addRelationship(a[s-4],a[s],a[s-2],a[s-3]);break;case 13:n.addEntity(a[s-3]),n.addAttributes(a[s-3],a[s-1]);break;case 14:n.addEntity(a[s-2]);break;case 15:n.addEntity(a[s]);break;case 16:case 17:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 18:case 19:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 20:case 41:this.$=a[s];break;case 21:case 39:case 40:this.$=a[s].replace(/"/g,"");break;case 22:this.$=[a[s]];break;case 23:a[s].push(a[s-1]),this.$=a[s];break;case 24:this.$={attributeType:a[s-1],attributeName:a[s]};break;case 25:this.$={attributeType:a[s-2],attributeName:a[s-1],attributeKeyType:a[s]};break;case 26:this.$={attributeType:a[s-2],attributeName:a[s-1],attributeComment:a[s]};break;case 27:this.$={attributeType:a[s-3],attributeName:a[s-2],attributeKeyType:a[s-1],attributeComment:a[s]};break;case 28:case 29:case 30:this.$=a[s];break;case 31:this.$=a[s].replace(/"/g,"");break;case 32:this.$={cardA:a[s],relType:a[s-1],cardB:a[s-2]};break;case 33:this.$=n.Cardinality.ZERO_OR_ONE;break;case 34:this.$=n.Cardinality.ZERO_OR_MORE;break;case 35:this.$=n.Cardinality.ONE_OR_MORE;break;case 36:this.$=n.Cardinality.ONLY_ONE;break;case 37:this.$=n.Identification.NON_IDENTIFYING;break;case 38:this.$=n.Identification.IDENTIFYING;break;case 42:n.parseDirective("%%{","open_directive");break;case 43:n.parseDirective(a[s],"type_directive");break;case 44:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 45:n.parseDirective("}%%","close_directive","er")}},table:[{3:1,4:Us=[1,2],7:3,12:4,49:Ma=[1,5]},{1:[3]},XL(cc=[6,9,11,23,25,27,29,30,31,49],[2,3],{5:6}),{3:7,4:Us,7:3,12:4,49:Ma},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:v2,25:k2,27:ng,29:rg,30:Ps,31:Fs,49:Ma},{1:[2,2]},{14:23,15:[1,24],52:F},XL([15,52],[2,43]),XL(cc,[2,8],{1:[2,1]}),XL(cc,[2,4]),{7:15,10:26,12:4,17:16,23:v2,25:k2,27:ng,29:rg,30:Ps,31:Fs,49:Ma},XL(cc,[2,6]),XL(cc,[2,7]),XL(cc,[2,11]),XL(cc,[2,15],{18:27,40:29,20:[1,28],42:$s,43:js,44:zs,45:Ys}),{24:[1,34]},{26:[1,35]},{28:[1,36]},XL(cc,[2,19]),XL(Co,[2,20]),XL(Co,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},XL(cc,[2,5]),{17:40,30:Ps,31:Fs},{21:41,22:[1,42],32:43,33:44,37:Ws},{41:46,46:[1,47],47:[1,48]},XL(qs,[2,33]),XL(qs,[2,34]),XL(qs,[2,35]),XL(qs,[2,36]),XL(cc,[2,16]),XL(cc,[2,17]),XL(cc,[2,18]),XL(Hs,[2,9]),{14:49,52:F},{52:[2,44]},{15:[1,50]},{22:[1,51]},XL(cc,[2,14]),{21:52,22:[2,22],32:43,33:44,37:Ws},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:$s,43:js,44:zs,45:Ys},XL(Vs,[2,37]),XL(Vs,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},XL(cc,[2,13]),{22:[2,23]},XL(Gs,[2,24],{35:61,36:62,38:[1,63],39:Xs}),XL([22,37,38,39],[2,29]),XL([30,31],[2,32]),XL(Hs,[2,10]),XL(cc,[2,12]),XL(cc,[2,39]),XL(cc,[2,40]),XL(cc,[2,41]),XL(Gs,[2,25],{36:65,39:Xs}),XL(Gs,[2,26]),XL([22,37,39],[2,30]),XL(Gs,[2,31]),XL(Gs,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return e.yytext[0];case 29:return 42;case 30:return 43;case 31:return 44;case 32:return 45;case 33:return 42;case 34:return 43;case 35:return 44;case 36:return 46;case 37:return 47;case 38:case 39:return 46;case 40:return 30;case 41:return e.yytext[0];case 42:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\|o\b)/i,/^(?:\}o\b)/i,/^(?:\}\|)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!0}}};var GL=new((ZL.prototype=Us).Parser=ZL);function XL(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function ZL(){this.yy={}}GL.parser=GL;const KL=t=>null!==t.match(/^\s*erDiagram/);let QL={},JL=[];function tB(t){return"u"<typeof QL[t]&&(QL[t]={attributes:[]},C.info("Added new entity :",t)),QL[t]}const eB={Cardinality:{ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification:{NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().er,addEntity:tB,addAttributes:function(t,e){let r=tB(t),n;for(n=e.length-1;0<=n;n--)r.attributes.push(e[n]),C.debug("Added attribute ",e[n].attributeName)},getEntities:()=>QL,addRelationship:function(t,e,r,n){t={entityA:t,roleA:e,entityB:r,relSpec:n};JL.push(t),C.debug("Added new relationship :",t)},getRelationships:()=>JL,clear:function(){QL={},JL=[],X6()},setAccTitle:Z6,getAccTitle:K6,setAccDescription:Q6,getAccDescription:J6},rB={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},nB={ERMarkers:rB,insertMarkers:function(t,e){let r;t.append("defs").append("marker").attr("id",rB.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",rB.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),(r=t.append("defs").append("marker").attr("id",rB.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),(r=t.append("defs").append("marker").attr("id",rB.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",rB.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",rB.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),(r=t.append("defs").append("marker").attr("id",rB.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),(r=t.append("defs").append("marker").attr("id",rB.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}};let iB;const aB=new Uint8Array(16);function oB(){if(iB||(iB=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))return iB(aB);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const sB=[];for(let t=0;t<256;++t)sB.push((t+256).toString(16).slice(1));const cB={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function lB(t,e,r){if(cB.randomUUID&&!e&&!t)return cB.randomUUID();var n,i=(t=t||{}).random||(t.rng||oB)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=i[t];return e}return t=i,n=0,(sB[t[n+0]]+sB[t[n+1]]+sB[t[n+2]]+sB[t[n+3]]+"-"+sB[t[n+4]]+sB[t[n+5]]+"-"+sB[t[n+6]]+sB[t[n+7]]+"-"+sB[t[n+8]]+sB[t[n+9]]+"-"+sB[t[n+10]]+sB[t[n+11]]+sB[t[n+12]]+sB[t[n+13]]+sB[t[n+14]]+sB[t[n+15]]).toLowerCase()}const uB=/[^A-Za-z0-9]([\W])*/g;let hB={},dB=new Map;function fB(a,o,s){var t=Object.keys(o);let c;return t.forEach(function(t){var e=function(t="",e){t=t.replace(uB,"");return""+mB(e)+mB(t)+lB()}(t,"entity"),r=(dB.set(t,e),a.append("g").attr("id",e)),n=(c=void 0===c?e:c,"text-"+e),i=r.append("text").attr("class","er entityLabel").attr("id",n).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("style","font-family: "+V().fontFamily+"; font-size: "+hB.fontSize+"px").text(t),{width:i,height:t}=pB(r,i,o[t].attributes),r=r.insert("rect","#"+n).attr("class","er entityBox").attr("fill",hB.fill).attr("fill-opacity","100%").attr("stroke",hB.stroke).attr("x",0).attr("y",0).attr("width",i).attr("height",t).node().getBBox();s.setNode(e,{width:r.width,height:r.height,shape:"rect",id:e})}),c}const pB=(o,s,t)=>{const c=hB.entityPadding/3,l=hB.entityPadding/3,u=.85*hB.fontSize,e=s.node().getBBox(),h=[];let d=!1,f=!1,p=0,g=0,y=0,m=0,b=e.height+2*c,_=1,r=(t.forEach(t=>{void 0!==t.attributeKeyType&&(d=!0),void 0!==t.attributeComment&&(f=!0)}),t.forEach(t=>{var e=s.node().id+"-attr-"+_;let r=0;var n=q4(t.attributeType),n=o.append("text").attr("class","er entityLabel").attr("id",e+"-type").attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+V().fontFamily+"; font-size: "+u+"px").text(n),i=o.append("text").attr("class","er entityLabel").attr("id",e+"-name").attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+V().fontFamily+"; font-size: "+u+"px").text(t.attributeName),a={},n=(a.tn=n,a.nn=i,n.node().getBBox()),i=i.node().getBBox();p=Math.max(p,n.width),g=Math.max(g,i.width),r=Math.max(n.height,i.height),d&&(n=o.append("text").attr("class","er entityLabel").attr("id",e+"-key").attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+V().fontFamily+"; font-size: "+u+"px").text(t.attributeKeyType||""),i=(a.kn=n).node().getBBox(),y=Math.max(y,i.width),r=Math.max(r,i.height)),f&&(n=o.append("text").attr("class","er entityLabel").attr("id",e+"-comment").attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+V().fontFamily+"; font-size: "+u+"px").text(t.attributeComment||""),i=(a.cn=n).node().getBBox(),m=Math.max(m,i.width),r=Math.max(r,i.height)),a.height=r,h.push(a),b+=r+2*c,_+=1}),4);d&&(r+=2),f&&(r+=2);var n=p+g+y+m,v={width:Math.max(hB.minEntityWidth,Math.max(e.width+2*hB.entityPadding,n+l*r)),height:0<t.length?b:Math.max(hB.minEntityHeight,e.height+2*hB.entityPadding)};if(0<t.length){const x=Math.max(0,(v.width-n-l*r)/(r/2));s.attr("transform","translate("+v.width/2+","+(c+e.height/2)+")");let i=e.height+2*c,a="attributeBoxOdd";h.forEach(t=>{var e=i+c+t.height/2,r=(t.tn.attr("transform","translate("+l+","+e+")"),o.insert("rect","#"+t.tn.node().id).attr("class","er "+a).attr("fill",hB.fill).attr("fill-opacity","100%").attr("stroke",hB.stroke).attr("x",0).attr("y",i).attr("width",p+2*l+x).attr("height",t.height+2*c)),r=parseFloat(r.attr("x"))+parseFloat(r.attr("width")),r=(t.nn.attr("transform","translate("+(r+l)+","+e+")"),o.insert("rect","#"+t.nn.node().id).attr("class","er "+a).attr("fill",hB.fill).attr("fill-opacity","100%").attr("stroke",hB.stroke).attr("x",r).attr("y",i).attr("width",g+2*l+x).attr("height",t.height+2*c));let n=parseFloat(r.attr("x"))+parseFloat(r.attr("width"));d&&(t.kn.attr("transform","translate("+(n+l)+","+e+")"),r=o.insert("rect","#"+t.kn.node().id).attr("class","er "+a).attr("fill",hB.fill).attr("fill-opacity","100%").attr("stroke",hB.stroke).attr("x",n).attr("y",i).attr("width",y+2*l+x).attr("height",t.height+2*c),n=parseFloat(r.attr("x"))+parseFloat(r.attr("width"))),f&&(t.cn.attr("transform","translate("+(n+l)+","+e+")"),o.insert("rect","#"+t.cn.node().id).attr("class","er "+a).attr("fill",hB.fill).attr("fill-opacity","100%").attr("stroke",hB.stroke).attr("x",n).attr("y",i).attr("width",m+2*l+x).attr("height",t.height+2*c)),i+=t.height+2*c,a="attributeBoxOdd"===a?"attributeBoxEven":"attributeBoxOdd"})}else v.height=Math.max(hB.minEntityHeight,b),s.attr("transform","translate("+v.width/2+","+v.height/2+")");return v},gB=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")};let yB=0;function mB(t=""){return 0<t.length?t+"-":""}const bB={setConf:function(e){var r=Object.keys(e);for(let t=0;t<r.length;t++)hB[r[t]]=e[r[t]]},draw:function(t,e,r,c){hB=V().er,C.info("Drawing ER diagram");var n,i,a,o=V().securityLevel;let s;"sandbox"===o&&(s=H("#i"+e));const l=H("sandbox"===o?s.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);nB.insertMarkers(l,hB);let u;u=new RN.Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:hB.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const h=fB(l,c.db.getEntities(),u),d=(o=c.db.getRelationships(),n=u,o.forEach(function(t){n.setEdge(dB.get(t.entityA),dB.get(t.entityB),{relationship:t},gB(t))}),o);JD.layout(u),i=l,(a=u).nodes().forEach(function(t){typeof t<"u"&&typeof a.node(t)<"u"&&i.select("#"+t).attr("transform","translate("+(a.node(t).x-a.node(t).width/2)+","+(a.node(t).y-a.node(t).height/2)+" )")}),d.forEach(function(e){{var r=l,n=u,i=h,a=c,n=(yB++,n.edge(dB.get(e.entityA),dB.get(e.entityB),gB(e))),o=Yy().x(function(t){return t.x}).y(function(t){return t.y}).curve(Fm),s=r.insert("path","#"+i).attr("class","er relationshipLine").attr("d",o(n.points)).attr("stroke",hB.stroke).attr("fill","none");e.relSpec.relType===a.db.Identification.NON_IDENTIFYING&&s.attr("stroke-dasharray","8,8");let t="";switch(hB.arrowMarkerAbsolute&&(t=(t=(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),e.relSpec.cardA){case a.db.Cardinality.ZERO_OR_ONE:s.attr("marker-end","url("+t+"#"+nB.ERMarkers.ZERO_OR_ONE_END+")");break;case a.db.Cardinality.ZERO_OR_MORE:s.attr("marker-end","url("+t+"#"+nB.ERMarkers.ZERO_OR_MORE_END+")");break;case a.db.Cardinality.ONE_OR_MORE:s.attr("marker-end","url("+t+"#"+nB.ERMarkers.ONE_OR_MORE_END+")");break;case a.db.Cardinality.ONLY_ONE:s.attr("marker-end","url("+t+"#"+nB.ERMarkers.ONLY_ONE_END+")")}switch(e.relSpec.cardB){case a.db.Cardinality.ZERO_OR_ONE:s.attr("marker-start","url("+t+"#"+nB.ERMarkers.ZERO_OR_ONE_START+")");break;case a.db.Cardinality.ZERO_OR_MORE:s.attr("marker-start","url("+t+"#"+nB.ERMarkers.ZERO_OR_MORE_START+")");break;case a.db.Cardinality.ONE_OR_MORE:s.attr("marker-start","url("+t+"#"+nB.ERMarkers.ONE_OR_MORE_START+")");break;case a.db.Cardinality.ONLY_ONE:s.attr("marker-start","url("+t+"#"+nB.ERMarkers.ONLY_ONE_START+")")}i=s.node().getTotalLength(),o=s.node().getPointAtLength(.5*i),n="rel"+yB,a=r.append("text").attr("class","er relationshipLabel").attr("id",n).attr("x",o.x).attr("y",o.y).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("style","font-family: "+V().fontFamily+"; font-size: "+hB.fontSize+"px").text(e.roleA).node().getBBox(),r.insert("rect","#"+n).attr("class","er relationshipLabelBox").attr("x",o.x-a.width/2).attr("y",o.y-a.height/2).attr("width",a.width).attr("height",a.height).attr("fill","white").attr("fill-opacity","85%")}});var o=hB.diagramPadding,f=l.node().getBBox(),p=f.width+2*o,g=f.height+2*o;f6(l,g,p,hB.useMaxWidth),l.attr("viewBox",`${f.x-o} ${f.y-o} ${p} `+g),vv(c.db,l,e)}};Vr=[1,20],Hr=[1,21],Gr=[1,22],Ba=[1,23],oc=[1,30],sc=[1,32],yc=[1,33],za=[1,34],La=[1,62],Ua=[1,48],rc=[1,52],qa=[1,36],Ha=[1,37],Va=[1,38],t=[1,39],nc=[1,40],Xg=[1,56],Gg=[1,63],Kg=[1,51],Zg=[1,53],Jg=[1,55],Qg=[1,59],ey=[1,60],ty=[1,41],Eg=[1,42],ry=[1,43],Bi=[1,44],Ii=[1,61],Ri=[1,50],pg=[1,54],gg=[1,57],yg=[1,58],mg=[1,49],bg=[1,66],_g=[1,71],vg=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],xg=[1,75],kg=[1,74],wg=[1,76],Cg=[20,21,23,81,82],Tg=[1,99],r=[1,104],e=[1,107],n=[1,108],Sg=[1,101],a=[1,106],i=[1,109],Ag=[1,102],o=[1,114],l=[1,113],s=[1,103],h=[1,105],u=[1,110],f=[1,111],d=[1,112],p=[1,115],Mg=[20,21,22,23,81,82],Dg=[20,21,22,23,53,81,82],Ng=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Bg=[20,21,23],Lg=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Ig=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Og=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],Rg=[1,149],g=[1,157],Fg=[1,158],y=[1,159],Pg=[1,160],m=[1,144],Yg=[1,145],b=[1,141],v=[1,152],_=[1,153],k=[1,154],Wg=[1,155],$g=[1,156],jg=[1,161],zg=[1,162],qg=[1,147],x=[1,150],Ug=[1,146],Vg=[1,143],Hg=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],g2=[1,165],l2=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],Hf=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],ny=[12,21,22,24],e2=[22,106],n2=[1,250],f2=[1,245],p2=[1,246],c2=[1,254],iy=[1,251],ay=[1,248],hy=[1,247],dy=[1,249],fy=[1,252],py=[1,253],Um=[1,255],Gm=[1,273],Zm=[20,21,23,106],Hm=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],(e3={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 5:n.parseDirective("%%{","open_directive");break;case 6:n.parseDirective(a[s],"type_directive");break;case 7:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 8:n.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(a[s])||0<a[s].length)&&a[s-1].push(a[s]),this.$=a[s-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=a[s];break;case 19:n.setDirection("TB"),this.$="TB";break;case 20:n.setDirection(a[s-1]),this.$=a[s-1];break;case 35:this.$=a[s-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=n.addSubGraph(a[s-6],a[s-1],a[s-4]);break;case 42:this.$=n.addSubGraph(a[s-3],a[s-1],a[s-3]);break;case 43:this.$=n.addSubGraph(void 0,a[s-1],void 0);break;case 45:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 46:case 47:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 51:n.addLink(a[s-2].stmt,a[s],a[s-1]),this.$={stmt:a[s],nodes:a[s].concat(a[s-2].nodes)};break;case 52:n.addLink(a[s-3].stmt,a[s-1],a[s-2]),this.$={stmt:a[s-1],nodes:a[s-1].concat(a[s-3].nodes)};break;case 53:this.$={stmt:a[s-1],nodes:a[s-1]};break;case 54:this.$={stmt:a[s],nodes:a[s]};break;case 55:this.$=[a[s]];break;case 56:this.$=a[s-4].concat(a[s]);break;case 57:this.$=[a[s-2]],n.setClass(a[s-2],a[s]);break;case 58:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"square");break;case 59:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"doublecircle");break;case 60:this.$=a[s-5],n.addVertex(a[s-5],a[s-2],"circle");break;case 61:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"ellipse");break;case 62:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"stadium");break;case 63:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"subroutine");break;case 64:this.$=a[s-7],n.addVertex(a[s-7],a[s-1],"rect",void 0,void 0,void 0,Object.fromEntries([[a[s-5],a[s-3]]]));break;case 65:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"cylinder");break;case 66:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"round");break;case 67:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"diamond");break;case 68:this.$=a[s-5],n.addVertex(a[s-5],a[s-2],"hexagon");break;case 69:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"odd");break;case 70:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"trapezoid");break;case 71:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"inv_trapezoid");break;case 72:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"lean_right");break;case 73:this.$=a[s-3],n.addVertex(a[s-3],a[s-1],"lean_left");break;case 74:this.$=a[s],n.addVertex(a[s]);break;case 75:a[s-1].text=a[s],this.$=a[s-1];break;case 76:case 77:a[s-2].text=a[s-1],this.$=a[s-2];break;case 78:this.$=a[s];break;case 79:var c=n.destructLink(a[s],a[s-2]);this.$={type:c.type,stroke:c.stroke,length:c.length,text:a[s-1]};break;case 80:c=n.destructLink(a[s]);this.$={type:c.type,stroke:c.stroke,length:c.length};break;case 81:this.$=a[s-1];break;case 83:case 97:case 153:this.$=a[s-1]+""+a[s];break;case 98:case 99:this.$=a[s-4],n.addClass(a[s-2],a[s]);break;case 100:this.$=a[s-4],n.setClass(a[s-2],a[s]);break;case 101:case 109:this.$=a[s-1],n.setClickEvent(a[s-1],a[s]);break;case 102:case 110:this.$=a[s-3],n.setClickEvent(a[s-3],a[s-2]),n.setTooltip(a[s-3],a[s]);break;case 103:this.$=a[s-2],n.setClickEvent(a[s-2],a[s-1],a[s]);break;case 104:this.$=a[s-4],n.setClickEvent(a[s-4],a[s-3],a[s-2]),n.setTooltip(a[s-4],a[s]);break;case 105:case 111:this.$=a[s-1],n.setLink(a[s-1],a[s]);break;case 106:case 112:this.$=a[s-3],n.setLink(a[s-3],a[s-2]),n.setTooltip(a[s-3],a[s]);break;case 107:case 113:this.$=a[s-3],n.setLink(a[s-3],a[s-2],a[s]);break;case 108:case 114:this.$=a[s-5],n.setLink(a[s-5],a[s-4],a[s]),n.setTooltip(a[s-5],a[s-2]);break;case 115:this.$=a[s-4],n.addVertex(a[s-2],void 0,void 0,a[s]);break;case 116:case 118:this.$=a[s-4],n.updateLink(a[s-2],a[s]);break;case 117:this.$=a[s-4],n.updateLink([a[s-2]],a[s]);break;case 119:this.$=a[s-8],n.updateLinkInterpolate([a[s-6]],a[s-2]),n.updateLink([a[s-6]],a[s]);break;case 120:this.$=a[s-8],n.updateLinkInterpolate(a[s-6],a[s-2]),n.updateLink(a[s-6],a[s]);break;case 121:this.$=a[s-6],n.updateLinkInterpolate([a[s-4]],a[s]);break;case 122:this.$=a[s-6],n.updateLinkInterpolate(a[s-4],a[s]);break;case 123:case 125:this.$=[a[s]];break;case 124:case 126:a[s-2].push(a[s]),this.$=a[s-2];break;case 128:this.$=a[s-1]+a[s];break;case 150:this.$=a[s];break;case 151:this.$=a[s-1]+""+a[s];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"}}},table:[{3:1,4:2,5:3,6:5,12:e3=[1,9],16:4,21:Wf=[1,7],22:Pf=[1,6],24:Yf=[1,8]},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:e3,16:4,21:Wf,22:Pf,24:Yf},L(Gf=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],qf=[2,10],{17:11}),{7:12,13:[1,13]},{16:14,21:Wf,22:Pf,24:Yf},{16:15,21:Wf,22:Pf,24:Yf},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:Vr,21:Hr,22:Gr,23:Ba,32:24,33:25,34:26,35:27,36:28,37:29,38:oc,43:31,44:sc,46:yc,48:za,50:35,51:45,52:La,54:46,66:Ua,67:rc,86:qa,87:Ha,88:Va,89:t,90:nc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,116:47,118:ty,119:Eg,120:ry,121:Bi,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg},{8:64,10:[1,65],15:bg},L([10,15],[2,6]),L(Gf,[2,17]),L(Gf,[2,18]),L(Gf,[2,19]),{20:[1,68],21:[1,69],22:_g,27:67,30:70},L(vg,[2,11]),L(vg,[2,12]),L(vg,[2,13]),L(vg,[2,14]),L(vg,[2,15]),L(vg,[2,16]),{9:72,20:xg,21:kg,23:wg,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:xg,21:kg,23:wg},{9:81,20:xg,21:kg,23:wg},{9:82,20:xg,21:kg,23:wg},{9:83,20:xg,21:kg,23:wg},{9:84,20:xg,21:kg,23:wg},{9:86,20:xg,21:kg,22:[1,85],23:wg},L(vg,[2,44]),{45:[1,87]},{47:[1,88]},L(vg,[2,47]),L(Cg,[2,54],{30:89,22:_g}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:Tg,52:r,66:e,67:n,84:[1,97],91:Sg,97:96,98:[1,94],100:[1,95],105:a,106:i,109:Ag,111:o,112:l,115:100,117:98,122:s,123:h,124:u,125:f,126:d,127:p},L(vg,[2,158]),L(vg,[2,159]),L(vg,[2,160]),L(vg,[2,161]),L(Mg,[2,55],{53:[1,116]}),L(Dg,[2,74],{116:129,40:[1,117],52:La,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:Ua,67:rc,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg}),L(Ng,[2,150]),L(Ng,[2,175]),L(Ng,[2,176]),L(Ng,[2,177]),L(Ng,[2,178]),L(Ng,[2,179]),L(Ng,[2,180]),L(Ng,[2,181]),L(Ng,[2,182]),L(Ng,[2,183]),L(Ng,[2,184]),L(Ng,[2,185]),L(Ng,[2,186]),L(Ng,[2,187]),L(Ng,[2,188]),L(Ng,[2,189]),L(Ng,[2,190]),{9:130,20:xg,21:kg,23:wg},{11:131,14:[1,132]},L(Bg,[2,8]),L(Gf,[2,20]),L(Gf,[2,26]),L(Gf,[2,27]),{21:[1,133]},L(Lg,[2,34],{30:134,22:_g}),L(vg,[2,35]),{50:135,51:45,52:La,54:46,66:Ua,67:rc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,116:47,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg},L(Ig,[2,48]),L(Ig,[2,49]),L(Ig,[2,50]),L(Og,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:Rg,24:g,26:Fg,38:y,39:139,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),L(vg,[2,36]),L(vg,[2,37]),L(vg,[2,38]),L(vg,[2,39]),L(vg,[2,40]),{22:Rg,24:g,26:Fg,38:y,39:163,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Hg,qf,{17:164}),L(vg,[2,45]),L(vg,[2,46]),L(Cg,[2,53],{52:g2}),{26:Tg,52:r,66:e,67:n,91:Sg,97:166,102:[1,167],105:a,106:i,109:Ag,111:o,112:l,115:100,117:98,122:s,123:h,124:u,125:f,126:d,127:p},{95:[1,168],103:169,105:[1,170]},{26:Tg,52:r,66:e,67:n,91:Sg,95:[1,171],97:172,105:a,106:i,109:Ag,111:o,112:l,115:100,117:98,122:s,123:h,124:u,125:f,126:d,127:p},{26:Tg,52:r,66:e,67:n,91:Sg,97:173,105:a,106:i,109:Ag,111:o,112:l,115:100,117:98,122:s,123:h,124:u,125:f,126:d,127:p},L(Bg,[2,101],{22:[1,174],99:[1,175]}),L(Bg,[2,105],{22:[1,176]}),L(Bg,[2,109],{115:100,117:178,22:[1,177],26:Tg,52:r,66:e,67:n,91:Sg,105:a,106:i,109:Ag,111:o,112:l,122:s,123:h,124:u,125:f,126:d,127:p}),L(Bg,[2,111],{22:[1,179]}),L(l2,[2,152]),L(l2,[2,154]),L(l2,[2,155]),L(l2,[2,156]),L(l2,[2,157]),L(Hf,[2,162]),L(Hf,[2,163]),L(Hf,[2,164]),L(Hf,[2,165]),L(Hf,[2,166]),L(Hf,[2,167]),L(Hf,[2,168]),L(Hf,[2,169]),L(Hf,[2,170]),L(Hf,[2,171]),L(Hf,[2,172]),L(Hf,[2,173]),L(Hf,[2,174]),{52:La,54:180,66:Ua,67:rc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,116:47,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg},{22:Rg,24:g,26:Fg,38:y,39:181,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:182,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:184,42:Pg,52:r,57:[1,183],66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:185,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:186,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:187,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{66:[1,188]},{22:Rg,24:g,26:Fg,38:y,39:189,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:190,42:Pg,52:r,66:e,67:n,71:[1,191],73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:192,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:193,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:194,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Ng,[2,151]),L(ny,[2,3]),{8:195,15:bg},{15:[2,7]},L(Gf,[2,28]),L(Lg,[2,33]),L(Cg,[2,51],{30:196,22:_g}),L(Og,[2,75],{22:[1,197]}),{22:[1,198]},{22:Rg,24:g,26:Fg,38:y,39:199,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,66:e,67:n,73:m,81:Yg,82:[1,200],83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Hf,[2,82]),L(Hf,[2,84]),L(Hf,[2,140]),L(Hf,[2,141]),L(Hf,[2,142]),L(Hf,[2,143]),L(Hf,[2,144]),L(Hf,[2,145]),L(Hf,[2,146]),L(Hf,[2,147]),L(Hf,[2,148]),L(Hf,[2,149]),L(Hf,[2,85]),L(Hf,[2,86]),L(Hf,[2,87]),L(Hf,[2,88]),L(Hf,[2,89]),L(Hf,[2,90]),L(Hf,[2,91]),L(Hf,[2,92]),L(Hf,[2,93]),L(Hf,[2,94]),L(Hf,[2,95]),{9:203,20:xg,21:kg,22:Rg,23:wg,24:g,26:Fg,38:y,40:[1,202],42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{18:18,19:19,20:Vr,21:Hr,22:Gr,23:Ba,32:24,33:25,34:26,35:27,36:28,37:29,38:oc,42:[1,204],43:31,44:sc,46:yc,48:za,50:35,51:45,52:La,54:46,66:Ua,67:rc,86:qa,87:Ha,88:Va,89:t,90:nc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,116:47,118:ty,119:Eg,120:ry,121:Bi,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg},{22:_g,30:205},{22:[1,206],26:Tg,52:r,66:e,67:n,91:Sg,105:a,106:i,109:Ag,111:o,112:l,115:100,117:178,122:s,123:h,124:u,125:f,126:d,127:p},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},L(e2,[2,123]),{22:[1,211]},{22:[1,212],26:Tg,52:r,66:e,67:n,91:Sg,105:a,106:i,109:Ag,111:o,112:l,115:100,117:178,122:s,123:h,124:u,125:f,126:d,127:p},{22:[1,213],26:Tg,52:r,66:e,67:n,91:Sg,105:a,106:i,109:Ag,111:o,112:l,115:100,117:178,122:s,123:h,124:u,125:f,126:d,127:p},{84:[1,214]},L(Bg,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},L(l2,[2,153]),{84:[1,219],101:[1,220]},L(Mg,[2,57],{116:129,52:La,66:Ua,67:rc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg}),{22:Rg,24:g,26:Fg,38:y,41:[1,221],42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,56:[1,222],66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:223,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,58:[1,224],66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,60:[1,225],66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,62:[1,226],66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,64:[1,227],66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{67:[1,228]},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,66:e,67:n,70:[1,229],73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,66:e,67:n,72:[1,230],73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,39:231,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,41:[1,232],42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,66:e,67:n,73:m,75:[1,233],77:[1,234],81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,66:e,67:n,73:m,75:[1,236],77:[1,235],81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{9:237,20:xg,21:kg,23:wg},L(Cg,[2,52],{52:g2}),L(Og,[2,77]),L(Og,[2,76]),{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,66:e,67:n,68:[1,238],73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Og,[2,79]),L(Hf,[2,83]),{22:Rg,24:g,26:Fg,38:y,39:239,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Hg,qf,{17:240}),L(vg,[2,43]),{51:241,52:La,54:46,66:Ua,67:rc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,116:47,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg},{22:n2,66:f2,67:p2,86:c2,96:242,102:iy,105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},{22:n2,66:f2,67:p2,86:c2,96:256,102:iy,105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},{22:n2,66:f2,67:p2,86:c2,96:257,102:iy,104:[1,258],105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},{22:n2,66:f2,67:p2,86:c2,96:259,102:iy,104:[1,260],105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},{105:[1,261]},{22:n2,66:f2,67:p2,86:c2,96:262,102:iy,105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},{22:n2,66:f2,67:p2,86:c2,96:263,102:iy,105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},{26:Tg,52:r,66:e,67:n,91:Sg,97:264,105:a,106:i,109:Ag,111:o,112:l,115:100,117:98,122:s,123:h,124:u,125:f,126:d,127:p},L(Bg,[2,102]),{84:[1,265]},L(Bg,[2,106],{22:[1,266]}),L(Bg,[2,107]),L(Bg,[2,110]),L(Bg,[2,112],{22:[1,267]}),L(Bg,[2,113]),L(Dg,[2,58]),L(Dg,[2,59]),{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,58:[1,268],66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Dg,[2,66]),L(Dg,[2,61]),L(Dg,[2,62]),L(Dg,[2,63]),{66:[1,269]},L(Dg,[2,65]),L(Dg,[2,67]),{22:Rg,24:g,26:Fg,38:y,42:Pg,52:r,66:e,67:n,72:[1,270],73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Dg,[2,69]),L(Dg,[2,70]),L(Dg,[2,72]),L(Dg,[2,71]),L(Dg,[2,73]),L(ny,[2,4]),L([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:Rg,24:g,26:Fg,38:y,41:[1,271],42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{18:18,19:19,20:Vr,21:Hr,22:Gr,23:Ba,32:24,33:25,34:26,35:27,36:28,37:29,38:oc,42:[1,272],43:31,44:sc,46:yc,48:za,50:35,51:45,52:La,54:46,66:Ua,67:rc,86:qa,87:Ha,88:Va,89:t,90:nc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,116:47,118:ty,119:Eg,120:ry,121:Bi,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg},L(Mg,[2,56]),L(Bg,[2,115],{106:Gm}),L(Zm,[2,125],{108:274,22:n2,66:f2,67:p2,86:c2,102:iy,105:ay,109:hy,110:dy,111:fy,112:py,113:Um}),L(Hm,[2,127]),L(Hm,[2,129]),L(Hm,[2,130]),L(Hm,[2,131]),L(Hm,[2,132]),L(Hm,[2,133]),L(Hm,[2,134]),L(Hm,[2,135]),L(Hm,[2,136]),L(Hm,[2,137]),L(Hm,[2,138]),L(Hm,[2,139]),L(Bg,[2,116],{106:Gm}),L(Bg,[2,117],{106:Gm}),{22:[1,275]},L(Bg,[2,118],{106:Gm}),{22:[1,276]},L(e2,[2,124]),L(Bg,[2,98],{106:Gm}),L(Bg,[2,99],{106:Gm}),L(Bg,[2,100],{115:100,117:178,26:Tg,52:r,66:e,67:n,91:Sg,105:a,106:i,109:Ag,111:o,112:l,122:s,123:h,124:u,125:f,126:d,127:p}),L(Bg,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:xg,21:kg,23:wg},L(vg,[2,42]),{22:n2,66:f2,67:p2,86:c2,102:iy,105:ay,107:283,108:244,109:hy,110:dy,111:fy,112:py,113:Um},L(Hm,[2,128]),{26:Tg,52:r,66:e,67:n,91:Sg,97:284,105:a,106:i,109:Ag,111:o,112:l,115:100,117:98,122:s,123:h,124:u,125:f,126:d,127:p},{26:Tg,52:r,66:e,67:n,91:Sg,97:285,105:a,106:i,109:Ag,111:o,112:l,115:100,117:98,122:s,123:h,124:u,125:f,126:d,127:p},L(Bg,[2,108]),L(Bg,[2,114]),L(Dg,[2,60]),{22:Rg,24:g,26:Fg,38:y,39:286,42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:140,84:b,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},L(Dg,[2,68]),L(Hg,qf,{17:287}),L(Zm,[2,126],{108:274,22:n2,66:f2,67:p2,86:c2,102:iy,105:ay,109:hy,110:dy,111:fy,112:py,113:Um}),L(Bg,[2,121],{115:100,117:178,22:[1,288],26:Tg,52:r,66:e,67:n,91:Sg,105:a,106:i,109:Ag,111:o,112:l,122:s,123:h,124:u,125:f,126:d,127:p}),L(Bg,[2,122],{115:100,117:178,22:[1,289],26:Tg,52:r,66:e,67:n,91:Sg,105:a,106:i,109:Ag,111:o,112:l,122:s,123:h,124:u,125:f,126:d,127:p}),{22:Rg,24:g,26:Fg,38:y,41:[1,290],42:Pg,52:r,66:e,67:n,73:m,81:Yg,83:201,85:151,86:v,87:_,88:k,89:Wg,90:$g,91:jg,92:zg,94:142,95:qg,105:a,106:i,109:x,111:o,112:l,113:Ug,114:Vg,115:148,122:s,123:h,124:u,125:f,126:d,127:p},{18:18,19:19,20:Vr,21:Hr,22:Gr,23:Ba,32:24,33:25,34:26,35:27,36:28,37:29,38:oc,42:[1,291],43:31,44:sc,46:yc,48:za,50:35,51:45,52:La,54:46,66:Ua,67:rc,86:qa,87:Ha,88:Va,89:t,90:nc,91:Xg,95:Gg,105:Kg,106:Zg,109:Jg,111:Qg,112:ey,116:47,118:ty,119:Eg,120:ry,121:Bi,122:Ii,123:Ri,124:pg,125:gg,126:yg,127:mg},{22:n2,66:f2,67:p2,86:c2,96:292,102:iy,105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},{22:n2,66:f2,67:p2,86:c2,96:293,102:iy,105:ay,107:243,108:244,109:hy,110:dy,111:fy,112:py,113:Um},L(Dg,[2,64]),L(vg,[2,41]),L(Bg,[2,119],{106:Gm}),L(Bg,[2,120],{106:Gm})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:case 36:return t.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:case 40:case 41:case 42:return 101;case 43:return this.popState(),25;case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:case 67:case 68:case 69:return 82;case 70:case 71:case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};var _B=new((vB.prototype=e3).Parser=vB);function L(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function vB(){this.yy={}}_B.parser=_B;const xB=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.flowchart)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*graph/)},kB=(t,e)=>{return"dagre-wrapper"===(null==(e=null==e?void 0:e.flowchart)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*graph/)||null!==t.match(/^\s*flowchart/)};let wB=0,EB=V(),TB={},CB=[],SB=[],AB=[],MB={},NB={},DB=0,LB=!0,BB,OB,IB=[];function RB(t,e){t.split(",").forEach(function(t){typeof TB[t]<"u"&&TB[t].classes.push(e),typeof MB[t]<"u"&&MB[t].classes.push(e)})}function FB(t){let r=H(".mermaidTooltip");null===(r._groups||r)[0][0]&&(r=H("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),H(t).select("svg").selectAll("g.node").on("mouseover",function(){var t,e=H(this);null!==e.attr("title")&&(t=this.getBoundingClientRect(),r.transition().duration(200).style("opacity",".9"),r.text(e.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),e.classed("hover",!0))}).on("mouseout",function(){r.transition().duration(500).style("opacity",0),H(this).classed("hover",!1)})}const PB=t=>H4.sanitizeText(t,EB),$B=function(e){var r=Object.keys(TB);for(let t=0;t<r.length;t++)if(TB[r[t]].id===e)return TB[r[t]].domId;return e},jB=(IB.push(FB),function(e){for(let t=0;t<AB.length;t++)if(AB[t].id===e)return t;return-1});let YB=-1;const zB=[],UB=function(r,n){var i=AB[n].nodes;if(!(2e3<(YB+=1))){if(zB[YB]=n,AB[n].id===r)return{result:!0,count:0};let t=0,e=1;for(;t<i.length;){var a=jB(i[t]);if(0<=a){a=UB(r,a);if(a.result)return{result:!0,count:e+a.count};e+=a.count}t+=1}return{result:!1,count:e}}},WB=(e,r)=>{var n=r.length;let i=0;for(let t=0;t<n;++t)r[t]===e&&++i;return i},qB=(t,e)=>{let r=!1;return t.forEach(t=>{0<=t.nodes.indexOf(e)&&(r=!0)}),r},HB=(r,n)=>{const i=[];return r.nodes.forEach((t,e)=>{qB(n,t)||i.push(r.nodes[e])}),{nodes:i}},VB={parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},defaultConfig:()=>e6.flowchart,setAccTitle:Z6,getAccTitle:K6,getAccDescription:J6,setAccDescription:Q6,addVertex:function(t,e,r,n,i,a,o={}){let s,c=t;"u"<typeof c||0!==c.trim().length&&("u"<typeof TB[c]&&(TB[c]={id:c,domId:"flowchart-"+c+"-"+wB,styles:[],classes:[]}),wB++,typeof e<"u"?(EB=V(),'"'===(s=PB(e.trim()))[0]&&'"'===s[s.length-1]&&(s=s.substring(1,s.length-1)),TB[c].text=s):"u"<typeof TB[c].text&&(TB[c].text=t),typeof r<"u"&&(TB[c].type=r),typeof n<"u"&&null!==n&&n.forEach(function(t){TB[c].styles.push(t)}),typeof i<"u"&&null!==i&&i.forEach(function(t){TB[c].classes.push(t)}),typeof a<"u"&&(TB[c].dir=a),TB[c].props=o)},lookUpDomId:$B,addLink:function(t,e,r,n){let i,a;for(i=0;i<t.length;i++)for(a=0;a<e.length;a++){var o=t[i];var s=e[a];var c=r;var l=n;o={start:o,end:s,type:void 0,text:""};typeof(l=c.text)<"u"&&(o.text=PB(l.trim()),'"'===o.text[0])&&'"'===o.text[o.text.length-1]&&(o.text=o.text.substring(1,o.text.length-1)),typeof c<"u"&&(o.type=c.type,o.stroke=c.stroke,o.length=c.length),CB.push(o)}},updateLinkInterpolate:function(t,e){t.forEach(function(t){"default"===t?CB.defaultInterpolate=e:CB[t].interpolate=e})},updateLink:function(t,e){t.forEach(function(t){"default"===t?CB.defaultStyle=e:(-1===g_.isSubstringInArray("fill",e)&&e.push("fill:none"),CB[t].style=e)})},addClass:function(r,t){"u"<typeof SB[r]&&(SB[r]={id:r,styles:[],textStyles:[]}),typeof t<"u"&&null!==t&&t.forEach(function(t){var e;t.match("color")&&(e=t.replace("fill","bgFill").replace("color","fill"),SB[r].textStyles.push(e)),SB[r].styles.push(t)})},setDirection:function(t){(BB=(BB=(BB=(BB=t).match(/.*</)?"RL":BB).match(/.*\^/)?"BT":BB).match(/.*>/)?"LR":BB).match(/.*v/)&&(BB="TB")},setClass:RB,setTooltip:function(t,e){t.split(",").forEach(function(t){typeof e<"u"&&(NB["gen-1"===OB?$B(t):t]=PB(e))})},getTooltip:function(t){return NB[t]},setClickEvent:function(t,r,a){t.split(",").forEach(function(t){{var n=r,i=a;let e=$B(t);if(!("loose"!==V().securityLevel||"u"<typeof n)){let r=[];if("string"==typeof i){r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<r.length;e++){let t=r[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),r[e]=t}}0===r.length&&r.push(t),typeof TB[t]<"u"&&(TB[t].haveCallback=!0,IB.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){g_.runFunc(n,...r)},!1)}))}}}),RB(t,"clickable")},setLink:function(t,e,r){t.split(",").forEach(function(t){typeof TB[t]<"u"&&(TB[t].link=g_.formatUrl(e,EB),TB[t].linkTarget=r)}),RB(t,"clickable")},bindFunctions:function(e){IB.forEach(function(t){t(e)})},getDirection:function(){return BB.trim()},getVertices:function(){return TB},getEdges:function(){return CB},getClasses:function(){return SB},clear:function(t="gen-1"){TB={},SB={},CB=[],IB=[FB],AB=[],MB={},DB=0,NB=[],LB=!0,OB=t,X6()},setGen:t=>{OB=t||"gen-1"},defaultStyle:function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph:function(t,e,r){let n=t.trim(),i=r.trim();n===i&&i.match(/\s/)&&(n=void 0);let a=[];var{nodeList:t,dir:r}=function(t){const r={boolean:{},number:{},string:{}},n=[];let i;return{nodeList:t.filter(function(t){var e=typeof t;return t.stmt&&"dir"===t.stmt?(i=t.value,!1):""!==t.trim()&&(e in r?!r[e].hasOwnProperty(t)&&(r[e][t]=!0):!(0<=n.indexOf(t))&&n.push(t))}),dir:i}}(a.concat.apply(a,e));if(a=t,"gen-1"===OB)for(let t=0;t<a.length;t++)a[t]=$B(a[t]);n=n||"subGraph"+DB,i=i||"",i=PB(i),DB+=1;e={id:n,nodes:a,title:i.trim(),classes:[],dir:r};return C.info("Adding",e.id,e.nodes,e.dir),e.nodes=HB(e,AB).nodes,AB.push(e),MB[n]=e,n},getDepthFirstPos:function(t){return zB[t]},indexNodes:function(){YB=-1,0<AB.length&&UB("none",AB.length-1)},getSubGraphs:function(){return AB},destructLink:(t,e)=>{t=(t=>{var e=t.trim();let r=e.slice(0,-1),n="arrow_open";switch(e.slice(-1)){case"x":n="arrow_cross","x"===e[0]&&(n="double_"+n,r=r.slice(1));break;case">":n="arrow_point","<"===e[0]&&(n="double_"+n,r=r.slice(1));break;case"o":n="arrow_circle","o"===e[0]&&(n="double_"+n,r=r.slice(1))}let i="normal",a=r.length-1;"="===r[0]&&(i="thick"),"~"===r[0]&&(i="invisible");t=WB(".",r);return t&&(i="dotted",a=t),{type:n,stroke:i,length:a}})(t);if(e){if((e=(t=>{let e=t.trim(),r="arrow_open";switch(e[0]){case"<":r="arrow_point",e=e.slice(1);break;case"x":r="arrow_cross",e=e.slice(1);break;case"o":r="arrow_circle",e=e.slice(1)}let n="normal";return-1!==e.indexOf("=")&&(n="thick"),-1!==e.indexOf(".")&&(n="dotted"),{type:r,stroke:n}})(e)).stroke!==t.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===e.type)e.type=t.type;else{if(e.type!==t.type)return{type:"INVALID",stroke:"INVALID"};e.type="double_"+e.type}return"double_arrow"===e.type&&(e.type="double_arrow_point"),e.length=t.length,e}return t},lex:{firstGraph:()=>!!LB&&!(LB=!1)},exists:qB,makeUniq:HB};try{IP=RN}catch{}Nf=IP=IP||window.graphlib;try{RP=QD()}catch{}var Lf=RP=RP||window.dagre,GB=function(t,e){return t.intersect(e)};var XB=function(t,e,r,n){var i=t.x,t=t.y,a=i-n.x,o=t-n.y,s=Math.sqrt(e*e*o*o+r*r*a*a),a=Math.abs(e*r*a/s),e=(n.x<i&&(a=-a),Math.abs(e*r*o/s));return n.y<t&&(e=-e),{x:i+a,y:t+e}};var ZB=XB,KB=function(t,e,r){return ZB(t,e,e,r)};var QB=function(t,e,r,n){var i,a,o,s,c,l,u,h,d;if(i=e.y-t.y,o=t.x-e.x,c=e.x*t.y-t.x*e.y,u=i*r.x+o*r.y+c,h=i*n.x+o*n.y+c,!(0!=u&&0!=h&&0<u*h||(a=n.y-r.y,s=r.x-n.x,l=n.x*r.y-r.x*n.y,u=a*t.x+s*t.y+l,h=a*e.x+s*e.y+l,0!==u&&0!==h&&0<u*h)||0==(d=i*s-a*o)))return r=Math.abs(d/2),{x:(n=o*l-s*c)<0?(n-r)/d:(n+r)/d,y:(n=a*c-i*l)<0?(n-r)/d:(n+r)/d}},JB=function(t,e,n){var r=t.x,i=t.y,a=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(function(t){o=Math.min(o,t.x),s=Math.min(s,t.y)});for(var c=r-t.width/2-o,l=i-t.height/2-s,u=0;u<e.length;u++){var h=e[u],d=e[u<e.length-1?u+1:0],h=QB(t,n,{x:c+h.x,y:l+h.y},{x:c+d.x,y:l+d.y});h&&a.push(h)}return a.length?(1<a.length&&a.sort(function(t,e){var r=t.x-n.x,t=t.y-n.y,r=Math.sqrt(r*r+t*t),t=e.x-n.x,e=e.y-n.y,t=Math.sqrt(t*t+e*e);return r<t?-1:r===t?0:1}),a[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)};var tO=function(t,e){var r,n=t.x,i=t.y,a=e.x-n,e=e.y-i,o=t.width/2,t=t.height/2;return t=Math.abs(e)*o>Math.abs(a)*t?(e<0&&(t=-t),r=0==e?0:t*a/e,t):(r=o=a<0?-o:o,0==a?0:o*e/a),{x:n+r,y:i+t}};zf={node:GB,circle:KB,ellipse:XB,polygon:JB,rect:tO};try{FP={defaults:jN(),each:HT(),isFunction:Vb,isPlainObject:rD(),pick:gD(),has:DC(),range:bD(),uniqueId:wD()}}catch{}var eO,rO,nO,iO=FP=FP||window._,Uf=("function"==typeof(nO=(eO=P).default)?(rO=function(){return nO.apply(this,arguments)}).prototype=nO.prototype:rO={},Object.defineProperty(rO,"__esModule",{value:!0}),Object.keys(eO).forEach(function(t){var e=Object.getOwnPropertyDescriptor(eO,t);Object.defineProperty(rO,t,e.get?e:{enumerable:!0,get:function(){return eO[t]}})}),rO);if(!OP)try{OP=Uf}catch{}var aO=OP=OP||window.d3,oO=iO,sO={isSubgraph:function(t,e){return!!t.children(e).length},edgeToId:function(t){return hO(t.v)+":"+hO(t.w)+":"+hO(t.name)},applyStyle:function(t,e){e&&t.attr("style",e)},applyClass:function(t,e,r){e&&t.attr("class",e).attr("class",r+" "+t.attr("class"))},applyTransition:function(t,e){e=e.graph();if(oO.isPlainObject(e)){e=e.transition;if(oO.isFunction(e))return e(t)}return t}};var cO,lO,uO=/:/g;function hO(t){return t?String(t).replace(uO,"\\:"):""}function dO(){var a;return lO||(lO=1,a=sO,cO=function(t,e){for(var r=t.append("text"),n=function(t){for(var e,r="",n=!1,i=0;i<t.length;++i)e=t[i],n?(r+="n"===e?`
`:e,n=!1):"\\"===e?n=!0:r+=e;return r}(e.label).split(`
`),i=0;i<n.length;i++)r.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(n[i]);return a.applyStyle(r,e.labelStyle),r}),cO}var fO,pO,gO,yO,mO,bO,_O,vO,xO,kO,wO,EO,TO,CO,SO,AO,MO,NO,DO,LO,BO,OO,IO=sO,RO=function(t,e){var t=t.append("foreignObject").attr("width","100000"),r=t.append("xhtml:div"),n=(r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.label);switch(typeof n){case"function":r.insert(n);break;case"object":r.insert(function(){return n});break;default:r.html(n)}IO.applyStyle(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");e=r.node().getBoundingClientRect();return t.attr("width",e.width).attr("height",e.height),t};function FO(){var r;return pO||(pO=1,r=sO,fO=function(t,e){return t.node().appendChild(e.label),r.applyStyle(t,e.labelStyle),t}),fO}function PO(){var o,s,c;return yO||(yO=1,o=dO(),s=RO,c=FO(),gO=function(t,e,r){var n,i=e.label,t=t.append("g"),a=(("svg"===e.labelType?c:"string"!=typeof i||"html"===e.labelType?s:o)(t,e),t.node().getBBox());switch(r){case"top":n=-e.height/2;break;case"bottom":n=e.height/2-a.height;break;default:n=-a.height/2}return t.attr("transform","translate("+-a.width/2+","+n+")"),t}),gO}function $O(){var s,c,l,u;return bO||(bO=1,s=iO,c=PO(),l=sO,u=aO,mO=function(t,a,o){var e=a.nodes().filter(function(t){return!l.isSubgraph(a,t)}),e=t.selectAll("g.node").data(e,function(t){return t}).classed("update",!0);return e.exit().remove(),e.enter().append("g").attr("class","node").style("opacity",0),(e=t.selectAll("g.node")).each(function(t){var t=a.node(t),e=u.select(this),r=(l.applyClass(e,t.class,(e.classed("update")?"update ":"")+"node"),e.select("g.label").remove(),e.append("g").attr("class","label")),n=c(r,t),i=o[t.shape],n=s.pick(n.node().getBBox(),"width","height"),e=(t.elem=this,t.id&&e.attr("id",t.id),t.labelId&&r.attr("id",t.labelId),s.has(t,"width")&&(n.width=t.width),s.has(t,"height")&&(n.height=t.height),n.width+=t.paddingLeft+t.paddingRight,n.height+=t.paddingTop+t.paddingBottom,r.attr("transform","translate("+(t.paddingLeft-t.paddingRight)/2+","+(t.paddingTop-t.paddingBottom)/2+")"),u.select(this)),r=(e.select(".label-container").remove(),i(e,n,t).classed("label-container",!0)),i=(l.applyStyle(r,t.style),r.node().getBBox());t.width=i.width,t.height=i.height}),t=e.exit?e.exit():e.selectAll(null),l.applyTransition(t,a).style("opacity",0).remove(),e}),mO}function jO(){var n,i,a;return vO||(vO=1,n=sO,i=aO,a=PO(),_O=function(t,r){var e=r.nodes().filter(function(t){return n.isSubgraph(r,t)}),e=t.selectAll("g.cluster").data(e,function(t){return t});return e.selectAll("*").remove(),e.enter().append("g").attr("class","cluster").attr("id",function(t){return r.node(t).id}).style("opacity",0),e=t.selectAll("g.cluster"),n.applyTransition(e,r).style("opacity",1),e.each(function(t){var t=r.node(t),e=i.select(this),e=(i.select(this).append("rect"),e.append("g").attr("class","label"));a(e,t,t.clusterLabelPos)}),e.selectAll("rect").each(function(t){var t=r.node(t),e=i.select(this);n.applyStyle(e,t.style)}),t=e.exit?e.exit():e.selectAll(null),n.applyTransition(t,r).style("opacity",0).remove(),e}),_O}function YO(){var i,a,r,o;return kO||(kO=1,i=iO,a=PO(),r=sO,o=aO,xO=function(t,n){var e=t.selectAll("g.edgeLabel").data(n.edges(),function(t){return r.edgeToId(t)}).classed("update",!0);return e.exit().remove(),e.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(e=t.selectAll("g.edgeLabel")).each(function(t){var e=o.select(this),r=(e.select(".label").remove(),n.edge(t)),e=a(e,n.edge(t),0,0).classed("label",!0),t=e.node().getBBox();r.labelId&&e.attr("id",r.labelId),i.has(r,"width")||(r.width=t.width),i.has(r,"height")||(r.height=t.height)}),t=e.exit?e.exit():e.selectAll(null),r.applyTransition(t,n).style("opacity",0).remove(),e}),xO}function zO(){var a,o,n,s;return EO||(EO=1,a=iO,o=GB,n=sO,s=aO,wO=function(t,i,e){var t=t.selectAll("g.edgePath").data(i.edges(),function(t){return n.edgeToId(t)}).classed("update",!0),r=function(t,n){t=t.enter().append("g").attr("class","edgePath").style("opacity",0);return t.append("path").attr("class","path").attr("d",function(t){var e=n.edge(t),r=n.node(t.v).elem;return c(e,a.range(e.points.length).map(function(){return e=(t=r).getBBox(),{x:(t=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2)).e,y:t.f};var t,e}))}),t.append("defs"),t}(t,i),r=(function(t,e){t=t.exit();n.applyTransition(t,e).style("opacity",0).remove()}(t,i),void 0!==t.merge?t.merge(r):t);return n.applyTransition(r,i).style("opacity",1),r.each(function(t){var e=s.select(this),t=i.edge(t);t.elem=this,t.id&&e.attr("id",t.id),n.applyClass(e,t.class,(e.classed("update")?"update ":"")+"edgePath")}),r.selectAll("path.path").each(function(t){var r=i.edge(t),t=(r.arrowheadId=a.uniqueId("arrowhead"),s.select(this).attr("marker-end",function(){return"url("+(t=location.href,e=r.arrowheadId,t.split("#")[0])+"#"+e+")";var t,e}).style("fill","none"));n.applyTransition(t,i).attr("d",function(t){return t=t,r=(e=i).edge(t),n=e.node(t.v),e=e.node(t.w),(t=r.points.slice(1,r.points.length-1)).unshift(o(n,t[0])),t.push(o(e,t[t.length-1])),c(r,t);var e,r,n}),n.applyStyle(t,r.style)}),r.selectAll("defs *").remove(),r.selectAll("defs").each(function(t){t=i.edge(t);(0,e[t.arrowhead])(s.select(this),t.arrowheadId,t,"arrowhead")}),r}),wO;function c(t,e){var r=(s.line||s.svg.line)().x(function(t){return t.x}).y(function(t){return t.y});return(r.curve||r.interpolate)(t.curve),r(e)}}function UO(){var n,i;return CO||(CO=1,n=sO,i=aO,TO=function(t,e){function r(t){t=e.node(t);return"translate("+t.x+","+t.y+")"}t.filter(function(){return!i.select(this).classed("update")}).attr("transform",r),n.applyTransition(t,e).style("opacity",1).attr("transform",r)}),TO}function WO(){var n,i,a;return AO||(AO=1,n=sO,i=aO,a=iO,SO=function(t,e){function r(t){t=e.edge(t);return a.has(t,"x")?"translate("+t.x+","+t.y+")":""}t.filter(function(){return!i.select(this).classed("update")}).attr("transform",r),n.applyTransition(t,e).style("opacity",1).attr("transform",r)}),SO}function qO(){var i,a;return NO||(NO=1,i=sO,a=aO,MO=function(t,e){var r=t.filter(function(){return!a.select(this).classed("update")});function n(t){t=e.node(t);return"translate("+t.x+","+t.y+")"}r.attr("transform",n),i.applyTransition(t,e).style("opacity",1).attr("transform",n),i.applyTransition(r.selectAll("rect"),e).attr("width",function(t){return e.node(t).width}).attr("height",function(t){return e.node(t).height}).attr("x",function(t){return-e.node(t).width/2}).attr("y",function(t){return-e.node(t).height/2})}),MO}function HO(){var n,a,i,o;return LO||(LO=1,n=tO,a=XB,i=KB,o=JB,DO={rect:function(t,e,r){t=t.insert("rect",":first-child").attr("rx",r.rx).attr("ry",r.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return r.intersect=function(t){return n(r,t)},t},ellipse:function(t,e,r){var n=e.width/2,i=e.height/2,t=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",n).attr("ry",i);return r.intersect=function(t){return a(r,n,i,t)},t},circle:function(t,e,r){var n=Math.max(e.width,e.height)/2,t=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",n);return r.intersect=function(t){return i(r,n,t)},t},diamond:function(t,e,r){var n=e.width*Math.SQRT2/2,e=e.height*Math.SQRT2/2,i=[{x:0,y:-e},{x:-n,y:0},{x:0,y:e},{x:n,y:0}],e=t.insert("polygon",":first-child").attr("points",i.map(function(t){return t.x+","+t.y}).join(" "));return r.intersect=function(t){return o(r,i,t)},e}}),DO}function VO(){var i;return OO||(OO=1,i=sO,BO={default:t,normal:t,vee:function(t,e,r,n){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");i.applyStyle(t,r[n+"Style"]),r[n+"Class"]&&t.attr("class",r[n+"Class"])},undirected:function(t,e,r,n){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");i.applyStyle(t,r[n+"Style"]),r[n+"Class"]&&t.attr("class",r[n+"Class"])}}),BO;function t(t,e,r,n){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");i.applyStyle(t,r[n+"Style"]),r[n+"Class"]&&t.attr("class",r[n+"Class"])}}var GO=iO,XO=Lf.layout;var ZO={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},KO={arrowhead:"normal",curve:aO.curveLinear};function QO(t,e){var r=t.select("g."+e);return r=r.empty()?t.append("g").attr("class",e):r}var JO={graphlib:Nf,dagre:Lf,intersect:zf,render:function(){function e(t,e){(r=e).nodes().forEach(function(t){var e=r.node(t);GO.has(e,"label")||r.children(t).length||(e.label=t),GO.has(e,"paddingX")&&GO.defaults(e,{paddingLeft:e.paddingX,paddingRight:e.paddingX}),GO.has(e,"paddingY")&&GO.defaults(e,{paddingTop:e.paddingY,paddingBottom:e.paddingY}),GO.has(e,"padding")&&GO.defaults(e,{paddingLeft:e.padding,paddingRight:e.padding,paddingTop:e.padding,paddingBottom:e.padding}),GO.defaults(e,ZO),GO.each(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(t){e[t]=Number(e[t])}),GO.has(e,"width")&&(e._prevWidth=e.width),GO.has(e,"height")&&(e._prevHeight=e.height)}),r.edges().forEach(function(t){t=r.edge(t);GO.has(t,"label")||(t.label=""),GO.defaults(t,KO)});var r,n,t=QO(t,"output"),i=QO(t,"clusters"),a=QO(t,"edgePaths"),o=l(QO(t,"edgeLabels"),e),t=s(QO(t,"nodes"),e,p),t=(XO(e),h(t,e),d(o,e),u(a,e,g),c(i,e));f(t,e),n=e,GO.each(n.nodes(),function(t){t=n.node(t);GO.has(t,"_prevWidth")?t.width=t._prevWidth:delete t.width,GO.has(t,"_prevHeight")?t.height=t._prevHeight:delete t.height,delete t._prevWidth,delete t._prevHeight})}var s=$O(),c=jO(),l=YO(),u=zO(),h=UO(),d=WO(),f=qO(),p=HO(),g=VO();return e.createNodes=function(t){return arguments.length?(s=t,e):s},e.createClusters=function(t){return arguments.length?(c=t,e):c},e.createEdgeLabels=function(t){return arguments.length?(l=t,e):l},e.createEdgePaths=function(t){return arguments.length?(u=t,e):u},e.shapes=function(t){return arguments.length?(p=t,e):p},e.arrows=function(t){return arguments.length?(g=t,e):g},e},util:sO,version:"0.6.4"};function tI(t,e,r){const n=e.width,i=e.height,a=.9*(n+i),o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],s=hI(t,a,a,o);return r.intersect=function(t){return JO.intersect.polygon(r,o,t)},s}function eI(t,e,r){const n=e.height,i=n/4,a=e.width+2*i,o=[{x:i,y:0},{x:a-i,y:0},{x:a,y:-n/2},{x:a-i,y:-n},{x:i,y:-n},{x:0,y:-n/2}],s=hI(t,a,n,o);return r.intersect=function(t){return JO.intersect.polygon(r,o,t)},s}function rI(t,e,r){const n=e.width,i=e.height,a=[{x:-i/2,y:0},{x:n,y:0},{x:n,y:-i},{x:-i/2,y:-i},{x:0,y:-i/2}],o=hI(t,n,i,a);return r.intersect=function(t){return JO.intersect.polygon(r,a,t)},o}function nI(t,e,r){const n=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:n-i/6,y:0},{x:n+2*i/6,y:-i},{x:i/6,y:-i}],o=hI(t,n,i,a);return r.intersect=function(t){return JO.intersect.polygon(r,a,t)},o}function iI(t,e,r){const n=e.width,i=e.height,a=[{x:2*i/6,y:0},{x:n+i/6,y:0},{x:n-2*i/6,y:-i},{x:-i/6,y:-i}],o=hI(t,n,i,a);return r.intersect=function(t){return JO.intersect.polygon(r,a,t)},o}function aI(t,e,r){const n=e.width,i=e.height,a=[{x:-2*i/6,y:0},{x:n+2*i/6,y:0},{x:n-i/6,y:-i},{x:i/6,y:-i}],o=hI(t,n,i,a);return r.intersect=function(t){return JO.intersect.polygon(r,a,t)},o}function oI(t,e,r){const n=e.width,i=e.height,a=[{x:i/6,y:0},{x:n-i/6,y:0},{x:n+2*i/6,y:-i},{x:-2*i/6,y:-i}],o=hI(t,n,i,a);return r.intersect=function(t){return JO.intersect.polygon(r,a,t)},o}function sI(t,e,r){const n=e.width,i=e.height,a=[{x:0,y:0},{x:n+i/2,y:0},{x:n,y:-i/2},{x:n+i/2,y:-i},{x:0,y:-i}],o=hI(t,n,i,a);return r.intersect=function(t){return JO.intersect.polygon(r,a,t)},o}function cI(t,e,r){var n=e.height,e=e.width+n/4,t=t.insert("rect",":first-child").attr("rx",n/2).attr("ry",n/2).attr("x",-e/2).attr("y",-n/2).attr("width",e).attr("height",n);return r.intersect=function(t){return JO.intersect.rect(r,t)},t}function lI(t,e,r){const n=e.width,i=e.height,a=[{x:0,y:0},{x:n,y:0},{x:n,y:-i},{x:0,y:-i},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-i},{x:-8,y:-i},{x:-8,y:0}],o=hI(t,n,i,a);return r.intersect=function(t){return JO.intersect.polygon(r,a,t)},o}function uI(t,e,i){const r=e.width,a=r/2,o=a/(2.5+r/50),n=e.height+o,s="M 0,"+o+" a "+a+","+o+" 0,0,0 "+r+" 0 a "+a+","+o+" 0,0,0 "+-r+" 0 l 0,"+n+" a "+a+","+o+" 0,0,0 "+r+" 0 l 0,"+-n,c=t.attr("label-offset-y",o).insert("path",":first-child").attr("d",s).attr("transform","translate("+-r/2+","+-(n/2+o)+")");return i.intersect=function(e){var r=JO.intersect.rect(i,e),n=r.x-i.x;if(0!=a&&(Math.abs(n)<i.width/2||Math.abs(n)==i.width/2&&Math.abs(r.y-i.y)>i.height/2-o)){let t=o*o*(1-n*n/(a*a));0!=t&&(t=Math.sqrt(t)),t=o-t,0<e.y-i.y&&(t=-t),r.y+=t}return r},c}function hI(t,e,r,n){return t.insert("polygon",":first-child").attr("points",n.map(function(t){return t.x+","+t.y}).join(" ")).attr("transform","translate("+-e/2+","+r/2+")")}function dI(h,d,t,e,r,f){const p=e?e.select(`[id="${t}"]`):H(`[id="${t}"]`),g=r||document;Object.keys(h).forEach(function(t){t=h[t];let e="default";0<t.classes.length&&(e=t.classes.join(" "));var r=r_(t.styles);let n=void 0!==t.text?t.text:t.id,i;if(W4(V().flowchart.htmlLabels)){var a={label:n.replace(/fa[lrsb]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)};(i=RO(p,a).node()).parentNode.removeChild(i)}else{var o=g.createElementNS("http://www.w3.org/2000/svg","text"),s=(o.setAttribute("style",r.labelStyle.replace("color:","fill:")),n.split(H4.lineBreakRegex));for(let t=0;t<s.length;t++){var c=g.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","1"),c.textContent=s[t],o.appendChild(c)}i=o}let l=0,u="";switch(t.type){case"round":l=5,u="rect";break;case"square":u="rect";break;case"diamond":u="question";break;case"hexagon":u="hexagon";break;case"odd":u="rect_left_inv_arrow";break;case"lean_right":u="lean_right";break;case"lean_left":u="lean_left";break;case"trapezoid":u="trapezoid";break;case"inv_trapezoid":u="inv_trapezoid";break;case"odd_right":u="rect_left_inv_arrow";break;case"circle":u="circle";break;case"ellipse":u="ellipse";break;case"stadium":u="stadium";break;case"subroutine":u="subroutine";break;case"cylinder":u="cylinder";break;default:u="rect"}C.warn("Adding node",t.id,t.domId),d.setNode(f.db.lookUpDomId(t.id),{labelType:"svg",labelStyle:r.labelStyle,shape:u,label:i,rx:l,ry:l,class:e,style:r.style,id:f.db.lookUpDomId(t.id)})})}function fI(c,l,u){let h=0,d,f;var t;typeof c.defaultStyle<"u"&&(t=r_(c.defaultStyle),d=t.style,f=t.labelStyle),c.forEach(function(t){h++;var e="L-"+t.start+"-"+t.end,r="LS-"+t.start,n="LE-"+t.end,i={};"arrow_open"===t.type?i.arrowhead="none":i.arrowhead="normal";let a="",o="";if(typeof t.style<"u"){var s=r_(t.style);a=s.style,o=s.labelStyle}else switch(t.stroke){case"normal":a="fill:none",typeof d<"u"&&(a=d),typeof f<"u"&&(o=f);break;case"dotted":a="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":a=" stroke-width: 3.5px;fill:none"}i.style=a,i.labelStyle=o,typeof t.interpolate<"u"?i.curve=t_(t.interpolate,Py):typeof c.defaultInterpolate<"u"?i.curve=t_(c.defaultInterpolate,Py):i.curve=t_(mI.curve,Py),"u"<typeof t.text?typeof t.style<"u"&&(i.arrowheadStyle="fill: #333"):(i.arrowheadStyle="fill: #333",i.labelpos="c",W4(V().flowchart.htmlLabels)?(i.labelType="html",i.label=`<span id="L-${e}" class="edgeLabel L-${r}' L-${n}" style="${i.labelStyle}">${t.text.replace(/fa[lrsb]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}</span>`):(i.labelType="text",i.label=t.text.replace(H4.lineBreakRegex,`
`),"u"<typeof t.style&&(i.style=i.style||"stroke: #333; stroke-width: 1.5px;fill:none"),i.labelStyle=i.labelStyle.replace("color:","fill:"))),i.id=e,i.class=r+" "+n,i.minlen=t.length||1,l.setEdge(u.db.lookUpDomId(t.start),u.db.lookUpDomId(t.end),i,h)})}function pI(h,d,t,e,f,p){const g=e.select(`[id="${t}"]`);Object.keys(h).forEach(function(t){t=h[t];let e="default";0<t.classes.length&&(e=t.classes.join(" "));var r=r_(t.styles);let n=void 0!==t.text?t.text:t.id,i;if(W4(V().flowchart.htmlLabels)){var a={label:n.replace(/fa[lrsb]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)};(i=RO(g,a).node()).parentNode.removeChild(i)}else{var o=f.createElementNS("http://www.w3.org/2000/svg","text"),s=(o.setAttribute("style",r.labelStyle.replace("color:","fill:")),n.split(H4.lineBreakRegex));for(let t=0;t<s.length;t++){var c=f.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","1"),c.textContent=s[t],o.appendChild(c)}i=o}let l=0,u="";switch(t.type){case"round":l=5,u="rect";break;case"square":u="rect";break;case"diamond":u="question";break;case"hexagon":u="hexagon";break;case"odd":u="rect_left_inv_arrow";break;case"lean_right":u="lean_right";break;case"lean_left":u="lean_left";break;case"trapezoid":u="trapezoid";break;case"inv_trapezoid":u="inv_trapezoid";break;case"odd_right":u="rect_left_inv_arrow";break;case"circle":u="circle";break;case"ellipse":u="ellipse";break;case"stadium":u="stadium";break;case"subroutine":u="subroutine";break;case"cylinder":u="cylinder";break;case"group":u="rect";break;case"doublecircle":u="doublecircle";break;default:u="rect"}d.setNode(t.id,{labelStyle:r.labelStyle,shape:u,labelText:n,rx:l,ry:l,class:e,style:r.style,id:t.id,link:t.link,linkTarget:t.linkTarget,tooltip:p.db.getTooltip(t.id)||"",domId:p.db.lookUpDomId(t.id),haveCallback:t.haveCallback,width:"group"===t.type?500:void 0,dir:t.dir,type:t.type,props:t.props,padding:V().flowchart.padding}),C.info("setNode",{labelStyle:r.labelStyle,shape:u,labelText:n,rx:l,ry:l,class:e,style:r.style,id:t.id,domId:p.db.lookUpDomId(t.id),width:"group"===t.type?500:void 0,type:t.type,dir:t.dir,props:t.props,padding:V().flowchart.padding})})}function gI(c,l,t){C.info("abc78 edges = ",c);let u=0,h={},d,f;var e;typeof c.defaultStyle<"u"&&(e=r_(c.defaultStyle),d=e.style,f=e.labelStyle),c.forEach(function(t){u++;var e,r="L-"+t.start+"-"+t.end,n=("u"<typeof h[r]?h[r]=0:h[r]++,C.info("abc78 new entry",r,h[r]),r+"-"+h[r]),r=(C.info("abc78 new link id to be used is",r,n,h[r]),"LS-"+t.start),i="LE-"+t.end,a={style:"",labelStyle:""};switch(a.minlen=t.length||1,"arrow_open"===t.type?a.arrowhead="none":a.arrowhead="normal",a.arrowTypeStart="arrow_open",a.arrowTypeEnd="arrow_open",t.type){case"double_arrow_cross":a.arrowTypeStart="arrow_cross";case"arrow_cross":a.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":a.arrowTypeStart="arrow_point";case"arrow_point":a.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":a.arrowTypeStart="arrow_circle";case"arrow_circle":a.arrowTypeEnd="arrow_circle"}let o="",s="";switch(t.stroke){case"normal":o="fill:none;",typeof d<"u"&&(o=d),typeof f<"u"&&(s=f),a.thickness="normal",a.pattern="solid";break;case"dotted":a.thickness="normal",a.pattern="dotted",a.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":a.thickness="thick",a.pattern="solid",a.style="stroke-width: 3.5px;fill:none;";break;case"invisible":a.thickness="invisible",a.pattern="solid",a.style="stroke-width: 0;fill:none;"}typeof t.style<"u"&&(e=r_(t.style),o=e.style,s=e.labelStyle),a.style=a.style+=o,a.labelStyle=a.labelStyle+=s,typeof t.interpolate<"u"?a.curve=t_(t.interpolate,Py):typeof c.defaultInterpolate<"u"?a.curve=t_(c.defaultInterpolate,Py):a.curve=t_(_I.curve,Py),"u"<typeof t.text?typeof t.style<"u"&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c"),a.labelType="text",a.label=t.text.replace(H4.lineBreakRegex,`
`),"u"<typeof t.style&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),a.labelStyle=a.labelStyle.replace("color:","fill:"),a.id=n,a.classes="flowchart-link "+r+" "+i,l.setEdge(t.start,t.end,a,u)})}const yI={addToRender:function(t){t.shapes().question=tI,t.shapes().hexagon=eI,t.shapes().stadium=cI,t.shapes().subroutine=lI,t.shapes().cylinder=uI,t.shapes().rect_left_inv_arrow=rI,t.shapes().lean_right=nI,t.shapes().lean_left=iI,t.shapes().trapezoid=aI,t.shapes().inv_trapezoid=oI,t.shapes().rect_right_inv_arrow=sI},addToRenderV2:function(t){t({question:tI}),t({hexagon:eI}),t({stadium:cI}),t({subroutine:lI}),t({cylinder:uI}),t({rect_left_inv_arrow:rI}),t({lean_right:nI}),t({lean_left:iI}),t({trapezoid:aI}),t({inv_trapezoid:oI}),t({rect_right_inv_arrow:sI})}},mI={},bI={setConf:function(e){var r=Object.keys(e);for(let t=0;t<r.length;t++)mI[r[t]]=e[r[t]]},addVertices:dI,addEdges:fI,getClasses:function(t,e){C.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{}},draw:function(t,o,e,s){C.info("Drawing flowchart"),s.db.clear();const{securityLevel:c,flowchart:r}=V();let n;"sandbox"===c&&(n=H("#i"+o));const l=H("sandbox"===c?n.nodes()[0].contentDocument.body:"body"),u="sandbox"===c?n.nodes()[0].contentDocument:document;try{s.parser.parse(t)}catch{C.debug("Parsing failed")}let i=s.db.getDirection();"u"<typeof i&&(i="TD");var t=r.nodeSpacing||50,a=r.rankSpacing||50,h=new RN.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:i,nodesep:t,ranksep:a,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let d;var f=s.db.getSubGraphs();for(let t=f.length-1;0<=t;t--)d=f[t],s.db.addVertex(d.id,d.title,"group",void 0,d.classes);const p=s.db.getVertices();C.warn("Get vertices",p);t=s.db.getEdges();let g=0;for(g=f.length-1;0<=g;g--){d=f[g],Sr("cluster").append("text");for(let t=0;t<d.nodes.length;t++)C.warn("Setting subgraph",d.nodes[t],s.db.lookUpDomId(d.nodes[t]),s.db.lookUpDomId(d.id)),h.setParent(s.db.lookUpDomId(d.nodes[t]),s.db.lookUpDomId(d.id))}dI(p,h,o,l,u,s),fI(t,h,s);var a=new JO.render,t=(yI.addToRender(a),a.arrows().none=function(t,e,r,n){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");JO.util.applyStyle(t,r[n+"Style"])},a.arrows().normal=function(t,e){t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")},l.select(`[id="${o}"]`)),y=(vv(s.db,t,o),l.select("#"+o+" g"));for(a(y,h),y.selectAll("g.node").attr("title",function(){return s.db.getTooltip(this.id)}),s.db.indexNodes("subGraph"+g),g=0;g<f.length;g++)if("undefined"!==(d=f[g]).title){var m=u.querySelectorAll("#"+o+' [id="'+s.db.lookUpDomId(d.id)+'"] rect'),b=u.querySelectorAll("#"+o+' [id="'+s.db.lookUpDomId(d.id)+'"]'),_=m[0].x.baseVal.value,v=m[0].y.baseVal.value,m=m[0].width.baseVal.value,x=H(b[0]).select(".label");x.attr("transform",`translate(${_+m/2}, ${v+14})`),x.attr("id",o+"Text");for(let t=0;t<d.classes.length;t++)b[0].classList.add(d.classes[t])}if(!r.htmlLabels){var k=u.querySelectorAll('[id="'+o+'"] .edgeLabel .label');for(let t=0;t<k.length;t++){var w=k[t],E=w.getBBox(),T=u.createElementNS("http://www.w3.org/2000/svg","rect");T.setAttribute("rx",0),T.setAttribute("ry",0),T.setAttribute("width",E.width),T.setAttribute("height",E.height),w.insertBefore(T,w.firstChild)}}p6(h,t,r.diagramPadding,r.useMaxWidth),Object.keys(p).forEach(function(t){var e=p[t];if(e.link){t=l.select("#"+o+' [id="'+s.db.lookUpDomId(t)+'"]');if(t){const r=u.createElementNS("http://www.w3.org/2000/svg","a"),n=(r.setAttributeNS("http://www.w3.org/2000/svg","class",e.classes.join(" ")),r.setAttributeNS("http://www.w3.org/2000/svg","href",e.link),r.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===c?r.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):e.linkTarget&&r.setAttributeNS("http://www.w3.org/2000/svg","target",e.linkTarget),t.insert(function(){return r},":first-child")),i=t.select(".label-container"),a=(i&&n.append(function(){return i.node()}),t.select(".label"));a&&n.append(function(){return a.node()})}}})}},_I={},vI={setConf:function(e){var r=Object.keys(e);for(let t=0;t<r.length;t++)_I[r[t]]=e[r[t]]},addVertices:pI,addEdges:gI,getClasses:function(t,e){C.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{}},draw:function(t,o,e,r){C.info("Drawing flowchart"),r.db.clear(),VB.setGen("gen-2"),r.parser.parse(t);let n=r.db.getDirection();"u"<typeof n&&(n="TD");const{securityLevel:s,flowchart:i}=V(),a=i.nodeSpacing||50,c=i.rankSpacing||50;let l;"sandbox"===s&&(l=H("#i"+o));const u=H("sandbox"===s?l.nodes()[0].contentDocument.body:"body"),h="sandbox"===s?l.nodes()[0].contentDocument:document,d=new RN.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:a,ranksep:c,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let f;var p=r.db.getSubGraphs();C.info("Subgraphs - ",p);for(let t=p.length-1;0<=t;t--)f=p[t],C.info("Subgraph - ",f),r.db.addVertex(f.id,f.title,"group",void 0,f.classes,f.dir);const g=r.db.getVertices(),y=r.db.getEdges();C.info(y);let m=0;for(m=p.length-1;0<=m;m--){f=p[m],Sr("cluster").append("text");for(let t=0;t<f.nodes.length;t++)C.info("Setting up subgraphs",f.nodes[t],f.id),d.setParent(f.nodes[t],f.id)}pI(g,d,o,u,h,r),gI(y,d);var t=u.select(`[id="${o}"]`),b=(vv(r.db,t,o),u.select("#"+o+" g"));if(WL(b,d,["point","circle","cross"],"flowchart",o),p6(d,t,i.diagramPadding,i.useMaxWidth),r.db.indexNodes("subGraph"+m),!i.htmlLabels){var _=h.querySelectorAll('[id="'+o+'"] .edgeLabel .label');for(let t=0;t<_.length;t++){var v=_[t],x=v.getBBox(),k=h.createElementNS("http://www.w3.org/2000/svg","rect");k.setAttribute("rx",0),k.setAttribute("ry",0),k.setAttribute("width",x.width),k.setAttribute("height",x.height),v.insertBefore(k,v.firstChild)}}Object.keys(g).forEach(function(t){var e=g[t];if(e.link){t=H("#"+o+' [id="'+t+'"]');if(t){const r=h.createElementNS("http://www.w3.org/2000/svg","a"),n=(r.setAttributeNS("http://www.w3.org/2000/svg","class",e.classes.join(" ")),r.setAttributeNS("http://www.w3.org/2000/svg","href",e.link),r.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===s?r.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):e.linkTarget&&r.setAttributeNS("http://www.w3.org/2000/svg","target",e.linkTarget),t.insert(function(){return r},":first-child")),i=t.select(".label-container"),a=(i&&n.append(function(){return i.node()}),t.select(".label"));a&&n.append(function(){return a.node()})}}})}};Ff=[1,15],jf=[1,16],n3=[1,17],Jm=[1,18],_f=[1,19],Cf=[1,20],Vf=[1,21],Xf=[1,22],Kf=[1,23],Af=[1,24],Jf=[1,25],xI=[1,26],kI=[1,28],wI=[1,30],y2=[1,33],m2=[5,7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],(d2={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,excludes:16,includes:17,todayMarker:18,title:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,clickStatement:26,taskTxt:27,taskData:28,openDirective:29,typeDirective:30,closeDirective:31,":":32,argDirective:33,click:34,callbackname:35,callbackargs:36,href:37,clickStatementDebug:38,open_directive:39,type_directive:40,arg_directive:41,close_directive:42,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"excludes",17:"includes",18:"todayMarker",19:"title",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"taskTxt",28:"taskData",32:":",34:"click",35:"callbackname",36:"callbackargs",37:"href",39:"open_directive",40:"type_directive",41:"arg_directive",42:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[26,2],[26,3],[26,3],[26,4],[26,3],[26,4],[26,2],[38,2],[38,3],[38,3],[38,4],[38,3],[38,4],[38,2],[29,1],[30,1],[33,1],[31,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 2:return a[s-1];case 3:this.$=[];break;case 4:a[s-1].push(a[s]),this.$=a[s-1];break;case 5:case 6:this.$=a[s];break;case 7:case 8:this.$=[];break;case 9:n.setDateFormat(a[s].substr(11)),this.$=a[s].substr(11);break;case 10:n.enableInclusiveEndDates(),this.$=a[s].substr(18);break;case 11:n.TopAxis(),this.$=a[s].substr(8);break;case 12:n.setAxisFormat(a[s].substr(11)),this.$=a[s].substr(11);break;case 13:n.setExcludes(a[s].substr(9)),this.$=a[s].substr(9);break;case 14:n.setIncludes(a[s].substr(9)),this.$=a[s].substr(9);break;case 15:n.setTodayMarker(a[s].substr(12)),this.$=a[s].substr(12);break;case 16:n.setDiagramTitle(a[s].substr(6)),this.$=a[s].substr(6);break;case 17:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 18:case 19:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 20:n.addSection(a[s].substr(8)),this.$=a[s].substr(8);break;case 22:n.addTask(a[s-1],a[s]),this.$="task";break;case 26:this.$=a[s-1],n.setClickEvent(a[s-1],a[s],null);break;case 27:this.$=a[s-2],n.setClickEvent(a[s-2],a[s-1],a[s]);break;case 28:this.$=a[s-2],n.setClickEvent(a[s-2],a[s-1],null),n.setLink(a[s-2],a[s]);break;case 29:this.$=a[s-3],n.setClickEvent(a[s-3],a[s-2],a[s-1]),n.setLink(a[s-3],a[s]);break;case 30:this.$=a[s-2],n.setClickEvent(a[s-2],a[s],null),n.setLink(a[s-2],a[s-1]);break;case 31:this.$=a[s-3],n.setClickEvent(a[s-3],a[s-1],a[s]),n.setLink(a[s-3],a[s-2]);break;case 32:this.$=a[s-1],n.setLink(a[s-1],a[s]);break;case 33:case 39:this.$=a[s-1]+" "+a[s];break;case 34:case 35:case 37:this.$=a[s-2]+" "+a[s-1]+" "+a[s];break;case 36:case 38:this.$=a[s-3]+" "+a[s-2]+" "+a[s-1]+" "+a[s];break;case 40:n.parseDirective("%%{","open_directive");break;case 41:n.parseDirective(a[s],"type_directive");break;case 42:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 43:n.parseDirective("}%%","close_directive","gantt")}},table:[{3:1,4:2,5:d2=[1,3],29:4,39:b2=[1,5]},{1:[3]},{3:6,4:2,5:d2,29:4,39:b2},TI(_2=[7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],[2,3],{6:7}),{30:8,40:[1,9]},{40:[2,40]},{1:[2,1]},{4:29,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:Ff,13:jf,14:n3,15:Jm,16:_f,17:Cf,18:Vf,19:Xf,20:Kf,22:Af,24:Jf,25:xI,26:27,27:kI,29:4,34:wI,39:b2},{31:31,32:[1,32],42:y2},TI([32,42],[2,41]),TI(_2,[2,8],{1:[2,2]}),TI(_2,[2,4]),{4:29,10:34,12:Ff,13:jf,14:n3,15:Jm,16:_f,17:Cf,18:Vf,19:Xf,20:Kf,22:Af,24:Jf,25:xI,26:27,27:kI,29:4,34:wI,39:b2},TI(_2,[2,6]),TI(_2,[2,7]),TI(_2,[2,9]),TI(_2,[2,10]),TI(_2,[2,11]),TI(_2,[2,12]),TI(_2,[2,13]),TI(_2,[2,14]),TI(_2,[2,15]),TI(_2,[2,16]),{21:[1,35]},{23:[1,36]},TI(_2,[2,19]),TI(_2,[2,20]),TI(_2,[2,21]),{28:[1,37]},TI(_2,[2,23]),{35:[1,38],37:[1,39]},{11:[1,40]},{33:41,41:[1,42]},{11:[2,43]},TI(_2,[2,5]),TI(_2,[2,17]),TI(_2,[2,18]),TI(_2,[2,22]),TI(_2,[2,26],{36:[1,43],37:[1,44]}),TI(_2,[2,32],{35:[1,45]}),TI(m2,[2,24]),{31:46,42:y2},{42:[2,42]},TI(_2,[2,27],{37:[1,47]}),TI(_2,[2,28]),TI(_2,[2,30],{36:[1,48]}),{11:[1,49]},TI(_2,[2,29]),TI(_2,[2,31]),TI(m2,[2,25])],defaultActions:{5:[2,40],6:[2,1],33:[2,43],42:[2,42]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),39;case 1:return this.begin("type_directive"),40;case 2:return this.popState(),this.begin("arg_directive"),32;case 3:return this.popState(),this.popState(),42;case 4:return 41;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:case 13:case 14:break;case 15:return 11;case 16:case 17:case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 37;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 35;case 26:this.popState();break;case 27:return 36;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 34;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 17;case 37:return 16;case 38:return 18;case 39:return"date";case 40:return 19;case 41:return"accDescription";case 42:return 25;case 43:return 27;case 44:return 28;case 45:return 32;case 46:return 7;case 47:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],inclusive:!0}}};var xI,kI,wI,EI=new((CI.prototype=d2).Parser=CI);function TI(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function CI(){this.yy={}}EI.parser=EI;const SI=t=>null!==t.match(/^\s*gantt/);let AI="",MI="",NI="",DI=[],LI=[],BI={},OI=[],II=[],RI="";const FI=["active","done","crit","milestone"];let PI=[],$I=!1,jI=!1,YI=0;function zI(t){return null!==(t=/^(\d+(?:\.\d+)?)([yMwdhms]|ms)$/.exec(t.trim()))?G.duration(Number.parseFloat(t[1]),t[2]):G.duration.invalid()}const UI=function(t,e,r,n){return!(0<=n.indexOf(t.format(e.trim())))&&(6<=t.isoWeekday()&&0<=r.indexOf("weekends")||0<=r.indexOf(t.format("dddd").toLowerCase())||0<=r.indexOf(t.format(e.trim())))},WI=function(t,e,r,n){var i;r.length&&!t.manualEndTime&&((i=G(t.startTime,e,!0)).add(1,"d"),e=function(t,e,r,n,i){let a=!1,o=null;for(;t<=e;)a||(o=e.toDate()),(a=UI(t,r,n,i))&&e.add(1,"d"),t.add(1,"d");return o}(i,i=G(t.endTime,e,!0),e,r,n),t.endTime=i.toDate(),t.renderEndTime=e)},qI=function(t,e,r){r=r.trim();var n=/^after\s+([\d\w- ]+)/.exec(r.trim());if(null!==n){let e=null;return(n[1].split(" ").forEach(function(t){t=rR(t);typeof t<"u"&&(!e||t.endTime>e.endTime)&&(e=t)}),e)?e.endTime:((n=new Date).setHours(0,0,0,0),n)}n=G(r,e.trim(),!0);if(n.isValid())return n.toDate();C.debug("Invalid date:"+r),C.debug("With date format:"+e.trim());n=new Date(r);if("u"<typeof n||isNaN(n.getTime()))throw new Error("Invalid date:"+r);return n},HI=function(t,e,r,n){n=n||!1,r=r.trim();var e=G(r,e.trim(),!0);return(e.isValid()?(n&&e.add(1,"d"),e):(n=G(t),(e=zI(r)).isValid()&&n.add(e),n)).toDate()};let VI=0;const GI=function(t){return"u"<typeof t?"task"+(VI+=1):t};let XI,ZI,KI=[];function QI(){let e=!0;for(let t=0;t<KI.length;t++){{r=void 0;n=void 0;i=void 0;var r=t;var n=KI[r];switch(KI[r].raw.startTime.type){case"prevTaskEnd":var i=rR(n.prevTaskId);n.startTime=i.endTime;break;case"getStartDate":(i=qI(void 0,AI,KI[r].raw.startTime.startData))&&(KI[r].startTime=i)}KI[r].startTime&&(KI[r].endTime=HI(KI[r].startTime,AI,KI[r].raw.endTime.data,$I),KI[r].endTime)&&(KI[r].processed=!0,KI[r].manualEndTime=G(KI[r].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),WI(KI[r],AI,LI,DI)),KI[r].processed}e=e&&KI[t].processed}return e}function JI(t,e){t.split(",").forEach(function(t){t=rR(t);typeof t<"u"&&t.classes.push(e)})}function tR(e,r){PI.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){r()})}),PI.push(function(){var t=document.querySelector(`[id="${e}-text"]`);null!==t&&t.addEventListener("click",function(){r()})})}const eR={},rR=function(t){t=eR[t];return KI[t]},nR={parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().gantt,clear:function(){OI=[],II=[],RI="",PI=[],VI=0,XI=void 0,ZI=void 0,KI=[],AI="",MI="",NI="",DI=[],LI=[],$I=!1,jI=!1,YI=0,BI={},X6()},setDateFormat:function(t){AI=t},getDateFormat:function(){return AI},enableInclusiveEndDates:function(){$I=!0},endDatesAreInclusive:function(){return $I},enableTopAxis:function(){jI=!0},topAxisEnabled:function(){return jI},setAxisFormat:function(t){MI=t},getAxisFormat:function(){return MI},setTodayMarker:function(t){NI=t},getTodayMarker:function(){return NI},setAccTitle:Z6,getAccTitle:K6,setDiagramTitle:tv,getDiagramTitle:ev,setAccDescription:Q6,getAccDescription:J6,addSection:function(t){RI=t,OI.push(t)},getSections:function(){return OI},getTasks:function(){let t=QI();let e=0;for(;!t&&e<10;)t=QI(),e++;return II=KI},addTask:function(t,e){t={section:RI,type:RI,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},e=function(t,e){let r;var n=(r=":"===e.substr(0,1)?e.substr(1,e.length):e).split(","),i={};iR(n,i,FI);for(let t=0;t<n.length;t++)n[t]=n[t].trim();switch(n.length){case 1:i.id=GI(),i.startTime={type:"prevTaskEnd",id:t},i.endTime={data:n[0]};break;case 2:i.id=GI(),i.startTime={type:"getStartDate",startData:n[0]},i.endTime={data:n[1]};break;case 3:i.id=GI(n[0]),i.startTime={type:"getStartDate",startData:n[1]},i.endTime={data:n[2]}}return i}(ZI,e),t.raw.startTime=e.startTime,t.raw.endTime=e.endTime,t.id=e.id,t.prevTaskId=ZI,t.active=e.active,t.done=e.done,t.crit=e.crit,t.milestone=e.milestone,t.order=YI,YI++,e=KI.push(t);ZI=t.id,eR[t.id]=e-1},findTaskById:rR,addTaskOrg:function(t,e){t={section:RI,type:RI,description:t,task:t,classes:[]},e=function(t,e){let r;var n=(r=":"===e.substr(0,1)?e.substr(1,e.length):e).split(","),i={};iR(n,i,FI);for(let t=0;t<n.length;t++)n[t]=n[t].trim();let a="";switch(n.length){case 1:i.id=GI(),i.startTime=t.endTime,a=n[0];break;case 2:i.id=GI(),i.startTime=qI(void 0,AI,n[0]),a=n[1];break;case 3:i.id=GI(n[0]),i.startTime=qI(void 0,AI,n[1]),a=n[2]}return a&&(i.endTime=HI(i.startTime,AI,a,$I),i.manualEndTime=G(a,"YYYY-MM-DD",!0).isValid(),WI(i,AI,LI,DI)),i}(XI,e);t.startTime=e.startTime,t.endTime=e.endTime,t.id=e.id,t.active=e.active,t.done=e.done,t.crit=e.crit,t.milestone=e.milestone,XI=t,II.push(t)},setIncludes:function(t){DI=t.toLowerCase().split(/[\s,]+/)},getIncludes:function(){return DI},setExcludes:function(t){LI=t.toLowerCase().split(/[\s,]+/)},getExcludes:function(){return LI},setClickEvent:function(t,r,i){t.split(",").forEach(function(t){var e=r,n=i;if(!("loose"!==V().securityLevel||"u"<typeof e)){let r=[];if("string"==typeof n){r=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<r.length;e++){let t=r[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),r[e]=t}}0===r.length&&r.push(t),typeof rR(t)<"u"&&tR(t,()=>{g_.runFunc(e,...r)})}}),JI(t,"clickable")},setLink:function(t,e){let r=e;"loose"!==V().securityLevel&&(r=z(e)),t.split(",").forEach(function(t){typeof rR(t)<"u"&&(tR(t,()=>{window.open(r,"_self")}),BI[t]=r)}),JI(t,"clickable")},getLinks:function(){return BI},bindFunctions:function(e){PI.forEach(function(t){t(e)})},parseDuration:zI,isInvalidDate:UI};function iR(r,n,t){let i=!0;for(;i;)i=!1,t.forEach(function(t){var e=new RegExp("^\\s*"+t+"\\s*$");r[0].match(e)&&(n[t]=!0,r.shift(1),i=!0)})}let aR;const oR={setConf:function(){C.debug("Something is calling, setConf, remove the call")},draw:function(R,t,F,r){const s=V().gantt,e=V().securityLevel;let n;"sandbox"===e&&(n=H("#i"+t));const P=H("sandbox"===e?n.nodes()[0].contentDocument.body:"body"),i="sandbox"===e?n.nodes()[0].contentDocument:document,a=i.getElementById(t);"u"<typeof(aR=a.parentElement.offsetWidth)&&(aR=1200),typeof s.useWidth<"u"&&(aR=s.useWidth);var o=r.db.getTasks(),c=o.length*(s.barHeight+s.barGap)+2*s.topPadding;a.setAttribute("viewBox","0 0 "+aR+" "+c);const l=P.select(`[id="${t}"]`),u=sg().domain([Jt(o,function(t){return t.startTime}),Kt(o,function(t){return t.endTime})]).rangeRound([0,aR-s.leftPadding-s.rightPadding]);let h=[];for(let t=0;t<o.length;t++)h.push(o[t].type);const $=h;h=function(r){var n={},i=[];for(let t=0,e=r.length;t<e;++t)Object.prototype.hasOwnProperty.call(n,r[t])||(n[r[t]]=!0,i.push(r[t]));return i}(h),o.sort(function(t,e){t=t.startTime,e=e.startTime;let r=0;return e<t?r=1:t<e&&(r=-1),r});var d=o,j=aR,f=c,p=s.barHeight,g=p+s.barGap,y=s.topPadding,m=s.leftPadding,Y=(Xd().domain([0,h.length]).range(["#00B9FA","#F95002"]).interpolate(Li),g),b=y,_=m,v=f,x=d,z=r.db.getExcludes(),U=r.db.getIncludes(),k=x.reduce((t,{startTime:e})=>t?Math.min(t,e):e,0),w=x.reduce((t,{endTime:e})=>t?Math.max(t,e):e,0),W=r.db.getDateFormat();if(k&&w){var E=[];let t=null,e=G(k);for(;e.valueOf()<=w;)r.db.isInvalidDate(e,W,z,U)?t?t.end=e.clone():t={start:e.clone(),end:e.clone()}:t&&(E.push(t),t=null),e.add(1,"d");l.append("g").selectAll("rect").data(E).enter().append("rect").attr("id",function(t){return"exclude-"+t.start.format("YYYY-MM-DD")}).attr("x",function(t){return u(t.start)+_}).attr("y",s.gridLineStartPadding).attr("width",function(t){var e=t.end.clone().add(1,"day");return u(e)-u(t.start)}).attr("height",v-b-s.gridLineStartPadding).attr("transform-origin",function(t,e){return(u(t.start)+_+.5*(u(t.end)-u(t.start))).toString()+"px "+(e*Y+.5*v).toString()+"px"}).attr("class","exclude-range")}var x=m,k=y,b=f,T=Me(u).tickSize(-b+k+s.gridLineStartPadding).tickFormat(O2(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d"));l.append("g").attr("class","grid").attr("transform","translate("+x+", "+(b-50)+")").call(T).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),(r.db.topAxisEnabled()||s.topAxis)&&(T=Ae(u).tickSize(-b+k+s.gridLineStartPadding).tickFormat(O2(r.db.getAxisFormat()||s.axisFormat||"%Y-%m-%d")),l.append("g").attr("class","grid").attr("transform","translate("+x+", "+k+")").call(T).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10));{b=d;var C=g,S=y,A=m,M=p,N=j;l.append("g").selectAll("rect").data(b).enter().append("rect").attr("x",0).attr("y",function(t,e){return t.order*C+S-2}).attr("width",function(){return N-s.rightPadding/2}).attr("height",C).attr("class",function(e){for(let t=0;t<h.length;t++)if(e.type===h[t])return"section section"+t%s.numberSectionStyles;return"section section0"});const L=l.append("g").selectAll("rect").data(b).enter(),B=r.db.getLinks();if(L.append("rect").attr("id",function(t){return t.id}).attr("rx",3).attr("ry",3).attr("x",function(t){return t.milestone?u(t.startTime)+A+.5*(u(t.endTime)-u(t.startTime))-.5*M:u(t.startTime)+A}).attr("y",function(t,e){return t.order*C+S}).attr("width",function(t){return t.milestone?M:u(t.renderEndTime||t.endTime)-u(t.startTime)}).attr("height",M).attr("transform-origin",function(t,e){return e=t.order,(u(t.startTime)+A+.5*(u(t.endTime)-u(t.startTime))).toString()+"px "+(e*C+S+.5*M).toString()+"px"}).attr("class",function(e){let t="",r=(0<e.classes.length&&(t=e.classes.join(" ")),0);for(let t=0;t<h.length;t++)e.type===h[t]&&(r=t%s.numberSectionStyles);let n="";return e.active?e.crit?n+=" activeCrit":n=" active":e.done?n=e.crit?" doneCrit":" done":e.crit&&(n+=" crit"),0===n.length&&(n=" task"),e.milestone&&(n=" milestone "+n),"task"+(n=(n+=r)+(" "+t))}),L.append("text").attr("id",function(t){return t.id+"-text"}).text(function(t){return t.task}).attr("font-size",s.fontSize).attr("x",function(t){let e=u(t.startTime),r=u(t.renderEndTime||t.endTime);t.milestone&&(e+=.5*(u(t.endTime)-u(t.startTime))-.5*M),t.milestone&&(r=e+M);t=this.getBBox().width;return t>r-e?r+t+1.5*s.leftPadding>N?e+A-5:r+A+5:(r-e)/2+e+A}).attr("y",function(t,e){return t.order*C+s.barHeight/2+(s.fontSize/2-2)+S}).attr("text-height",M).attr("class",function(e){var t=u(e.startTime);let r=u(e.endTime);e.milestone&&(r=t+M);var n=this.getBBox().width;let i="",a=(0<e.classes.length&&(i=e.classes.join(" ")),0);for(let t=0;t<h.length;t++)e.type===h[t]&&(a=t%s.numberSectionStyles);let o="";return e.active&&(o=e.crit?"activeCritText"+a:"activeText"+a),e.done?o=e.crit?o+" doneCritText"+a:o+" doneText"+a:e.crit&&(o=o+" critText"+a),e.milestone&&(o+=" milestoneText"),n>r-t?r+n+1.5*s.leftPadding>N?i+" taskTextOutsideLeft taskTextOutside"+a+" "+o:i+" taskTextOutsideRight taskTextOutside"+a+" "+o+" width-"+n:i+" taskText taskText"+a+" "+o+" width-"+n}),"sandbox"===V().securityLevel){const O=H("#i"+t).nodes()[0].contentDocument;L.filter(function(t){return typeof B[t.id]<"u"}).each(function(t){var e=O.querySelector("#"+t.id),r=O.querySelector("#"+t.id+"-text"),n=e.parentNode,i=O.createElement("a");i.setAttribute("xlink:href",B[t.id]),i.setAttribute("target","_top"),n.appendChild(i),i.appendChild(e),i.appendChild(r)})}}{var D=g,q=y;const I=[];let n=0;for(let t=0;t<h.length;t++)I[t]=[h[t],function(t,e){return function(t){let e=t.length;var r={};for(;e;)r[t[--e]]=(r[t[e]]||0)+1;return r}(e)[t]||0}(h[t],$)];l.append("g").selectAll("text").data(I).enter().append(function(t){var e=t[0].split(H4.lineBreakRegex),t=-(e.length-1)/2,r=i.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("dy",t+"em");for(let t=0;t<e.length;t++){var n=i.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttribute("alignment-baseline","central"),n.setAttribute("x","10"),0<t&&n.setAttribute("dy","1em"),n.textContent=e[t],r.appendChild(n)}return r}).attr("x",10).attr("y",function(e,r){if(!(0<r))return e[1]*D/2+q;{let t=0;if(t<r)return n+=I[r-1][1],e[1]*D/2+n*D+q}}).attr("font-size",s.sectionFontSize).attr("font-size",s.sectionFontSize).attr("class",function(e){for(let t=0;t<h.length;t++)if(e[0]===h[t])return"sectionTitle sectionTitle"+t%s.numberSectionStyles;return"sectionTitle"})}x=m,k=f,T=r.db.getTodayMarker();"off"!==T&&(d=l.append("g").attr("class","today"),p=new Date,(d=d.append("line")).attr("x1",u(p)+x).attr("x2",u(p)+x).attr("y1",s.titleTopMargin).attr("y2",k-s.titleTopMargin).attr("class","today"),""!==T)&&d.attr("style",T.replace(/,/g,";")),f6(l,c,aR,s.useMaxWidth),l.append("text").text(r.db.getDiagramTitle()).attr("x",aR/2).attr("y",s.titleTopMargin).attr("class","titleText"),vv(r.db,l,t)}};(h2={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(t,e,r,n,i,a,o){switch(a.length,i){case 1:return n;case 4:break;case 6:n.setInfo(!0)}},table:[{3:1,4:[1,2]},{1:[3]},cR(h2=[6,9,10],[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},cR(h2,[2,3]),cR(h2,[2,4]),cR(h2,[2,5]),cR(h2,[2,6])],defaultActions:{4:[2,1]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};var sR=new((lR.prototype=h2).Parser=lR);function cR(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function lR(){this.yy={}}sR.parser=sR;var uR="",hR=!1;const dR={setMessage:t=>{C.debug("Setting message to: "+t),uR=t},getMessage:()=>uR,setInfo:t=>{hR=t},getInfo:()=>hR,clear:X6},fR={draw:(e,r,n,t)=>{try{C.debug(`Rendering info diagram
`+e);var i=V().securityLevel;let t;"sandbox"===i&&(t=H("#i"+r));var a=H("sandbox"===i?t.nodes()[0].contentDocument.body:"body").select("#"+r);a.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+n),a.attr("height",100),a.attr("width",400)}catch(t){C.error("Error while rendering info diagram"),C.error(t.message)}}},pR=t=>null!==t.match(/^\s*info/);v2=[1,6,11,13,15,17,19,20,26,27,28,29],k2=[26,27,28],ng=[2,8],rg=[1,18],Ma=[1,19],Co=[1,20],Ps=[1,21],Fs=[1,22],qs=[1,23],F=[1,28],Ws=[6,26,27,28,29],($s={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 4:n.setShowData(!0);break;case 7:this.$=a[s-1];break;case 9:n.addSection(a[s-1],n.cleanupValue(a[s]));break;case 10:this.$=a[s].trim(),n.setDiagramTitle(this.$);break;case 11:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 12:case 13:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 14:n.addSection(a[s].substr(8)),this.$=a[s].substr(8);break;case 21:n.parseDirective("%%{","open_directive");break;case 22:n.parseDirective(a[s],"type_directive");break;case 23:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 24:n.parseDirective("}%%","close_directive","pie")}},table:[{3:1,4:2,5:3,6:$s=[1,4],21:8,26:js=[1,5],27:zs=[1,6],28:Ys=[1,7],29:Vs=[1,9]},{1:[3]},{3:10,4:2,5:3,6:$s,21:8,26:js,27:zs,28:Ys,29:Vs},{3:11,4:2,5:3,6:$s,21:8,26:js,27:zs,28:Ys,29:Vs},yR(Hs=[1,11,13,15,17,19,20,26,27,28,29],cc=[2,5],{7:12,8:[1,13]}),yR(v2,[2,18]),yR(v2,[2,19]),yR(v2,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},yR(k2,ng,{21:8,9:16,10:17,5:24,1:[2,3],11:rg,13:Ma,15:Co,17:Ps,19:Fs,20:qs,29:Vs}),yR(Hs,cc,{7:25}),{23:26,24:[1,27],32:F},yR([24,32],[2,22]),yR(Hs,[2,6]),{4:29,26:js,27:zs,28:Ys},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},yR(k2,[2,13]),yR(k2,[2,14]),yR(k2,[2,15]),yR(k2,ng,{21:8,9:16,10:17,5:24,1:[2,4],11:rg,13:Ma,15:Co,17:Ps,19:Fs,20:qs,29:Vs}),yR(Ws,[2,16]),{25:34,31:[1,35]},yR(Ws,[2,24]),yR(Hs,[2,7]),yR(k2,[2,9]),yR(k2,[2,10]),yR(k2,[2,11]),yR(k2,[2,12]),{23:36,32:F},{32:[2,23]},yR(Ws,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:case 6:break;case 7:return 26;case 8:case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};var gR=new((mR.prototype=$s).Parser=mR);function yR(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function mR(){this.yy={}}gR.parser=gR;const bR=t=>null!==t.match(/^\s*pie/);let _R={},vR=!1;const xR={parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().pie,addSection:function(t,e){t=H4.sanitizeText(t,V()),"u"<typeof _R[t]&&(_R[t]=e,C.debug("Added new section :",t))},getSections:()=>_R,cleanupValue:function(t){return":"===t.substring(0,1)&&(t=t.substring(1).trim()),Number(t.trim())},clear:function(){_R={},vR=!1,X6()},setAccTitle:Z6,getAccTitle:K6,setDiagramTitle:tv,getDiagramTitle:ev,setShowData:function(t){vR=t},getShowData:function(){return vR},getAccDescription:J6,setAccDescription:Q6};V();let kR,wR;const ER={draw:(e,r,t,n)=>{try{kR=V(),C.debug(`Rendering info diagram
`+e);var i=V().securityLevel;let t;"sandbox"===i&&(t=H("#i"+r));var a=H("sandbox"===i?t.nodes()[0].contentDocument.body:"body"),o="sandbox"===i?t.nodes()[0].contentDocument:document,s=(n.db.clear(),n.parser.parse(e),C.debug("Parsed info diagram"),o.getElementById(r)),c=("u"<typeof(wR=s.parentElement.offsetWidth)&&(wR=1200),typeof kR.useWidth<"u"&&(wR=kR.useWidth),typeof kR.pie.useWidth<"u"&&(wR=kR.pie.useWidth),a.select("#"+r)),l=(f6(c,450,wR,kR.pie.useMaxWidth),vv(n.db,c,r),s.setAttribute("viewBox","0 0 "+wR+" 450"),Math.min(wR,450)/2-40),u=c.append("g").attr("transform","translate("+wR/2+",225)"),h=n.db.getSections(),d=0,f=(Object.keys(h).forEach(function(t){d+=h[t]}),kR.themeVariables),p=[f.pie1,f.pie2,f.pie3,f.pie4,f.pie5,f.pie6,f.pie7,f.pie8,f.pie9,f.pie10,f.pie11,f.pie12],g=Rd().range(p),y=qy().value(function(t){return t[1]})(Object.entries(h)),m=Oy().innerRadius(0).outerRadius(l),b=(u.selectAll("mySlices").data(y).enter().append("path").attr("d",m).attr("fill",function(t){return g(t.data[0])}).attr("class","pieCircle"),u.selectAll("mySlices").data(y).enter().append("text").text(function(t){return(t.data[1]/d*100).toFixed(0)+"%"}).attr("transform",function(t){return"translate("+m.centroid(t)+")"}).style("text-anchor","middle").attr("class","slice"),u.append("text").text(n.db.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText"),u.selectAll(".legend").data(g.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate(216,"+(22*e-22*g.domain().length/2)+")"}));b.append("rect").attr("width",18).attr("height",18).style("fill",g).style("stroke",g),b.data(y).append("text").attr("x",22).attr("y",14).text(function(t){return n.db.getShowData()||kR.showData||kR.pie.showData?t.data[0]+" ["+t.data[1]+"]":t.data[0]})}catch(t){C.error("Error while rendering info diagram"),C.error(t)}}};Xs=[1,22],Gs=[2,13],Us=[1,26],Wf=[1,27],Pf=[1,28],Yf=[1,29],Ig=[1,30],Ng=[1,31],bg=[1,24],Gf=[1,32],Lg=[1,33],_g=[1,36],l2=[71,72],Cg=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],g2=[1,56],Og=[1,57],Hf=[1,58],ny=[1,59],Mg=[1,60],e2=[1,61],xg=[1,62],kg=[62,63],wg=[1,74],Hm=[1,70],b=[1,71],Hg=[1,72],qf=[1,73],Zm=[1,75],Tg=[1,79],Sg=[1,80],Ag=[1,77],Rg=[1,78],g=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],(Fg={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 6:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 7:case 8:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 9:n.parseDirective("%%{","open_directive");break;case 10:n.parseDirective(a[s],"type_directive");break;case 11:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 12:n.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:n.addRequirement(a[s-3],a[s-4]);break;case 20:n.setNewReqId(a[s-2]);break;case 21:n.setNewReqText(a[s-2]);break;case 22:n.setNewReqRisk(a[s-2]);break;case 23:n.setNewReqVerifyMethod(a[s-2]);break;case 26:this.$=n.RequirementType.REQUIREMENT;break;case 27:this.$=n.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=n.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=n.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=n.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=n.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=n.RiskLevel.LOW_RISK;break;case 33:this.$=n.RiskLevel.MED_RISK;break;case 34:this.$=n.RiskLevel.HIGH_RISK;break;case 35:this.$=n.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=n.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=n.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=n.VerifyType.VERIFY_TEST;break;case 39:n.addElement(a[s-3]);break;case 40:n.setNewElementType(a[s-2]);break;case 41:n.setNewElementDocRef(a[s-2]);break;case 44:n.addRelationship(a[s-2],a[s],a[s-4]);break;case 45:n.addRelationship(a[s-2],a[s-4],a[s]);break;case 46:this.$=n.Relationships.CONTAINS;break;case 47:this.$=n.Relationships.COPIES;break;case 48:this.$=n.Relationships.DERIVES;break;case 49:this.$=n.Relationships.SATISFIES;break;case 50:this.$=n.Relationships.VERIFIES;break;case 51:this.$=n.Relationships.REFINES;break;case 52:this.$=n.Relationships.TRACES}},table:[{3:1,4:2,6:Fg=[1,3],9:4,14:y=[1,5],16:Pg=[1,6],18:r=[1,7],19:e=[1,8]},{1:[3]},{3:10,4:2,5:[1,9],6:Fg,9:4,14:y,16:Pg,18:r,19:e},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},CR(n=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],[2,8]),{20:[2,9]},{3:16,4:2,6:Fg,9:4,14:y,16:Pg,18:r,19:e},{1:[2,2]},{4:21,5:Xs,7:17,8:Gs,9:4,14:y,16:Pg,18:r,19:e,23:18,24:19,25:20,26:23,32:25,40:Us,41:Wf,42:Pf,43:Yf,44:Ig,45:Ng,53:bg,71:Gf,72:Lg},{11:34,12:[1,35],22:_g},CR([12,22],[2,10]),CR(n,[2,6]),CR(n,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:Xs,7:38,8:Gs,9:4,14:y,16:Pg,18:r,19:e,23:18,24:19,25:20,26:23,32:25,40:Us,41:Wf,42:Pf,43:Yf,44:Ig,45:Ng,53:bg,71:Gf,72:Lg},{4:21,5:Xs,7:39,8:Gs,9:4,14:y,16:Pg,18:r,19:e,23:18,24:19,25:20,26:23,32:25,40:Us,41:Wf,42:Pf,43:Yf,44:Ig,45:Ng,53:bg,71:Gf,72:Lg},{4:21,5:Xs,7:40,8:Gs,9:4,14:y,16:Pg,18:r,19:e,23:18,24:19,25:20,26:23,32:25,40:Us,41:Wf,42:Pf,43:Yf,44:Ig,45:Ng,53:bg,71:Gf,72:Lg},{4:21,5:Xs,7:41,8:Gs,9:4,14:y,16:Pg,18:r,19:e,23:18,24:19,25:20,26:23,32:25,40:Us,41:Wf,42:Pf,43:Yf,44:Ig,45:Ng,53:bg,71:Gf,72:Lg},{4:21,5:Xs,7:42,8:Gs,9:4,14:y,16:Pg,18:r,19:e,23:18,24:19,25:20,26:23,32:25,40:Us,41:Wf,42:Pf,43:Yf,44:Ig,45:Ng,53:bg,71:Gf,72:Lg},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},CR(l2,[2,26]),CR(l2,[2,27]),CR(l2,[2,28]),CR(l2,[2,29]),CR(l2,[2,30]),CR(l2,[2,31]),CR(Cg,[2,55]),CR(Cg,[2,56]),CR(n,[2,4]),{13:51,21:[1,52]},CR(n,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:g2,65:Og,66:Hf,67:ny,68:Mg,69:e2,70:xg},{61:63,64:g2,65:Og,66:Hf,67:ny,68:Mg,69:e2,70:xg},{11:64,22:_g},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},CR(kg,[2,46]),CR(kg,[2,47]),CR(kg,[2,48]),CR(kg,[2,49]),CR(kg,[2,50]),CR(kg,[2,51]),CR(kg,[2,52]),{63:[1,68]},CR(n,[2,5]),{5:wg,29:69,30:Hm,33:b,35:Hg,37:qf,39:Zm},{5:Tg,39:Sg,55:76,56:Ag,58:Rg},{32:81,71:Gf,72:Lg},{32:82,71:Gf,72:Lg},CR(g,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:wg,29:87,30:Hm,33:b,35:Hg,37:qf,39:Zm},CR(g,[2,25]),CR(g,[2,39]),{31:[1,88]},{31:[1,89]},{5:Tg,39:Sg,55:90,56:Ag,58:Rg},CR(g,[2,43]),CR(g,[2,44]),CR(g,[2,45]),{32:91,71:Gf,72:Lg},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},CR(g,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},CR(g,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:wg,29:116,30:Hm,33:b,35:Hg,37:qf,39:Zm},{5:wg,29:117,30:Hm,33:b,35:Hg,37:qf,39:Zm},{5:wg,29:118,30:Hm,33:b,35:Hg,37:qf,39:Zm},{5:wg,29:119,30:Hm,33:b,35:Hg,37:qf,39:Zm},{5:Tg,39:Sg,55:120,56:Ag,58:Rg},{5:Tg,39:Sg,55:121,56:Ag,58:Rg},CR(g,[2,20]),CR(g,[2,21]),CR(g,[2,22]),CR(g,[2,23]),CR(g,[2,40]),CR(g,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:case 15:case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return e.yytext=e.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};var TR=new((SR.prototype=Fg).Parser=SR);function CR(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function SR(){this.yy={}}TR.parser=TR;const AR=t=>null!==t.match(/^\s*requirement(Diagram)?/);let MR=[],NR={},DR={},LR={},BR={};const OR={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().req,addRequirement:(t,e)=>("u"<typeof DR[t]&&(DR[t]={name:t,type:e,id:NR.id,text:NR.text,risk:NR.risk,verifyMethod:NR.verifyMethod}),NR={},DR[t]),getRequirements:()=>DR,setNewReqId:t=>{typeof NR<"u"&&(NR.id=t)},setNewReqText:t=>{typeof NR<"u"&&(NR.text=t)},setNewReqRisk:t=>{typeof NR<"u"&&(NR.risk=t)},setNewReqVerifyMethod:t=>{typeof NR<"u"&&(NR.verifyMethod=t)},setAccTitle:Z6,getAccTitle:K6,setAccDescription:Q6,getAccDescription:J6,addElement:t=>("u"<typeof BR[t]&&(BR[t]={name:t,type:LR.type,docRef:LR.docRef},C.info("Added new requirement: ",t)),LR={},BR[t]),getElements:()=>BR,setNewElementType:t=>{typeof LR<"u"&&(LR.type=t)},setNewElementDocRef:t=>{typeof LR<"u"&&(LR.docRef=t)},addRelationship:(t,e,r)=>{MR.push({type:t,src:e,dst:r})},getRelationships:()=>MR,clear:()=>{MR=[],NR={},DR={},LR={},BR={},X6()}},IR={CONTAINS:"contains",ARROW:"arrow"},RR={ReqMarkers:IR,insertLineEndings:(t,e)=>{var r=t.append("defs").append("marker").attr("id",IR.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");r.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),r.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),r.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",IR.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,`+e.line_height).attr("stroke-width",1)}};let FR={},PR=0;function $R(t,e,r,n,i){var r=r.edge(UR(e.src),UR(e.dst)),a=Yy().x(function(t){return t.x}).y(function(t){return t.y}),n=t.insert("path","#"+n).attr("class","er relationshipLine").attr("d",a(r.points)).attr("fill","none");e.type==i.db.Relationships.CONTAINS?n.attr("marker-start","url("+H4.getUrl(FR.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(n.attr("stroke-dasharray","10,7"),n.attr("marker-end","url("+H4.getUrl(FR.arrowMarkerAbsolute)+"#"+RR.ReqMarkers.ARROW+"_line_ending)")),a=t,r=n,FR,i=`<<${e.type}>>`,t=r.node().getTotalLength(),r=r.node().getPointAtLength(.5*t),t="rel"+PR,PR++,i=a.append("text").attr("class","req relationshipLabel").attr("id",t).attr("x",r.x).attr("y",r.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(i).node().getBBox(),a.insert("rect","#"+t).attr("class","req reqLabelBox").attr("x",r.x-i.width/2).attr("y",r.y-i.height/2).attr("width",i.width).attr("height",i.height).attr("fill","white").attr("fill-opacity","85%")}const jR=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",FR.rect_min_width+"px").attr("height",FR.rect_min_height+"px"),YR=(t,e,r)=>{let n=FR.rect_min_width/2,i=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",n).attr("y",FR.rect_padding).attr("dominant-baseline","hanging"),a=0;r.forEach(t=>{(0==a?i.append("tspan").attr("text-anchor","middle").attr("x",FR.rect_min_width/2).attr("dy",0):i.append("tspan").attr("text-anchor","middle").attr("x",FR.rect_min_width/2).attr("dy",.75*FR.line_height)).text(t),a++});e=1.5*FR.rect_padding+a*FR.line_height*.75;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",FR.rect_min_width).attr("y1",e).attr("y2",e),{titleNode:i,y:e}},zR=(t,e,r,n)=>{let i=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",FR.rect_padding).attr("y",n).attr("dominant-baseline","hanging"),a=0;let o=[];return r.forEach(t=>{let e=t.length;for(;30<e&&a<3;){var r=t.substring(0,30);t=t.substring(30,t.length),e=t.length,o[o.length]=r,a++}var n;3==a?(n=o[o.length-1],o[o.length-1]=n.substring(0,n.length-4)+"..."):o[o.length]=t,a=0}),o.forEach(t=>{i.append("tspan").attr("x",FR.rect_padding).attr("dy",FR.line_height).text(t)}),i},UR=t=>t.replace(/\s/g,"").replace(/\./g,"_"),WR={draw:(t,e,r,n)=>{FR=V().requirement,n.db.clear(),n.parser.parse(t);t=FR.securityLevel;let i;"sandbox"===t&&(i=H("#i"+e));const a=H("sandbox"===t?i.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`),o=(RR.insertLineEndings(a,FR),new RN.Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:FR.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}}));var s,c,l,u,h,d,f,p,g,t=n.db.getRequirements(),y=n.db.getElements(),m=n.db.getRelationships(),t=(f=t,p=o,g=a,Object.keys(f).forEach(t=>{var e=f[t],r=(t=UR(t),C.info("Added new requirement: ",t),g.append("g").attr("id",t)),n="req-"+t,n=jR(r,n),i=YR(r,t+"_title",[`<<${e.type}>>`,""+e.name]),r=(zR(r,t+"_body",["Id: "+e.id,"Text: "+e.text,"Risk: "+e.risk,"Verification: "+e.verifyMethod],i.y),n.node().getBBox());p.setNode(t,{width:r.width,height:r.height,shape:"rect",id:t})}),u=y,h=o,d=a,Object.keys(u).forEach(t=>{var e=u[t],r=UR(t),n=d.append("g").attr("id",r),i="element-"+r,a=jR(n,i),t=YR(n,i+"_title",["<<Element>>",""+t]),n=(zR(n,i+"_body",["Type: "+(e.type||"Not Specified"),"Doc Ref: "+(e.docRef||"None")],t.y),a.node().getBBox());h.setNode(r,{width:n.width,height:n.height,shape:"rect",id:r})}),l=o,m.forEach(function(t){var e=UR(t.src),r=UR(t.dst);l.setEdge(e,r,{relationship:t})}),JD.layout(o),s=a,(c=o).nodes().forEach(function(t){typeof t<"u"&&typeof c.node(t)<"u"&&(s.select("#"+t),s.select("#"+t).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y-c.node(t).height/2)+" )"))}),m.forEach(function(t){$R(a,t,o,e,n)}),FR.rect_padding),y=a.node().getBBox(),m=y.width+2*t,b=y.height+2*t;f6(a,b,m,FR.useMaxWidth),a.attr("viewBox",`${y.x-t} ${y.y-t} ${m} `+b),vv(n.db,a,e)}};m=[1,15],Yg=[1,17],v=[1,18],_=[1,19],k=[1,21],Wg=[1,22],$g=[1,23],jg=[1,29],zg=[1,30],qg=[1,31],a=[1,32],i=[1,33],x=[1,34],o=[1,35],l=[1,36],Ug=[1,37],Vg=[1,38],s=[1,39],h=[1,40],u=[1,43],f=[1,44],d=[1,45],p=[1,46],Vr=[1,47],Hr=[1,48],Gr=[1,51],Ba=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],oc=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],sc=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],yc=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],za=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],La=[67,68,69],Ua=[1,121],rc=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],(qa={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 4:return n.apply(a[s]),a[s];case 5:this.$=[];break;case 6:a[s-1].push(a[s]),this.$=a[s-1];break;case 7:case 8:this.$=a[s];break;case 9:this.$=[];break;case 12:a[s-3].type="addParticipant",a[s-3].description=n.parseMessage(a[s-1]),this.$=a[s-3];break;case 13:a[s-1].type="addParticipant",this.$=a[s-1];break;case 14:a[s-3].type="addActor",a[s-3].description=n.parseMessage(a[s-1]),this.$=a[s-3];break;case 15:a[s-1].type="addActor",this.$=a[s-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(a[s-2]),sequenceIndexStep:Number(a[s-1]),sequenceVisible:!0,signalType:n.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(a[s-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:n.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:n.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:n.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:n.LINETYPE.ACTIVE_START,actor:a[s-1]};break;case 22:this.$={type:"activeEnd",signalType:n.LINETYPE.ACTIVE_END,actor:a[s-1]};break;case 28:n.setDiagramTitle(a[s].substring(6)),this.$=a[s].substring(6);break;case 29:n.setDiagramTitle(a[s].substring(7)),this.$=a[s].substring(7);break;case 30:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 31:case 32:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 33:a[s-1].unshift({type:"loopStart",loopText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.LOOP_START}),a[s-1].push({type:"loopEnd",loopText:a[s-2],signalType:n.LINETYPE.LOOP_END}),this.$=a[s-1];break;case 34:a[s-1].unshift({type:"rectStart",color:n.parseMessage(a[s-2]),signalType:n.LINETYPE.RECT_START}),a[s-1].push({type:"rectEnd",color:n.parseMessage(a[s-2]),signalType:n.LINETYPE.RECT_END}),this.$=a[s-1];break;case 35:a[s-1].unshift({type:"optStart",optText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.OPT_START}),a[s-1].push({type:"optEnd",optText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.OPT_END}),this.$=a[s-1];break;case 36:a[s-1].unshift({type:"altStart",altText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.ALT_START}),a[s-1].push({type:"altEnd",signalType:n.LINETYPE.ALT_END}),this.$=a[s-1];break;case 37:a[s-1].unshift({type:"parStart",parText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.PAR_START}),a[s-1].push({type:"parEnd",signalType:n.LINETYPE.PAR_END}),this.$=a[s-1];break;case 38:a[s-1].unshift({type:"criticalStart",criticalText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.CRITICAL_START}),a[s-1].push({type:"criticalEnd",signalType:n.LINETYPE.CRITICAL_END}),this.$=a[s-1];break;case 39:a[s-1].unshift({type:"breakStart",breakText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.BREAK_START}),a[s-1].push({type:"breakEnd",optText:n.parseMessage(a[s-2]),signalType:n.LINETYPE.BREAK_END}),this.$=a[s-1];break;case 42:this.$=a[s-3].concat([{type:"option",optionText:n.parseMessage(a[s-1]),signalType:n.LINETYPE.CRITICAL_OPTION},a[s]]);break;case 44:this.$=a[s-3].concat([{type:"and",parText:n.parseMessage(a[s-1]),signalType:n.LINETYPE.PAR_AND},a[s]]);break;case 46:this.$=a[s-3].concat([{type:"else",altText:n.parseMessage(a[s-1]),signalType:n.LINETYPE.ALT_ELSE},a[s]]);break;case 47:this.$=[a[s-1],{type:"addNote",placement:a[s-2],actor:a[s-1].actor,text:a[s]}];break;case 48:a[s-2]=[].concat(a[s-1],a[s-1]).slice(0,2),a[s-2][0]=a[s-2][0].actor,a[s-2][1]=a[s-2][1].actor,this.$=[a[s-1],{type:"addNote",placement:n.PLACEMENT.OVER,actor:a[s-2].slice(0,2),text:a[s]}];break;case 49:this.$=[a[s-1],{type:"addLinks",actor:a[s-1].actor,text:a[s]}];break;case 50:this.$=[a[s-1],{type:"addALink",actor:a[s-1].actor,text:a[s]}];break;case 51:this.$=[a[s-1],{type:"addProperties",actor:a[s-1].actor,text:a[s]}];break;case 52:this.$=[a[s-1],{type:"addDetails",actor:a[s-1].actor,text:a[s]}];break;case 55:this.$=[a[s-2],a[s]];break;case 56:this.$=a[s];break;case 57:this.$=n.PLACEMENT.LEFTOF;break;case 58:this.$=n.PLACEMENT.RIGHTOF;break;case 59:this.$=[a[s-4],a[s-1],{type:"addMessage",from:a[s-4].actor,to:a[s-1].actor,signalType:a[s-3],msg:a[s]},{type:"activeStart",signalType:n.LINETYPE.ACTIVE_START,actor:a[s-1]}];break;case 60:this.$=[a[s-4],a[s-1],{type:"addMessage",from:a[s-4].actor,to:a[s-1].actor,signalType:a[s-3],msg:a[s]},{type:"activeEnd",signalType:n.LINETYPE.ACTIVE_END,actor:a[s-4]}];break;case 61:this.$=[a[s-3],a[s-1],{type:"addMessage",from:a[s-3].actor,to:a[s-1].actor,signalType:a[s-2],msg:a[s]}];break;case 62:this.$={type:"addParticipant",actor:a[s]};break;case 63:this.$=n.LINETYPE.SOLID_OPEN;break;case 64:this.$=n.LINETYPE.DOTTED_OPEN;break;case 65:this.$=n.LINETYPE.SOLID;break;case 66:this.$=n.LINETYPE.DOTTED;break;case 67:this.$=n.LINETYPE.SOLID_CROSS;break;case 68:this.$=n.LINETYPE.DOTTED_CROSS;break;case 69:this.$=n.LINETYPE.SOLID_POINT;break;case 70:this.$=n.LINETYPE.DOTTED_POINT;break;case 71:this.$=n.parseMessage(a[s].trim().substring(1));break;case 72:n.parseDirective("%%{","open_directive");break;case 73:n.parseDirective(a[s],"type_directive");break;case 74:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 75:n.parseDirective("}%%","close_directive","sequence")}},table:[{3:1,4:qa=[1,2],5:Ha=[1,3],6:4,7:Va=[1,5],11:6,79:t=[1,7]},{1:[3]},{3:8,4:qa,5:Ha,6:4,7:Va,11:6,79:t},{3:9,4:qa,5:Ha,6:4,7:Va,11:6,79:t},{3:10,4:qa,5:Ha,6:4,7:Va,11:6,79:t},HR([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],nc=[2,5],{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,41:o,42:l,43:Ug,45:Vg,47:s,49:h,53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{13:49,14:[1,50],82:Gr},HR([14,82],[2,73]),HR(Ba,[2,6]),{6:41,10:52,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,41:o,42:l,43:Ug,45:Vg,47:s,49:h,53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},HR(Ba,[2,8]),HR(Ba,[2,9]),{17:53,69:Hr},{17:54,69:Hr},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:Hr},{17:60,69:Hr},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},HR(Ba,[2,28]),HR(Ba,[2,29]),{35:[1,66]},{37:[1,67]},HR(Ba,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},HR(Ba,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:Hr},{17:89,69:Hr},{17:90,69:Hr},{17:91,69:Hr},HR([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},HR(Ba,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},HR(Ba,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},HR(Ba,[2,20]),{5:[1,102]},{5:[1,103]},HR(Ba,[2,23]),HR(Ba,[2,24]),HR(Ba,[2,25]),HR(Ba,[2,26]),HR(Ba,[2,27]),HR(Ba,[2,30]),HR(Ba,[2,31]),HR(oc,nc,{8:104}),HR(oc,nc,{8:105}),HR(oc,nc,{8:106}),HR(sc,nc,{44:107,8:108}),HR(yc,nc,{46:109,8:110}),HR(za,nc,{48:111,8:112}),HR(oc,nc,{8:113}),{17:116,67:[1,114],68:[1,115],69:Hr},HR(La,[2,63]),HR(La,[2,64]),HR(La,[2,65]),HR(La,[2,66]),HR(La,[2,67]),HR(La,[2,68]),HR(La,[2,69]),HR(La,[2,70]),{17:117,69:Hr},{17:119,57:118,69:Hr},{69:[2,57]},{69:[2,58]},{55:120,78:Ua},{55:122,78:Ua},{55:123,78:Ua},{55:124,78:Ua},HR(rc,[2,10]),{13:125,82:Gr},{82:[2,74]},{19:[1,126]},HR(Ba,[2,13]),{19:[1,127]},HR(Ba,[2,15]),{5:[1,128]},HR(Ba,[2,18]),HR(Ba,[2,19]),HR(Ba,[2,21]),HR(Ba,[2,22]),{4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,40:[1,129],41:o,42:l,43:Ug,45:Vg,47:s,49:h,53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,40:[1,130],41:o,42:l,43:Ug,45:Vg,47:s,49:h,53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,40:[1,131],41:o,42:l,43:Ug,45:Vg,47:s,49:h,53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{40:[1,132]},{4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,40:[2,45],41:o,42:l,43:Ug,45:Vg,47:s,49:h,52:[1,133],53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{40:[1,134]},{4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,40:[2,43],41:o,42:l,43:Ug,45:Vg,47:s,49:h,51:[1,135],53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{40:[1,136]},{4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,40:[2,41],41:o,42:l,43:Ug,45:Vg,47:s,49:h,50:[1,137],53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{4:m,5:Yg,6:41,9:14,10:16,11:6,16:v,17:42,20:_,21:20,22:k,25:Wg,26:$g,27:24,28:25,29:26,30:27,31:28,32:jg,33:zg,34:qg,36:a,38:i,39:x,40:[1,138],41:o,42:l,43:Ug,45:Vg,47:s,49:h,53:u,58:f,59:d,60:p,61:Vr,69:Hr,79:t},{17:139,69:Hr},{17:140,69:Hr},{55:141,78:Ua},{55:142,78:Ua},{55:143,78:Ua},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},HR(Ba,[2,17]),HR(Ba,[2,33]),HR(Ba,[2,34]),HR(Ba,[2,35]),HR(Ba,[2,36]),{19:[1,148]},HR(Ba,[2,37]),{19:[1,149]},HR(Ba,[2,38]),{19:[1,150]},HR(Ba,[2,39]),{55:151,78:Ua},{55:152,78:Ua},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:Hr},HR(rc,[2,11]),HR(Ba,[2,12]),HR(Ba,[2,14]),HR(sc,nc,{8:108,44:154}),HR(yc,nc,{8:110,46:155}),HR(za,nc,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:case 7:case 8:case 9:case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return e.yytext=e.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return e.yytext=e.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};var qR=new((VR.prototype=qa).Parser=VR);function HR(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function VR(){this.yy={}}qR.parser=qR;const GR=t=>null!==t.match(/^\s*sequenceDiagram/);let XR,ZR={},KR=[],QR=!1,JR;function tF(t,e,r,n){var i=ZR[t];i&&e===i.name&&null==r||(null!=r&&null!=r.text||(r={text:e,wrap:null,type:n}),null!=n&&null!=r.text||(r={text:e,wrap:null,type:n}),ZR[t]={name:e,description:r.text,wrap:void 0===r.wrap&&aF()||!!r.wrap,prevActor:XR,links:{},properties:{},actorCnt:null,rectData:null,type:n||"participant"},XR&&ZR[XR]&&(ZR[XR].nextActor=t),XR=t)}function eF(t,e,r={text:void 0,wrap:void 0},n){var i;if(n===oF.ACTIVE_END&&(t=>{let e,r=0;for(e=0;e<KR.length;e++)KR[e].type===oF.ACTIVE_START&&KR[e].from.actor===t&&r++,KR[e].type===oF.ACTIVE_END&&KR[e].from.actor===t&&r--;return r})(t.actor)<1)throw(i=new Error("Trying to inactivate an inactive participant ("+t.actor+")")).hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},i;return KR.push({from:t,to:e,message:r.text,wrap:void 0===r.wrap&&aF()||!!r.wrap,type:n}),!0}function rF(t,e,r){r.text,void 0===r.wrap&&aF()||r.wrap,t=[].concat(t,t),KR.push({from:t[0],to:t[1],message:r.text,wrap:void 0===r.wrap&&aF()||!!r.wrap,type:oF.NOTE,placement:e})}function nF(e,r){e=iF(e);try{let t=j4(r.text,V());t=(t=t.replace(/&amp;/g,"&")).replace(/&equals;/g,"="),sF(e,JSON.parse(t))}catch(t){C.error("error while parsing actor link text",t)}}const iF=function(t){return ZR[t]},aF=()=>typeof JR<"u"?JR:V().sequence.wrap,oF={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31};function sF(t,e){if(null==t.links)t.links=e;else for(var r in e)t.links[r]=e[r]}function cF(t,e){t=iF(t);try{var r=j4(e.text,V());lF(t,JSON.parse(r))}catch(t){C.error("error while parsing actor properties text",t)}}function lF(t,e){if(null==t.properties)t.properties=e;else for(var r in e)t.properties[r]=e[r]}function uF(t,e){t=iF(t),e=document.getElementById(e.text);try{var r=e.innerHTML,n=JSON.parse(r);n.properties&&lF(t,n.properties),n.links&&sF(t,n.links)}catch(t){C.error("error while parsing actor details text",t)}}function hF(t){if(t instanceof Array)t.forEach(function(t){hF(t)});else switch(t.type){case"sequenceIndex":KR.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":tF(t.actor,t.actor,t.description,"participant");break;case"addActor":tF(t.actor,t.actor,t.description,"actor");break;case"activeStart":case"activeEnd":eF(t.actor,void 0,void 0,t.signalType);break;case"addNote":rF(t.actor,t.placement,t.text);break;case"addLinks":nF(t.actor,t.text);break;case"addALink":var e=t.actor,r=t.text;e=iF(e);try{var n={};let t=j4(r.text,V());var i=t.indexOf("@"),a=(t=(t=t.replace(/&amp;/g,"&")).replace(/&equals;/g,"=")).slice(0,i-1).trim(),o=t.slice(i+1).trim();n[a]=o,sF(e,n)}catch(t){C.error("error while parsing actor link text",t)}break;case"addProperties":cF(t.actor,t.text);break;case"addDetails":uF(t.actor,t.text);break;case"addMessage":eF(t.from,t.to,t.msg,t.signalType);break;case"loopStart":eF(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":eF(void 0,void 0,void 0,t.signalType);break;case"rectStart":eF(void 0,void 0,t.color,t.signalType);break;case"rectEnd":eF(void 0,void 0,void 0,t.signalType);break;case"optStart":eF(void 0,void 0,t.optText,t.signalType);break;case"optEnd":eF(void 0,void 0,void 0,t.signalType);break;case"altStart":case"else":eF(void 0,void 0,t.altText,t.signalType);break;case"altEnd":eF(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":Z6(t.text);break;case"parStart":case"and":eF(void 0,void 0,t.parText,t.signalType);break;case"parEnd":eF(void 0,void 0,void 0,t.signalType);break;case"criticalStart":eF(void 0,void 0,t.criticalText,t.signalType);break;case"option":eF(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":eF(void 0,void 0,void 0,t.signalType);break;case"breakStart":eF(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":eF(void 0,void 0,void 0,t.signalType)}}const dF={addActor:tF,addMessage:function(t,e,r,n){KR.push({from:t,to:e,message:r.text,wrap:void 0===r.wrap&&aF()||!!r.wrap,answer:n})},addSignal:eF,addLinks:nF,addDetails:uF,addProperties:cF,autoWrap:aF,setWrap:function(t){JR=t},enableSequenceNumbers:function(){QR=!0},disableSequenceNumbers:function(){QR=!1},showSequenceNumbers:()=>QR,getMessages:function(){return KR},getActors:function(){return ZR},getActor:iF,getActorKeys:function(){return Object.keys(ZR)},getActorProperty:function(t,e){if(typeof t<"u"&&typeof t.properties<"u")return t.properties[e]},getAccTitle:K6,getDiagramTitle:ev,setDiagramTitle:tv,parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().sequence,clear:function(){ZR={},KR=[],QR=!1,X6()},parseMessage:function(t){t=t.trim(),t={text:t.replace(/^[:]?(?:no)?wrap:/,"").trim(),wrap:null!==t.match(/^[:]?wrap:/)||null===t.match(/^[:]?nowrap:/)&&void 0};return C.debug("parseMessage:",t),t},LINETYPE:oF,ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},addNote:rF,setAccTitle:Z6,apply:hF,setAccDescription:Q6,getAccDescription:J6};let fF=[];function pF(t,e){var r,n,i,a,o,s=t.append("polygon");return s.attr("points",(r=e.x,n=e.y,i=e.width,a=e.height,r+","+n+" "+(r+i)+","+n+" "+(r+i)+","+(n+a-(o=7))+" "+(r+i-1.2*o)+","+(n+a)+" "+r+","+(n+a))),s.attr("class","labelBox"),e.y=e.y+e.height/2,wF(t,e),s}const gF=t=>{fF.push(t)},yF=()=>{fF.forEach(t=>{t()}),fF=[]},mF=function(t,e){t=t.append("rect");return t.attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),typeof e.class<"u"&&t.attr("class",e.class),t},bF=(e,r)=>{gF(()=>{var t=document.querySelectorAll(e);0!==t.length&&(t[0].addEventListener("mouseover",function(){xF("actor"+r+"_popup")}),t[0].addEventListener("mouseout",function(){kF("actor"+r+"_popup")}))})},_F=function(t,e,r,n){t=t.append("image"),t.attr("x",e),t.attr("y",r),e=z(n);t.attr("xlink:href",e)},vF=function(t,e,r,n){t=t.append("use"),t.attr("x",e),t.attr("y",r),e=z(n);t.attr("xlink:href","#"+e)},xF=function(t){t=document.getElementById(t);null!=t&&(t.style.display="block")},kF=function(t){t=document.getElementById(t);null!=t&&(t.style.display="none")},wF=function(e,r){let n=0,i=0;var a=r.text.split(H4.lineBreakRegex);let o=[],s=0,c=()=>r.y;if(typeof r.valign<"u"&&typeof r.textMargin<"u"&&0<r.textMargin)switch(r.valign){case"top":case"start":c=()=>Math.round(r.y+r.textMargin);break;case"middle":case"center":c=()=>Math.round(r.y+(n+i+r.textMargin)/2);break;case"bottom":case"end":c=()=>Math.round(r.y+(n+i+2*r.textMargin)-r.textMargin)}if(typeof r.anchor<"u"&&typeof r.textMargin<"u"&&typeof r.width<"u")switch(r.anchor){case"left":case"start":r.x=Math.round(r.x+r.textMargin),r.anchor="start",r.dominantBaseline="middle",r.alignmentBaseline="middle";break;case"middle":case"center":r.x=Math.round(r.x+r.width/2),r.anchor="middle",r.dominantBaseline="middle",r.alignmentBaseline="middle";break;case"right":case"end":r.x=Math.round(r.x+r.width-r.textMargin),r.anchor="end",r.dominantBaseline="middle",r.alignmentBaseline="middle"}for(let t=0;t<a.length;t++){var l,u=a[t],h=(typeof r.textMargin<"u"&&0===r.textMargin&&typeof r.fontSize<"u"&&(s=t*r.fontSize),e.append("text"));h.attr("x",r.x),h.attr("y",c()),typeof r.anchor<"u"&&h.attr("text-anchor",r.anchor).attr("dominant-baseline",r.dominantBaseline).attr("alignment-baseline",r.alignmentBaseline),typeof r.fontFamily<"u"&&h.style("font-family",r.fontFamily),typeof r.fontSize<"u"&&h.style("font-size",r.fontSize),typeof r.fontWeight<"u"&&h.style("font-weight",r.fontWeight),typeof r.fill<"u"&&h.attr("fill",r.fill),typeof r.class<"u"&&h.attr("class",r.class),typeof r.dy<"u"?h.attr("dy",r.dy):0!==s&&h.attr("dy",s),(r.tspan?((l=h.append("tspan")).attr("x",r.x),typeof r.fill<"u"&&l.attr("fill",r.fill),l):h).text(u),typeof r.valign<"u"&&typeof r.textMargin<"u"&&0<r.textMargin&&(i+=(h._groups||h)[0][0].getBBox().height,n=i),o.push(h)}return o};let EF=-1;function TF(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}}const CF=(t,e)=>{t.selectAll&&t.selectAll(".actor-line").attr("class","200").attr("y2",e-55)},SF=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},AF=function(t){return"fo"===t.textPlacement?FF:"old"===t.textPlacement?IF:RF},MF=function(t){return"fo"===t.textPlacement?BF:"old"===t.textPlacement?DF:LF},NF={drawRect:mF,drawText:wF,drawLabel:pF,drawActor:function(e,r,n){switch(r.type){case"actor":return c=e,a=n,o=(s=r).x+s.width/2,0===s.y&&(EF++,c.append("line").attr("id","actor"+EF).attr("x1",o).attr("y1",80).attr("x2",o).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999")),(c=c.append("g")).attr("class","actor-man"),(l=SF()).x=s.x,l.y=s.y,l.fill="#eaeaea",l.width=s.width,l.height=s.height,l.class="actor",l.rx=3,l.ry=3,c.append("line").attr("id","actor-man-torso"+EF).attr("x1",o).attr("y1",s.y+25).attr("x2",o).attr("y2",s.y+45),c.append("line").attr("id","actor-man-arms"+EF).attr("x1",o-18).attr("y1",s.y+33).attr("x2",o+18).attr("y2",s.y+33),c.append("line").attr("x1",o-18).attr("y1",s.y+60).attr("x2",o).attr("y2",s.y+45),c.append("line").attr("x1",o).attr("y1",s.y+45).attr("x2",o+16).attr("y2",s.y+60),(o=c.append("circle")).attr("cx",s.x+s.width/2),o.attr("cy",s.y+10),o.attr("r",15),o.attr("width",s.width),o.attr("height",s.height),o=c.node().getBBox(),s.height=o.height,AF(a)(s.description,c,l.x,l.y+35,l.width,l.height,{class:"actor"},a),s.height;case"participant":{o=e;c=r;l=n;var i,a=c.x+c.width/2,o=o.append("g"),s=o,a=(0===c.y&&(EF++,s.append("line").attr("id","actor"+EF).attr("x1",a).attr("y1",5).attr("x2",a).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),s=o.append("g"),c.actorCnt=EF,null!=c.links)&&(s.attr("id","root-"+EF),bF("#root-"+EF,EF)),SF()),o="actor",o=(null!=c.properties&&c.properties.class?o=c.properties.class:a.fill="#eaeaea",a.x=c.x,a.y=c.y,a.width=c.width,a.height=c.height,a.class=o,a.rx=3,a.ry=3,mF(s,a));c.rectData=a,null!=c.properties&&c.properties.icon&&("@"===(i=c.properties.icon.trim()).charAt(0)?vF(s,a.x+a.width-20,a.y+10,i.substr(1)):_F(s,a.x+a.width-20,a.y+10,i)),AF(l)(c.description,s,a.x,a.y,a.width,a.height,{class:"actor"},l);let t=c.height;return o.node&&(i=o.node().getBBox(),c.height=i.height,t=i.height),t;return}}var c,s,a,o,l},drawPopup:function(t,e,r,n,i){if(void 0===e.links||null===e.links||0===Object.keys(e.links).length)return{height:0,width:0};var a=e.links,o=e.actorCnt,s=e.rectData,e="none",c=(i&&(e="block !important"),t.append("g")),i=(c.attr("id","actor"+o+"_popup"),c.attr("class","actorPopupMenu"),c.attr("display",e),bF("#actor"+o+"_popup",o),""),l=(typeof s.class<"u"&&(i=" "+s.class),s.width>r?s.width:r),t=c.append("rect");if(t.attr("class","actorPopupMenuPanel"+i),t.attr("x",s.x),t.attr("y",s.height),t.attr("fill",s.fill),t.attr("stroke",s.stroke),t.attr("width",l),t.attr("height",s.height),t.attr("rx",s.rx),t.attr("ry",s.ry),null!=a){var u,h=20;for(u in a){var d=c.append("a"),f=z(a[u]);d.attr("xlink:href",f),d.attr("target","_blank"),MF(n)(u,d,s.x+10,s.height+h,l,20,{class:"actor"},n),h+=30}}return t.attr("height",h),{height:s.height+h,width:l}},drawImage:_F,drawEmbeddedImage:vF,anchorElement:function(t){return t.append("g")},drawActivation:function(t,e,r,n,i){var a=SF(),o=e.anchored;a.x=e.startx,a.y=e.starty,a.class="activation"+i%3,a.width=e.stopx-e.startx,a.height=r-e.starty,mF(o,a)},drawLoop:function(t,r,e,n){function i(t,e,r,n){return d.append("line").attr("x1",t).attr("y1",e).attr("x2",r).attr("y2",n).attr("class","loopLine")}const{boxMargin:a,boxTextMargin:o,labelBoxHeight:s,labelBoxWidth:c,messageFontFamily:l,messageFontSize:u,messageFontWeight:h}=n,d=t.append("g");i(r.startx,r.starty,r.stopx,r.starty),i(r.stopx,r.starty,r.stopx,r.stopy),i(r.startx,r.stopy,r.stopx,r.stopy),i(r.startx,r.starty,r.startx,r.stopy),typeof r.sections<"u"&&r.sections.forEach(function(t){i(r.startx,t.y,r.stopx,t.y).style("stroke-dasharray","3, 3")});let f=TF(),p=(f.text=e,f.x=r.startx,f.y=r.starty,f.fontFamily=l,f.fontSize=u,f.fontWeight=h,f.anchor="middle",f.valign="middle",f.tspan=!1,f.width=c||50,f.height=s||20,f.textMargin=o,f.class="labelText",pF(d,f),(f=TF()).text=r.title,f.x=r.startx+c/2+(r.stopx-r.startx)/2,f.y=r.starty+a+o,f.anchor="middle",f.valign="middle",f.textMargin=o,f.class="loopText",f.fontFamily=l,f.fontSize=u,f.fontWeight=h,f.wrap=!0,wF(d,f));return typeof r.sectionTitles<"u"&&r.sectionTitles.forEach(function(t,e){t.message&&(f.text=t.message,f.x=r.startx+(r.stopx-r.startx)/2,f.y=r.sections[e].y+a+o,f.class="loopText",f.anchor="middle",f.valign="middle",f.tspan=!1,f.fontFamily=l,f.fontSize=u,f.fontWeight=h,f.wrap=r.wrap,p=wF(d,f),t=Math.round(p.map(t=>(t._groups||t)[0][0].getBBox().height).reduce((t,e)=>t+e)),r.sections[e].height+=t-(a+o))}),r.height=Math.round(r.stopy-r.starty),d},drawBackgroundRect:function(t,e){mF(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},insertArrowHead:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowFilledHead:function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertSequenceNumber:function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead:function(t){t=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);t.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),t.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},insertDatabaseIcon:function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon:function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon:function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},getTextObj:TF,getNoteRect:SF,popupMenu:function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},popdownMenu:function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},fixLifeLineHeights:CF,sanitizeUrl:z};function DF(t,e,r,n,i,a,o){OF(e.append("text").attr("x",r).attr("y",n).style("text-anchor","start").text(t),o)}function LF(t,e,r,n,i,a,o,s){var{actorFontSize:c,actorFontFamily:l,actorFontWeight:u}=s,h=t.split(H4.lineBreakRegex);for(let t=0;t<h.length;t++){var d=t*c-c*(h.length-1)/2,f=e.append("text").attr("x",r).attr("y",n).style("text-anchor","start").style("font-size",c).style("font-weight",u).style("font-family",l);f.append("tspan").attr("x",r).attr("dy",d).text(h[t]),f.attr("y",n+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),OF(f,o)}}function BF(t,e,r,n,i,a,o,s){e=e.append("switch"),i=e.append("foreignObject").attr("x",r).attr("y",n).attr("width",i).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");i.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),LF(t,e,r,n,0,a,o,s),OF(i,o)}function OF(t,e){for(const r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}function IF(t,e,r,n,i,a,o){PF(e.append("text").attr("x",r+i/2).attr("y",n+a/2+5).style("text-anchor","middle").text(t),o)}function RF(t,e,r,n,i,a,o,s){var{actorFontSize:c,actorFontFamily:l,actorFontWeight:u}=s,h=c&&c.replace?c.replace("px",""):c,d=t.split(H4.lineBreakRegex);for(let t=0;t<d.length;t++){var f=t*h-h*(d.length-1)/2,p=e.append("text").attr("x",r+i/2).attr("y",n).style("text-anchor","middle").style("font-size",c).style("font-weight",u).style("font-family",l);p.append("tspan").attr("x",r+i/2).attr("dy",f).text(d[t]),p.attr("y",n+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),PF(p,o)}}function FF(t,e,r,n,i,a,o,s){var e=e.append("switch"),c=e.append("foreignObject").attr("x",r).attr("y",n).attr("width",i).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");c.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),RF(t,e,r,n,i,a,o,s),PF(c,o)}function PF(t,e){for(const r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}let B={};function $F(e,r,n,i,t,a){if(!0===t.hideUnusedParticipants){const h=new Set;a.forEach(t=>{h.add(t.from),h.add(t.to)}),n=n.filter(t=>h.has(t))}let o=0,s=0,c=0;for(let t=0;t<n.length;t++){var l=r[n[t]],u=(l.width=l.width||B.width,l.height=Math.max(l.height||B.height,B.height),l.margin=l.margin||B.actorMargin,l.x=o+s,l.y=i,NF.drawActor(e,l,B));c=Math.max(c,u),O.insert(l.x,i,l.x+l.width,l.height),o+=l.width,s+=l.margin,O.models.addActor(l)}O.bumpVerticalPos(c)}function jF(e,r,n,i){let a=0,o=0;for(let t=0;t<n.length;t++){var s=r[n[t]],c=function(t){let e=0;const r=WF(B);for(const n in t.links){const i=g_.calculateTextDimensions(n,r).width+2*B.wrapPadding+2*B.boxMargin;e<i&&(e=i)}return e}(s),c=NF.drawPopup(e,s,c,B,B.forceMenus,i);c.height>a&&(a=c.height),c.width+s.x>o&&(o=c.width+s.x)}return{maxHeight:a,maxWidth:o}}function YF(t,e){return e=e[t],[(t=HF(t)).reduce(function(t,e){return Math.min(t,e.startx)},e.x+e.width/2),t.reduce(function(t,e){return Math.max(t,e.stopx)},e.x+e.width/2)]}const O={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(t=>t.height||0))+(0===this.loops.length?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(0===this.messages.length?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(0===this.notes.length?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,qF(V())},updateVal:function(t,e,r,n){"u"<typeof t[e]?t[e]=r:t[e]=n(r,t[e])},updateBounds:function(n,i,a,o){const s=this;let c=0;function t(r){return function(t){c++;var e=s.sequenceItems.length-c+1;s.updateVal(t,"starty",i-e*B.boxMargin,Math.min),s.updateVal(t,"stopy",o+e*B.boxMargin,Math.max),s.updateVal(O.data,"startx",n-e*B.boxMargin,Math.min),s.updateVal(O.data,"stopx",a+e*B.boxMargin,Math.max),"activation"!==r&&(s.updateVal(t,"startx",n-e*B.boxMargin,Math.min),s.updateVal(t,"stopx",a+e*B.boxMargin,Math.max),s.updateVal(O.data,"starty",i-e*B.boxMargin,Math.min),s.updateVal(O.data,"stopy",o+e*B.boxMargin,Math.max))}}this.sequenceItems.forEach(t()),this.activations.forEach(t("activation"))},insert:function(t,e,r,n){var i=Math.min(t,r),t=Math.max(t,r),r=Math.min(e,n),e=Math.max(e,n);this.updateVal(O.data,"startx",i,Math.min),this.updateVal(O.data,"starty",r,Math.min),this.updateVal(O.data,"stopx",t,Math.max),this.updateVal(O.data,"stopy",e,Math.max),this.updateBounds(i,r,t,e)},newActivation:function(t,e,r){var r=r[t.from.actor],n=HF(t.from.actor).length||0,r=r.x+r.width/2+(n-1)*B.activationWidth/2;this.activations.push({startx:r,starty:this.verticalPos+2,stopx:r+B.activationWidth,stopy:void 0,actor:t.from.actor,anchored:NF.anchorElement(e)})},endActivation:function(t){t=this.activations.map(function(t){return t.actor}).lastIndexOf(t.from.actor);return this.activations.splice(t,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){var e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:O.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},zF=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),UF=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),WF=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight}),qF=function(t){Lb(B,t),t.fontFamily&&(B.actorFontFamily=B.noteFontFamily=B.messageFontFamily=t.fontFamily),t.fontSize&&(B.actorFontSize=B.noteFontSize=B.messageFontSize=t.fontSize),t.fontWeight&&(B.actorFontWeight=B.noteFontWeight=B.messageFontWeight=t.fontWeight)},HF=function(e){return O.activations.filter(function(t){return t.actor===e})};function VF(t,e,r,n,i){O.bumpVerticalPos(r);let a=n;e.id&&e.message&&t[e.id]&&(r=t[e.id].width,t=zF(B),e.message=g_.wrapLabel(`[${e.message}]`,r-2*B.wrapPadding,t),e.width=r,e.wrap=!0,r=g_.calculateTextDimensions(e.message,t),t=Math.max(r.height,B.labelBoxHeight),a=n+t,C.debug(t+" - "+e.message)),i(e),O.bumpVerticalPos(a)}const GF=function(t,e,r){var n=e[t.from].x,i=e[t.to].x,a=t.wrap&&t.message,o=g_.calculateTextDimensions(a?g_.wrapLabel(t.message,B.width,UF(B)):t.message,UF(B)),s={width:a?B.width:Math.max(B.width,o.width+2*B.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===r.db.PLACEMENT.RIGHTOF?(s.width=a?Math.max(B.width,o.width):Math.max(e[t.from].width/2+e[t.to].width/2,o.width+2*B.noteMargin),s.startx=n+(e[t.from].width+B.actorMargin)/2):t.placement===r.db.PLACEMENT.LEFTOF?(s.width=Math.max(a?B.width:e[t.from].width/2+e[t.to].width/2,o.width+2*B.noteMargin),s.startx=n-s.width+(e[t.from].width-B.actorMargin)/2):t.to===t.from?(o=g_.calculateTextDimensions(a?g_.wrapLabel(t.message,Math.max(B.width,e[t.from].width),UF(B)):t.message,UF(B)),s.width=a?Math.max(B.width,e[t.from].width):Math.max(e[t.from].width,B.width,o.width+2*B.noteMargin),s.startx=n+(e[t.from].width-s.width)/2):(s.width=Math.abs(n+e[t.from].width/2-(i+e[t.to].width/2))+B.actorMargin,s.startx=n<i?n+e[t.from].width/2-B.actorMargin/2:i+e[t.to].width/2-B.actorMargin/2),a&&(s.message=g_.wrapLabel(t.message,s.width-2*B.wrapPadding,UF(B))),C.debug(`NM:[${s.startx},${s.stopx},${s.starty},${s.stopy}:${s.width},${s.height}=${t.message}]`),s},XF=function(t,e,r){let n=!1;var i,a,o,s,c;return(n=!![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(t.type)||n)?(r=YF(t.from,e),e=YF(t.to,e),i=r[0]<=e[0]?1:0,a=r[0]<e[0]?0:1,o=r.concat(e),s=Math.abs(e[a]-r[i]),t.wrap&&t.message&&(t.message=g_.wrapLabel(t.message,Math.max(s+2*B.wrapPadding,B.width),zF(B))),c=g_.calculateTextDimensions(t.message,zF(B)),{width:Math.max(t.wrap?0:c.width+2*B.wrapPadding,s+2*B.wrapPadding,B.width),height:0,startx:r[i],stopx:e[a],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,o),toBounds:Math.max.apply(null,o)}):{}},ZF={bounds:O,drawActors:$F,drawActorsPopup:jF,setConf:qF,draw:function(t,e,r,p){var{securityLevel:n,sequence:i}=V();B=i;let a;"sandbox"===n&&(a=H("#i"+e));var i=H("sandbox"===n?a.nodes()[0].contentDocument.body:"body"),o="sandbox"===n?a.nodes()[0].contentDocument:document;O.init(),C.debug(p.db);const g="sandbox"===n?i.select(`[id="${e}"]`):H(`[id="${e}"]`),u=p.db.getActors(),s=p.db.getActorKeys(),c=p.db.getMessages(),l=p.db.getDiagramTitle(),h=function(s,t,c){const l={};return t.forEach(function(t){if(s[t.to]&&s[t.from]){const e=s[t.to];if(t.placement===c.db.PLACEMENT.LEFTOF&&!e.prevActor||t.placement===c.db.PLACEMENT.RIGHTOF&&!e.nextActor)return;const r=t.placement!==void 0,n=!r,i=r?UF(B):zF(B),a=t.wrap?g_.wrapLabel(t.message,B.width-2*B.wrapPadding,i):t.message,o=g_.calculateTextDimensions(a,i).width+2*B.wrapPadding;n&&t.from===e.nextActor?l[t.to]=Math.max(l[t.to]||0,o):n&&t.from===e.prevActor?l[t.from]=Math.max(l[t.from]||0,o):n&&t.from===t.to?(l[t.from]=Math.max(l[t.from]||0,o/2),l[t.to]=Math.max(l[t.to]||0,o/2)):t.placement===c.db.PLACEMENT.RIGHTOF?l[t.from]=Math.max(l[t.from]||0,o):t.placement===c.db.PLACEMENT.LEFTOF?l[e.prevActor]=Math.max(l[e.prevActor]||0,o):t.placement===c.db.PLACEMENT.OVER&&(e.prevActor&&(l[e.prevActor]=Math.max(l[e.prevActor]||0,o/2)),e.nextActor&&(l[t.from]=Math.max(l[t.from]||0,o/2)))}}),C.debug("maxMessageWidthPerActor:",l),l}(u,c,p),d=(B.height=function(n,t){let i=0;Object.keys(n).forEach(t=>{const e=n[t];e.wrap&&(e.description=g_.wrapLabel(e.description,B.width-2*B.wrapPadding,WF(B)));const r=g_.calculateTextDimensions(e.description,WF(B));e.width=e.wrap?B.width:Math.max(B.width,r.width+2*B.wrapPadding),e.height=e.wrap?Math.max(r.height,B.height):B.height,i=Math.max(i,e.height)});for(const e in t){const r=n[e];if(!r)continue;const a=n[r.nextActor];if(!a)continue;const o=t[e]+B.actorMargin-r.width/2-a.width/2;r.margin=Math.max(o,B.actorMargin)}return Math.max(i,B.height)}(u,h),NF.insertComputerIcon(g),NF.insertDatabaseIcon(g),NF.insertClockIcon(g),$F(g,u,s,0,B,c),function(t,o,s){const c={},l=[];let u,h,d;return t.forEach(function(n){switch(n.id=g_.random({length:10}),n.type){case s.db.LINETYPE.LOOP_START:case s.db.LINETYPE.ALT_START:case s.db.LINETYPE.OPT_START:case s.db.LINETYPE.PAR_START:case s.db.LINETYPE.CRITICAL_START:case s.db.LINETYPE.BREAK_START:l.push({id:n.id,msg:n.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case s.db.LINETYPE.ALT_ELSE:case s.db.LINETYPE.PAR_AND:case s.db.LINETYPE.CRITICAL_OPTION:n.message&&(u=l.pop(),c[u.id]=u,c[n.id]=u,l.push(u));break;case s.db.LINETYPE.LOOP_END:case s.db.LINETYPE.ALT_END:case s.db.LINETYPE.OPT_END:case s.db.LINETYPE.PAR_END:case s.db.LINETYPE.CRITICAL_END:case s.db.LINETYPE.BREAK_END:u=l.pop(),c[u.id]=u;break;case s.db.LINETYPE.ACTIVE_START:{const t=o[n.from?n.from.actor:n.to.actor],e=HF(n.from?n.from.actor:n.to.actor).length,r=t.x+t.width/2+(e-1)*B.activationWidth/2,i={startx:r,stopx:r+B.activationWidth,actor:n.from.actor,enabled:!0};O.activations.push(i)}break;case s.db.LINETYPE.ACTIVE_END:{const a=O.activations.map(t=>t.actor).lastIndexOf(n.from.actor);delete O.activations.splice(a,1)[0]}break}n.placement!==void 0?(h=GF(n,o,s),n.noteModel=h,l.forEach(t=>{u=t,u.from=Math.min(u.from,h.startx),u.to=Math.max(u.to,h.startx+h.width),u.width=Math.max(u.width,Math.abs(u.from-u.to))-B.labelBoxWidth})):(d=XF(n,o,s),n.msgModel=d,d.startx&&d.stopx&&l.length>0&&l.forEach(t=>{if(u=t,d.startx===d.stopx){const e=o[n.from],r=o[n.to];u.from=Math.min(e.x-d.width/2,e.x-e.width/2,u.from),u.to=Math.max(r.x+d.width/2,r.x+e.width/2,u.to),u.width=Math.max(u.width,Math.abs(u.to-u.from))-B.labelBoxWidth}else u.from=Math.min(d.startx,u.from),u.to=Math.max(d.stopx,u.to),u.width=Math.max(u.width,d.width)-B.labelBoxWidth}))}),O.activations=[],C.debug("Loop type widths:",c),c}(c,u,p));NF.insertArrowHead(g),NF.insertArrowCrossHead(g),NF.insertArrowFilledHead(g),NF.insertSequenceNumber(g);let f=1,y=1;const m=[];c.forEach(function(t){let e,r,n;switch(t.type){case p.db.LINETYPE.NOTE:r=t.noteModel,a=g,o=r,O.bumpVerticalPos(B.boxMargin),o.height=B.boxMargin,o.starty=O.getVerticalPos(),(s=NF.getNoteRect()).x=o.startx,s.y=o.starty,s.width=o.width||B.width,s.class="note",a=a.append("g"),c=NF.drawRect(a,s),(l=NF.getTextObj()).x=o.startx,l.y=o.starty,l.width=s.width,l.dy="1em",l.text=o.message,l.class="noteText",l.fontFamily=B.noteFontFamily,l.fontSize=B.noteFontSize,l.fontWeight=B.noteFontWeight,l.anchor=B.noteAlign,l.textMargin=B.noteMargin,l.valign="center",a=wF(a,l),l=Math.round(a.map(t=>(t._groups||t)[0][0].getBBox().height).reduce((t,e)=>t+e)),c.attr("height",l+2*B.noteMargin),o.height+=l+2*B.noteMargin,O.bumpVerticalPos(l+2*B.noteMargin),o.stopy=o.starty+l+2*B.noteMargin,o.stopx=o.startx+s.width,O.insert(o.startx,o.starty,o.stopx,o.stopy),O.models.addNote(o);break;case p.db.LINETYPE.ACTIVE_START:O.newActivation(t,g,u);break;case p.db.LINETYPE.ACTIVE_END:a=t,c=O.getVerticalPos(),(l=O.endActivation(a)).starty+18>c&&(l.starty=c-6,c+=12),NF.drawActivation(g,l,c,B,HF(a.from.actor).length),O.insert(l.startx,c-10,l.stopx,c);break;case p.db.LINETYPE.LOOP_START:VF(d,t,B.boxMargin,B.boxMargin+B.boxTextMargin,t=>O.newLoop(t));break;case p.db.LINETYPE.LOOP_END:e=O.endLoop(),NF.drawLoop(g,e,"loop",B),O.bumpVerticalPos(e.stopy-O.getVerticalPos()),O.models.addLoop(e);break;case p.db.LINETYPE.RECT_START:VF(d,t,B.boxMargin,B.boxMargin,t=>O.newLoop(void 0,t.message));break;case p.db.LINETYPE.RECT_END:e=O.endLoop(),NF.drawBackgroundRect(g,e),O.models.addLoop(e),O.bumpVerticalPos(e.stopy-O.getVerticalPos());break;case p.db.LINETYPE.OPT_START:VF(d,t,B.boxMargin,B.boxMargin+B.boxTextMargin,t=>O.newLoop(t));break;case p.db.LINETYPE.OPT_END:e=O.endLoop(),NF.drawLoop(g,e,"opt",B),O.bumpVerticalPos(e.stopy-O.getVerticalPos()),O.models.addLoop(e);break;case p.db.LINETYPE.ALT_START:VF(d,t,B.boxMargin,B.boxMargin+B.boxTextMargin,t=>O.newLoop(t));break;case p.db.LINETYPE.ALT_ELSE:VF(d,t,B.boxMargin+B.boxTextMargin,B.boxMargin,t=>O.addSectionToLoop(t));break;case p.db.LINETYPE.ALT_END:e=O.endLoop(),NF.drawLoop(g,e,"alt",B),O.bumpVerticalPos(e.stopy-O.getVerticalPos()),O.models.addLoop(e);break;case p.db.LINETYPE.PAR_START:VF(d,t,B.boxMargin,B.boxMargin+B.boxTextMargin,t=>O.newLoop(t));break;case p.db.LINETYPE.PAR_AND:VF(d,t,B.boxMargin+B.boxTextMargin,B.boxMargin,t=>O.addSectionToLoop(t));break;case p.db.LINETYPE.PAR_END:e=O.endLoop(),NF.drawLoop(g,e,"par",B),O.bumpVerticalPos(e.stopy-O.getVerticalPos()),O.models.addLoop(e);break;case p.db.LINETYPE.AUTONUMBER:f=t.message.start||f,y=t.message.step||y,t.message.visible?p.db.enableSequenceNumbers():p.db.disableSequenceNumbers();break;case p.db.LINETYPE.CRITICAL_START:VF(d,t,B.boxMargin,B.boxMargin+B.boxTextMargin,t=>O.newLoop(t));break;case p.db.LINETYPE.CRITICAL_OPTION:VF(d,t,B.boxMargin+B.boxTextMargin,B.boxMargin,t=>O.addSectionToLoop(t));break;case p.db.LINETYPE.CRITICAL_END:e=O.endLoop(),NF.drawLoop(g,e,"critical",B),O.bumpVerticalPos(e.stopy-O.getVerticalPos()),O.models.addLoop(e);break;case p.db.LINETYPE.BREAK_START:VF(d,t,B.boxMargin,B.boxMargin+B.boxTextMargin,t=>O.newLoop(t));break;case p.db.LINETYPE.BREAK_END:e=O.endLoop(),NF.drawLoop(g,e,"break",B),O.bumpVerticalPos(e.stopy-O.getVerticalPos()),O.models.addLoop(e);break;default:try{(n=t.msgModel).starty=O.getVerticalPos(),n.sequenceIndex=f,n.sequenceVisible=p.db.showSequenceNumbers();var i=function(t){O.bumpVerticalPos(10);var{startx:e,stopx:r,message:n}=t,i=H4.splitBreaks(n).length,n=g_.calculateTextDimensions(n,zF(B)),i=n.height/i;t.height+=i,O.bumpVerticalPos(i);let a,o=n.height-10;i=n.width;return e===r?(a=O.getVerticalPos()+o,B.rightAngles||(o+=B.boxMargin,a=O.getVerticalPos()+o),o+=30,n=Math.max(i/2,B.width/2),O.insert(e-n,O.getVerticalPos()-10+o,r+n,O.getVerticalPos()+30+o)):(o+=B.boxMargin,a=O.getVerticalPos()+o,O.insert(e,a-10,r,a)),O.bumpVerticalPos(o),t.height+=o,t.stopy=t.starty+t.height,O.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),a}((g,n));m.push({messageModel:n,lineStarty:i}),O.models.addMessage(n)}catch(t){C.error("error while drawing message",t)}}var a,o,s,c,l;[p.db.LINETYPE.SOLID_OPEN,p.db.LINETYPE.DOTTED_OPEN,p.db.LINETYPE.SOLID,p.db.LINETYPE.DOTTED,p.db.LINETYPE.SOLID_CROSS,p.db.LINETYPE.DOTTED_CROSS,p.db.LINETYPE.SOLID_POINT,p.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(f+=y)}),m.forEach(r=>{{var n=g,i=r.messageModel,a=(r=r.lineStarty,p),{startx:i,stopx:o,starty:s,message:c,type:l,sequenceIndex:u,sequenceVisible:h}=i,d=g_.calculateTextDimensions(c,zF(B)),f=NF.getTextObj(),s=(f.x=i,f.y=s+10,f.width=o-i,f.class="messageText",f.dy="1em",f.text=c,f.fontFamily=B.messageFontFamily,f.fontSize=B.messageFontSize,f.fontWeight=B.messageFontWeight,f.anchor=B.messageAlign,f.valign="center",f.textMargin=B.wrapPadding,f.tspan=!1,wF(n,f),d.width);let t,e=(i===o?t=B.rightAngles?n.append("path").attr("d",`M  ${i},${r} H ${i+Math.max(B.width/2,s/2)} V ${r+25} H `+i):n.append("path").attr("d","M "+i+","+r+" C "+(i+60)+","+(r-10)+" "+(i+60)+","+(r+30)+" "+i+","+(r+20)):((t=n.append("line")).attr("x1",i),t.attr("y1",r),t.attr("x2",o),t.attr("y2",r)),l===a.db.LINETYPE.DOTTED||l===a.db.LINETYPE.DOTTED_CROSS||l===a.db.LINETYPE.DOTTED_POINT||l===a.db.LINETYPE.DOTTED_OPEN?(t.style("stroke-dasharray","3, 3"),t.attr("class","messageLine1")):t.attr("class","messageLine0"),"");B.arrowMarkerAbsolute&&(e=(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),t.attr("stroke-width",2),t.attr("stroke","none"),t.style("fill","none"),l!==a.db.LINETYPE.SOLID&&l!==a.db.LINETYPE.DOTTED||t.attr("marker-end","url("+e+"#arrowhead)"),l!==a.db.LINETYPE.SOLID_POINT&&l!==a.db.LINETYPE.DOTTED_POINT||t.attr("marker-end","url("+e+"#filled-head)"),l!==a.db.LINETYPE.SOLID_CROSS&&l!==a.db.LINETYPE.DOTTED_CROSS||t.attr("marker-end","url("+e+"#crosshead)"),(h||B.showSequenceNumbers)&&(t.attr("marker-start","url("+e+"#sequencenumber)"),n.append("text").attr("x",i).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(u))}}),B.mirrorActors&&(O.bumpVerticalPos(2*B.boxMargin),$F(g,u,s,O.getVerticalPos(),B,c),O.bumpVerticalPos(B.boxMargin),CF(g,O.getVerticalPos()));n=jF(g,u,s,o),i=O.getBounds().bounds;C.debug("For line height fix Querying: #"+e+" .actor-line"),Sr("#"+e+" .actor-line").attr("y2",i.stopy);let b=i.stopy-i.starty,_=(b=b<n.maxHeight?n.maxHeight:b)+2*B.diagramMarginY,v=(B.mirrorActors&&(_=_-B.boxMargin+B.bottomMarginAdj),i.stopx-i.startx);o=(v=v<n.maxWidth?n.maxWidth:v)+2*B.diagramMarginX,l&&g.append("text").text(l).attr("x",(i.stopx-i.startx)/2-2*B.diagramMarginX).attr("y",-25),f6(g,_,o,B.useMaxWidth),n=l?40:0;g.attr("viewBox",i.startx-B.diagramMarginX+" -"+(B.diagramMarginY+n)+" "+o+" "+(_+n)),vv(p.db,g,e),C.debug("models:",O.models)}};Xg=[1,15],Gg=[1,17],Kg=[1,19],Zg=[1,20],Jg=[1,21],Qg=[1,22],ey=[1,33],ty=[1,23],Eg=[1,24],ry=[1,25],Bi=[1,26],Ii=[1,27],Ri=[1,30],pg=[1,31],gg=[1,32],yg=[1,35],mg=[1,36],n2=[1,37],f2=[1,38],p2=[1,34],c2=[1,41],iy=[1,4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],ay=[1,4,5,12,13,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],hy=[1,4,5,7,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],dy=[4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],(fy={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,idStatement:11,DESCR:12,"--\x3e":13,HIDE_EMPTY:14,scale:15,WIDTH:16,COMPOSIT_STATE:17,STRUCT_START:18,STRUCT_STOP:19,STATE_DESCR:20,AS:21,ID:22,FORK:23,JOIN:24,CHOICE:25,CONCURRENT:26,note:27,notePosition:28,NOTE_TEXT:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,openDirective:36,typeDirective:37,closeDirective:38,":":39,argDirective:40,direction_tb:41,direction_bt:42,direction_rl:43,direction_lr:44,eol:45,";":46,EDGE_STATE:47,left_of:48,right_of:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",12:"DESCR",13:"--\x3e",14:"HIDE_EMPTY",15:"scale",16:"WIDTH",17:"COMPOSIT_STATE",18:"STRUCT_START",19:"STRUCT_STOP",20:"STATE_DESCR",21:"AS",22:"ID",23:"FORK",24:"JOIN",25:"CHOICE",26:"CONCURRENT",27:"note",29:"NOTE_TEXT",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",39:":",41:"direction_tb",42:"direction_bt",43:"direction_rl",44:"direction_lr",46:";",47:"EDGE_STATE",48:"left_of",49:"right_of",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[6,3],[6,5],[30,1],[30,1],[30,1],[30,1],[45,1],[45,1],[11,1],[11,1],[28,1],[28,1],[36,1],[37,1],[40,1],[38,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 4:return n.setRootDoc(a[s]),a[s];case 5:this.$=[];break;case 6:"nl"!=a[s]&&(a[s-1].push(a[s]),this.$=a[s-1]);break;case 7:case 8:this.$=a[s];break;case 9:this.$="nl";break;case 10:this.$={stmt:"state",id:a[s],type:"default",description:""};break;case 11:this.$={stmt:"state",id:a[s-1],type:"default",description:n.trimColon(a[s])};break;case 12:this.$={stmt:"relation",state1:{stmt:"state",id:a[s-2],type:"default",description:""},state2:{stmt:"state",id:a[s],type:"default",description:""}};break;case 13:this.$={stmt:"relation",state1:{stmt:"state",id:a[s-3],type:"default",description:""},state2:{stmt:"state",id:a[s-1],type:"default",description:""},description:a[s].substr(1).trim()};break;case 17:this.$={stmt:"state",id:a[s-3],type:"default",description:"",doc:a[s-1]};break;case 18:var c,l=a[s],u=a[s-2].trim();a[s].match(":")&&(l=(c=a[s].split(":"))[0],u=[u,c[1]]),this.$={stmt:"state",id:l,type:"default",description:u};break;case 19:this.$={stmt:"state",id:a[s-3],type:"default",description:a[s-5],doc:a[s-1]};break;case 20:this.$={stmt:"state",id:a[s],type:"fork"};break;case 21:this.$={stmt:"state",id:a[s],type:"join"};break;case 22:this.$={stmt:"state",id:a[s],type:"choice"};break;case 23:this.$={stmt:"state",id:n.getDividerId(),type:"divider"};break;case 24:this.$={stmt:"state",id:a[s-1].trim(),note:{position:a[s-2].trim(),text:a[s].trim()}};break;case 28:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 29:case 30:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 33:n.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 34:n.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 35:n.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 36:n.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 39:case 40:this.$=a[s];break;case 43:n.parseDirective("%%{","open_directive");break;case 44:n.parseDirective(a[s],"type_directive");break;case 45:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 46:n.parseDirective("}%%","close_directive","state")}},table:[{3:1,4:fy=[1,2],5:py=[1,3],6:4,7:Um=[1,5],36:6,50:Dg=[1,7]},{1:[3]},{3:8,4:fy,5:py,6:4,7:Um,36:6,50:Dg},{3:9,4:fy,5:py,6:4,7:Um,36:6,50:Dg},{3:10,4:fy,5:py,6:4,7:Um,36:6,50:Dg},QF([1,4,5,14,15,17,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],vg=[2,5],{8:11}),{37:12,51:[1,13]},{51:[2,43]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:Xg,5:Gg,6:28,9:14,10:16,11:18,14:Kg,15:Zg,17:Jg,20:Qg,22:ey,23:ty,24:Eg,25:ry,26:Bi,27:Ii,30:29,31:Ri,33:pg,35:gg,36:6,41:yg,42:mg,43:n2,44:f2,47:p2,50:Dg},{38:39,39:[1,40],53:c2},QF([39,53],[2,44]),QF(iy,[2,6]),{6:28,10:42,11:18,14:Kg,15:Zg,17:Jg,20:Qg,22:ey,23:ty,24:Eg,25:ry,26:Bi,27:Ii,30:29,31:Ri,33:pg,35:gg,36:6,41:yg,42:mg,43:n2,44:f2,47:p2,50:Dg},QF(iy,[2,8]),QF(iy,[2,9]),QF(iy,[2,10],{12:[1,43],13:[1,44]}),QF(iy,[2,14]),{16:[1,45]},QF(iy,[2,16],{18:[1,46]}),{21:[1,47]},QF(iy,[2,20]),QF(iy,[2,21]),QF(iy,[2,22]),QF(iy,[2,23]),{28:48,29:[1,49],48:[1,50],49:[1,51]},QF(iy,[2,26]),QF(iy,[2,27]),{32:[1,52]},{34:[1,53]},QF(iy,[2,30]),QF(ay,[2,39]),QF(ay,[2,40]),QF(iy,[2,33]),QF(iy,[2,34]),QF(iy,[2,35]),QF(iy,[2,36]),QF(hy,[2,31]),{40:54,52:[1,55]},QF(hy,[2,46]),QF(iy,[2,7]),QF(iy,[2,11]),{11:56,22:ey,47:p2},QF(iy,[2,15]),QF(dy,vg,{8:57}),{22:[1,58]},{22:[1,59]},{21:[1,60]},{22:[2,41]},{22:[2,42]},QF(iy,[2,28]),QF(iy,[2,29]),{38:61,53:c2},{53:[2,45]},QF(iy,[2,12],{12:[1,62]}),{4:Xg,5:Gg,6:28,9:14,10:16,11:18,14:Kg,15:Zg,17:Jg,19:[1,63],20:Qg,22:ey,23:ty,24:Eg,25:ry,26:Bi,27:Ii,30:29,31:Ri,33:pg,35:gg,36:6,41:yg,42:mg,43:n2,44:f2,47:p2,50:Dg},QF(iy,[2,18],{18:[1,64]}),{29:[1,65]},{22:[1,66]},QF(hy,[2,32]),QF(iy,[2,13]),QF(iy,[2,17]),QF(dy,vg,{8:67}),QF(iy,[2,24]),QF(iy,[2,25]),{4:Xg,5:Gg,6:28,9:14,10:16,11:18,14:Kg,15:Zg,17:Jg,19:[1,68],20:Qg,22:ey,23:ty,24:Eg,25:ry,26:Bi,27:Ii,30:29,31:Ri,33:pg,35:gg,36:6,41:yg,42:mg,43:n2,44:f2,47:p2,50:Dg},QF(iy,[2,19])],defaultActions:{7:[2,43],8:[2,1],9:[2,2],10:[2,3],50:[2,41],51:[2,42],55:[2,45]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return 41;case 1:return 42;case 2:return 43;case 3:return 44;case 4:return this.begin("open_directive"),50;case 5:return this.begin("type_directive"),51;case 6:return this.popState(),this.begin("arg_directive"),39;case 7:return this.popState(),this.popState(),53;case 8:return 52;case 9:case 10:break;case 11:return 5;case 12:case 13:case 14:case 15:break;case 16:return this.pushState("SCALE"),15;case 17:return 16;case 18:this.popState();break;case 19:return this.begin("acc_title"),31;case 20:return this.popState(),"acc_title_value";case 21:return this.begin("acc_descr"),33;case 22:return this.popState(),"acc_descr_value";case 23:this.begin("acc_descr_multiline");break;case 24:this.popState();break;case 25:return"acc_descr_multiline_value";case 26:this.pushState("STATE");break;case 27:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),23;case 28:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),24;case 29:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),25;case 30:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),23;case 31:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),24;case 32:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),25;case 33:return 41;case 34:return 42;case 35:return 43;case 36:return 44;case 37:this.begin("STATE_STRING");break;case 38:return this.popState(),this.pushState("STATE_ID"),"AS";case 39:return this.popState(),"ID";case 40:this.popState();break;case 41:return"STATE_DESCR";case 42:return 17;case 43:this.popState();break;case 44:return this.popState(),this.pushState("struct"),18;case 45:return this.popState(),19;case 46:break;case 47:return this.begin("NOTE"),27;case 48:return this.popState(),this.pushState("NOTE_ID"),48;case 49:return this.popState(),this.pushState("NOTE_ID"),49;case 50:this.popState(),this.pushState("FLOATING_NOTE");break;case 51:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 52:break;case 53:return"NOTE_TEXT";case 54:return this.popState(),"ID";case 55:return this.popState(),this.pushState("NOTE_TEXT"),22;case 56:return this.popState(),e.yytext=e.yytext.substr(2).trim(),29;case 57:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),29;case 58:case 59:return 7;case 60:return 14;case 61:return 47;case 62:return 22;case 63:return e.yytext=e.yytext.trim(),12;case 64:return 13;case 65:return 26;case 66:return 5;case 67:return"INVALID"}},rules:[/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[13,14],inclusive:!1},close_directive:{rules:[13,14],inclusive:!1},arg_directive:{rules:[7,8,13,14],inclusive:!1},type_directive:{rules:[6,7,13,14],inclusive:!1},open_directive:{rules:[5,13,14],inclusive:!1},struct:{rules:[13,14,26,33,34,35,36,45,46,47,61,62,63,64,65],inclusive:!1},FLOATING_NOTE_ID:{rules:[54],inclusive:!1},FLOATING_NOTE:{rules:[51,52,53],inclusive:!1},NOTE_TEXT:{rules:[56,57],inclusive:!1},NOTE_ID:{rules:[55],inclusive:!1},NOTE:{rules:[48,49,50],inclusive:!1},acc_descr_multiline:{rules:[24,25],inclusive:!1},acc_descr:{rules:[22],inclusive:!1},acc_title:{rules:[20],inclusive:!1},SCALE:{rules:[17,18],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[39],inclusive:!1},STATE_STRING:{rules:[40,41],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[13,14,27,28,29,30,31,32,37,38,42,43,44],inclusive:!1},ID:{rules:[13,14],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,12,14,15,16,19,21,23,26,44,47,58,59,60,61,62,63,64,66,67],inclusive:!0}}};var KF=new((JF.prototype=fy).Parser=JF);function QF(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function JF(){this.yy={}}KF.parser=KF;const tP=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.state)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*stateDiagram/)},eP=(t,e)=>{return!!(null!==t.match(/^\s*stateDiagram-v2/)||t.match(/^\s*stateDiagram/)&&"dagre-wrapper"===(null==(t=null==e?void 0:e.state)?void 0:t.defaultRenderer))},rP=t=>JSON.parse(JSON.stringify(t));let nP=[];const iP=(r,n,t)=>{if("relation"===n.stmt)iP(r,n.state1,!0),iP(r,n.state2,!1);else if("state"===n.stmt&&"[*]"===n.id&&(n.id=t?r.id+"_start":r.id+"_end",n.start=t),n.doc){var i,a=[];let t=0,e=[];for(t=0;t<n.doc.length;t++)"divider"===n.doc[t].type?((i=rP(n.doc[t])).doc=rP(e),a.push(i),e=[]):e.push(n.doc[t]);0<a.length&&0<e.length&&(r={stmt:"state",id:i_(),type:"divider",doc:rP(e)},a.push(rP(r)),n.doc=a),n.doc.forEach(t=>iP(n,t,!0))}},aP=()=>({relations:[],states:{},documents:{}});let oP={root:aP()},sP=oP.root,cP=0;function lP(e,t,r,n,i){"u"<typeof sP.states[e]?sP.states[e]={id:e,descriptions:[],type:t,doc:r,note:i}:(sP.states[e].doc||(sP.states[e].doc=r),sP.states[e].type||(sP.states[e].type=t)),n&&(C.info("Adding state ",e,n),"string"==typeof n&&dP(e,n.trim()),"object"==typeof n)&&n.forEach(t=>dP(e,t.trim())),i&&(sP.states[e].note=i,sP.states[e].note.text=H4.sanitizeText(sP.states[e].note.text,V()))}function uP(t){oP={root:aP()},sP=oP.root,sP=oP.root,cP=0,pP=[],t||X6()}function hP(t,e,r){let n=t,i=e,a="default",o="default";"[*]"===t&&(cP++,n="start"+cP,a="start"),"[*]"===e&&(i="end"+cP,o="end"),lP(n,a),lP(i,o),sP.relations.push({id1:n,id2:i,title:H4.sanitizeText(r,V())})}function dP(t,e){t=sP.states[t];let r=e;":"===r[0]&&(r=r.substr(1).trim()),t.descriptions.push(H4.sanitizeText(r,V()))}let fP=0;let pP=[];let gP="TB";const yP={parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().state,addState:lP,clear:uP,getState:function(t){return sP.states[t]},getStates:function(){return sP.states},getRelations:function(){return sP.relations},getClasses:()=>pP,getDirection:()=>gP,addRelation:hP,getDividerId:()=>"divider-id-"+ ++fP,setDirection:t=>{gP=t},cleanupLabel:function(t){return(":"===t.substring(0,1)?t.substr(2):t).trim()},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},logDocuments:function(){C.info("Documents = ",oP)},getRootDoc:()=>nP,setRootDoc:t=>{C.info("Setting root doc",t),nP=t},getRootDocV2:()=>(iP({id:"root"},{id:"root",doc:nP},!0),{id:"root",doc:nP}),extract:t=>{let e;e=t.doc||t,C.info(e),uP(!0),C.info("Extract",e),e.forEach(t=>{"state"===t.stmt&&lP(t.id,t.type,t.doc,t.description,t.note),"relation"===t.stmt&&hP(t.state1.id,t.state2.id,t.description)})},trimColon:t=>(t&&":"===t[0]?t.substr(1):t).trim(),getAccTitle:K6,setAccTitle:Z6,getAccDescription:J6,setAccDescription:Q6},mP=(t,e)=>{const r=t.append("text").attr("x",2*V().state.padding).attr("y",V().state.textHeight+1.3*V().state.padding).attr("font-size",V().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),n=r.height,i=t.append("text").attr("x",V().state.padding).attr("y",n+.4*V().state.padding+V().state.dividerMargin+V().state.textHeight).attr("class","state-description");let a=!0,o=!0;e.descriptions.forEach(function(t){{var e,r;a||(e=i,r=o,e=e.append("tspan").attr("x",2*V().state.padding).text(t),r||e.attr("dy",V().state.textHeight),o=!1)}a=!1});var e=t.append("line").attr("x1",V().state.padding).attr("y1",V().state.padding+n+V().state.dividerMargin/2).attr("y2",V().state.padding+n+V().state.dividerMargin/2).attr("class","descr-divider"),s=i.node().getBBox(),c=Math.max(s.width,r.width);return e.attr("x2",c+3*V().state.padding),t.insert("rect",":first-child").attr("x",V().state.padding).attr("y",V().state.padding).attr("width",c+2*V().state.padding).attr("height",s.height+n+2*V().state.padding).attr("rx",V().state.radius),t},bP=(t,e,r)=>{var n=V().state.padding,i=2*V().state.padding,a=t.node().getBBox(),o=a.width,a=a.x,s=t.append("text").attr("x",0).attr("y",V().state.titleShift).attr("font-size",V().state.fontSize).attr("class","state-title").text(e.id),c=s.node().getBBox().width+i;let l=Math.max(c,o);l===o&&(l+=i);let u;var h=t.node().getBBox(),e=(e.doc,u=a-n,o<c&&(u=(o-l)/2+n),Math.abs(a-h.x)<n&&o<c&&(u=a-(c-o)/2),1-V().state.textHeight);return t.insert("rect",":first-child").attr("x",u).attr("y",e).attr("class",r?"alt-composit":"composit").attr("width",l).attr("height",h.height+V().state.textHeight+V().state.titleShift+1).attr("rx","0"),s.attr("x",u+n),c<=o&&s.attr("x",a+(l-i)/2-c/2+n),t.insert("rect",":first-child").attr("x",u).attr("y",V().state.titleShift-V().state.textHeight-V().state.padding).attr("width",l).attr("height",3*V().state.textHeight).attr("rx",V().state.radius),t.insert("rect",":first-child").attr("x",u).attr("y",V().state.titleShift-V().state.textHeight-V().state.padding).attr("width",l).attr("height",h.height+3+2*V().state.textHeight).attr("rx",V().state.radius),t},_P=(t,e)=>{e.attr("class","state-note");var r=e.append("rect").attr("x",0).attr("y",V().state.padding),{textWidth:t,textHeight:e}=((t,e,r,n)=>{let i=0;var a=n.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let o=t.replace(/\r\n/g,"<br/>");n=(o=o.replace(/\n/g,"<br/>")).split(H4.lineBreakRegex);let s=1.25*V().state.noteMargin;for(const u of n){var c,l=u.trim();0<l.length&&((c=a.append("tspan")).text(l),0===s&&(s+=c.node().getBBox().height),i+=s,c.attr("x",e+V().state.noteMargin),c.attr("y",r+i+1.25*V().state.noteMargin))}return{textWidth:a.node().getBBox().width,textHeight:i}})(t,0,0,e.append("g"));return r.attr("height",e+2*V().state.noteMargin),r.attr("width",t+2*V().state.noteMargin),r},vP=function(r,n){var t,i=n.id,e={id:i,label:n.id,width:0,height:0},r=r.append("g").attr("id",i).attr("class","stateGroup");if("start"===n.type&&r.append("circle").attr("class","start-state").attr("r",V().state.sizeUnit).attr("cx",V().state.padding+V().state.sizeUnit).attr("cy",V().state.padding+V().state.sizeUnit),"end"===n.type&&((i=r).append("circle").attr("class","end-state-outer").attr("r",V().state.sizeUnit+V().state.miniPadding).attr("cx",V().state.padding+V().state.sizeUnit+V().state.miniPadding).attr("cy",V().state.padding+V().state.sizeUnit+V().state.miniPadding),i.append("circle").attr("class","end-state-inner").attr("r",V().state.sizeUnit).attr("cx",V().state.padding+V().state.sizeUnit+2).attr("cy",V().state.padding+V().state.sizeUnit+2)),"fork"===n.type||"join"===n.type){var i=r,a=n;let t=V().state.forkWidth,e=V().state.forkHeight;a.parentId&&(a=t,t=e,e=a),i.append("rect").style("stroke","black").style("fill","black").attr("width",t).attr("height",e).attr("x",V().state.padding).attr("y",V().state.padding)}"note"===n.type&&_P(n.note.text,r),"divider"===n.type&&r.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",V().state.textHeight).attr("class","divider").attr("x2",2*V().state.textHeight).attr("y1",0).attr("y2",0),"default"===n.type&&0===n.descriptions.length&&(a=n,a=(i=r).append("text").attr("x",2*V().state.padding).attr("y",V().state.textHeight+2*V().state.padding).attr("font-size",V().state.fontSize).attr("class","state-title").text(a.id),t=a.node().getBBox(),i.insert("rect",":first-child").attr("x",V().state.padding).attr("y",V().state.padding).attr("width",t.width+2*V().state.padding).attr("height",t.height+2*V().state.padding).attr("rx",V().state.radius)),"default"===n.type&&0<n.descriptions.length&&mP(r,n);i=r.node().getBBox();return e.width=i.width+2*V().state.padding,e.height=i.height+2*V().state.padding,e};let xP=0;const kP=function(i,a,o){a.points=a.points.filter(t=>!Number.isNaN(t.y));var s=a.points,t=Yy().x(function(t){return t.x}).y(function(t){return t.y}).curve(Fm),t=i.append("path").attr("d",t(s)).attr("id","edge"+xP).attr("class","transition");let e="";if(V().state.arrowMarkerAbsolute&&(e=(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),t.attr("marker-end","url("+e+"#"+function(t){switch(t){case yP.relationType.AGGREGATION:return"aggregation";case yP.relationType.EXTENSION:return"extension";case yP.relationType.COMPOSITION:return"composition";case yP.relationType.DEPENDENCY:return"dependency"}}(yP.relationType.DEPENDENCY)+"End)"),typeof o.title<"u"){const h=i.append("g").attr("class","stateLabel"),{x:d,y:f}=g_.calcLabelPosition(a.points),p=H4.getRows(o.title);let r=0;var c=[];let e=0,n=0;for(let t=0;t<=p.length;t++){var l=h.append("text").attr("text-anchor","middle").text(p[t]).attr("x",d).attr("y",f+r),u=l.node().getBBox();e=Math.max(e,u.width),n=Math.min(n,u.x),C.info(u.x,d,f+r),0===r&&(r=l.node().getBBox().height,C.info("Title height",r,f)),c.push(l)}let t=r*p.length;if(1<p.length){const g=(p.length-1)*r*.5;c.forEach((t,e)=>t.attr("y",f+e*r-g)),t=r*p.length}s=h.node().getBBox();h.insert("rect",":first-child").attr("class","box").attr("x",d-e/2-V().state.padding/2).attr("y",f-t/2-V().state.padding/2-3.5).attr("width",e+V().state.padding).attr("height",t+V().state.padding),C.info(s)}xP++};let wP;const EP={},TP=t=>t?t.length*wP.fontSizeFactor:1,CP=(t,r,n,i,a,o,s)=>{const c=new RN.Graph({compound:!0,multigraph:!0});let e,l=!0;for(e=0;e<t.length;e++)if("relation"===t[e].stmt){l=!1;break}n?c.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:l?1:wP.edgeLengthFactor,nodeSep:l?1:50,isMultiGraph:!0}):c.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:l?1:wP.edgeLengthFactor,nodeSep:l?1:50,ranker:"tight-tree",isMultiGraph:!0}),c.setDefaultEdgeLabel(function(){return{}}),s.db.extract(t);var u=s.db.getStates(),h=s.db.getRelations(),d=Object.keys(u);for(let e=0;e<d.length;e++){var f,p,g=u[d[e]];n&&(g.parentId=n);let t;g.doc?(f=r.append("g").attr("id",g.id).attr("class","stateGroup"),t=CP(g.doc,f,g.id,!i,a,o,s),f=(f=bP(f,g,i)).node().getBBox(),t.width=f.width,t.height=f.height+wP.padding/2,EP[g.id]={y:wP.compositTitleSize}):t=vP(r,g),g.note?(f={descriptions:[],id:g.id+"-note",note:g.note,type:"note"},p=vP(r,f),"left of"===g.note.position?(c.setNode(t.id+"-note",p),c.setNode(t.id,t)):(c.setNode(t.id,t),c.setNode(t.id+"-note",p)),c.setParent(t.id,t.id+"-group"),c.setParent(t.id+"-note",t.id+"-group")):c.setNode(t.id,t)}C.debug("Count=",c.nodeCount(),c);let y=0;h.forEach(function(t){y++,C.debug("Setting edge",t),c.setEdge(t.id1,t.id2,{relation:t,width:TP(t.title),height:wP.labelHeight*H4.getRows(t.title).length,labelpos:"c"},"id"+y)}),JD.layout(c),C.debug("Graph after layout",c.nodes());const m=r.node();c.nodes().forEach(function(t){typeof t<"u"&&typeof c.node(t)<"u"?(C.warn("Node "+t+": "+JSON.stringify(c.node(t))),a.select("#"+m.id+" #"+t).attr("transform","translate("+(c.node(t).x-c.node(t).width/2)+","+(c.node(t).y+(EP[t]?EP[t].y:0)-c.node(t).height/2)+" )"),a.select("#"+m.id+" #"+t).attr("data-x-shift",c.node(t).x-c.node(t).width/2),o.querySelectorAll("#"+m.id+" #"+t+" .divider").forEach(t=>{var e=t.parentElement;let r=0,n=0;e&&(e.parentElement&&(r=e.parentElement.getBBox().width),n=parseInt(e.getAttribute("data-x-shift"),10),Number.isNaN(n))&&(n=0),t.setAttribute("x1",0-n+8),t.setAttribute("x2",r-n-8)})):C.debug("No Node "+t+": "+JSON.stringify(c.node(t)))});m.getBBox();c.edges().forEach(function(t){typeof t<"u"&&typeof c.edge(t)<"u"&&(C.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(c.edge(t))),kP(r,c.edge(t),c.edge(t).relation))}),h=m.getBBox();var b={id:n||"root",label:n||"root",width:0,height:0};return b.width=h.width+2*wP.padding,b.height=h.height+2*wP.padding,C.debug("Doc rendered",b,c),b},SP={setConf:function(){},draw:function(t,e,r,n){wP=V().state;var i=V().securityLevel;let a;"sandbox"===i&&(a=H("#i"+e));var o=H("sandbox"===i?a.nodes()[0].contentDocument.body:"body"),i="sandbox"===i?a.nodes()[0].contentDocument:document,t=(C.debug("Rendering diagram "+t),o.select(`[id='${e}']`)),s=(t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z"),new RN.Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}}),n.db.getRootDoc()),s=(CP(s,t,void 0,!1,o,i,n),wP.padding),o=t.node().getBBox(),i=o.width+2*s,s=o.height+2*s,c=1.75*i;f6(t,s,c,wP.useMaxWidth),t.attr("viewBox",`${o.x-wP.padding}  ${o.y-wP.padding} `+i+" "+s),vv(n.db,t,e)}},AP={};let MP={};const NP=(r,t,n,e)=>{if("root"!==n.id){let t="rect";!0===n.start&&(t="start"),!1===n.start&&(t="end"),"default"!==n.type&&(t=n.type),MP[n.id]||(MP[n.id]={id:n.id,shape:t,description:H4.sanitizeText(n.id,V()),classes:"statediagram-state"}),n.description&&(Array.isArray(MP[n.id].description)?(MP[n.id].shape="rectWithTitle",MP[n.id].description.push(n.description)):0<MP[n.id].description.length?(MP[n.id].shape="rectWithTitle",MP[n.id].description===n.id?MP[n.id].description=[n.description]:MP[n.id].description=[MP[n.id].description,n.description]):(MP[n.id].shape="rect",MP[n.id].description=n.description),MP[n.id].description=H4.sanitizeTextOrArray(MP[n.id].description,V())),1===MP[n.id].description.length&&"rectWithTitle"===MP[n.id].shape&&(MP[n.id].shape="rect"),!MP[n.id].type&&n.doc&&(C.info("Setting cluster for ",n.id,LP(n)),MP[n.id].type="group",MP[n.id].dir=LP(n),MP[n.id].shape="divider"===n.type?"divider":"roundedWithTitle",MP[n.id].classes=MP[n.id].classes+" "+(e?"statediagram-cluster statediagram-cluster-alt":"statediagram-cluster"));var i={labelStyle:"",shape:MP[n.id].shape,labelText:MP[n.id].description,classes:MP[n.id].classes,style:"",id:n.id,dir:MP[n.id].dir,domId:"state-"+n.id+"-"+DP,type:MP[n.id].type,padding:15};if(n.note){var a={labelStyle:"",shape:"note",labelText:n.note.text,classes:"statediagram-note",style:"",id:n.id+"----note-"+DP,domId:"state-"+n.id+"----note-"+DP,type:MP[n.id].type,padding:15},o={labelStyle:"",shape:"noteGroup",labelText:n.note.text,classes:MP[n.id].classes,style:"",id:n.id+"----parent",domId:"state-"+n.id+"----parent-"+DP,type:"group",padding:0};DP++,r.setNode(n.id+"----parent",o),r.setNode(a.id,a),r.setNode(n.id,i),r.setParent(n.id,n.id+"----parent"),r.setParent(a.id,n.id+"----parent");let t=n.id,e=a.id;"left of"===n.note.position&&(t=a.id,e=n.id),r.setEdge(t,e,{arrowhead:"none",arrowType:"",style:"fill:none",labelStyle:"",classes:"transition note-edge",arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal"})}else r.setNode(n.id,i)}var s,c,l;t&&"root"!==t.id&&(C.trace("Setting node ",n.id," to be child of its parent ",t.id),r.setParent(n.id,t.id)),n.doc&&(C.trace("Adding nodes children "),s=r,o=(c=n).doc,l=!e,C.trace("items",o),o.forEach(t=>{var e,r;"state"===t.stmt||"default"===t.stmt?NP(s,c,t,l):"relation"===t.stmt&&(NP(s,c,t.state1,l),NP(s,c,t.state2,l),e={id:"edge"+DP,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:"fill:none",labelStyle:"",label:H4.sanitizeText(t.description,V()),arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal",classes:"transition"},r=t.state1.id,t=t.state2.id,s.setEdge(r,t,e,DP),DP++)}))};let DP=0;const LP=(e,t)=>{let r=t||"TB";if(e.doc)for(let t=0;t<e.doc.length;t++){var n=e.doc[t];"dir"===n.stmt&&(r=n.value)}return r},BP={setConf:function(e){var r=Object.keys(e);for(let t=0;t<r.length;t++)AP[r[t]]=e[r[t]]},getClasses:function(t,e){return C.trace("Extracting classes"),e.sb.clear(),e.parser.parse(t),e.sb.getClasses()},draw:function(t,e,r,n){C.info("Drawing state diagram (v2)",e),MP={},n.db.getDirection();var{securityLevel:i,state:a}=V(),o=a.nodeSpacing||50,s=a.rankSpacing||50,o=(C.info(n.db.getRootDocV2()),n.db.extract(n.db.getRootDocV2()),C.info(n.db.getRootDocV2()),new RN.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:LP(n.db.getRootDocV2()),nodesep:o,ranksep:s,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}));NP(o,void 0,n.db.getRootDocV2(),!0);let c;"sandbox"===i&&(c=H("#i"+e));var s=H("sandbox"===i?c.nodes()[0].contentDocument.body:"body"),i=s.select(`[id="${e}"]`),s=s.select("#"+e+" g"),s=(WL(s,o,["barb"],"statediagram",e),i.node().getBBox()),o=s.width+16,s=s.height+16,l=(i.attr("class","statediagram"),i.node().getBBox()),a=(f6(i,s,o,a.useMaxWidth),`${l.x-8} ${l.y-8} ${o} `+s),u=(C.debug("viewBox "+a),i.attr("viewBox",a),document.querySelectorAll('[id="'+e+'"] .edgeLabel .label'));for(let t=0;t<u.length;t++){var h=u[t],d=h.getBBox(),f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("rx",0),f.setAttribute("ry",0),f.setAttribute("width",d.width),f.setAttribute("height",d.height),h.insertBefore(f,h.firstChild)}vv(n.db,i,e)}};Bg=[1,15],Gm=[1,16],e3=[1,17],IP=[1,18],RP=[1,19],FP=[1,20],P=[1,24],Uf=[4,6,9,11,17,18,20,22,23,24,26],(OP={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,r,n,i,a,o){var s=a.length-1;switch(i){case 1:return a[s-1];case 3:this.$=[];break;case 4:a[s-1].push(a[s]),this.$=a[s-1];break;case 5:case 6:this.$=a[s];break;case 7:case 8:this.$=[];break;case 11:n.setDiagramTitle(a[s].substr(6)),this.$=a[s].substr(6);break;case 12:this.$=a[s].trim(),n.setAccTitle(this.$);break;case 13:case 14:this.$=a[s].trim(),n.setAccDescription(this.$);break;case 15:n.addSection(a[s].substr(8)),this.$=a[s].substr(8);break;case 16:n.addTask(a[s-1],a[s]),this.$="task";break;case 18:n.parseDirective("%%{","open_directive");break;case 19:n.parseDirective(a[s],"type_directive");break;case 20:a[s]=a[s].trim().replace(/'/g,'"'),n.parseDirective(a[s],"arg_directive");break;case 21:n.parseDirective("}%%","close_directive","journey")}},table:[{3:1,4:OP=[1,2],7:3,12:4,26:Nf=[1,5]},{1:[3]},$P(Lf=[6,9,11,17,18,20,22,23,24,26],[2,3],{5:6}),{3:7,4:OP,7:3,12:4,26:Nf},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:Bg,18:Gm,20:e3,22:IP,23:RP,24:FP,26:Nf},{1:[2,2]},{14:22,15:[1,23],29:P},$P([15,29],[2,19]),$P(Lf,[2,8],{1:[2,1]}),$P(Lf,[2,4]),{7:21,10:25,12:4,17:Bg,18:Gm,20:e3,22:IP,23:RP,24:FP,26:Nf},$P(Lf,[2,6]),$P(Lf,[2,7]),$P(Lf,[2,11]),{19:[1,26]},{21:[1,27]},$P(Lf,[2,14]),$P(Lf,[2,15]),{25:[1,28]},$P(Lf,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},$P(Lf,[2,5]),$P(Lf,[2,12]),$P(Lf,[2,13]),$P(Lf,[2,16]),$P(Uf,[2,9]),{14:32,29:P},{29:[2,20]},{11:[1,33]},$P(Uf,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,n=[0],i=[],a=[null],o=[],s=this.table,c="",l=0,u=0,h=1,d=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(p.yy[e]=this.yy[e]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,"u"<typeof f.yylloc&&(f.yylloc={});var g=f.yylloc,y=(o.push(g),f.options&&f.options.ranges);"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,v,x,k,w={};;){if(b=n[n.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(E=void 0,"number"!=typeof(E=i.pop()||f.lex()||h)&&(E instanceof Array&&(E=(i=E).pop()),E=r.symbols_[E]||E),m=E),s[b]&&s[b][m]))||!_.length||!_[0]){var E="",T=[];for(v in s[b])this.terminals_[v]&&2<v&&T.push("'"+this.terminals_[v]+"'");E=f.showPosition?"Parse error on line "+(l+1)+`:
`+f.showPosition()+`
Expecting `+T.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(E,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:T})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:n.push(m),a.push(f.yytext),o.push(f.yylloc),n.push(_[1]),m=null,u=f.yyleng,c=f.yytext,l=f.yylineno,g=f.yylloc;break;case 2:if(x=this.productions_[_[1]][1],w.$=a[a.length-x],w._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},y&&(w._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),typeof(k=this.performAction.apply(w,[c,u,l,p.yy,_[1],a,o].concat(d)))<"u")return k;x&&(n=n.slice(0,-1*x*2),a=a.slice(0,-1*x),o=o.slice(0,-1*x)),n.push(this.productions_[_[1]][0]),a.push(w.$),o.push(w._$),k=s[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(n.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var i in n)this[i]=n[i];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length;a++)if((r=this._input.match(this.rules[i[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:case 6:break;case 7:return 11;case 8:case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};var OP,IP,RP,FP,PP=new((jP.prototype=OP).Parser=jP);function $P(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}function jP(){this.yy={}}PP.parser=PP;const YP=t=>null!==t.match(/^\s*journey/);let zP="";function UP(){var e;let r=!0;for(let t=0;t<XP.length;t++)e=t,XP[e].processed,r=r&&XP[t].processed;return r}function WP(t,e){return(t=t.append("rect")).attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),typeof e.class<"u"&&t.attr("class",e.class),t}function qP(t,e){return(t=t.append("circle")).attr("cx",e.cx),t.attr("cy",e.cy),t.attr("class","actor-"+e.pos),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("r",e.r),typeof t.class<"u"&&t.attr("class",t.class),typeof e.title<"u"&&t.append("title").text(e.title),t}function HP(t,e){var r=e.text.replace(/<br\s*\/?>/gi," "),n=((t=t.append("text")).attr("x",e.x),t.attr("y",e.y),t.attr("class","legend"),t.style("text-anchor",e.anchor),typeof e.class<"u"&&t.attr("class",e.class),t.append("tspan"));return n.attr("x",e.x+2*e.textMargin),n.text(r),t}const VP=[],GP=[],XP=[],ZP={parseDirective:function(t,e,r){x$.parseDirective(this,t,e,r)},getConfig:()=>V().journey,clear:function(){VP.length=0,GP.length=0,zP="",XP.length=0,X6()},setDiagramTitle:tv,getDiagramTitle:ev,setAccTitle:Z6,getAccTitle:K6,setAccDescription:Q6,getAccDescription:J6,addSection:function(t){zP=t,VP.push(t)},getSections:function(){return VP},getTasks:function(){let t=UP();let e=0;for(;!t&&e<100;)t=UP(),e++;return GP.push(...XP),GP},addTask:function(t,e){e=e.substr(1).split(":");let r=0,n=[];e=(n=1===e.length?(r=Number(e[0]),[]):(r=Number(e[0]),e[1].split(","))).map(t=>t.trim()),e={section:zP,type:zP,people:e,task:t,score:r};XP.push(e)},addTaskOrg:function(t){t={section:zP,type:zP,description:t,task:t,classes:[]};GP.push(t)},getActors:function(){{const e=[];return GP.forEach(t=>{t.people&&e.push(...t.people)}),[...new Set(e)].sort()}}};let KP=-1;function QP(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}}const JP=function(t){return"fo"===t.textPlacement?i$:"old"===t.textPlacement?r$:n$},t$={drawRect:WP,drawCircle:qP,drawSection:function(t,e,r){var t=t.append("g"),n=QP();n.x=e.x,n.y=e.y,n.fill=e.fill,n.width=r.width,n.height=r.height,n.class="journey-section section-type-"+e.num,n.rx=3,n.ry=3,WP(t,n),JP(r)(e.text,t,n.x,n.y,n.width,n.height,{class:"journey-section section-type-"+e.num},r,e.colour)},drawText:HP,drawLabel:function(t,e){var r,n,i,a,o,s=t.append("polygon");s.attr("points",(r=e.x,n=e.y,r+","+n+" "+(r+(i=50))+","+n+" "+(r+i)+","+(n+(a=20)-(o=7))+" "+(r+i-1.2*o)+","+(n+a)+" "+r+","+(n+a))),s.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,HP(t,e)},drawTask:function(t,r,e){const n=r.x+e.width/2,i=t.append("g");KP++;i.append("line").attr("id","task"+KP).attr("x1",n).attr("y1",r.y).attr("x2",n).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),t=i,a={cx:n,cy:300+30*(5-r.score),score:r.score},t.append("circle").attr("cx",a.cx).attr("cy",a.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),(t=t.append("g")).append("circle").attr("cx",a.cx-5).attr("cy",a.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),t.append("circle").attr("cx",a.cx+5).attr("cy",a.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),3<a.score?(o=t,s=Oy().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175),o.append("path").attr("class","mouth").attr("d",s).attr("transform","translate("+a.cx+","+(a.cy+2)+")")):a.score<3?(o=t,s=Oy().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175),o.append("path").attr("class","mouth").attr("d",s).attr("transform","translate("+a.cx+","+(a.cy+7)+")")):t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",a.cx-5).attr("y1",a.cy+7).attr("x2",a.cx+5).attr("y2",a.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666");var a,o,s,t=QP();t.x=r.x,t.y=r.y,t.fill=r.fill,t.width=e.width,t.height=e.height,t.class="task task-type-"+r.num,t.rx=3,t.ry=3,WP(i,t);let c=r.x+14;r.people.forEach(t=>{var e=r.actors[t].color,e={cx:c,cy:r.y,r:7,fill:e,stroke:"#000",title:t,pos:r.actors[t].position};qP(i,e),c+=10}),JP(e)(r.task,i,t.x,t.y,t.width,t.height,{class:"task"},e,r.colour)},drawBackgroundRect:function(t,e){WP(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},getTextObj:function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},getNoteRect:QP,initGraphics:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}},e$={};function r$(t,e,r,n,i,a,o,s){a$(e.append("text").attr("x",r+i/2).attr("y",n+a/2+5).style("font-color",s).style("text-anchor","middle").text(t),o)}function n$(t,e,r,n,i,a,o,s,c){var{taskFontSize:l,taskFontFamily:u}=s,h=t.split(/<br\s*\/?>/gi);for(let t=0;t<h.length;t++){var d=t*l-l*(h.length-1)/2,f=e.append("text").attr("x",r+i/2).attr("y",n).attr("fill",c).style("text-anchor","middle").style("font-size",l).style("font-family",u);f.append("tspan").attr("x",r+i/2).attr("dy",d).text(h[t]),f.attr("y",n+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),a$(f,o)}}function i$(t,e,r,n,i,a,o,s){var e=e.append("switch"),c=e.append("foreignObject").attr("x",r).attr("y",n).attr("width",i).attr("height",a).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");c.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),n$(t,e,r,n,i,a,o,s),a$(c,o)}function a$(t,e){for(const r in e)r in e&&t.attr(r,e[r])}const o$=V().journey,s$=o$.leftMargin,c$={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,r,n){"u"<typeof t[e]?t[e]=r:t[e]=n(r,t[e])},updateBounds:function(r,n,i,a){const o=V().journey,s=this;let c=0;var l;this.sequenceItems.forEach(function(t){c++;var e=s.sequenceItems.length-c+1;s.updateVal(t,"starty",n-e*o.boxMargin,Math.min),s.updateVal(t,"stopy",a+e*o.boxMargin,Math.max),s.updateVal(c$.data,"startx",r-e*o.boxMargin,Math.min),s.updateVal(c$.data,"stopx",i+e*o.boxMargin,Math.max),"activation"!==l&&(s.updateVal(t,"startx",r-e*o.boxMargin,Math.min),s.updateVal(t,"stopx",i+e*o.boxMargin,Math.max),s.updateVal(c$.data,"starty",n-e*o.boxMargin,Math.min),s.updateVal(c$.data,"stopy",a+e*o.boxMargin,Math.max))})},insert:function(t,e,r,n){var i=Math.min(t,r),t=Math.max(t,r),r=Math.min(e,n),e=Math.max(e,n);this.updateVal(c$.data,"startx",i,Math.min),this.updateVal(c$.data,"starty",r,Math.min),this.updateVal(c$.data,"stopx",t,Math.max),this.updateVal(c$.data,"stopy",e,Math.max),this.updateBounds(i,r,t,e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},l$=o$.sectionFills,u$=o$.sectionColours,h$={setConf:function(e){Object.keys(e).forEach(function(t){o$[t]=e[t]})},draw:function(t,e,r,n){const i=V().journey;n.db.clear(),n.parser.parse(t+`
`);t=V().securityLevel;let a;"sandbox"===t&&(a=H("#i"+e));var t=H("sandbox"===t?a.nodes()[0].contentDocument.body:"body"),t=(c$.init(),t.select("#"+e)),o=(t$.initGraphics(t),n.db.getTasks()),s=n.db.getDiagramTitle(),c=n.db.getActors();for(const v in e$)delete e$[v];let l=0;c.forEach(t=>{e$[t]={color:i.actorColours[l%i.actorColours.length],position:l},l++});{var u=t;const x=V().journey;let r=60;Object.keys(e$).forEach(t=>{var e=e$[t].color,e={cx:20,cy:r,r:7,fill:e,stroke:"#000",pos:e$[t].position},e=(t$.drawCircle(u,e),{x:40,y:r+7,fill:"#666",text:t,textMargin:5|x.boxTextMargin});t$.drawText(u,e),r+=20})}c$.insert(0,0,s$,50*Object.keys(e$).length);{var h=t,d=o,f=(c=0,V().journey);let e="";var p=2*f.height+f.diagramMarginY,g=c+p;let r=0,n="#CCC",i="black",a=0;for(let t=0;t<d.length;t++){var y=d[t],m,b=(e!==y.section&&(n=l$[r%l$.length],a=r%l$.length,i=u$[r%u$.length],m={x:t*f.taskMargin+t*f.width+s$,y:50,text:y.section,fill:n,num:a,colour:i},t$.drawSection(h,m,f),e=y.section,r++),y.people.reduce((t,e)=>(e$[e]&&(t[e]=e$[e]),t),{}));y.x=t*f.taskMargin+t*f.width+s$,y.y=g,y.width=f.diagramMarginX,y.height=f.diagramMarginY,y.colour=i,y.fill=n,y.num=a,y.actors=b,t$.drawTask(h,y,f),c$.insert(y.x,y.y,y.x+y.width+f.taskMargin,450)}}var o=c$.getBounds(),c=(s&&t.append("text").text(s).attr("x",s$).attr("font-size","4ex").attr("font-weight","bold").attr("y",25),o.stopy-o.starty+2*i.diagramMarginY),_=s$+o.stopx+2*i.diagramMarginX,s=(f6(t,c,_,i.useMaxWidth),t.append("line").attr("x1",s$).attr("y1",4*i.height).attr("x2",_-s$-4).attr("y2",4*i.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),s?70:0);t.attr("viewBox",o.startx+` -25 ${_} `+(c+s)),t.attr("preserveAspectRatio","xMinYMin meet"),t.attr("height",c+s+25),vv(n.db,t,e)}};let d$={};const f$={setConf:function(t){d$={...d$,...t}},draw:(t,e,r)=>{try{C.debug(`Renering svg for syntax error
`);var n=H("#"+e),i=n.append("g");i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+r),n.attr("height",100),n.attr("width",500),n.attr("viewBox","768 0 912 512")}catch(t){C.error("Error while rendering info diagram"),C.error((e=t)instanceof Error?e.message:String(e))}}};let p$=!1;const g$=()=>{p$||(p$=!0,j6("error",{db:{clear:()=>{}},styles:k6,renderer:f$,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},t=>"error"===t.toLowerCase().trim()),j6("c4",{parser:Rv,db:ex,renderer:kx,styles:D6,init:t=>{kx.setConf(t.c4)}},Pv),j6("class",{parser:e8,db:b8,renderer:sL,styles:v6,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,b8.clear()}},n8),j6("classDiagram",{parser:e8,db:b8,renderer:VL,styles:v6,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,b8.clear()}},i8),j6("er",{parser:GL,db:eB,renderer:bB,styles:x6},KL),j6("gantt",{parser:EI,db:nR,renderer:oR,styles:E6},SI),j6("info",{parser:sR,db:dR,renderer:fR,styles:T6},pR),j6("pie",{parser:gR,db:xR,renderer:ER,styles:C6},bR),j6("requirement",{parser:TR,db:OR,renderer:WR,styles:S6},AR),j6("sequence",{parser:qR,db:dF,renderer:ZF,styles:A6,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");dF.setWrap(t.wrap),ZF.setConf(t.sequence)}},GR),j6("state",{parser:KF,db:yP,renderer:SP,styles:M6,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,yP.clear()}},tP),j6("stateDiagram",{parser:KF,db:yP,renderer:BP,styles:M6,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,yP.clear()}},eP),j6("journey",{parser:PP,db:ZP,renderer:h$,styles:N6,init:t=>{h$.setConf(t.journey),ZP.clear()}},YP),j6("flowchart",{parser:_B,db:VB,renderer:vI,styles:w6,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,bI.setConf(t.flowchart),VB.clear(),VB.setGen("gen-1")}},xB),j6("flowchart-v2",{parser:_B,db:VB,renderer:vI,styles:w6,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,c6({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),vI.setConf(t.flowchart),VB.clear(),VB.setGen("gen-2")}},kB),j6("gitGraph",{parser:U6,db:_v,renderer:Bv,styles:Ov},q6))};class y${constructor(t,e){R(this,"type","graph"),R(this,"parser"),R(this,"renderer"),R(this,"db"),R(this,"detectTypeFailed",!1),this.txt=t;var r,n,i=V();this.txt=t;try{this.type=Mb(t,i)}catch(t){this.handleError(t,e),this.type="error",this.detectTypeFailed=!0}t=Y6(this.type);C.debug("Type "+this.type),this.db=t.db,null!=(n=(r=this.db).clear)&&n.call(r),this.renderer=t.renderer,this.parser=t.parser,this.parser.parser.yy=this.db,t.init&&(t.init(i),C.debug("Initialized diagram "+this.type,i)),this.txt+=`
`,this.parse(this.txt,e)}parse(t,e){if(!this.detectTypeFailed)try{return t+=`
`,this.db.clear(),this.parser.parse(t),!0}catch(t){this.handleError(t,e)}return!1}handleError(t,e){if(!e)throw t;p_(t)?e(t.str,t.hash):e(t)}getParser(){return this.parser}getType(){return this.type}}const m$=(e,r)=>{const n=Mb(e,V());try{return Y6(n),new y$(e,r)}catch(t){if(!(t instanceof z6))throw C.error(t),t;var i=Db(n);if(i)return i().then(({diagram:t})=>(j6(n,t,void 0),new y$(e,r)));throw new Error(`Loader for ${n} not found.`)}};function b$(t){let e=t;return e=(e=(e=e.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/#\w+;/g,function(t){t=t.substring(1,t.length-1);return/^\+?\d+$/.test(t)?""+t+"":""+t+""})}const _$=function(t){let e=t;return e=(e=(e=e.replace(//g,function(){return"&#"})).replace(//g,function(){return"&"})).replace(//g,function(){return";"})};let v$={};const x$=Object.freeze({render:function(e,r,t,n){g$(),h6(),r=r.replace(/\r\n?/g,`
`);var i=g_.detectInit(r),i=(i&&(d_(i),u6(i)),V());C.debug(i),r.length>i.maxTextSize&&(r="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let a=H("body");if(typeof n<"u")n&&(n.innerHTML=""),"sandbox"===i.securityLevel?(o=H(n).append("iframe").attr("id","i"+e).attr("style","width: 100%; height: 100%;").attr("sandbox",""),(a=H(o.nodes()[0].contentDocument.body)).node().style.margin=0):a=H(n),a.append("div").attr("id","d"+e).attr("style","font-family: "+i.fontFamily).append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g");else{var o=document.getElementById(e);o&&o.remove();let t;(t="sandbox"===i.securityLevel?document.querySelector("#i"+e):document.querySelector("#d"+e))&&t.remove(),"sandbox"===i.securityLevel?(n=H("body").append("iframe").attr("id","i"+e).attr("style","width: 100%; height: 100%;").attr("sandbox",""),(a=H(n.nodes()[0].contentDocument.body)).node().style.margin=0):a=H("body"),a.append("div").attr("id","d"+e).append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}r=b$(r);let s,c;try{if("then"in(s=m$(r)))throw new Error("Diagram is a promise")}catch(t){s=new y$("error"),c=t}var o=a.select("#d"+e).node(),n=s.type,o=o.firstChild,l=o.firstChild;let u="";if(void 0!==i.themeCSS&&(u+=`
`+i.themeCSS),void 0!==i.fontFamily&&(u+=`
:root { --mermaid-font-family: ${i.fontFamily}}`),void 0!==i.altFontFamily&&(u+=`
:root { --mermaid-alt-font-family: ${i.altFontFamily}}`),"flowchart"===n||"flowchart-v2"===n||"graph"===n){var h=bI.getClasses(r,s),d=i.htmlLabels||(null==(f=i.flowchart)?void 0:f.htmlLabels);for(const y in h)d?(u+=`
.${y} > * { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} span { ${h[y].styles.join(" !important; ")} !important; }`):(u+=`
.${y} path { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} rect { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} polygon { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} ellipse { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} circle { ${h[y].styles.join(" !important; ")} !important; }`,h[y].textStyles&&(u+=`
.${y} tspan { ${h[y].textStyles.join(" !important; ")} !important; }`))}var f=Q_(G_("#"+e+`{${B6(n,u,i.themeVariables)}}`),J_),p=document.createElement("style");p.innerHTML=`#${e} `+f,o.insertBefore(p,l);try{s.renderer.draw(r,e,t6.version,s)}catch(t){throw f$.draw(r,e,t6.version),t}a.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let g=a.select("#d"+e).node().innerHTML;if(C.debug("cnf.arrowMarkerAbsolute",i.arrowMarkerAbsolute),W4(i.arrowMarkerAbsolute)||"sandbox"===i.securityLevel||(g=g.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),g=(g=_$(g)).replace(/<br>/g,"<br/>"),"sandbox"===i.securityLevel){f=a.select("#d"+e+" svg").node();let t="100%";f&&(t=f.viewBox.baseVal.height+"px"),g=`<iframe style="width:100%;height:${t};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+g+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The iframe tag is not supported by your browser.
</iframe>`}else"loose"!==i.securityLevel&&(g=F4.sanitize(g,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(typeof t<"u")switch(n){case"flowchart":case"flowchart-v2":t(g,VB.bindFunctions);break;case"gantt":t(g,nR.bindFunctions);break;case"class":case"classDiagram":t(g,b8.bindFunctions);break;default:t(g)}else C.debug("CB = undefined!");yF();o=H("sandbox"===i.securityLevel?"#i"+e:"#d"+e).node();if(o&&"remove"in o&&o.remove(),c)throw c;return g},renderAsync:async function(e,r,t,n){g$(),h6(),r=r.replace(/\r\n?/g,`
`);var i=g_.detectInit(r),i=(i&&(d_(i),u6(i)),V());C.debug(i),r.length>i.maxTextSize&&(r="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let a=H("body");if(typeof n<"u")n&&(n.innerHTML=""),"sandbox"===i.securityLevel?(o=H(n).append("iframe").attr("id","i"+e).attr("style","width: 100%; height: 100%;").attr("sandbox",""),(a=H(o.nodes()[0].contentDocument.body)).node().style.margin=0):a=H(n),a.append("div").attr("id","d"+e).attr("style","font-family: "+i.fontFamily).append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g");else{var o=document.getElementById(e);o&&o.remove();let t;(t="sandbox"===i.securityLevel?document.querySelector("#i"+e):document.querySelector("#d"+e))&&t.remove(),"sandbox"===i.securityLevel?(n=H("body").append("iframe").attr("id","i"+e).attr("style","width: 100%; height: 100%;").attr("sandbox",""),(a=H(n.nodes()[0].contentDocument.body)).node().style.margin=0):a=H("body"),a.append("div").attr("id","d"+e).append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}r=b$(r);let s,c;try{s=await m$(r)}catch(t){s=new y$("error"),c=t}var o=a.select("#d"+e).node(),n=s.type,o=o.firstChild,l=o.firstChild;let u="";if(void 0!==i.themeCSS&&(u+=`
`+i.themeCSS),void 0!==i.fontFamily&&(u+=`
:root { --mermaid-font-family: ${i.fontFamily}}`),void 0!==i.altFontFamily&&(u+=`
:root { --mermaid-alt-font-family: ${i.altFontFamily}}`),"flowchart"===n||"flowchart-v2"===n||"graph"===n){var h=bI.getClasses(r,s),d=i.htmlLabels||(null==(f=i.flowchart)?void 0:f.htmlLabels);for(const y in h)d?(u+=`
.${y} > * { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} span { ${h[y].styles.join(" !important; ")} !important; }`):(u+=`
.${y} path { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} rect { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} polygon { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} ellipse { ${h[y].styles.join(" !important; ")} !important; }`,u+=`
.${y} circle { ${h[y].styles.join(" !important; ")} !important; }`,h[y].textStyles&&(u+=`
.${y} tspan { ${h[y].textStyles.join(" !important; ")} !important; }`))}var f=Q_(G_("#"+e+`{${B6(n,u,i.themeVariables)}}`),J_),p=document.createElement("style");p.innerHTML=`#${e} `+f,o.insertBefore(p,l);try{await s.renderer.draw(r,e,t6.version,s)}catch(t){throw f$.draw(r,e,t6.version),t}a.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let g=a.select("#d"+e).node().innerHTML;if(C.debug("cnf.arrowMarkerAbsolute",i.arrowMarkerAbsolute),W4(i.arrowMarkerAbsolute)||"sandbox"===i.securityLevel||(g=g.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),g=(g=_$(g)).replace(/<br>/g,"<br/>"),"sandbox"===i.securityLevel){f=a.select("#d"+e+" svg").node();let t="100%";f&&(t=f.viewBox.baseVal.height+"px"),g=`<iframe style="width:100%;height:${t};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+g+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The iframe tag is not supported by your browser.
</iframe>`}else"loose"!==i.securityLevel&&(g=F4.sanitize(g,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(typeof t<"u")switch(n){case"flowchart":case"flowchart-v2":t(g,VB.bindFunctions);break;case"gantt":t(g,nR.bindFunctions);break;case"class":case"classDiagram":t(g,b8.bindFunctions);break;default:t(g)}else C.debug("CB = undefined!");yF();o=H("sandbox"===i.securityLevel?"#i"+e:"#d"+e).node();if(o&&"remove"in o&&o.remove(),c)throw c;return g},parse:function(t,e){return g$(),new y$(t,e).parse(t,e)},parseAsync:async function(t,e){return g$(),(await m$(t,e)).parse(t,e)},parseDirective:function(t,e,r,n){try{if(void 0!==e)switch(e=e.trim(),r){case"open_directive":v$={};break;case"type_directive":if(!v$)throw new Error("currentDirective is undefined");v$.type=e.toLowerCase();break;case"arg_directive":if(!v$)throw new Error("currentDirective is undefined");v$.args=JSON.parse(e);break;case"close_directive":var i=t,a=v$,o=n;switch(C.debug(`Directive type=${a.type} with args:`,a.args),a.type){case"init":case"initialize":{["config"].forEach(t=>{typeof a.args[t]<"u"&&(o==="flowchart-v2"&&(o="flowchart"),a.args[o]=a.args[t],delete a.args[t])}),C.debug("sanitize in handleDirective",a.args),d_(a.args),C.debug("sanitize in handleDirective (done)",a.args),u6(a.args);break}case"wrap":case"nowrap":i&&i.setWrap&&i.setWrap(a.type==="wrap");break;case"themeCss":C.warn("themeCss encountered");break;default:C.warn(`Unhandled directive: source: '%%{${a.type}: ${JSON.stringify(a.args?a.args:{})}}%%`,a);break}v$=void 0}}catch(t){C.error(`Error while rendering sequenceDiagram directive: ${e} jison context: `+r),C.error(t.message)}},initialize:function(t={}){t.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),e=t,n6=Lb({},e),null!=t&&t.theme&&t.theme in kb?t.themeVariables=kb[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=kb.default.getThemeVariables(t.themeVariables));var e,t="object"==typeof t?(e=t,r6=Lb({},e6),r6=Lb(r6,e),e.theme&&kb[e.theme]&&(r6.themeVariables=kb[e.theme].getThemeVariables(e.themeVariables)),o6(r6,i6),r6):s6();$(t.logLevel),g$()},getConfig:V,setConfig:c6,getSiteConfig:s6,updateSiteConfig:t=>(r6=Lb(r6,t),o6(r6,i6),r6),reset:()=>{h6()},globalReset:()=>{h6(e6)},defaultConfig:e6});$(V().logLevel),h6(V());let k$=!1;function w$(t,e,r){var n=x$.getConfig();t&&(N$.sequenceConfig=t),C.debug(`${r?"":"No "}Callback function found`);let i;if("u"<typeof e)i=document.querySelectorAll(".mermaid");else if("string"==typeof e)i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");i=e}C.debug(`Found ${i.length} diagrams`),typeof(null==t?void 0:t.startOnLoad)<"u"&&(C.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),x$.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));var a=new g_.initIdGenerator(n.deterministicIds,n.deterministicIDSeed),o=[];for(const l of Array.from(i))if(C.info("Rendering diagram: "+l.id),!l.getAttribute("data-processed")){l.setAttribute("data-processed","true");const u="mermaid-"+a.next();s=l.innerHTML;var s=g_.entityDecode(s).trim().replace(/<br\s*\/?>/gi,"<br/>"),c=g_.detectInit(s);c&&C.debug("Detected early reinit: ",c);try{x$.render(u,s,(t,e)=>{l.innerHTML=t,typeof r<"u"&&r(u),e&&e(l)},l)}catch(t){C$(t,o,N$.parseError)}}if(0<o.length)throw o[0]}async function E$(t,e,r){var n=x$.getConfig();t&&(N$.sequenceConfig=t),C.debug(`${r?"":"No "}Callback function found`);let i;if("u"<typeof e)i=document.querySelectorAll(".mermaid");else if("string"==typeof e)i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");i=e}C.debug(`Found ${i.length} diagrams`),typeof(null==t?void 0:t.startOnLoad)<"u"&&(C.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),x$.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));var a=new g_.initIdGenerator(n.deterministicIds,n.deterministicIDSeed),o=[];for(const l of Array.from(i))if(C.info("Rendering diagram: "+l.id),!l.getAttribute("data-processed")){l.setAttribute("data-processed","true");const u="mermaid-"+a.next();s=l.innerHTML;var s=g_.entityDecode(s).trim().replace(/<br\s*\/?>/gi,"<br/>"),c=g_.detectInit(s);c&&C.debug("Detected early reinit: ",c);try{await x$.renderAsync(u,s,(t,e)=>{l.innerHTML=t,typeof r<"u"&&r(u),e&&e(l)},l)}catch(t){C$(t,o,N$.parseError)}}if(0<o.length)throw o[0]}function T$(){N$.startOnLoad&&x$.getConfig()["startOnLoad"]&&N$.init()}const C$=(t,e,r)=>{C.warn(t),p_(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},S$=(typeof document<"u"&&window.addEventListener("load",T$,!1),[]);let A$=!1;const M$=async()=>{if(!A$){for(A$=!0;0<S$.length;){var t=S$.shift();if(t)try{await t()}catch(t){C.error("Error executing queue",t)}}A$=!1}},N$={startOnLoad:!0,diagrams:{},mermaidAPI:x$,parse:t=>x$.parse(t,N$.parseError),parseAsync:t=>new Promise((n,i)=>{S$.push(()=>new Promise((e,r)=>{x$.parseAsync(t,N$.parseError).then(t=>{e(t),n(t)},t=>{C.error("Error parsing",t),r(t),i(t)})})),M$()}),render:x$.render,renderAsync:(t,a,o,s)=>new Promise((n,i)=>{S$.push(()=>new Promise((e,r)=>{x$.renderAsync(t,a,o,s).then(t=>{e(t),n(t)},t=>{C.error("Error parsing",t),r(t),i(t)})})),M$()}),init:async function(t,e,r){try{k$?await E$(t,e,r):w$(t,e,r)}catch(t){C.warn("Syntax Error rendering"),p_(t)&&C.warn(t.str),N$.parseError&&N$.parseError(t)}},initThrowsErrors:w$,initThrowsErrorsAsync:E$,registerExternalDiagrams:async(t,{lazyLoad:e=!0}={})=>{if(e)for(var{id:r,detector:n,loader:i}of e=t)Nb(r,n,i);else{if(e=t,C.debug(`Loading ${e.length} external diagrams`),0<(e=(await Promise.allSettled(e.map(async({id:t,detector:e,loader:r})=>{r=(await r()).diagram;j6(t,r,e)}))).filter(t=>"rejected"===t.status)).length){C.error(`Failed to load ${e.length} external diagrams`);for(const a of e)C.error(a);throw new Error(`Failed to load ${e.length} external diagrams`)}await 0}k$=!0},initialize:function(t){x$.initialize(t)},parseError:void 0,contentLoaded:T$,setParseErrorHandler:function(t){N$.parseError=t}};return N$});